/*!
 * Winbows11 - ae07e500caf69310
 * Copyright (c) Microhard 2025
 * Github : Siyu1017/winbows11
 */
(()=>{var __webpack_modules__={"./node_modules/@xterm/xterm/lib/xterm.js":
/*!************************************************!*\
  !*** ./node_modules/@xterm/xterm/lib/xterm.js ***!
  \************************************************/module=>{eval('{!function(e,t){if(true)module.exports=t();else // removed by dead control flow\n{ var s, i; }}(globalThis,(()=>(()=>{"use strict";var e={4567:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibilityManager=void 0;const n=i(9042),o=i(9924),a=i(844),h=i(4725),c=i(2585),l=i(3656);let d=t.AccessibilityManager=class extends a.Disposable{constructor(e,t,i,s){super(),this._terminal=e,this._coreBrowserService=i,this._renderService=s,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let e=0;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);if(this._topBoundaryFocusListener=e=>this._handleBoundaryFocus(e,0),this._bottomBoundaryFocusListener=e=>this._handleBoundaryFocus(e,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new o.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((e=>this._handleResize(e.rows)))),this.register(this._terminal.onRender((e=>this._refreshRows(e.start,e.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((e=>this._handleChar(e)))),this.register(this._terminal.onLineFeed((()=>this._handleChar("\\n")))),this.register(this._terminal.onA11yTab((e=>this._handleTab(e)))),this.register(this._terminal.onKey((e=>this._handleKey(e.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,l.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,a.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(e){for(let t=0;t<e;t++)this._handleChar(" ")}_handleChar(e){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==e&&(this._charsToAnnounce+=e):this._charsToAnnounce+=e,"\\n"===e&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=n.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(e){this._clearLiveRegion(),/\\p{Control}/u.test(e)||this._charsToConsume.push(e)}_refreshRows(e,t){this._liveRegionDebouncer.refresh(e,t,this._terminal.rows)}_renderRows(e,t){const i=this._terminal.buffer,s=i.lines.length.toString();for(let r=e;r<=t;r++){const e=i.lines.get(i.ydisp+r),t=[],n=e?.translateToString(!0,void 0,void 0,t)||"",o=(i.ydisp+r+1).toString(),a=this._rowElements[r];a&&(0===n.length?(a.innerText="Â ",this._rowColumns.set(a,[0,1])):(a.textContent=n,this._rowColumns.set(a,t)),a.setAttribute("aria-posinset",o),a.setAttribute("aria-setsize",s))}this._announceCharacters()}_announceCharacters(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(e,t){const i=e.target,s=this._rowElements[0===t?1:this._rowElements.length-2];if(i.getAttribute("aria-posinset")===(0===t?"1":`${this._terminal.buffer.lines.length}`))return;if(e.relatedTarget!==s)return;let r,n;if(0===t?(r=i,n=this._rowElements.pop(),this._rowContainer.removeChild(n)):(r=this._rowElements.shift(),n=i,this._rowContainer.removeChild(r)),r.removeEventListener("focus",this._topBoundaryFocusListener),n.removeEventListener("focus",this._bottomBoundaryFocusListener),0===t){const e=this._createAccessibilityTreeNode();this._rowElements.unshift(e),this._rowContainer.insertAdjacentElement("afterbegin",e)}else{const e=this._createAccessibilityTreeNode();this._rowElements.push(e),this._rowContainer.appendChild(e)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===t?-1:1),this._rowElements[0===t?1:this._rowElements.length-2].focus(),e.preventDefault(),e.stopImmediatePropagation()}_handleSelectionChange(){if(0===this._rowElements.length)return;const e=document.getSelection();if(!e)return;if(e.isCollapsed)return void(this._rowContainer.contains(e.anchorNode)&&this._terminal.clearSelection());if(!e.anchorNode||!e.focusNode)return void console.error("anchorNode and/or focusNode are null");let t={node:e.anchorNode,offset:e.anchorOffset},i={node:e.focusNode,offset:e.focusOffset};if((t.node.compareDocumentPosition(i.node)&Node.DOCUMENT_POSITION_PRECEDING||t.node===i.node&&t.offset>i.offset)&&([t,i]=[i,t]),t.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(t={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(t.node))return;const s=this._rowElements.slice(-1)[0];if(i.node.compareDocumentPosition(s)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(i={node:s,offset:s.textContent?.length??0}),!this._rowContainer.contains(i.node))return;const r=({node:e,offset:t})=>{const i=e instanceof Text?e.parentNode:e;let s=parseInt(i?.getAttribute("aria-posinset"),10)-1;if(isNaN(s))return console.warn("row is invalid. Race condition?"),null;const r=this._rowColumns.get(i);if(!r)return console.warn("columns is null. Race condition?"),null;let n=t<r.length?r[t]:r.slice(-1)[0]+1;return n>=this._terminal.cols&&(++s,n=0),{row:s,column:n}},n=r(t),o=r(i);if(n&&o){if(n.row>o.row||n.row===o.row&&n.column>=o.column)throw new Error("invalid range");this._terminal.select(n.column,n.row,(o.row-n.row)*this._terminal.cols-n.column+o.column)}}_handleResize(e){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let e=this._rowContainer.children.length;e<this._terminal.rows;e++)this._rowElements[e]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[e]);for(;this._rowElements.length>e;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const e=this._coreBrowserService.mainDocument.createElement("div");return e.setAttribute("role","listitem"),e.tabIndex=-1,this._refreshRowDimensions(e),e}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let e=0;e<this._terminal.rows;e++)this._refreshRowDimensions(this._rowElements[e])}}_refreshRowDimensions(e){e.style.height=`${this._renderService.dimensions.css.cell.height}px`}};t.AccessibilityManager=d=s([r(1,c.IInstantiationService),r(2,h.ICoreBrowserService),r(3,h.IRenderService)],d)},3614:(e,t)=>{function i(e){return e.replace(/\\r?\\n/g,"\\r")}function s(e,t){return t?"[200~"+e+"[201~":e}function r(e,t,r,n){e=s(e=i(e),r.decPrivateModes.bracketedPasteMode&&!0!==n.rawOptions.ignoreBracketedPasteMode),r.triggerDataEvent(e,!0),t.value=""}function n(e,t,i){const s=i.getBoundingClientRect(),r=e.clientX-s.left-10,n=e.clientY-s.top-10;t.style.width="20px",t.style.height="20px",t.style.left=`${r}px`,t.style.top=`${n}px`,t.style.zIndex="1000",t.focus()}Object.defineProperty(t,"__esModule",{value:!0}),t.rightClickHandler=t.moveTextAreaUnderMouseCursor=t.paste=t.handlePasteEvent=t.copyHandler=t.bracketTextForPaste=t.prepareTextForTerminal=void 0,t.prepareTextForTerminal=i,t.bracketTextForPaste=s,t.copyHandler=function(e,t){e.clipboardData&&e.clipboardData.setData("text/plain",t.selectionText),e.preventDefault()},t.handlePasteEvent=function(e,t,i,s){e.stopPropagation(),e.clipboardData&&r(e.clipboardData.getData("text/plain"),t,i,s)},t.paste=r,t.moveTextAreaUnderMouseCursor=n,t.rightClickHandler=function(e,t,i,s,r){n(e,t,i),r&&s.rightClickSelect(e),t.value=s.selectionText,t.select()}},7239:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorContrastCache=void 0;const s=i(1505);t.ColorContrastCache=class{constructor(){this._color=new s.TwoKeyMap,this._css=new s.TwoKeyMap}setCss(e,t,i){this._css.set(e,t,i)}getCss(e,t){return this._css.get(e,t)}setColor(e,t,i){this._color.set(e,t,i)}getColor(e,t){return this._color.get(e,t)}clear(){this._color.clear(),this._css.clear()}}},3656:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addDisposableDomListener=void 0,t.addDisposableDomListener=function(e,t,i,s){e.addEventListener(t,i,s);let r=!1;return{dispose:()=>{r||(r=!0,e.removeEventListener(t,i,s))}}}},3551:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Linkifier=void 0;const n=i(3656),o=i(8460),a=i(844),h=i(2585),c=i(4725);let l=t.Linkifier=class extends a.Disposable{get currentLink(){return this._currentLink}constructor(e,t,i,s,r){super(),this._element=e,this._mouseService=t,this._renderService=i,this._bufferService=s,this._linkProviderService=r,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new o.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new o.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,a.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,a.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,n.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,n.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,n.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(e){this._lastMouseEvent=e;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const i=e.composedPath();for(let e=0;e<i.length;e++){const t=i[e];if(t.classList.contains("xterm"))break;if(t.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(e){if(this._activeLine!==e.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(e,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,e)||(this._clearCurrentLink(),this._askForLink(e,!0))}_askForLink(e,t){this._activeProviderReplies&&t||(this._activeProviderReplies?.forEach((e=>{e?.forEach((e=>{e.link.dispose&&e.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=e.y);let i=!1;for(const[s,r]of this._linkProviderService.linkProviders.entries())if(t){const t=this._activeProviderReplies?.get(s);t&&(i=this._checkLinkProviderResult(s,e,i))}else r.provideLinks(e.y,(t=>{if(this._isMouseOut)return;const r=t?.map((e=>({link:e})));this._activeProviderReplies?.set(s,r),i=this._checkLinkProviderResult(s,e,i),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(e.y,this._activeProviderReplies)}))}_removeIntersectingLinks(e,t){const i=new Set;for(let s=0;s<t.size;s++){const r=t.get(s);if(r)for(let t=0;t<r.length;t++){const s=r[t],n=s.link.range.start.y<e?0:s.link.range.start.x,o=s.link.range.end.y>e?this._bufferService.cols:s.link.range.end.x;for(let e=n;e<=o;e++){if(i.has(e)){r.splice(t--,1);break}i.add(e)}}}}_checkLinkProviderResult(e,t,i){if(!this._activeProviderReplies)return i;const s=this._activeProviderReplies.get(e);let r=!1;for(let t=0;t<e;t++)this._activeProviderReplies.has(t)&&!this._activeProviderReplies.get(t)||(r=!0);if(!r&&s){const e=s.find((e=>this._linkAtPosition(e.link,t)));e&&(i=!0,this._handleNewLink(e))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!i)for(let e=0;e<this._activeProviderReplies.size;e++){const s=this._activeProviderReplies.get(e)?.find((e=>this._linkAtPosition(e.link,t)));if(s){i=!0,this._handleNewLink(s);break}}return i}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(e){if(!this._currentLink)return;const t=this._positionFromMouseEvent(e,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(e,this._currentLink.link.text)}_clearCurrentLink(e,t){this._currentLink&&this._lastMouseEvent&&(!e||!t||this._currentLink.link.range.start.y>=e&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,a.disposeArray)(this._linkCacheDisposables))}_handleNewLink(e){if(!this._lastMouseEvent)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(e.link,t)&&(this._currentLink=e,this._currentLink.state={decorations:{underline:void 0===e.link.decorations||e.link.decorations.underline,pointerCursor:void 0===e.link.decorations||e.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,e.link,this._lastMouseEvent),e.link.decorations={},Object.defineProperties(e.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:e=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==e&&(this._currentLink.state.decorations.pointerCursor=e,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",e))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:t=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==t&&(this._currentLink.state.decorations.underline=t,this._currentLink.state.isHovered&&this._fireUnderlineEvent(e.link,t))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((e=>{if(!this._currentLink)return;const t=0===e.start?0:e.start+1+this._bufferService.buffer.ydisp,i=this._bufferService.buffer.ydisp+1+e.end;if(this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=i&&(this._clearCurrentLink(t,i),this._lastMouseEvent)){const e=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);e&&this._askForLink(e,!1)}}))))}_linkHover(e,t,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&e.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(i,t.text)}_fireUnderlineEvent(e,t){const i=e.range,s=this._bufferService.buffer.ydisp,r=this._createLinkUnderlineEvent(i.start.x-1,i.start.y-s-1,i.end.x,i.end.y-s-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(r)}_linkLeave(e,t,i){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&e.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(i,t.text)}_linkAtPosition(e,t){const i=e.range.start.y*this._bufferService.cols+e.range.start.x,s=e.range.end.y*this._bufferService.cols+e.range.end.x,r=t.y*this._bufferService.cols+t.x;return i<=r&&r<=s}_positionFromMouseEvent(e,t,i){const s=i.getCoords(e,t,this._bufferService.cols,this._bufferService.rows);if(s)return{x:s[0],y:s[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(e,t,i,s,r){return{x1:e,y1:t,x2:i,y2:s,cols:this._bufferService.cols,fg:r}}};t.Linkifier=l=s([r(1,c.IMouseService),r(2,c.IRenderService),r(3,h.IBufferService),r(4,c.ILinkProviderService)],l)},9042:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.tooMuchOutput=t.promptLabel=void 0,t.promptLabel="Terminal input",t.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkProvider=void 0;const n=i(511),o=i(2585);let a=t.OscLinkProvider=class{constructor(e,t,i){this._bufferService=e,this._optionsService=t,this._oscLinkService=i}provideLinks(e,t){const i=this._bufferService.buffer.lines.get(e-1);if(!i)return void t(void 0);const s=[],r=this._optionsService.rawOptions.linkHandler,o=new n.CellData,a=i.getTrimmedLength();let c=-1,l=-1,d=!1;for(let t=0;t<a;t++)if(-1!==l||i.hasContent(t)){if(i.loadCell(t,o),o.hasExtendedAttrs()&&o.extended.urlId){if(-1===l){l=t,c=o.extended.urlId;continue}d=o.extended.urlId!==c}else-1!==l&&(d=!0);if(d||-1!==l&&t===a-1){const i=this._oscLinkService.getLinkData(c)?.uri;if(i){const n={start:{x:l+1,y:e},end:{x:t+(d||t!==a-1?0:1),y:e}};let o=!1;if(!r?.allowNonHttpProtocols)try{const e=new URL(i);["http:","https:"].includes(e.protocol)||(o=!0)}catch(e){o=!0}o||s.push({text:i,range:n,activate:(e,t)=>r?r.activate(e,t,n):h(0,t),hover:(e,t)=>r?.hover?.(e,t,n),leave:(e,t)=>r?.leave?.(e,t,n)})}d=!1,o.hasExtendedAttrs()&&o.extended.urlId?(l=t,c=o.extended.urlId):(l=-1,c=-1)}}t(s)}};function h(e,t){if(confirm(`Do you want to navigate to ${t}?\\n\\nWARNING: This link could potentially be dangerous`)){const e=window.open();if(e){try{e.opener=null}catch{}e.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}t.OscLinkProvider=a=s([r(0,o.IBufferService),r(1,o.IOptionsService),r(2,o.IOscLinkService)],a)},6193:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDebouncer=void 0,t.RenderDebouncer=class{constructor(e,t){this._renderCallback=e,this._coreBrowserService=t,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(e){return this._refreshCallbacks.push(e),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return void this._runRefreshCallbacks();const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const e of this._refreshCallbacks)e(0);this._refreshCallbacks=[]}}},3236:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Terminal=void 0;const s=i(3614),r=i(3656),n=i(3551),o=i(9042),a=i(3730),h=i(1680),c=i(3107),l=i(5744),d=i(2950),_=i(1296),u=i(428),f=i(4269),v=i(5114),p=i(8934),g=i(3230),m=i(9312),S=i(4725),C=i(6731),b=i(8055),w=i(8969),y=i(8460),E=i(844),k=i(6114),L=i(8437),D=i(2584),R=i(7399),x=i(5941),A=i(9074),B=i(2585),T=i(5435),M=i(4567),O=i(779);class P extends w.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(e={}){super(e),this.browser=k,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new E.MutableDisposable),this._onCursorMove=this.register(new y.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new y.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new y.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new y.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new y.EventEmitter),this._onBlur=this.register(new y.EventEmitter),this._onA11yCharEmitter=this.register(new y.EventEmitter),this._onA11yTabEmitter=this.register(new y.EventEmitter),this._onWillOpen=this.register(new y.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(O.LinkProviderService),this._instantiationService.setService(S.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(a.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((e,t)=>this.refresh(e,t)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((e=>this._reportWindowsOptions(e)))),this.register(this._inputHandler.onColor((e=>this._handleColorEvent(e)))),this.register((0,y.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,y.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,y.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((e=>this._afterResize(e.cols,e.rows)))),this.register((0,E.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(e){if(this._themeService)for(const t of e){let e,i="";switch(t.index){case 256:e="foreground",i="10";break;case 257:e="background",i="11";break;case 258:e="cursor",i="12";break;default:e="ansi",i="4;"+t.index}switch(t.type){case 0:const s=b.color.toColorRGB("ansi"===e?this._themeService.colors.ansi[t.index]:this._themeService.colors[e]);this.coreService.triggerDataEvent(`${D.C0.ESC}]${i};${(0,x.toRgbString)(s)}${D.C1_ESCAPED.ST}`);break;case 1:if("ansi"===e)this._themeService.modifyColors((e=>e.ansi[t.index]=b.channels.toColor(...t.color)));else{const i=e;this._themeService.modifyColors((e=>e[i]=b.channels.toColor(...t.color)))}break;case 2:this._themeService.restoreColor(t.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(e){e?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(M.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(e){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(D.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const e=this.buffer.ybase+this.buffer.y,t=this.buffer.lines.get(e);if(!t)return;const i=Math.min(this.buffer.x,this.cols-1),s=this._renderService.dimensions.css.cell.height,r=t.getWidth(i),n=this._renderService.dimensions.css.cell.width*r,o=this.buffer.y*this._renderService.dimensions.css.cell.height,a=i*this._renderService.dimensions.css.cell.width;this.textarea.style.left=a+"px",this.textarea.style.top=o+"px",this.textarea.style.width=n+"px",this.textarea.style.height=s+"px",this.textarea.style.lineHeight=s+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,r.addDisposableDomListener)(this.element,"copy",(e=>{this.hasSelection()&&(0,s.copyHandler)(e,this._selectionService)})));const e=e=>(0,s.handlePasteEvent)(e,this.textarea,this.coreService,this.optionsService);this.register((0,r.addDisposableDomListener)(this.textarea,"paste",e)),this.register((0,r.addDisposableDomListener)(this.element,"paste",e)),k.isFirefox?this.register((0,r.addDisposableDomListener)(this.element,"mousedown",(e=>{2===e.button&&(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,r.addDisposableDomListener)(this.element,"contextmenu",(e=>{(0,s.rightClickHandler)(e,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),k.isLinux&&this.register((0,r.addDisposableDomListener)(this.element,"auxclick",(e=>{1===e.button&&(0,s.moveTextAreaUnderMouseCursor)(e,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,r.addDisposableDomListener)(this.textarea,"keyup",(e=>this._keyUp(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keydown",(e=>this._keyDown(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"keypress",(e=>this._keyPress(e)),!0)),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionupdate",(e=>this._compositionHelper.compositionupdate(e)))),this.register((0,r.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,r.addDisposableDomListener)(this.textarea,"input",(e=>this._inputEvent(e)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(e){if(!e)throw new Error("Terminal requires a parent element.");if(e.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=e.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),e.appendChild(this.element);const t=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,r.addDisposableDomListener)(this.screenElement,"mousemove",(e=>this.updateCursorStyle(e)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",o.promptLabel),k.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(v.CoreBrowserService,this.textarea,e.ownerDocument.defaultView??window,this._document??"undefined"!=typeof window?window.document:null)),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,r.addDisposableDomListener)(this.textarea,"focus",(e=>this._handleTextAreaFocus(e)))),this.register((0,r.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(u.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(C.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(f.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(g.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((e=>this._onRender.fire(e)))),this.onResize((e=>this._renderService.resize(e.cols,e.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(p.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(n.Linkifier,this.screenElement)),this.element.appendChild(t);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(h.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((e=>this.scrollLines(e.amount,e.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((e=>this._renderService.handleSelectionChanged(e.start,e.end,e.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((e=>{this.textarea.value=e,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((e=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(c.BufferDecorationRenderer,this.screenElement)),this.register((0,r.addDisposableDomListener)(this.element,"mousedown",(e=>this._selectionService.handleMouseDown(e)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(M.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(e=>this._handleScreenReaderModeOptionChange(e)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(e=>{!this._overviewRulerRenderer&&e&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const e=this,t=this.element;function i(t){const i=e._mouseService.getMouseReportCoords(t,e.screenElement);if(!i)return!1;let s,r;switch(t.overrideType||t.type){case"mousemove":r=32,void 0===t.buttons?(s=3,void 0!==t.button&&(s=t.button<3?t.button:3)):s=1&t.buttons?0:4&t.buttons?1:2&t.buttons?2:3;break;case"mouseup":r=0,s=t.button<3?t.button:3;break;case"mousedown":r=1,s=t.button<3?t.button:3;break;case"wheel":if(e._customWheelEventHandler&&!1===e._customWheelEventHandler(t))return!1;if(0===e.viewport.getLinesScrolled(t))return!1;r=t.deltaY<0?0:1,s=4;break;default:return!1}return!(void 0===r||void 0===s||s>4)&&e.coreMouseService.triggerMouseEvent({col:i.col,row:i.row,x:i.x,y:i.y,button:s,action:r,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey})}const s={mouseup:null,wheel:null,mousedrag:null,mousemove:null},n={mouseup:e=>(i(e),e.buttons||(this._document.removeEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.removeEventListener("mousemove",s.mousedrag)),this.cancel(e)),wheel:e=>(i(e),this.cancel(e,!0)),mousedrag:e=>{e.buttons&&i(e)},mousemove:e=>{e.buttons||i(e)}};this.register(this.coreMouseService.onProtocolChange((e=>{e?("debug"===this.optionsService.rawOptions.logLevel&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(e)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&e?s.mousemove||(t.addEventListener("mousemove",n.mousemove),s.mousemove=n.mousemove):(t.removeEventListener("mousemove",s.mousemove),s.mousemove=null),16&e?s.wheel||(t.addEventListener("wheel",n.wheel,{passive:!1}),s.wheel=n.wheel):(t.removeEventListener("wheel",s.wheel),s.wheel=null),2&e?s.mouseup||(s.mouseup=n.mouseup):(this._document.removeEventListener("mouseup",s.mouseup),s.mouseup=null),4&e?s.mousedrag||(s.mousedrag=n.mousedrag):(this._document.removeEventListener("mousemove",s.mousedrag),s.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,r.addDisposableDomListener)(t,"mousedown",(e=>{if(e.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(e))return i(e),s.mouseup&&this._document.addEventListener("mouseup",s.mouseup),s.mousedrag&&this._document.addEventListener("mousemove",s.mousedrag),this.cancel(e)}))),this.register((0,r.addDisposableDomListener)(t,"wheel",(e=>{if(!s.wheel){if(this._customWheelEventHandler&&!1===this._customWheelEventHandler(e))return!1;if(!this.buffer.hasScrollback){const t=this.viewport.getLinesScrolled(e);if(0===t)return;const i=D.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(e.deltaY<0?"A":"B");let s="";for(let e=0;e<Math.abs(t);e++)s+=i;return this.coreService.triggerDataEvent(s,!0),this.cancel(e,!0)}return this.viewport.handleWheel(e)?this.cancel(e):void 0}}),{passive:!1})),this.register((0,r.addDisposableDomListener)(t,"touchstart",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(e),this.cancel(e)}),{passive:!0})),this.register((0,r.addDisposableDomListener)(t,"touchmove",(e=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(e)?void 0:this.cancel(e)}),{passive:!1}))}refresh(e,t){this._renderService?.refreshRows(e,t)}updateCursorStyle(e){this._selectionService?.shouldColumnSelect(e)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(e,t,i=0){1===i?(super.scrollLines(e,t,i),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(e)}paste(e){(0,s.paste)(e,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(e){this._customKeyEventHandler=e}attachCustomWheelEventHandler(e){this._customWheelEventHandler=e}registerLinkProvider(e){return this._linkProviderService.registerLinkProvider(e)}registerCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const t=this._characterJoinerService.register(e);return this.refresh(0,this.rows-1),t}deregisterCharacterJoiner(e){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(e)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(e){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+e)}registerDecoration(e){return this._decorationService.registerDecoration(e)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(e,t,i){this._selectionService.setSelection(e,t,i)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(e,t){this._selectionService?.selectLines(e,t)}_keyDown(e){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;const t=this.browser.isMac&&this.options.macOptionIsMeta&&e.altKey;if(!t&&!this._compositionHelper.keydown(e))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;t||"Dead"!==e.key&&"AltGraph"!==e.key||(this._unprocessedDeadKey=!0);const i=(0,R.evaluateKeyboardEvent)(e,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(e),3===i.type||2===i.type){const t=this.rows-1;return this.scrollLines(2===i.type?-t:t),this.cancel(e,!0)}return 1===i.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,e)||(i.cancel&&this.cancel(e,!0),!i.key||!!(e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&1===e.key.length&&e.key.charCodeAt(0)>=65&&e.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(i.key!==D.C0.ETX&&i.key!==D.C0.CR||(this.textarea.value=""),this._onKey.fire({key:i.key,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(i.key,!0),!this.optionsService.rawOptions.screenReaderMode||e.altKey||e.ctrlKey?this.cancel(e,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(e,t){const i=e.isMac&&!this.options.macOptionIsMeta&&t.altKey&&!t.ctrlKey&&!t.metaKey||e.isWindows&&t.altKey&&t.ctrlKey&&!t.metaKey||e.isWindows&&t.getModifierState("AltGraph");return"keypress"===t.type?i:i&&(!t.keyCode||t.keyCode>47)}_keyUp(e){this._keyDownSeen=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(e)||(function(e){return 16===e.keyCode||17===e.keyCode||18===e.keyCode}(e)||this.focus(),this.updateCursorStyle(e),this._keyPressHandled=!1)}_keyPress(e){let t;if(this._keyPressHandled=!1,this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(e))return!1;if(this.cancel(e),e.charCode)t=e.charCode;else if(null===e.which||void 0===e.which)t=e.keyCode;else{if(0===e.which||0===e.charCode)return!1;t=e.which}return!(!t||(e.altKey||e.ctrlKey||e.metaKey)&&!this._isThirdLevelShift(this.browser,e)||(t=String.fromCharCode(t),this._onKey.fire({key:t,domEvent:e}),this._showCursor(),this.coreService.triggerDataEvent(t,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(e){if(e.data&&"insertText"===e.inputType&&(!e.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const t=e.data;return this.coreService.triggerDataEvent(t,!0),this.cancel(e),!0}return!1}resize(e,t){e!==this.cols||t!==this.rows?super.resize(e,t):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(e,t){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let e=1;e<this.rows;e++)this.buffer.lines.push(this.buffer.getBlankLine(L.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const e=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=e,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(D.C0.ESC+"[I"):this.coreService.triggerDataEvent(D.C0.ESC+"[O")}_reportWindowsOptions(e){if(this._renderService)switch(e){case T.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const e=this._renderService.dimensions.css.canvas.width.toFixed(0),t=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${D.C0.ESC}[4;${t};${e}t`);break;case T.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const i=this._renderService.dimensions.css.cell.width.toFixed(0),s=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${D.C0.ESC}[6;${s};${i}t`)}}cancel(e,t){if(this.options.cancelEvents||t)return e.preventDefault(),e.stopPropagation(),!1}}t.Terminal=P},9924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimeBasedDebouncer=void 0,t.TimeBasedDebouncer=class{constructor(e,t=1e3){this._renderCallback=e,this._debounceThresholdMS=t,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(e,t,i){this._rowCount=i,e=void 0!==e?e:0,t=void 0!==t?t:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,e):e,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,t):t;const s=Date.now();if(s-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=s,this._innerRefresh();else if(!this._additionalRefreshRequested){const e=s-this._lastRefreshMs,t=this._debounceThresholdMS-e;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),t)}}_innerRefresh(){if(void 0===this._rowStart||void 0===this._rowEnd||void 0===this._rowCount)return;const e=Math.max(this._rowStart,0),t=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(e,t)}}},1680:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const n=i(3656),o=i(4725),a=i(8460),h=i(844),c=i(2585);let l=t.Viewport=class extends h.Disposable{constructor(e,t,i,s,r,o,h,c){super(),this._viewportElement=e,this._scrollArea=t,this._bufferService=i,this._optionsService=s,this._charSizeService=r,this._renderService=o,this._coreBrowserService=h,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new a.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,n.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((e=>this._renderDimensions=e))),this._handleThemeChange(c.colors),this.register(c.onChangeColors((e=>this._handleThemeChange(e)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(e){this._viewportElement.style.backgroundColor=e.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(e){if(e)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const e=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==e&&(this._lastRecordedBufferHeight=e,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const e=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==e&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=e),this._refreshAnimationFrame=null}syncScrollArea(e=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(e);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(e)}_handleScroll(e){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||-1===this._smoothScrollState.origin||-1===this._smoothScrollState.target)return;const e=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(e*(this._smoothScrollState.target-this._smoothScrollState.origin)),e<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(e,t){const i=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&0!==this._viewportElement.scrollTop||t>0&&i<this._lastRecordedBufferHeight)||(e.cancelable&&e.preventDefault(),!1)}handleWheel(e){const t=this._getPixelsScrolled(e);return 0!==t&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,-1===this._smoothScrollState.target?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}scrollLines(e){if(0!==e)if(this._optionsService.rawOptions.smoothScrollDuration){const t=e*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:e,suppressScrollEvent:!1})}_getPixelsScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(e,t){let i,s="";const r=[],n=t??this._bufferService.buffer.lines.length,o=this._bufferService.buffer.lines;for(let t=e;t<n;t++){const e=o.get(t);if(!e)continue;const n=o.get(t+1)?.isWrapped;if(s+=e.translateToString(!n),!n||t===o.length-1){const e=document.createElement("div");e.textContent=s,r.push(e),s.length>0&&(i=e),s=""}}return{bufferElements:r,cursorElement:i}}getLinesScrolled(e){if(0===e.deltaY||e.shiftKey)return 0;let t=this._applyScrollModifier(e.deltaY,e);return e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(e,t){const i=this._optionsService.rawOptions.fastScrollModifier;return"alt"===i&&t.altKey||"ctrl"===i&&t.ctrlKey||"shift"===i&&t.shiftKey?e*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:e*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(e){this._lastTouchY=e.touches[0].pageY}handleTouchMove(e){const t=this._lastTouchY-e.touches[0].pageY;return this._lastTouchY=e.touches[0].pageY,0!==t&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(e,t))}};t.Viewport=l=s([r(2,c.IBufferService),r(3,c.IOptionsService),r(4,o.ICharSizeService),r(5,o.IRenderService),r(6,o.ICoreBrowserService),r(7,o.IThemeService)],l)},3107:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferDecorationRenderer=void 0;const n=i(4725),o=i(844),a=i(2585);let h=t.BufferDecorationRenderer=class extends o.Disposable{constructor(e,t,i,s,r){super(),this._screenElement=e,this._bufferService=t,this._coreBrowserService=i,this._decorationService=s,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((e=>this._removeDecoration(e)))),this.register((0,o.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){void 0===this._animationFrame&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const e of this._decorationService.decorations)this._renderDecoration(e);this._dimensionsChanged=!1}_renderDecoration(e){this._refreshStyle(e),this._dimensionsChanged&&this._refreshXPosition(e)}_createElement(e){const t=this._coreBrowserService.mainDocument.createElement("div");t.classList.add("xterm-decoration"),t.classList.toggle("xterm-decoration-top-layer","top"===e?.options?.layer),t.style.width=`${Math.round((e.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,t.style.height=(e.options.height||1)*this._renderService.dimensions.css.cell.height+"px",t.style.top=(e.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",t.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const i=e.options.x??0;return i&&i>this._bufferService.cols&&(t.style.display="none"),this._refreshXPosition(e,t),t}_refreshStyle(e){const t=e.marker.line-this._bufferService.buffers.active.ydisp;if(t<0||t>=this._bufferService.rows)e.element&&(e.element.style.display="none",e.onRenderEmitter.fire(e.element));else{let i=this._decorationElements.get(e);i||(i=this._createElement(e),e.element=i,this._decorationElements.set(e,i),this._container.appendChild(i),e.onDispose((()=>{this._decorationElements.delete(e),i.remove()}))),i.style.top=t*this._renderService.dimensions.css.cell.height+"px",i.style.display=this._altBufferIsActive?"none":"block",e.onRenderEmitter.fire(i)}}_refreshXPosition(e,t=e.element){if(!t)return;const i=e.options.x??0;"right"===(e.options.anchor||"left")?t.style.right=i?i*this._renderService.dimensions.css.cell.width+"px":"":t.style.left=i?i*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(e){this._decorationElements.get(e)?.remove(),this._decorationElements.delete(e),e.dispose()}};t.BufferDecorationRenderer=h=s([r(1,a.IBufferService),r(2,n.ICoreBrowserService),r(3,a.IDecorationService),r(4,n.IRenderService)],h)},5871:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorZoneStore=void 0,t.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(e){if(e.options.overviewRulerOptions){for(const t of this._zones)if(t.color===e.options.overviewRulerOptions.color&&t.position===e.options.overviewRulerOptions.position){if(this._lineIntersectsZone(t,e.marker.line))return;if(this._lineAdjacentToZone(t,e.marker.line,e.options.overviewRulerOptions.position))return void this._addLineToZone(t,e.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=e.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=e.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=e.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=e.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:e.options.overviewRulerOptions.color,position:e.options.overviewRulerOptions.position,startBufferLine:e.marker.line,endBufferLine:e.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(e){this._linePadding=e}_lineIntersectsZone(e,t){return t>=e.startBufferLine&&t<=e.endBufferLine}_lineAdjacentToZone(e,t,i){return t>=e.startBufferLine-this._linePadding[i||"full"]&&t<=e.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(e,t){e.startBufferLine=Math.min(e.startBufferLine,t),e.endBufferLine=Math.max(e.endBufferLine,t)}}},5744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OverviewRulerRenderer=void 0;const n=i(5871),o=i(4725),a=i(844),h=i(2585),c={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0};let _=t.OverviewRulerRenderer=class extends a.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(e,t,i,s,r,o,h){super(),this._viewportElement=e,this._screenElement=t,this._bufferService=i,this._decorationService=s,this._renderService=r,this._optionsService=o,this._coreBrowserService=h,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const c=this._canvas.getContext("2d");if(!c)throw new Error("Ctx cannot be null");this._ctx=c,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,a.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const e=Math.floor(this._canvas.width/3),t=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=e,l.center=t,l.right=e,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=l.left,d.right=l.left+l.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowserService.dpr);const e=this._canvas.height/this._bufferService.buffer.lines.length,t=Math.round(Math.max(Math.min(e,12),6)*this._coreBrowserService.dpr);c.left=t,c.center=t,c.right=t}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const e of this._decorationService.decorations)this._colorZoneStore.addDecoration(e);this._ctx.lineWidth=1;const e=this._colorZoneStore.zones;for(const t of e)"full"!==t.position&&this._renderColorZone(t);for(const t of e)"full"===t.position&&this._renderColorZone(t);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(e){this._ctx.fillStyle=e.color,this._ctx.fillRect(d[e.position||"full"],Math.round((this._canvas.height-1)*(e.startBufferLine/this._bufferService.buffers.active.lines.length)-c[e.position||"full"]/2),l[e.position||"full"],Math.round((this._canvas.height-1)*((e.endBufferLine-e.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[e.position||"full"]))}_queueRefresh(e,t){this._shouldUpdateDimensions=e||this._shouldUpdateDimensions,this._shouldUpdateAnchor=t||this._shouldUpdateAnchor,void 0===this._animationFrame&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};t.OverviewRulerRenderer=_=s([r(2,h.IBufferService),r(3,h.IDecorationService),r(4,o.IRenderService),r(5,h.IOptionsService),r(6,o.ICoreBrowserService)],_)},2950:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CompositionHelper=void 0;const n=i(4725),o=i(2585),a=i(2584);let h=t.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(e,t,i,s,r,n){this._textarea=e,this._compositionView=t,this._bufferService=i,this._optionsService=s,this._coreService=r,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(e){this._compositionView.textContent=e.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(e){if(this._isComposing||this._isSendingComposition){if(229===e.keyCode)return!1;if(16===e.keyCode||17===e.keyCode||18===e.keyCode)return!1;this._finalizeComposition(!1)}return 229!==e.keyCode||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(e){if(this._compositionView.classList.remove("active"),this._isComposing=!1,e){const e={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let t;this._isSendingComposition=!1,e.start+=this._dataAlreadySent.length,t=this._isComposing?this._textarea.value.substring(e.start,e.end):this._textarea.value.substring(e.start),t.length>0&&this._coreService.triggerDataEvent(t,!0)}}),0)}else{this._isSendingComposition=!1;const e=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(e,!0)}}_handleAnyTextareaChanges(){const e=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const t=this._textarea.value,i=t.replace(e,"");this._dataAlreadySent=i,t.length>e.length?this._coreService.triggerDataEvent(i,!0):t.length<e.length?this._coreService.triggerDataEvent(`${a.C0.DEL}`,!0):t.length===e.length&&t!==e&&this._coreService.triggerDataEvent(t,!0)}}),0)}updateCompositionElements(e){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const e=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),t=this._renderService.dimensions.css.cell.height,i=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,s=e*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=s+"px",this._compositionView.style.top=i+"px",this._compositionView.style.height=t+"px",this._compositionView.style.lineHeight=t+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const r=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+"px",this._textarea.style.top=i+"px",this._textarea.style.width=Math.max(r.width,1)+"px",this._textarea.style.height=Math.max(r.height,1)+"px",this._textarea.style.lineHeight=r.height+"px"}e||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};t.CompositionHelper=h=s([r(2,o.IBufferService),r(3,o.IOptionsService),r(4,o.ICoreService),r(5,n.IRenderService)],h)},9806:(e,t)=>{function i(e,t,i){const s=i.getBoundingClientRect(),r=e.getComputedStyle(i),n=parseInt(r.getPropertyValue("padding-left")),o=parseInt(r.getPropertyValue("padding-top"));return[t.clientX-s.left-n,t.clientY-s.top-o]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCoords=t.getCoordsRelativeToElement=void 0,t.getCoordsRelativeToElement=i,t.getCoords=function(e,t,s,r,n,o,a,h,c){if(!o)return;const l=i(e,t,s);return l?(l[0]=Math.ceil((l[0]+(c?a/2:0))/a),l[1]=Math.ceil(l[1]/h),l[0]=Math.min(Math.max(l[0],1),r+(c?1:0)),l[1]=Math.min(Math.max(l[1],1),n),l):void 0}},9504:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveToCellSequence=void 0;const s=i(2584);function r(e,t,i,s){const r=e-n(e,i),a=t-n(t,i),l=Math.abs(r-a)-function(e,t,i){let s=0;const r=e-n(e,i),a=t-n(t,i);for(let n=0;n<Math.abs(r-a);n++){const a="A"===o(e,t)?-1:1,h=i.buffer.lines.get(r+a*n);h?.isWrapped&&s++}return s}(e,t,i);return c(l,h(o(e,t),s))}function n(e,t){let i=0,s=t.buffer.lines.get(e),r=s?.isWrapped;for(;r&&e>=0&&e<t.rows;)i++,s=t.buffer.lines.get(--e),r=s?.isWrapped;return i}function o(e,t){return e>t?"A":"B"}function a(e,t,i,s,r,n){let o=e,a=t,h="";for(;o!==i||a!==s;)o+=r?1:-1,r&&o>n.cols-1?(h+=n.buffer.translateBufferLineToString(a,!1,e,o),o=0,e=0,a++):!r&&o<0&&(h+=n.buffer.translateBufferLineToString(a,!1,0,e+1),o=n.cols-1,e=o,a--);return h+n.buffer.translateBufferLineToString(a,!1,e,o)}function h(e,t){const i=t?"O":"[";return s.C0.ESC+i+e}function c(e,t){e=Math.floor(e);let i="";for(let s=0;s<e;s++)i+=t;return i}t.moveToCellSequence=function(e,t,i,s){const o=i.buffer.x,l=i.buffer.y;if(!i.buffer.hasScrollback)return function(e,t,i,s,o,l){return 0===r(t,s,o,l).length?"":c(a(e,t,e,t-n(t,o),!1,o).length,h("D",l))}(o,l,0,t,i,s)+r(l,t,i,s)+function(e,t,i,s,o,l){let d;d=r(t,s,o,l).length>0?s-n(s,o):t;const _=s,u=function(e,t,i,s,o,a){let h;return h=r(i,s,o,a).length>0?s-n(s,o):t,e<i&&h<=s||e>=i&&h<s?"C":"D"}(e,t,i,s,o,l);return c(a(e,d,i,_,"C"===u,o).length,h(u,l))}(o,l,e,t,i,s);let d;if(l===t)return d=o>e?"D":"C",c(Math.abs(o-e),h(d,s));d=l>t?"D":"C";const _=Math.abs(l-t);return c(function(e,t){return t.cols-e}(l>t?e:o,i)+(_-1)*i.cols+1+((l>t?o:e)-1),h(d,s))}},1296:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRenderer=void 0;const n=i(3787),o=i(2550),a=i(2223),h=i(6171),c=i(6052),l=i(4725),d=i(8055),_=i(8460),u=i(844),f=i(2585),v="xterm-dom-renderer-owner-",p="xterm-rows",g="xterm-fg-",m="xterm-bg-",S="xterm-focus",C="xterm-selection";let b=1,w=t.DomRenderer=class extends u.Disposable{constructor(e,t,i,s,r,a,l,d,f,g,m,S,w){super(),this._terminal=e,this._document=t,this._element=i,this._screenElement=s,this._viewportElement=r,this._helperContainer=a,this._linkifier2=l,this._charSizeService=f,this._optionsService=g,this._bufferService=m,this._coreBrowserService=S,this._themeService=w,this._terminalClass=b++,this._rowElements=[],this._selectionRenderModel=(0,c.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new _.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(p),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,h.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((e=>this._injectCss(e)))),this._injectCss(this._themeService.colors),this._rowFactory=d.createInstance(n.DomRendererRowFactory,document),this._element.classList.add(v+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((e=>this._handleLinkHover(e)))),this.register(this._linkifier2.onHideLinkUnderline((e=>this._handleLinkLeave(e)))),this.register((0,u.toDisposable)((()=>{this._element.classList.remove(v+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new o.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const e=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*e,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*e),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/e),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/e),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const e of this._rowElements)e.style.width=`${this.dimensions.css.canvas.width}px`,e.style.height=`${this.dimensions.css.cell.height}px`,e.style.lineHeight=`${this.dimensions.css.cell.height}px`,e.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const t=`${this._terminalSelector} .${p} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=t,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(e){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let t=`${this._terminalSelector} .${p} { color: ${e.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;t+=`${this._terminalSelector} .${p} .xterm-dim { color: ${d.color.multiplyOpacity(e.foreground,.5).css};}`,t+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const i=`blink_underline_${this._terminalClass}`,s=`blink_bar_${this._terminalClass}`,r=`blink_block_${this._terminalClass}`;t+=`@keyframes ${i} { 50% {  border-bottom-style: hidden; }}`,t+=`@keyframes ${s} { 50% {  box-shadow: none; }}`,t+=`@keyframes ${r} { 0% {  background-color: ${e.cursor.css};  color: ${e.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${e.cursor.css}; }}`,t+=`${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${i} 1s step-end infinite;}${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${s} 1s step-end infinite;}${this._terminalSelector} .${p}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${r} 1s step-end infinite;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block { background-color: ${e.cursor.css}; color: ${e.cursorAccent.css};}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${e.cursor.css} !important; color: ${e.cursorAccent.css} !important;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${e.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${e.cursor.css} inset;}${this._terminalSelector} .${p} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${e.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,t+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${e.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${e.selectionInactiveBackgroundOpaque.css};}`;for(const[i,s]of e.ansi.entries())t+=`${this._terminalSelector} .${g}${i} { color: ${s.css}; }${this._terminalSelector} .${g}${i}.xterm-dim { color: ${d.color.multiplyOpacity(s,.5).css}; }${this._terminalSelector} .${m}${i} { background-color: ${s.css}; }`;t+=`${this._terminalSelector} .${g}${a.INVERTED_DEFAULT_COLOR} { color: ${d.color.opaque(e.background).css}; }${this._terminalSelector} .${g}${a.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${d.color.multiplyOpacity(d.color.opaque(e.background),.5).css}; }${this._terminalSelector} .${m}${a.INVERTED_DEFAULT_COLOR} { background-color: ${e.foreground.css}; }`,this._themeStyleElement.textContent=t}_setDefaultSpacing(){const e=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${e}px`,this._rowFactory.defaultSpacing=e}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(e,t){for(let e=this._rowElements.length;e<=t;e++){const e=this._document.createElement("div");this._rowContainer.appendChild(e),this._rowElements.push(e)}for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(e,t){this._refreshRowElements(e,t),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(S),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(S),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(e,t,i){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(e,t,i),this.renderRows(0,this._bufferService.rows-1),!e||!t)return;this._selectionRenderModel.update(this._terminal,e,t,i);const s=this._selectionRenderModel.viewportStartRow,r=this._selectionRenderModel.viewportEndRow,n=this._selectionRenderModel.viewportCappedStartRow,o=this._selectionRenderModel.viewportCappedEndRow;if(n>=this._bufferService.rows||o<0)return;const a=this._document.createDocumentFragment();if(i){const i=e[0]>t[0];a.appendChild(this._createSelectionElement(n,i?t[0]:e[0],i?e[0]:t[0],o-n+1))}else{const i=s===n?e[0]:0,h=n===r?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(n,i,h));const c=o-n-1;if(a.appendChild(this._createSelectionElement(n+1,0,this._bufferService.cols,c)),n!==o){const e=r===o?t[0]:this._bufferService.cols;a.appendChild(this._createSelectionElement(o,0,e))}}this._selectionContainer.appendChild(a)}_createSelectionElement(e,t,i,s=1){const r=this._document.createElement("div"),n=t*this.dimensions.css.cell.width;let o=this.dimensions.css.cell.width*(i-t);return n+o>this.dimensions.css.canvas.width&&(o=this.dimensions.css.canvas.width-n),r.style.height=s*this.dimensions.css.cell.height+"px",r.style.top=e*this.dimensions.css.cell.height+"px",r.style.left=`${n}px`,r.style.width=`${o}px`,r}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const e of this._rowElements)e.replaceChildren()}renderRows(e,t){const i=this._bufferService.buffer,s=i.ybase+i.y,r=Math.min(i.x,this._bufferService.cols-1),n=this._optionsService.rawOptions.cursorBlink,o=this._optionsService.rawOptions.cursorStyle,a=this._optionsService.rawOptions.cursorInactiveStyle;for(let h=e;h<=t;h++){const e=h+i.ydisp,t=this._rowElements[h],c=i.lines.get(e);if(!t||!c)break;t.replaceChildren(...this._rowFactory.createRow(c,e,e===s,o,a,r,n,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${v}${this._terminalClass}`}_handleLinkHover(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!0)}_handleLinkLeave(e){this._setCellUnderline(e.x1,e.x2,e.y1,e.y2,e.cols,!1)}_setCellUnderline(e,t,i,s,r,n){i<0&&(e=0),s<0&&(t=0);const o=this._bufferService.rows-1;i=Math.max(Math.min(i,o),0),s=Math.max(Math.min(s,o),0),r=Math.min(r,this._bufferService.cols);const a=this._bufferService.buffer,h=a.ybase+a.y,c=Math.min(a.x,r-1),l=this._optionsService.rawOptions.cursorBlink,d=this._optionsService.rawOptions.cursorStyle,_=this._optionsService.rawOptions.cursorInactiveStyle;for(let o=i;o<=s;++o){const u=o+a.ydisp,f=this._rowElements[o],v=a.lines.get(u);if(!f||!v)break;f.replaceChildren(...this._rowFactory.createRow(v,u,u===h,d,_,c,l,this.dimensions.css.cell.width,this._widthCache,n?o===i?e:0:-1,n?(o===s?t:r)-1:-1))}}};t.DomRenderer=w=s([r(7,f.IInstantiationService),r(8,l.ICharSizeService),r(9,f.IOptionsService),r(10,f.IBufferService),r(11,l.ICoreBrowserService),r(12,l.IThemeService)],w)},3787:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomRendererRowFactory=void 0;const n=i(2223),o=i(643),a=i(511),h=i(2585),c=i(8055),l=i(4725),d=i(4269),_=i(6171),u=i(3734);let f=t.DomRendererRowFactory=class{constructor(e,t,i,s,r,n,o){this._document=e,this._characterJoinerService=t,this._optionsService=i,this._coreBrowserService=s,this._coreService=r,this._decorationService=n,this._themeService=o,this._workCell=new a.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(e,t,i){this._selectionStart=e,this._selectionEnd=t,this._columnSelectMode=i}createRow(e,t,i,s,r,a,h,l,_,f,p){const g=[],m=this._characterJoinerService.getJoinedCharacters(t),S=this._themeService.colors;let C,b=e.getNoBgTrimmedLength();i&&b<a+1&&(b=a+1);let w=0,y="",E=0,k=0,L=0,D=!1,R=0,x=!1,A=0;const B=[],T=-1!==f&&-1!==p;for(let M=0;M<b;M++){e.loadCell(M,this._workCell);let b=this._workCell.getWidth();if(0===b)continue;let O=!1,P=M,I=this._workCell;if(m.length>0&&M===m[0][0]){O=!0;const t=m.shift();I=new d.JoinedCellData(this._workCell,e.translateToString(!0,t[0],t[1]),t[1]-t[0]),P=t[1]-1,b=I.getWidth()}const H=this._isCellInSelection(M,t),F=i&&M===a,W=T&&M>=f&&M<=p;let U=!1;this._decorationService.forEachDecorationAtCell(M,t,void 0,(e=>{U=!0}));let N=I.getChars()||o.WHITESPACE_CELL_CHAR;if(" "===N&&(I.isUnderline()||I.isOverline())&&(N="Â "),A=b*l-_.get(N,I.isBold(),I.isItalic()),C){if(w&&(H&&x||!H&&!x&&I.bg===E)&&(H&&x&&S.selectionForeground||I.fg===k)&&I.extended.ext===L&&W===D&&A===R&&!F&&!O&&!U){I.isInvisible()?y+=o.WHITESPACE_CELL_CHAR:y+=N,w++;continue}w&&(C.textContent=y),C=this._document.createElement("span"),w=0,y=""}else C=this._document.createElement("span");if(E=I.bg,k=I.fg,L=I.extended.ext,D=W,R=A,x=H,O&&a>=M&&a<=P&&(a=M),!this._coreService.isCursorHidden&&F&&this._coreService.isCursorInitialized)if(B.push("xterm-cursor"),this._coreBrowserService.isFocused)h&&B.push("xterm-cursor-blink"),B.push("bar"===s?"xterm-cursor-bar":"underline"===s?"xterm-cursor-underline":"xterm-cursor-block");else if(r)switch(r){case"outline":B.push("xterm-cursor-outline");break;case"block":B.push("xterm-cursor-block");break;case"bar":B.push("xterm-cursor-bar");break;case"underline":B.push("xterm-cursor-underline")}if(I.isBold()&&B.push("xterm-bold"),I.isItalic()&&B.push("xterm-italic"),I.isDim()&&B.push("xterm-dim"),y=I.isInvisible()?o.WHITESPACE_CELL_CHAR:I.getChars()||o.WHITESPACE_CELL_CHAR,I.isUnderline()&&(B.push(`xterm-underline-${I.extended.underlineStyle}`)," "===y&&(y="Â "),!I.isUnderlineColorDefault()))if(I.isUnderlineColorRGB())C.style.textDecorationColor=`rgb(${u.AttributeData.toColorRGB(I.getUnderlineColor()).join(",")})`;else{let e=I.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&I.isBold()&&e<8&&(e+=8),C.style.textDecorationColor=S.ansi[e].css}I.isOverline()&&(B.push("xterm-overline")," "===y&&(y="Â ")),I.isStrikethrough()&&B.push("xterm-strikethrough"),W&&(C.style.textDecoration="underline");let $=I.getFgColor(),j=I.getFgColorMode(),z=I.getBgColor(),K=I.getBgColorMode();const q=!!I.isInverse();if(q){const e=$;$=z,z=e;const t=j;j=K,K=t}let V,G,X,J=!1;switch(this._decorationService.forEachDecorationAtCell(M,t,void 0,(e=>{"top"!==e.options.layer&&J||(e.backgroundColorRGB&&(K=50331648,z=e.backgroundColorRGB.rgba>>8&16777215,V=e.backgroundColorRGB),e.foregroundColorRGB&&(j=50331648,$=e.foregroundColorRGB.rgba>>8&16777215,G=e.foregroundColorRGB),J="top"===e.options.layer)})),!J&&H&&(V=this._coreBrowserService.isFocused?S.selectionBackgroundOpaque:S.selectionInactiveBackgroundOpaque,z=V.rgba>>8&16777215,K=50331648,J=!0,S.selectionForeground&&(j=50331648,$=S.selectionForeground.rgba>>8&16777215,G=S.selectionForeground)),J&&B.push("xterm-decoration-top"),K){case 16777216:case 33554432:X=S.ansi[z],B.push(`xterm-bg-${z}`);break;case 50331648:X=c.channels.toColor(z>>16,z>>8&255,255&z),this._addStyle(C,`background-color:#${v((z>>>0).toString(16),"0",6)}`);break;default:q?(X=S.foreground,B.push(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):X=S.background}switch(V||I.isDim()&&(V=c.color.multiplyOpacity(X,.5)),j){case 16777216:case 33554432:I.isBold()&&$<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&($+=8),this._applyMinimumContrast(C,X,S.ansi[$],I,V,void 0)||B.push(`xterm-fg-${$}`);break;case 50331648:const e=c.channels.toColor($>>16&255,$>>8&255,255&$);this._applyMinimumContrast(C,X,e,I,V,G)||this._addStyle(C,`color:#${v($.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(C,X,S.foreground,I,V,G)||q&&B.push(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}B.length&&(C.className=B.join(" "),B.length=0),F||O||U?C.textContent=y:w++,A!==this.defaultSpacing&&(C.style.letterSpacing=`${A}px`),g.push(C),M=P}return C&&w&&(C.textContent=y),g}_applyMinimumContrast(e,t,i,s,r,n){if(1===this._optionsService.rawOptions.minimumContrastRatio||(0,_.treatGlyphAsBackgroundColor)(s.getCode()))return!1;const o=this._getContrastCache(s);let a;if(r||n||(a=o.getColor(t.rgba,i.rgba)),void 0===a){const e=this._optionsService.rawOptions.minimumContrastRatio/(s.isDim()?2:1);a=c.color.ensureContrastRatio(r||t,n||i,e),o.setColor((r||t).rgba,(n||i).rgba,a??null)}return!!a&&(this._addStyle(e,`color:${a.css}`),!0)}_getContrastCache(e){return e.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(e,t){e.setAttribute("style",`${e.getAttribute("style")||""}${t};`)}_isCellInSelection(e,t){const i=this._selectionStart,s=this._selectionEnd;return!(!i||!s)&&(this._columnSelectMode?i[0]<=s[0]?e>=i[0]&&t>=i[1]&&e<s[0]&&t<=s[1]:e<i[0]&&t>=i[1]&&e>=s[0]&&t<=s[1]:t>i[1]&&t<s[1]||i[1]===s[1]&&t===i[1]&&e>=i[0]&&e<s[0]||i[1]<s[1]&&t===s[1]&&e<s[0]||i[1]<s[1]&&t===i[1]&&e>=i[0])}};function v(e,t,i){for(;e.length<i;)e=t+e;return e}t.DomRendererRowFactory=f=s([r(1,l.ICharacterJoinerService),r(2,h.IOptionsService),r(3,l.ICoreBrowserService),r(4,h.ICoreService),r(5,h.IDecorationService),r(6,l.IThemeService)],f)},2550:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WidthCache=void 0,t.WidthCache=class{constructor(e,t){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=e.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const i=e.createElement("span");i.classList.add("xterm-char-measure-element");const s=e.createElement("span");s.classList.add("xterm-char-measure-element"),s.style.fontWeight="bold";const r=e.createElement("span");r.classList.add("xterm-char-measure-element"),r.style.fontStyle="italic";const n=e.createElement("span");n.classList.add("xterm-char-measure-element"),n.style.fontWeight="bold",n.style.fontStyle="italic",this._measureElements=[i,s,r,n],this._container.appendChild(i),this._container.appendChild(s),this._container.appendChild(r),this._container.appendChild(n),t.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(e,t,i,s){e===this._font&&t===this._fontSize&&i===this._weight&&s===this._weightBold||(this._font=e,this._fontSize=t,this._weight=i,this._weightBold=s,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${s}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${s}`,this.clear())}get(e,t,i){let s=0;if(!t&&!i&&1===e.length&&(s=e.charCodeAt(0))<256){if(-9999!==this._flat[s])return this._flat[s];const t=this._measure(e,0);return t>0&&(this._flat[s]=t),t}let r=e;t&&(r+="B"),i&&(r+="I");let n=this._holey.get(r);if(void 0===n){let s=0;t&&(s|=1),i&&(s|=2),n=this._measure(e,s),n>0&&this._holey.set(r,n)}return n}_measure(e,t){const i=this._measureElements[t];return i.textContent=e.repeat(32),i.offsetWidth/32}}},2223:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_BASELINE=t.DIM_OPACITY=t.INVERTED_DEFAULT_COLOR=void 0;const s=i(6114);t.INVERTED_DEFAULT_COLOR=257,t.DIM_OPACITY=.5,t.TEXT_BASELINE=s.isFirefox||s.isLegacyEdge?"bottom":"ideographic"},6171:(e,t)=>{function i(e){return 57508<=e&&e<=57558}function s(e){return e>=128512&&e<=128591||e>=127744&&e<=128511||e>=128640&&e<=128767||e>=9728&&e<=9983||e>=9984&&e<=10175||e>=65024&&e<=65039||e>=129280&&e<=129535||e>=127462&&e<=127487}Object.defineProperty(t,"__esModule",{value:!0}),t.computeNextVariantOffset=t.createRenderDimensions=t.treatGlyphAsBackgroundColor=t.allowRescaling=t.isEmoji=t.isRestrictedPowerlineGlyph=t.isPowerlineGlyph=t.throwIfFalsy=void 0,t.throwIfFalsy=function(e){if(!e)throw new Error("value must not be falsy");return e},t.isPowerlineGlyph=i,t.isRestrictedPowerlineGlyph=function(e){return 57520<=e&&e<=57527},t.isEmoji=s,t.allowRescaling=function(e,t,r,n){return 1===t&&r>Math.ceil(1.5*n)&&void 0!==e&&e>255&&!s(e)&&!i(e)&&!function(e){return 57344<=e&&e<=63743}(e)},t.treatGlyphAsBackgroundColor=function(e){return i(e)||function(e){return 9472<=e&&e<=9631}(e)},t.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},t.computeNextVariantOffset=function(e,t,i=0){return(e-(2*Math.round(t)-i))%(2*Math.round(t))}},6052:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSelectionRenderModel=void 0;class i{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(e,t,i,s=!1){if(this.selectionStart=t,this.selectionEnd=i,!t||!i||t[0]===i[0]&&t[1]===i[1])return void this.clear();const r=e.buffers.active.ydisp,n=t[1]-r,o=i[1]-r,a=Math.max(n,0),h=Math.min(o,e.rows-1);a>=e.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=s,this.viewportStartRow=n,this.viewportEndRow=o,this.viewportCappedStartRow=a,this.viewportCappedEndRow=h,this.startCol=t[0],this.endCol=i[0])}isCellSelected(e,t,i){return!!this.hasSelection&&(i-=e.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?t>=this.startCol&&i>=this.viewportCappedStartRow&&t<this.endCol&&i<=this.viewportCappedEndRow:t<this.startCol&&i>=this.viewportCappedStartRow&&t>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&t<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&t>=this.startCol)}}t.createSelectionRenderModel=function(){return new i}},456:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionModel=void 0,t.SelectionModel=class{constructor(e){this._bufferService=e,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?e%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)-1]:[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[e,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const e=this.selectionStart[0]+this.selectionStartLength;return e>this._bufferService.cols?[e%this._bufferService.cols,this.selectionStart[1]+Math.floor(e/this._bufferService.cols)]:[Math.max(e,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const e=this.selectionStart,t=this.selectionEnd;return!(!e||!t)&&(e[1]>t[1]||e[1]===t[1]&&e[0]>t[0])}handleTrim(e){return this.selectionStart&&(this.selectionStart[1]-=e),this.selectionEnd&&(this.selectionEnd[1]-=e),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharSizeService=void 0;const n=i(2585),o=i(8460),a=i(844);let h=t.CharSizeService=class extends a.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(e,t,i){super(),this._optionsService=i,this.width=0,this.height=0,this._onCharSizeChange=this.register(new o.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new d(this._optionsService))}catch{this._measureStrategy=this.register(new l(e,t,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const e=this._measureStrategy.measure();e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._onCharSizeChange.fire())}};t.CharSizeService=h=s([r(2,n.IOptionsService)],h);class c extends a.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(e,t){void 0!==e&&e>0&&void 0!==t&&t>0&&(this._result.width=e,this._result.height=t)}}class l extends c{constructor(e,t,i){super(),this._document=e,this._parentElement=t,this._optionsService=i,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class d extends c{constructor(e){super(),this._optionsService=e,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const t=this._ctx.measureText("W");if(!("width"in t&&"fontBoundingBoxAscent"in t&&"fontBoundingBoxDescent"in t))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const e=this._ctx.measureText("W");return this._validateAndSet(e.width,e.fontBoundingBoxAscent+e.fontBoundingBoxDescent),this._result}}},4269:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CharacterJoinerService=t.JoinedCellData=void 0;const n=i(3734),o=i(643),a=i(511),h=i(2585);class c extends n.AttributeData{constructor(e,t,i){super(),this.content=0,this.combinedData="",this.fg=e.fg,this.bg=e.bg,this.combinedData=t,this._width=i}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(e){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.JoinedCellData=c;let l=t.CharacterJoinerService=class e{constructor(e){this._bufferService=e,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new a.CellData}register(e){const t={id:this._nextCharacterJoinerId++,handler:e};return this._characterJoiners.push(t),t.id}deregister(e){for(let t=0;t<this._characterJoiners.length;t++)if(this._characterJoiners[t].id===e)return this._characterJoiners.splice(t,1),!0;return!1}getJoinedCharacters(e){if(0===this._characterJoiners.length)return[];const t=this._bufferService.buffer.lines.get(e);if(!t||0===t.length)return[];const i=[],s=t.translateToString(!0);let r=0,n=0,a=0,h=t.getFg(0),c=t.getBg(0);for(let e=0;e<t.getTrimmedLength();e++)if(t.loadCell(e,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==h||this._workCell.bg!==c){if(e-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}r=e,a=n,h=this._workCell.fg,c=this._workCell.bg}n+=this._workCell.getChars().length||o.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-r>1){const e=this._getJoinedRanges(s,a,n,t,r);for(let t=0;t<e.length;t++)i.push(e[t])}return i}_getJoinedRanges(t,i,s,r,n){const o=t.substring(i,s);let a=[];try{a=this._characterJoiners[0].handler(o)}catch(e){console.error(e)}for(let t=1;t<this._characterJoiners.length;t++)try{const i=this._characterJoiners[t].handler(o);for(let t=0;t<i.length;t++)e._mergeRanges(a,i[t])}catch(e){console.error(e)}return this._stringRangesToCellRanges(a,r,n),a}_stringRangesToCellRanges(e,t,i){let s=0,r=!1,n=0,a=e[s];if(a){for(let h=i;h<this._bufferService.cols;h++){const i=t.getWidth(h),c=t.getString(h).length||o.WHITESPACE_CELL_CHAR.length;if(0!==i){if(!r&&a[0]<=n&&(a[0]=h,r=!0),a[1]<=n){if(a[1]=h,a=e[++s],!a)break;a[0]<=n?(a[0]=h,r=!0):r=!1}n+=c}}a&&(a[1]=this._bufferService.cols)}}static _mergeRanges(e,t){let i=!1;for(let s=0;s<e.length;s++){const r=e[s];if(i){if(t[1]<=r[0])return e[s-1][1]=t[1],e;if(t[1]<=r[1])return e[s-1][1]=Math.max(t[1],r[1]),e.splice(s,1),e;e.splice(s,1),s--}else{if(t[1]<=r[0])return e.splice(s,0,t),e;if(t[1]<=r[1])return r[0]=Math.min(t[0],r[0]),e;t[0]<r[1]&&(r[0]=Math.min(t[0],r[0]),i=!0)}}return i?e[e.length-1][1]=t[1]:e.push(t),e}};t.CharacterJoinerService=l=s([r(0,h.IBufferService)],l)},5114:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreBrowserService=void 0;const s=i(844),r=i(8460),n=i(3656);class o extends s.Disposable{constructor(e,t,i){super(),this._textarea=e,this._window=t,this.mainDocument=i,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new a(this._window),this._onDprChange=this.register(new r.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new r.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((e=>this._screenDprMonitor.setWindow(e)))),this.register((0,r.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(e){this._window!==e&&(this._window=e,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return void 0===this._cachedIsFocused&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}t.CoreBrowserService=o;class a extends s.Disposable{constructor(e){super(),this._parentWindow=e,this._windowResizeListener=this.register(new s.MutableDisposable),this._onDprChange=this.register(new r.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,s.toDisposable)((()=>this.clearListener())))}setWindow(e){this._parentWindow=e,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,n.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LinkProviderService=void 0;const s=i(844);class r extends s.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,s.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(e){return this.linkProviders.push(e),{dispose:()=>{const t=this.linkProviders.indexOf(e);-1!==t&&this.linkProviders.splice(t,1)}}}}t.LinkProviderService=r},8934:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.MouseService=void 0;const n=i(4725),o=i(9806);let a=t.MouseService=class{constructor(e,t){this._renderService=e,this._charSizeService=t}getCoords(e,t,i,s,r){return(0,o.getCoords)(window,e,t,i,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,r)}getMouseReportCoords(e,t){const i=(0,o.getCoordsRelativeToElement)(window,e,t);if(this._charSizeService.hasValidSize)return i[0]=Math.min(Math.max(i[0],0),this._renderService.dimensions.css.canvas.width-1),i[1]=Math.min(Math.max(i[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(i[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(i[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(i[0]),y:Math.floor(i[1])}}};t.MouseService=a=s([r(0,n.IRenderService),r(1,n.ICharSizeService)],a)},3230:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderService=void 0;const n=i(6193),o=i(4725),a=i(8460),h=i(844),c=i(7226),l=i(2585);let d=t.RenderService=class extends h.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(e,t,i,s,r,o,l,d){super(),this._rowCount=e,this._charSizeService=s,this._renderer=this.register(new h.MutableDisposable),this._pausedResizeTask=new c.DebouncedIdleTask,this._observerDisposable=this.register(new h.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new a.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new a.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new a.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new a.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new n.RenderDebouncer(((e,t)=>this._renderRows(e,t)),l),this.register(this._renderDebouncer),this.register(l.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(o.onResize((()=>this._fullRefresh()))),this.register(o.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(i.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(r.onDecorationRegistered((()=>this._fullRefresh()))),this.register(r.onDecorationRemoved((()=>this._fullRefresh()))),this.register(i.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(o.cols,o.rows),this._fullRefresh()}))),this.register(i.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(o.buffer.y,o.buffer.y,!0)))),this.register(d.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(l.window,t),this.register(l.onWindowChange((e=>this._registerIntersectionObserver(e,t))))}_registerIntersectionObserver(e,t){if("IntersectionObserver"in e){const i=new e.IntersectionObserver((e=>this._handleIntersectionChange(e[e.length-1])),{threshold:0});i.observe(t),this._observerDisposable.value=(0,h.toDisposable)((()=>i.disconnect()))}}_handleIntersectionChange(e){this._isPaused=void 0===e.isIntersecting?0===e.intersectionRatio:!e.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(e,t,i=!1){this._isPaused?this._needsFullRefresh=!0:(i||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(e,t,this._rowCount))}_renderRows(e,t){this._renderer.value&&(e=Math.min(e,this._rowCount-1),t=Math.min(t,this._rowCount-1),this._renderer.value.renderRows(e,t),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:e,end:t}),this._onRender.fire({start:e,end:t}),this._isNextRenderRedrawOnly=!0)}resize(e,t){this._rowCount=t,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(e){this._renderer.value=e,this._renderer.value&&(this._renderer.value.onRequestRedraw((e=>this.refreshRows(e.start,e.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(e){return this._renderDebouncer.addRefreshCallback(e)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(e,t){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(e,t))):this._renderer.value.handleResize(e,t),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(e,t,i){this._selectionState.start=e,this._selectionState.end=t,this._selectionState.columnSelectMode=i,this._renderer.value?.handleSelectionChanged(e,t,i)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};t.RenderService=d=s([r(2,l.IOptionsService),r(3,o.ICharSizeService),r(4,l.IDecorationService),r(5,l.IBufferService),r(6,o.ICoreBrowserService),r(7,o.IThemeService)],d)},9312:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionService=void 0;const n=i(9806),o=i(9504),a=i(456),h=i(4725),c=i(8460),l=i(844),d=i(6114),_=i(4841),u=i(511),f=i(2585),v=String.fromCharCode(160),p=new RegExp(v,"g");let g=t.SelectionService=class extends l.Disposable{constructor(e,t,i,s,r,n,o,h,d){super(),this._element=e,this._screenElement=t,this._linkifier=i,this._bufferService=s,this._coreService=r,this._mouseService=n,this._optionsService=o,this._renderService=h,this._coreBrowserService=d,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new u.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new c.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new c.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=e=>this._handleMouseMove(e),this._mouseUpListener=e=>this._handleMouseUp(e),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((e=>this._handleTrim(e))),this.register(this._bufferService.buffers.onBufferActivate((e=>this._handleBufferActivate(e)))),this.enable(),this._model=new a.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;return!(!e||!t||e[0]===t[0]&&e[1]===t[1])}get selectionText(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd;if(!e||!t)return"";const i=this._bufferService.buffer,s=[];if(3===this._activeSelectionMode){if(e[0]===t[0])return"";const r=e[0]<t[0]?e[0]:t[0],n=e[0]<t[0]?t[0]:e[0];for(let o=e[1];o<=t[1];o++){const e=i.translateBufferLineToString(o,!0,r,n);s.push(e)}}else{const r=e[1]===t[1]?t[0]:void 0;s.push(i.translateBufferLineToString(e[1],!0,e[0],r));for(let r=e[1]+1;r<=t[1]-1;r++){const e=i.lines.get(r),t=i.translateBufferLineToString(r,!0);e?.isWrapped?s[s.length-1]+=t:s.push(t)}if(e[1]!==t[1]){const e=i.lines.get(t[1]),r=i.translateBufferLineToString(t[1],!0,0,t[0]);e&&e.isWrapped?s[s.length-1]+=r:s.push(r)}}return s.map((e=>e.replace(p," "))).join(d.isWindows?"\\r\\n":"\\n")}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(e){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),d.isLinux&&e&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})}_isClickInSelection(e){const t=this._getMouseBufferCoords(e),i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!!(i&&s&&t)&&this._areCoordsInSelection(t,i,s)}isCellInSelection(e,t){const i=this._model.finalSelectionStart,s=this._model.finalSelectionEnd;return!(!i||!s)&&this._areCoordsInSelection([e,t],i,s)}_areCoordsInSelection(e,t,i){return e[1]>t[1]&&e[1]<i[1]||t[1]===i[1]&&e[1]===t[1]&&e[0]>=t[0]&&e[0]<i[0]||t[1]<i[1]&&e[1]===i[1]&&e[0]<i[0]||t[1]<i[1]&&e[1]===t[1]&&e[0]>=t[0]}_selectWordAtCursor(e,t){const i=this._linkifier.currentLink?.link?.range;if(i)return this._model.selectionStart=[i.start.x-1,i.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(i,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const s=this._getMouseBufferCoords(e);return!!s&&(this._selectWordAt(s,t),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(e,t){this._model.clearSelection(),e=Math.max(e,0),t=Math.min(t,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,e],this._model.selectionEnd=[this._bufferService.cols,t],this.refresh(),this._onSelectionChange.fire()}_handleTrim(e){this._model.handleTrim(e)&&this.refresh()}_getMouseBufferCoords(e){const t=this._mouseService.getCoords(e,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(t)return t[0]--,t[1]--,t[1]+=this._bufferService.buffer.ydisp,t}_getMouseEventScrollAmount(e){let t=(0,n.getCoordsRelativeToElement)(this._coreBrowserService.window,e,this._screenElement)[1];const i=this._renderService.dimensions.css.canvas.height;return t>=0&&t<=i?0:(t>i&&(t-=i),t=Math.min(Math.max(t,-50),50),t/=50,t/Math.abs(t)+Math.round(14*t))}shouldForceSelection(e){return d.isMac?e.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:e.shiftKey}handleMouseDown(e){if(this._mouseDownTimeStamp=e.timeStamp,(2!==e.button||!this.hasSelection)&&0===e.button){if(!this._enabled){if(!this.shouldForceSelection(e))return;e.stopPropagation()}e.preventDefault(),this._dragScrollAmount=0,this._enabled&&e.shiftKey?this._handleIncrementalClick(e):1===e.detail?this._handleSingleClick(e):2===e.detail?this._handleDoubleClick(e):3===e.detail&&this._handleTripleClick(e),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(e){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(e))}_handleSingleClick(e){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(e)?3:0,this._model.selectionStart=this._getMouseBufferCoords(e),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const t=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);t&&t.length!==this._model.selectionStart[0]&&0===t.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}_handleDoubleClick(e){this._selectWordAtCursor(e,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(e){const t=this._getMouseBufferCoords(e);t&&(this._activeSelectionMode=2,this._selectLineAt(t[1]))}shouldColumnSelect(e){return e.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(e){if(e.stopImmediatePropagation(),!this._model.selectionStart)return;const t=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(e),!this._model.selectionEnd)return void this.refresh(!0);2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(e),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const i=this._bufferService.buffer;if(this._model.selectionEnd[1]<i.lines.length){const e=i.lines.get(this._model.selectionEnd[1]);e&&0===e.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}t&&t[0]===this._model.selectionEnd[0]&&t[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const e=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(e.ydisp+this._bufferService.rows,e.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=e.ydisp),this.refresh()}}_handleMouseUp(e){const t=e.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&t<500&&e.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const t=this._mouseService.getCoords(e,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(t&&void 0!==t[0]&&void 0!==t[1]){const e=(0,o.moveToCellSequence)(t[0]-1,t[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(e,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const e=this._model.finalSelectionStart,t=this._model.finalSelectionEnd,i=!(!e||!t||e[0]===t[0]&&e[1]===t[1]);i?e&&t&&(this._oldSelectionStart&&this._oldSelectionEnd&&e[0]===this._oldSelectionStart[0]&&e[1]===this._oldSelectionStart[1]&&t[0]===this._oldSelectionEnd[0]&&t[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(e,t,i)):this._oldHasSelection&&this._fireOnSelectionChange(e,t,i)}_fireOnSelectionChange(e,t,i){this._oldSelectionStart=e,this._oldSelectionEnd=t,this._oldHasSelection=i,this._onSelectionChange.fire()}_handleBufferActivate(e){this.clearSelection(),this._trimListener.dispose(),this._trimListener=e.activeBuffer.lines.onTrim((e=>this._handleTrim(e)))}_convertViewportColToCharacterIndex(e,t){let i=t;for(let s=0;t>=s;s++){const r=e.loadCell(s,this._workCell).getChars().length;0===this._workCell.getWidth()?i--:r>1&&t!==s&&(i+=r-1)}return i}setSelection(e,t,i){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[e,t],this._model.selectionStartLength=i,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(e){this._isClickInSelection(e)||(this._selectWordAtCursor(e,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(e,t,i=!0,s=!0){if(e[0]>=this._bufferService.cols)return;const r=this._bufferService.buffer,n=r.lines.get(e[1]);if(!n)return;const o=r.translateBufferLineToString(e[1],!1);let a=this._convertViewportColToCharacterIndex(n,e[0]),h=a;const c=e[0]-a;let l=0,d=0,_=0,u=0;if(" "===o.charAt(a)){for(;a>0&&" "===o.charAt(a-1);)a--;for(;h<o.length&&" "===o.charAt(h+1);)h++}else{let t=e[0],i=e[0];0===n.getWidth(t)&&(l++,t--),2===n.getWidth(i)&&(d++,i++);const s=n.getString(i).length;for(s>1&&(u+=s-1,h+=s-1);t>0&&a>0&&!this._isCharWordSeparator(n.loadCell(t-1,this._workCell));){n.loadCell(t-1,this._workCell);const e=this._workCell.getChars().length;0===this._workCell.getWidth()?(l++,t--):e>1&&(_+=e-1,a-=e-1),a--,t--}for(;i<n.length&&h+1<o.length&&!this._isCharWordSeparator(n.loadCell(i+1,this._workCell));){n.loadCell(i+1,this._workCell);const e=this._workCell.getChars().length;2===this._workCell.getWidth()?(d++,i++):e>1&&(u+=e-1,h+=e-1),h++,i++}}h++;let f=a+c-l+_,v=Math.min(this._bufferService.cols,h-a+l+d-_-u);if(t||""!==o.slice(a,h).trim()){if(i&&0===f&&32!==n.getCodePoint(0)){const t=r.lines.get(e[1]-1);if(t&&n.isWrapped&&32!==t.getCodePoint(this._bufferService.cols-1)){const t=this._getWordAt([this._bufferService.cols-1,e[1]-1],!1,!0,!1);if(t){const e=this._bufferService.cols-t.start;f-=e,v+=e}}}if(s&&f+v===this._bufferService.cols&&32!==n.getCodePoint(this._bufferService.cols-1)){const t=r.lines.get(e[1]+1);if(t?.isWrapped&&32!==t.getCodePoint(0)){const t=this._getWordAt([0,e[1]+1],!1,!1,!0);t&&(v+=t.length)}}return{start:f,length:v}}}_selectWordAt(e,t){const i=this._getWordAt(e,t);if(i){for(;i.start<0;)i.start+=this._bufferService.cols,e[1]--;this._model.selectionStart=[i.start,e[1]],this._model.selectionStartLength=i.length}}_selectToWordAt(e){const t=this._getWordAt(e,!0);if(t){let i=e[1];for(;t.start<0;)t.start+=this._bufferService.cols,i--;if(!this._model.areSelectionValuesReversed())for(;t.start+t.length>this._bufferService.cols;)t.length-=this._bufferService.cols,i++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?t.start:t.start+t.length,i]}}_isCharWordSeparator(e){return 0!==e.getWidth()&&this._optionsService.rawOptions.wordSeparator.indexOf(e.getChars())>=0}_selectLineAt(e){const t=this._bufferService.buffer.getWrappedRangeForLine(e),i={start:{x:0,y:t.first},end:{x:this._bufferService.cols-1,y:t.last}};this._model.selectionStart=[0,t.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(i,this._bufferService.cols)}};t.SelectionService=g=s([r(3,f.IBufferService),r(4,f.ICoreService),r(5,h.IMouseService),r(6,f.IOptionsService),r(7,h.IRenderService),r(8,h.ICoreBrowserService)],g)},4725:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ILinkProviderService=t.IThemeService=t.ICharacterJoinerService=t.ISelectionService=t.IRenderService=t.IMouseService=t.ICoreBrowserService=t.ICharSizeService=void 0;const s=i(8343);t.ICharSizeService=(0,s.createDecorator)("CharSizeService"),t.ICoreBrowserService=(0,s.createDecorator)("CoreBrowserService"),t.IMouseService=(0,s.createDecorator)("MouseService"),t.IRenderService=(0,s.createDecorator)("RenderService"),t.ISelectionService=(0,s.createDecorator)("SelectionService"),t.ICharacterJoinerService=(0,s.createDecorator)("CharacterJoinerService"),t.IThemeService=(0,s.createDecorator)("ThemeService"),t.ILinkProviderService=(0,s.createDecorator)("LinkProviderService")},6731:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThemeService=t.DEFAULT_ANSI_COLORS=void 0;const n=i(7239),o=i(8055),a=i(8460),h=i(844),c=i(2585),l=o.css.toColor("#ffffff"),d=o.css.toColor("#000000"),_=o.css.toColor("#ffffff"),u=o.css.toColor("#000000"),f={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};t.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const e=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],t=[0,95,135,175,215,255];for(let i=0;i<216;i++){const s=t[i/36%6|0],r=t[i/6%6|0],n=t[i%6];e.push({css:o.channels.toCss(s,r,n),rgba:o.channels.toRgba(s,r,n)})}for(let t=0;t<24;t++){const i=8+10*t;e.push({css:o.channels.toCss(i,i,i),rgba:o.channels.toRgba(i,i,i)})}return e})());let v=t.ThemeService=class extends h.Disposable{get colors(){return this._colors}constructor(e){super(),this._optionsService=e,this._contrastCache=new n.ColorContrastCache,this._halfContrastCache=new n.ColorContrastCache,this._onChangeColors=this.register(new a.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:d,cursor:_,cursorAccent:u,selectionForeground:void 0,selectionBackgroundTransparent:f,selectionBackgroundOpaque:o.color.blend(d,f),selectionInactiveBackgroundTransparent:f,selectionInactiveBackgroundOpaque:o.color.blend(d,f),ansi:t.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(e={}){const i=this._colors;if(i.foreground=p(e.foreground,l),i.background=p(e.background,d),i.cursor=p(e.cursor,_),i.cursorAccent=p(e.cursorAccent,u),i.selectionBackgroundTransparent=p(e.selectionBackground,f),i.selectionBackgroundOpaque=o.color.blend(i.background,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundTransparent=p(e.selectionInactiveBackground,i.selectionBackgroundTransparent),i.selectionInactiveBackgroundOpaque=o.color.blend(i.background,i.selectionInactiveBackgroundTransparent),i.selectionForeground=e.selectionForeground?p(e.selectionForeground,o.NULL_COLOR):void 0,i.selectionForeground===o.NULL_COLOR&&(i.selectionForeground=void 0),o.color.isOpaque(i.selectionBackgroundTransparent)){const e=.3;i.selectionBackgroundTransparent=o.color.opacity(i.selectionBackgroundTransparent,e)}if(o.color.isOpaque(i.selectionInactiveBackgroundTransparent)){const e=.3;i.selectionInactiveBackgroundTransparent=o.color.opacity(i.selectionInactiveBackgroundTransparent,e)}if(i.ansi=t.DEFAULT_ANSI_COLORS.slice(),i.ansi[0]=p(e.black,t.DEFAULT_ANSI_COLORS[0]),i.ansi[1]=p(e.red,t.DEFAULT_ANSI_COLORS[1]),i.ansi[2]=p(e.green,t.DEFAULT_ANSI_COLORS[2]),i.ansi[3]=p(e.yellow,t.DEFAULT_ANSI_COLORS[3]),i.ansi[4]=p(e.blue,t.DEFAULT_ANSI_COLORS[4]),i.ansi[5]=p(e.magenta,t.DEFAULT_ANSI_COLORS[5]),i.ansi[6]=p(e.cyan,t.DEFAULT_ANSI_COLORS[6]),i.ansi[7]=p(e.white,t.DEFAULT_ANSI_COLORS[7]),i.ansi[8]=p(e.brightBlack,t.DEFAULT_ANSI_COLORS[8]),i.ansi[9]=p(e.brightRed,t.DEFAULT_ANSI_COLORS[9]),i.ansi[10]=p(e.brightGreen,t.DEFAULT_ANSI_COLORS[10]),i.ansi[11]=p(e.brightYellow,t.DEFAULT_ANSI_COLORS[11]),i.ansi[12]=p(e.brightBlue,t.DEFAULT_ANSI_COLORS[12]),i.ansi[13]=p(e.brightMagenta,t.DEFAULT_ANSI_COLORS[13]),i.ansi[14]=p(e.brightCyan,t.DEFAULT_ANSI_COLORS[14]),i.ansi[15]=p(e.brightWhite,t.DEFAULT_ANSI_COLORS[15]),e.extendedAnsi){const s=Math.min(i.ansi.length-16,e.extendedAnsi.length);for(let r=0;r<s;r++)i.ansi[r+16]=p(e.extendedAnsi[r],t.DEFAULT_ANSI_COLORS[r+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(e){this._restoreColor(e),this._onChangeColors.fire(this.colors)}_restoreColor(e){if(void 0!==e)switch(e){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[e]=this._restoreColors.ansi[e]}else for(let e=0;e<this._restoreColors.ansi.length;++e)this._colors.ansi[e]=this._restoreColors.ansi[e]}modifyColors(e){e(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function p(e,t){if(void 0!==e)try{return o.css.toColor(e)}catch{}return t}t.ThemeService=v=s([r(0,c.IOptionsService)],v)},6349:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CircularList=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._maxLength=e,this.onDeleteEmitter=this.register(new s.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new s.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new s.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(e){if(this._maxLength===e)return;const t=new Array(e);for(let i=0;i<Math.min(e,this.length);i++)t[i]=this._array[this._getCyclicIndex(i)];this._array=t,this._maxLength=e,this._startIndex=0}get length(){return this._length}set length(e){if(e>this._length)for(let t=this._length;t<e;t++)this._array[t]=void 0;this._length=e}get(e){return this._array[this._getCyclicIndex(e)]}set(e,t){this._array[this._getCyclicIndex(e)]=t}push(e){this._array[this._getCyclicIndex(this._length)]=e,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(e,t,...i){if(t){for(let i=e;i<this._length-t;i++)this._array[this._getCyclicIndex(i)]=this._array[this._getCyclicIndex(i+t)];this._length-=t,this.onDeleteEmitter.fire({index:e,amount:t})}for(let t=this._length-1;t>=e;t--)this._array[this._getCyclicIndex(t+i.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<i.length;t++)this._array[this._getCyclicIndex(e+t)]=i[t];if(i.length&&this.onInsertEmitter.fire({index:e,amount:i.length}),this._length+i.length>this._maxLength){const e=this._length+i.length-this._maxLength;this._startIndex+=e,this._length=this._maxLength,this.onTrimEmitter.fire(e)}else this._length+=i.length}trimStart(e){e>this._length&&(e=this._length),this._startIndex+=e,this._length-=e,this.onTrimEmitter.fire(e)}shiftElements(e,t,i){if(!(t<=0)){if(e<0||e>=this._length)throw new Error("start argument out of range");if(e+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let s=t-1;s>=0;s--)this.set(e+s+i,this.get(e+s));const s=e+t+i-this._length;if(s>0)for(this._length+=s;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let s=0;s<t;s++)this.set(e+s+i,this.get(e+s))}}_getCyclicIndex(e){return(this._startIndex+e)%this._maxLength}}t.CircularList=n},1439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.clone=void 0,t.clone=function e(t,i=5){if("object"!=typeof t)return t;const s=Array.isArray(t)?[]:{};for(const r in t)s[r]=i<=1?t[r]:t[r]&&e(t[r],i-1);return s}},8055:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.contrastRatio=t.toPaddedHex=t.rgba=t.rgb=t.css=t.color=t.channels=t.NULL_COLOR=void 0;let i=0,s=0,r=0,n=0;var o,a,h,c,l;function d(e){const t=e.toString(16);return t.length<2?"0"+t:t}function _(e,t){return e<t?(t+.05)/(e+.05):(e+.05)/(t+.05)}t.NULL_COLOR={css:"#00000000",rgba:0},function(e){e.toCss=function(e,t,i,s){return void 0!==s?`#${d(e)}${d(t)}${d(i)}${d(s)}`:`#${d(e)}${d(t)}${d(i)}`},e.toRgba=function(e,t,i,s=255){return(e<<24|t<<16|i<<8|s)>>>0},e.toColor=function(t,i,s,r){return{css:e.toCss(t,i,s,r),rgba:e.toRgba(t,i,s,r)}}}(o||(t.channels=o={})),function(e){function t(e,t){return n=Math.round(255*t),[i,s,r]=l.toChannels(e.rgba),{css:o.toCss(i,s,r,n),rgba:o.toRgba(i,s,r,n)}}e.blend=function(e,t){if(n=(255&t.rgba)/255,1===n)return{css:t.css,rgba:t.rgba};const a=t.rgba>>24&255,h=t.rgba>>16&255,c=t.rgba>>8&255,l=e.rgba>>24&255,d=e.rgba>>16&255,_=e.rgba>>8&255;return i=l+Math.round((a-l)*n),s=d+Math.round((h-d)*n),r=_+Math.round((c-_)*n),{css:o.toCss(i,s,r),rgba:o.toRgba(i,s,r)}},e.isOpaque=function(e){return 255==(255&e.rgba)},e.ensureContrastRatio=function(e,t,i){const s=l.ensureContrastRatio(e.rgba,t.rgba,i);if(s)return o.toColor(s>>24&255,s>>16&255,s>>8&255)},e.opaque=function(e){const t=(255|e.rgba)>>>0;return[i,s,r]=l.toChannels(t),{css:o.toCss(i,s,r),rgba:t}},e.opacity=t,e.multiplyOpacity=function(e,i){return n=255&e.rgba,t(e,n*i/255)},e.toColorRGB=function(e){return[e.rgba>>24&255,e.rgba>>16&255,e.rgba>>8&255]}}(a||(t.color=a={})),function(e){let t,a;try{const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d",{willReadFrequently:!0});i&&(t=i,t.globalCompositeOperation="copy",a=t.createLinearGradient(0,0,1,1))}catch{}e.toColor=function(e){if(e.match(/#[\\da-f]{3,8}/i))switch(e.length){case 4:return i=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),r=parseInt(e.slice(3,4).repeat(2),16),o.toColor(i,s,r);case 5:return i=parseInt(e.slice(1,2).repeat(2),16),s=parseInt(e.slice(2,3).repeat(2),16),r=parseInt(e.slice(3,4).repeat(2),16),n=parseInt(e.slice(4,5).repeat(2),16),o.toColor(i,s,r,n);case 7:return{css:e,rgba:(parseInt(e.slice(1),16)<<8|255)>>>0};case 9:return{css:e,rgba:parseInt(e.slice(1),16)>>>0}}const h=e.match(/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(,\\s*(0|1|\\d?\\.(\\d+))\\s*)?\\)/);if(h)return i=parseInt(h[1]),s=parseInt(h[2]),r=parseInt(h[3]),n=Math.round(255*(void 0===h[5]?1:parseFloat(h[5]))),o.toColor(i,s,r,n);if(!t||!a)throw new Error("css.toColor: Unsupported css format");if(t.fillStyle=a,t.fillStyle=e,"string"!=typeof t.fillStyle)throw new Error("css.toColor: Unsupported css format");if(t.fillRect(0,0,1,1),[i,s,r,n]=t.getImageData(0,0,1,1).data,255!==n)throw new Error("css.toColor: Unsupported css format");return{rgba:o.toRgba(i,s,r,n),css:e}}}(h||(t.css=h={})),function(e){function t(e,t,i){const s=e/255,r=t/255,n=i/255;return.2126*(s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}e.relativeLuminance=function(e){return t(e>>16&255,e>>8&255,255&e)},e.relativeLuminance2=t}(c||(t.rgb=c={})),function(e){function t(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,h=t>>8&255,l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));for(;l<i&&(o>0||a>0||h>0);)o-=Math.max(0,Math.ceil(.1*o)),a-=Math.max(0,Math.ceil(.1*a)),h-=Math.max(0,Math.ceil(.1*h)),l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));return(o<<24|a<<16|h<<8|255)>>>0}function a(e,t,i){const s=e>>24&255,r=e>>16&255,n=e>>8&255;let o=t>>24&255,a=t>>16&255,h=t>>8&255,l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));for(;l<i&&(o<255||a<255||h<255);)o=Math.min(255,o+Math.ceil(.1*(255-o))),a=Math.min(255,a+Math.ceil(.1*(255-a))),h=Math.min(255,h+Math.ceil(.1*(255-h))),l=_(c.relativeLuminance2(o,a,h),c.relativeLuminance2(s,r,n));return(o<<24|a<<16|h<<8|255)>>>0}e.blend=function(e,t){if(n=(255&t)/255,1===n)return t;const a=t>>24&255,h=t>>16&255,c=t>>8&255,l=e>>24&255,d=e>>16&255,_=e>>8&255;return i=l+Math.round((a-l)*n),s=d+Math.round((h-d)*n),r=_+Math.round((c-_)*n),o.toRgba(i,s,r)},e.ensureContrastRatio=function(e,i,s){const r=c.relativeLuminance(e>>8),n=c.relativeLuminance(i>>8);if(_(r,n)<s){if(n<r){const n=t(e,i,s),o=_(r,c.relativeLuminance(n>>8));if(o<s){const t=a(e,i,s);return o>_(r,c.relativeLuminance(t>>8))?n:t}return n}const o=a(e,i,s),h=_(r,c.relativeLuminance(o>>8));if(h<s){const n=t(e,i,s);return h>_(r,c.relativeLuminance(n>>8))?o:n}return o}},e.reduceLuminance=t,e.increaseLuminance=a,e.toChannels=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}}(l||(t.rgba=l={})),t.toPaddedHex=d,t.contrastRatio=_},8969:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CoreTerminal=void 0;const s=i(844),r=i(2585),n=i(4348),o=i(7866),a=i(744),h=i(7302),c=i(6975),l=i(8460),d=i(1753),_=i(1480),u=i(7994),f=i(9282),v=i(5435),p=i(5981),g=i(2660);let m=!1;class S extends s.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event((e=>{this._onScrollApi?.fire(e.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(e){for(const t in e)this.optionsService.options[t]=e[t]}constructor(e){super(),this._windowsWrappingHeuristics=this.register(new s.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new h.OptionsService(e)),this._instantiationService.setService(r.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(a.BufferService)),this._instantiationService.setService(r.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(o.LogService)),this._instantiationService.setService(r.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(c.CoreService)),this._instantiationService.setService(r.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(r.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(r.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(u.CharsetService),this._instantiationService.setService(r.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(g.OscLinkService),this._instantiationService.setService(r.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new v.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((e=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new p.WriteBuffer(((e,t)=>this._inputHandler.parse(e,t)))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(e,t){this._writeBuffer.write(e,t)}writeSync(e,t){this._logService.logLevel<=r.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(e,t)}input(e,t=!0){this.coreService.triggerDataEvent(e,t)}resize(e,t){isNaN(e)||isNaN(t)||(e=Math.max(e,a.MINIMUM_COLS),t=Math.max(t,a.MINIMUM_ROWS),this._bufferService.resize(e,t))}scroll(e,t=!1){this._bufferService.scroll(e,t)}scrollLines(e,t,i){this._bufferService.scrollLines(e,t,i)}scrollPages(e){this.scrollLines(e*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(e){const t=e-this._bufferService.buffer.ydisp;0!==t&&this.scrollLines(t)}registerEscHandler(e,t){return this._inputHandler.registerEscHandler(e,t)}registerDcsHandler(e,t){return this._inputHandler.registerDcsHandler(e,t)}registerCsiHandler(e,t){return this._inputHandler.registerCsiHandler(e,t)}registerOscHandler(e,t){return this._inputHandler.registerOscHandler(e,t)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let e=!1;const t=this.optionsService.rawOptions.windowsPty;t&&void 0!==t.buildNumber&&void 0!==t.buildNumber?e=!!("conpty"===t.backend&&t.buildNumber<21376):this.optionsService.rawOptions.windowsMode&&(e=!0),e?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const e=[];e.push(this.onLineFeed(f.updateWindowsModeWrappedState.bind(null,this._bufferService))),e.push(this.registerCsiHandler({final:"H"},(()=>((0,f.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,s.toDisposable)((()=>{for(const t of e)t.dispose()}))}}}t.CoreTerminal=S},8460:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.runAndSubscribe=t.forwardEvent=t.EventEmitter=void 0,t.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=e=>(this._listeners.push(e),{dispose:()=>{if(!this._disposed)for(let t=0;t<this._listeners.length;t++)if(this._listeners[t]===e)return void this._listeners.splice(t,1)}})),this._event}fire(e,t){const i=[];for(let e=0;e<this._listeners.length;e++)i.push(this._listeners[e]);for(let s=0;s<i.length;s++)i[s].call(void 0,e,t)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},t.forwardEvent=function(e,t){return e((e=>t.fire(e)))},t.runAndSubscribe=function(e,t){return t(void 0),e((e=>t(e)))}},5435:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputHandler=t.WindowsOptionsReportType=void 0;const n=i(2584),o=i(7116),a=i(2015),h=i(844),c=i(482),l=i(8437),d=i(8460),_=i(643),u=i(511),f=i(3734),v=i(2585),p=i(1480),g=i(6242),m=i(6351),S=i(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},b=131072;function w(e,t){if(e>24)return t.setWinLines||!1;switch(e){case 1:return!!t.restoreWin;case 2:return!!t.minimizeWin;case 3:return!!t.setWinPosition;case 4:return!!t.setWinSizePixels;case 5:return!!t.raiseWin;case 6:return!!t.lowerWin;case 7:return!!t.refreshWin;case 8:return!!t.setWinSizeChars;case 9:return!!t.maximizeWin;case 10:return!!t.fullscreenWin;case 11:return!!t.getWinState;case 13:return!!t.getWinPosition;case 14:return!!t.getWinSizePixels;case 15:return!!t.getScreenSizePixels;case 16:return!!t.getCellSizePixels;case 18:return!!t.getWinSizeChars;case 19:return!!t.getScreenSizeChars;case 20:return!!t.getIconTitle;case 21:return!!t.getWinTitle;case 22:return!!t.pushTitle;case 23:return!!t.popTitle;case 24:return!!t.setWinLines}return!1}var y;!function(e){e[e.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",e[e.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(y||(t.WindowsOptionsReportType=y={}));let E=0;class k extends h.Disposable{getAttrData(){return this._curAttrData}constructor(e,t,i,s,r,h,_,f,v=new a.EscapeSequenceParser){super(),this._bufferService=e,this._charsetService=t,this._coreService=i,this._logService=s,this._optionsService=r,this._oscLinkService=h,this._coreMouseService=_,this._unicodeService=f,this._parser=v,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new c.StringToUtf32,this._utf8Decoder=new c.Utf8ToUtf32,this._workCell=new u.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new L(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((e=>this._activeBuffer=e.activeBuffer))),this._parser.setCsiHandlerFallback(((e,t)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(e),params:t.toArray()})})),this._parser.setEscHandlerFallback((e=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(e)})})),this._parser.setExecuteHandlerFallback((e=>{this._logService.debug("Unknown EXECUTE code: ",{code:e})})),this._parser.setOscHandlerFallback(((e,t,i)=>{this._logService.debug("Unknown OSC code: ",{identifier:e,action:t,data:i})})),this._parser.setDcsHandlerFallback(((e,t,i)=>{"HOOK"===t&&(i=i.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(e),action:t,payload:i})})),this._parser.setPrintHandler(((e,t,i)=>this.print(e,t,i))),this._parser.registerCsiHandler({final:"@"},(e=>this.insertChars(e))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(e=>this.scrollLeft(e))),this._parser.registerCsiHandler({final:"A"},(e=>this.cursorUp(e))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(e=>this.scrollRight(e))),this._parser.registerCsiHandler({final:"B"},(e=>this.cursorDown(e))),this._parser.registerCsiHandler({final:"C"},(e=>this.cursorForward(e))),this._parser.registerCsiHandler({final:"D"},(e=>this.cursorBackward(e))),this._parser.registerCsiHandler({final:"E"},(e=>this.cursorNextLine(e))),this._parser.registerCsiHandler({final:"F"},(e=>this.cursorPrecedingLine(e))),this._parser.registerCsiHandler({final:"G"},(e=>this.cursorCharAbsolute(e))),this._parser.registerCsiHandler({final:"H"},(e=>this.cursorPosition(e))),this._parser.registerCsiHandler({final:"I"},(e=>this.cursorForwardTab(e))),this._parser.registerCsiHandler({final:"J"},(e=>this.eraseInDisplay(e,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(e=>this.eraseInDisplay(e,!0))),this._parser.registerCsiHandler({final:"K"},(e=>this.eraseInLine(e,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(e=>this.eraseInLine(e,!0))),this._parser.registerCsiHandler({final:"L"},(e=>this.insertLines(e))),this._parser.registerCsiHandler({final:"M"},(e=>this.deleteLines(e))),this._parser.registerCsiHandler({final:"P"},(e=>this.deleteChars(e))),this._parser.registerCsiHandler({final:"S"},(e=>this.scrollUp(e))),this._parser.registerCsiHandler({final:"T"},(e=>this.scrollDown(e))),this._parser.registerCsiHandler({final:"X"},(e=>this.eraseChars(e))),this._parser.registerCsiHandler({final:"Z"},(e=>this.cursorBackwardTab(e))),this._parser.registerCsiHandler({final:"`"},(e=>this.charPosAbsolute(e))),this._parser.registerCsiHandler({final:"a"},(e=>this.hPositionRelative(e))),this._parser.registerCsiHandler({final:"b"},(e=>this.repeatPrecedingCharacter(e))),this._parser.registerCsiHandler({final:"c"},(e=>this.sendDeviceAttributesPrimary(e))),this._parser.registerCsiHandler({prefix:">",final:"c"},(e=>this.sendDeviceAttributesSecondary(e))),this._parser.registerCsiHandler({final:"d"},(e=>this.linePosAbsolute(e))),this._parser.registerCsiHandler({final:"e"},(e=>this.vPositionRelative(e))),this._parser.registerCsiHandler({final:"f"},(e=>this.hVPosition(e))),this._parser.registerCsiHandler({final:"g"},(e=>this.tabClear(e))),this._parser.registerCsiHandler({final:"h"},(e=>this.setMode(e))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(e=>this.setModePrivate(e))),this._parser.registerCsiHandler({final:"l"},(e=>this.resetMode(e))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(e=>this.resetModePrivate(e))),this._parser.registerCsiHandler({final:"m"},(e=>this.charAttributes(e))),this._parser.registerCsiHandler({final:"n"},(e=>this.deviceStatus(e))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(e=>this.deviceStatusPrivate(e))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(e=>this.softReset(e))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(e=>this.setCursorStyle(e))),this._parser.registerCsiHandler({final:"r"},(e=>this.setScrollRegion(e))),this._parser.registerCsiHandler({final:"s"},(e=>this.saveCursor(e))),this._parser.registerCsiHandler({final:"t"},(e=>this.windowOptions(e))),this._parser.registerCsiHandler({final:"u"},(e=>this.restoreCursor(e))),this._parser.registerCsiHandler({intermediates:"\'",final:"}"},(e=>this.insertColumns(e))),this._parser.registerCsiHandler({intermediates:"\'",final:"~"},(e=>this.deleteColumns(e))),this._parser.registerCsiHandler({intermediates:\'"\',final:"q"},(e=>this.selectProtected(e))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(e=>this.requestMode(e,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(e=>this.requestMode(e,!1))),this._parser.setExecuteHandler(n.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(n.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(n.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(n.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(n.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(n.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(n.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(n.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(n.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(n.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new g.OscHandler((e=>(this.setTitle(e),this.setIconName(e),!0)))),this._parser.registerOscHandler(1,new g.OscHandler((e=>this.setIconName(e)))),this._parser.registerOscHandler(2,new g.OscHandler((e=>this.setTitle(e)))),this._parser.registerOscHandler(4,new g.OscHandler((e=>this.setOrReportIndexedColor(e)))),this._parser.registerOscHandler(8,new g.OscHandler((e=>this.setHyperlink(e)))),this._parser.registerOscHandler(10,new g.OscHandler((e=>this.setOrReportFgColor(e)))),this._parser.registerOscHandler(11,new g.OscHandler((e=>this.setOrReportBgColor(e)))),this._parser.registerOscHandler(12,new g.OscHandler((e=>this.setOrReportCursorColor(e)))),this._parser.registerOscHandler(104,new g.OscHandler((e=>this.restoreIndexedColor(e)))),this._parser.registerOscHandler(110,new g.OscHandler((e=>this.restoreFgColor(e)))),this._parser.registerOscHandler(111,new g.OscHandler((e=>this.restoreBgColor(e)))),this._parser.registerOscHandler(112,new g.OscHandler((e=>this.restoreCursorColor(e)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const e in o.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:e},(()=>this.selectCharset("("+e))),this._parser.registerEscHandler({intermediates:")",final:e},(()=>this.selectCharset(")"+e))),this._parser.registerEscHandler({intermediates:"*",final:e},(()=>this.selectCharset("*"+e))),this._parser.registerEscHandler({intermediates:"+",final:e},(()=>this.selectCharset("+"+e))),this._parser.registerEscHandler({intermediates:"-",final:e},(()=>this.selectCharset("-"+e))),this._parser.registerEscHandler({intermediates:".",final:e},(()=>this.selectCharset("."+e))),this._parser.registerEscHandler({intermediates:"/",final:e},(()=>this.selectCharset("/"+e)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((e=>(this._logService.error("Parsing error: ",e),e))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new m.DcsHandler(((e,t)=>this.requestStatusString(e,t))))}_preserveStack(e,t,i,s){this._parseStack.paused=!0,this._parseStack.cursorStartX=e,this._parseStack.cursorStartY=t,this._parseStack.decodedLength=i,this._parseStack.position=s}_logSlowResolvingAsync(e){this._logService.logLevel<=v.LogLevelEnum.WARN&&Promise.race([e,new Promise(((e,t)=>setTimeout((()=>t("#SLOW_TIMEOUT")),5e3)))]).catch((e=>{if("#SLOW_TIMEOUT"!==e)throw e;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(e,t){let i,s=this._activeBuffer.x,r=this._activeBuffer.y,n=0;const o=this._parseStack.paused;if(o){if(i=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,t))return this._logSlowResolvingAsync(i),i;s=this._parseStack.cursorStartX,r=this._parseStack.cursorStartY,this._parseStack.paused=!1,e.length>b&&(n=this._parseStack.position+b)}if(this._logService.logLevel<=v.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+("string"==typeof e?` "${e}"`:` "${Array.prototype.map.call(e,(e=>String.fromCharCode(e))).join("")}"`),"string"==typeof e?e.split("").map((e=>e.charCodeAt(0))):e),this._parseBuffer.length<e.length&&this._parseBuffer.length<b&&(this._parseBuffer=new Uint32Array(Math.min(e.length,b))),o||this._dirtyRowTracker.clearRange(),e.length>b)for(let t=n;t<e.length;t+=b){const n=t+b<e.length?t+b:e.length,o="string"==typeof e?this._stringDecoder.decode(e.substring(t,n),this._parseBuffer):this._utf8Decoder.decode(e.subarray(t,n),this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,o))return this._preserveStack(s,r,o,t),this._logSlowResolvingAsync(i),i}else if(!o){const t="string"==typeof e?this._stringDecoder.decode(e,this._parseBuffer):this._utf8Decoder.decode(e,this._parseBuffer);if(i=this._parser.parse(this._parseBuffer,t))return this._preserveStack(s,r,t,0),this._logSlowResolvingAsync(i),i}this._activeBuffer.x===s&&this._activeBuffer.y===r||this._onCursorMove.fire();const a=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),h=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);h<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(h,this._bufferService.rows-1),Math.min(a,this._bufferService.rows-1))}print(e,t,i){let s,r;const n=this._charsetService.charset,o=this._optionsService.rawOptions.screenReaderMode,a=this._bufferService.cols,h=this._coreService.decPrivateModes.wraparound,d=this._coreService.modes.insertMode,u=this._curAttrData;let f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&i-t>0&&2===f.getWidth(this._activeBuffer.x-1)&&f.setCellFromCodepoint(this._activeBuffer.x-1,0,1,u);let v=this._parser.precedingJoinState;for(let g=t;g<i;++g){if(s=e[g],s<127&&n){const e=n[String.fromCharCode(s)];e&&(s=e.charCodeAt(0))}const t=this._unicodeService.charProperties(s,v);r=p.UnicodeService.extractWidth(t);const i=p.UnicodeService.extractShouldJoin(t),m=i?p.UnicodeService.extractWidth(v):0;if(v=t,o&&this._onA11yChar.fire((0,c.stringFromCodePoint)(s)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+r-m>a)if(h){const e=f;let t=this._activeBuffer.x-m;for(this._activeBuffer.x=m,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),f=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),m>0&&f instanceof l.BufferLine&&f.copyCellsFrom(e,t,0,m,!1);t<a;)e.setCellFromCodepoint(t++,0,1,u)}else if(this._activeBuffer.x=a-1,2===r)continue;if(i&&this._activeBuffer.x){const e=f.getWidth(this._activeBuffer.x-1)?1:2;f.addCodepointToCell(this._activeBuffer.x-e,s,r);for(let e=r-m;--e>=0;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,u)}else if(d&&(f.insertCells(this._activeBuffer.x,r-m,this._activeBuffer.getNullCell(u)),2===f.getWidth(a-1)&&f.setCellFromCodepoint(a-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,u)),f.setCellFromCodepoint(this._activeBuffer.x++,s,r,u),r>0)for(;--r;)f.setCellFromCodepoint(this._activeBuffer.x++,0,0,u)}this._parser.precedingJoinState=v,this._activeBuffer.x<a&&i-t>0&&0===f.getWidth(this._activeBuffer.x)&&!f.hasContent(this._activeBuffer.x)&&f.setCellFromCodepoint(this._activeBuffer.x,0,1,u),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(e,t){return"t"!==e.final||e.prefix||e.intermediates?this._parser.registerCsiHandler(e,t):this._parser.registerCsiHandler(e,(e=>!w(e.params[0],this._optionsService.rawOptions.windowOptions)||t(e)))}registerDcsHandler(e,t){return this._parser.registerDcsHandler(e,new m.DcsHandler(t))}registerEscHandler(e,t){return this._parser.registerEscHandler(e,t)}registerOscHandler(e,t){return this._parser.registerOscHandler(e,new g.OscHandler(t))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(0===this._activeBuffer.x&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const e=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);e.hasWidth(this._activeBuffer.x)&&!e.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const e=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-e),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(e=this._bufferService.cols-1){this._activeBuffer.x=Math.min(e,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(e,t){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=e,this._activeBuffer.y=this._activeBuffer.scrollTop+t):(this._activeBuffer.x=e,this._activeBuffer.y=t),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(e,t){this._restrictCursor(),this._setCursor(this._activeBuffer.x+e,this._activeBuffer.y+t)}cursorUp(e){const t=this._activeBuffer.y-this._activeBuffer.scrollTop;return t>=0?this._moveCursor(0,-Math.min(t,e.params[0]||1)):this._moveCursor(0,-(e.params[0]||1)),!0}cursorDown(e){const t=this._activeBuffer.scrollBottom-this._activeBuffer.y;return t>=0?this._moveCursor(0,Math.min(t,e.params[0]||1)):this._moveCursor(0,e.params[0]||1),!0}cursorForward(e){return this._moveCursor(e.params[0]||1,0),!0}cursorBackward(e){return this._moveCursor(-(e.params[0]||1),0),!0}cursorNextLine(e){return this.cursorDown(e),this._activeBuffer.x=0,!0}cursorPrecedingLine(e){return this.cursorUp(e),this._activeBuffer.x=0,!0}cursorCharAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(e){return this._setCursor(e.length>=2?(e.params[1]||1)-1:0,(e.params[0]||1)-1),!0}charPosAbsolute(e){return this._setCursor((e.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(e){return this._moveCursor(e.params[0]||1,0),!0}linePosAbsolute(e){return this._setCursor(this._activeBuffer.x,(e.params[0]||1)-1),!0}vPositionRelative(e){return this._moveCursor(0,e.params[0]||1),!0}hVPosition(e){return this.cursorPosition(e),!0}tabClear(e){const t=e.params[0];return 0===t?delete this._activeBuffer.tabs[this._activeBuffer.x]:3===t&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(e){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let t=e.params[0]||1;for(;t--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(e){const t=e.params[0];return 1===t&&(this._curAttrData.bg|=536870912),2!==t&&0!==t||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(e,t,i,s=!1,r=!1){const n=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);n.replaceCells(t,i,this._activeBuffer.getNullCell(this._eraseAttrData()),r),s&&(n.isWrapped=!1)}_resetBufferLine(e,t=!1){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i&&(i.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),t),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+e),i.isWrapped=!1)}eraseInDisplay(e,t=!1){let i;switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i++,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);i<this._bufferService.rows;i++)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(i);break;case 1:for(i=this._activeBuffer.y,this._dirtyRowTracker.markDirty(i),this._eraseInBufferLine(i,0,this._activeBuffer.x+1,!0,t),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(i+1).isWrapped=!1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 2:for(i=this._bufferService.rows,this._dirtyRowTracker.markDirty(i-1);i--;)this._resetBufferLine(i,t);this._dirtyRowTracker.markDirty(0);break;case 3:const e=this._activeBuffer.lines.length-this._bufferService.rows;e>0&&(this._activeBuffer.lines.trimStart(e),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-e,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-e,0),this._onScroll.fire(0))}return!0}eraseInLine(e,t=!1){switch(this._restrictCursor(this._bufferService.cols),e.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,0===this._activeBuffer.x,t);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,t);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,t)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y,s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,r=this._bufferService.rows-1+this._activeBuffer.ybase-s+1;for(;t--;)this._activeBuffer.lines.splice(r-1,1),this._activeBuffer.lines.splice(i,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(e){this._restrictCursor();let t=e.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const i=this._activeBuffer.ybase+this._activeBuffer.y;let s;for(s=this._bufferService.rows-1-this._activeBuffer.scrollBottom,s=this._bufferService.rows-1+this._activeBuffer.ybase-s;t--;)this._activeBuffer.lines.splice(i,1),this._activeBuffer.lines.splice(s,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.insertCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.deleteCells(this._activeBuffer.x,e.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(e){let t=e.params[0]||1;for(;t--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(0,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.insertCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(e){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const t=e.params[0]||1;for(let e=this._activeBuffer.scrollTop;e<=this._activeBuffer.scrollBottom;++e){const i=this._activeBuffer.lines.get(this._activeBuffer.ybase+e);i.deleteCells(this._activeBuffer.x,t,this._activeBuffer.getNullCell(this._eraseAttrData())),i.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(e){this._restrictCursor();const t=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return t&&(t.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(e.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(e){const t=this._parser.precedingJoinState;if(!t)return!0;const i=e.params[0]||1,s=p.UnicodeService.extractWidth(t),r=this._activeBuffer.x-s,n=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(r),o=new Uint32Array(n.length*i);let a=0;for(let e=0;e<n.length;){const t=n.codePointAt(e)||0;o[a++]=t,e+=t>65535?2:1}let h=a;for(let e=1;e<i;++e)o.copyWithin(h,0,a),h+=a;return this.print(o,0,h),!0}sendDeviceAttributesPrimary(e){return e.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(n.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(n.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(e){return e.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(n.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(n.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(e.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(n.C0.ESC+"[>83;40003;0c")),!0}_is(e){return 0===(this._optionsService.rawOptions.termName+"").indexOf(e)}setMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),this._charsetService.setgCharset(1,o.DEFAULT_CHARSET),this._charsetService.setgCharset(2,o.DEFAULT_CHARSET),this._charsetService.setgCharset(3,o.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(e){for(let t=0;t<e.length;t++)switch(e.params[t]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===e.params[t]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(e,t){const i=this._coreService.decPrivateModes,{activeProtocol:s,activeEncoding:r}=this._coreMouseService,o=this._coreService,{buffers:a,cols:h}=this._bufferService,{active:c,alt:l}=a,d=this._optionsService.rawOptions,_=e=>e?1:2,u=e.params[0];return f=u,v=t?2===u?4:4===u?_(o.modes.insertMode):12===u?3:20===u?_(d.convertEol):0:1===u?_(i.applicationCursorKeys):3===u?d.windowOptions.setWinLines?80===h?2:132===h?1:0:0:6===u?_(i.origin):7===u?_(i.wraparound):8===u?3:9===u?_("X10"===s):12===u?_(d.cursorBlink):25===u?_(!o.isCursorHidden):45===u?_(i.reverseWraparound):66===u?_(i.applicationKeypad):67===u?4:1e3===u?_("VT200"===s):1002===u?_("DRAG"===s):1003===u?_("ANY"===s):1004===u?_(i.sendFocus):1005===u?4:1006===u?_("SGR"===r):1015===u?4:1016===u?_("SGR_PIXELS"===r):1048===u?1:47===u||1047===u||1049===u?_(c===l):2004===u?_(i.bracketedPasteMode):0,o.triggerDataEvent(`${n.C0.ESC}[${t?"":"?"}${f};${v}$y`),!0;// removed by dead control flow\n{ var f, v; }}_updateAttrColor(e,t,i,s,r){return 2===t?(e|=50331648,e&=-16777216,e|=f.AttributeData.fromColorRGB([i,s,r])):5===t&&(e&=-50331904,e|=33554432|255&i),e}_extractColor(e,t,i){const s=[0,0,-1,0,0,0];let r=0,n=0;do{if(s[n+r]=e.params[t+n],e.hasSubParams(t+n)){const i=e.getSubParams(t+n);let o=0;do{5===s[1]&&(r=1),s[n+o+1+r]=i[o]}while(++o<i.length&&o+n+1+r<s.length);break}if(5===s[1]&&n+r>=2||2===s[1]&&n+r>=5)break;s[1]&&(r=1)}while(++n+t<e.length&&n+r<s.length);for(let e=2;e<s.length;++e)-1===s[e]&&(s[e]=0);switch(s[0]){case 38:i.fg=this._updateAttrColor(i.fg,s[1],s[3],s[4],s[5]);break;case 48:i.bg=this._updateAttrColor(i.bg,s[1],s[3],s[4],s[5]);break;case 58:i.extended=i.extended.clone(),i.extended.underlineColor=this._updateAttrColor(i.extended.underlineColor,s[1],s[3],s[4],s[5])}return n}_processUnderline(e,t){t.extended=t.extended.clone(),(!~e||e>5)&&(e=1),t.extended.underlineStyle=e,t.fg|=268435456,0===e&&(t.fg&=-268435457),t.updateExtended()}_processSGR0(e){e.fg=l.DEFAULT_ATTR_DATA.fg,e.bg=l.DEFAULT_ATTR_DATA.bg,e.extended=e.extended.clone(),e.extended.underlineStyle=0,e.extended.underlineColor&=-67108864,e.updateExtended()}charAttributes(e){if(1===e.length&&0===e.params[0])return this._processSGR0(this._curAttrData),!0;const t=e.length;let i;const s=this._curAttrData;for(let r=0;r<t;r++)i=e.params[r],i>=30&&i<=37?(s.fg&=-50331904,s.fg|=16777216|i-30):i>=40&&i<=47?(s.bg&=-50331904,s.bg|=16777216|i-40):i>=90&&i<=97?(s.fg&=-50331904,s.fg|=16777224|i-90):i>=100&&i<=107?(s.bg&=-50331904,s.bg|=16777224|i-100):0===i?this._processSGR0(s):1===i?s.fg|=134217728:3===i?s.bg|=67108864:4===i?(s.fg|=268435456,this._processUnderline(e.hasSubParams(r)?e.getSubParams(r)[0]:1,s)):5===i?s.fg|=536870912:7===i?s.fg|=67108864:8===i?s.fg|=1073741824:9===i?s.fg|=2147483648:2===i?s.bg|=134217728:21===i?this._processUnderline(2,s):22===i?(s.fg&=-134217729,s.bg&=-134217729):23===i?s.bg&=-67108865:24===i?(s.fg&=-268435457,this._processUnderline(0,s)):25===i?s.fg&=-536870913:27===i?s.fg&=-67108865:28===i?s.fg&=-1073741825:29===i?s.fg&=2147483647:39===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):49===i?(s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):38===i||48===i||58===i?r+=this._extractColor(e,r,s):53===i?s.bg|=1073741824:55===i?s.bg&=-1073741825:59===i?(s.extended=s.extended.clone(),s.extended.underlineColor=-1,s.updateExtended()):100===i?(s.fg&=-67108864,s.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,s.bg&=-67108864,s.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",i);return!0}deviceStatus(e){switch(e.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${e};${t}R`)}return!0}deviceStatusPrivate(e){if(6===e.params[0]){const e=this._activeBuffer.y+1,t=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${e};${t}R`)}return!0}softReset(e){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(e){const t=e.params[0]||1;switch(t){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const i=t%2==1;return this._optionsService.options.cursorBlink=i,!0}setScrollRegion(e){const t=e.params[0]||1;let i;return(e.length<2||(i=e.params[1])>this._bufferService.rows||0===i)&&(i=this._bufferService.rows),i>t&&(this._activeBuffer.scrollTop=t-1,this._activeBuffer.scrollBottom=i-1,this._setCursor(0,0)),!0}windowOptions(e){if(!w(e.params[0],this._optionsService.rawOptions.windowOptions))return!0;const t=e.length>1?e.params[1]:0;switch(e.params[0]){case 14:2!==t&&this._onRequestWindowsOptionsReport.fire(y.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(y.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:0!==t&&2!==t||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==t&&1!==t||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==t&&2!==t||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==t&&1!==t||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(e){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(e){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(e){return this._windowTitle=e,this._onTitleChange.fire(e),!0}setIconName(e){return this._iconName=e,!0}setOrReportIndexedColor(e){const t=[],i=e.split(";");for(;i.length>1;){const e=i.shift(),s=i.shift();if(/^\\d+$/.exec(e)){const i=parseInt(e);if(D(i))if("?"===s)t.push({type:0,index:i});else{const e=(0,S.parseColor)(s);e&&t.push({type:1,index:i,color:e})}}}return t.length&&this._onColor.fire(t),!0}setHyperlink(e){const t=e.split(";");return!(t.length<2)&&(t[1]?this._createHyperlink(t[0],t[1]):!t[0]&&this._finishHyperlink())}_createHyperlink(e,t){this._getCurrentLinkId()&&this._finishHyperlink();const i=e.split(":");let s;const r=i.findIndex((e=>e.startsWith("id=")));return-1!==r&&(s=i[r].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:s,uri:t}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(e,t){const i=e.split(";");for(let e=0;e<i.length&&!(t>=this._specialColors.length);++e,++t)if("?"===i[e])this._onColor.fire([{type:0,index:this._specialColors[t]}]);else{const s=(0,S.parseColor)(i[e]);s&&this._onColor.fire([{type:1,index:this._specialColors[t],color:s}])}return!0}setOrReportFgColor(e){return this._setOrReportSpecialColor(e,0)}setOrReportBgColor(e){return this._setOrReportSpecialColor(e,1)}setOrReportCursorColor(e){return this._setOrReportSpecialColor(e,2)}restoreIndexedColor(e){if(!e)return this._onColor.fire([{type:2}]),!0;const t=[],i=e.split(";");for(let e=0;e<i.length;++e)if(/^\\d+$/.exec(i[e])){const s=parseInt(i[e]);D(s)&&t.push({type:2,index:s})}return t.length&&this._onColor.fire(t),!0}restoreFgColor(e){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(e){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(e){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,o.DEFAULT_CHARSET),!0}selectCharset(e){return 2!==e.length?(this.selectDefaultCharset(),!0):("/"===e[0]||this._charsetService.setgCharset(C[e[0]],o.CHARSETS[e[1]]||o.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const e=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,e,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(e){return this._charsetService.setgLevel(e),!0}screenAlignmentPattern(){const e=new u.CellData;e.content=1<<22|"E".charCodeAt(0),e.fg=this._curAttrData.fg,e.bg=this._curAttrData.bg,this._setCursor(0,0);for(let t=0;t<this._bufferService.rows;++t){const i=this._activeBuffer.ybase+this._activeBuffer.y+t,s=this._activeBuffer.lines.get(i);s&&(s.fill(e),s.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(e,t){const i=this._bufferService.buffer,s=this._optionsService.rawOptions;return(e=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${e}${n.C0.ESC}\\\\`),!0))(\'"q\'===e?`P1$r${this._curAttrData.isProtected()?1:0}"q`:\'"p\'===e?\'P1$r61;1"p\':"r"===e?`P1$r${i.scrollTop+1};${i.scrollBottom+1}r`:"m"===e?"P1$r0m":" q"===e?`P1$r${{block:2,underline:4,bar:6}[s.cursorStyle]-(s.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(e,t){this._dirtyRowTracker.markRangeDirty(e,t)}}t.InputHandler=k;let L=class{constructor(e){this._bufferService=e,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(e){e<this.start?this.start=e:e>this.end&&(this.end=e)}markRangeDirty(e,t){e>t&&(E=e,e=t,t=E),e<this.start&&(this.start=e),t>this.end&&(this.end=t)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function D(e){return 0<=e&&e<256}L=s([r(0,v.IBufferService)],L)},844:(e,t)=>{function i(e){for(const t of e)t.dispose();e.length=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDisposeArrayDisposable=t.disposeArray=t.toDisposable=t.MutableDisposable=t.Disposable=void 0,t.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const e of this._disposables)e.dispose();this._disposables.length=0}register(e){return this._disposables.push(e),e}unregister(e){const t=this._disposables.indexOf(e);-1!==t&&this._disposables.splice(t,1)}},t.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},t.toDisposable=function(e){return{dispose:e}},t.disposeArray=i,t.getDisposeArrayDisposable=function(e){return{dispose:()=>i(e)}}},1505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FourKeyMap=t.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(e,t,i){this._data[e]||(this._data[e]={}),this._data[e][t]=i}get(e,t){return this._data[e]?this._data[e][t]:void 0}clear(){this._data={}}}t.TwoKeyMap=i,t.FourKeyMap=class{constructor(){this._data=new i}set(e,t,s,r,n){this._data.get(e,t)||this._data.set(e,t,new i),this._data.get(e,t).set(s,r,n)}get(e,t,i,s){return this._data.get(e,t)?.get(i,s)}clear(){this._data.clear()}}},6114:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isChromeOS=t.isLinux=t.isWindows=t.isIphone=t.isIpad=t.isMac=t.getSafariVersion=t.isSafari=t.isLegacyEdge=t.isFirefox=t.isNode=void 0,t.isNode="undefined"!=typeof process&&"title"in process;const i=t.isNode?"node":navigator.userAgent,s=t.isNode?"node":navigator.platform;t.isFirefox=i.includes("Firefox"),t.isLegacyEdge=i.includes("Edge"),t.isSafari=/^((?!chrome|android).)*safari/i.test(i),t.getSafariVersion=function(){if(!t.isSafari)return 0;const e=i.match(/Version\\/(\\d+)/);return null===e||e.length<2?0:parseInt(e[1])},t.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(s),t.isIpad="iPad"===s,t.isIphone="iPhone"===s,t.isWindows=["Windows","Win16","Win32","WinCE"].includes(s),t.isLinux=s.indexOf("Linux")>=0,t.isChromeOS=/\\bCrOS\\b/.test(i)},6106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SortedList=void 0;let i=0;t.SortedList=class{constructor(e){this._getKey=e,this._array=[]}clear(){this._array.length=0}insert(e){0!==this._array.length?(i=this._search(this._getKey(e)),this._array.splice(i,0,e)):this._array.push(e)}delete(e){if(0===this._array.length)return!1;const t=this._getKey(e);if(void 0===t)return!1;if(i=this._search(t),-1===i)return!1;if(this._getKey(this._array[i])!==t)return!1;do{if(this._array[i]===e)return this._array.splice(i,1),!0}while(++i<this._array.length&&this._getKey(this._array[i])===t);return!1}*getKeyIterator(e){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{yield this._array[i]}while(++i<this._array.length&&this._getKey(this._array[i])===e)}forEachByKey(e,t){if(0!==this._array.length&&(i=this._search(e),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===e))do{t(this._array[i])}while(++i<this._array.length&&this._getKey(this._array[i])===e)}values(){return[...this._array].values()}_search(e){let t=0,i=this._array.length-1;for(;i>=t;){let s=t+i>>1;const r=this._getKey(this._array[s]);if(r>e)i=s-1;else{if(!(r<e)){for(;s>0&&this._getKey(this._array[s-1])===e;)s--;return s}t=s+1}}return t}}},7226:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DebouncedIdleTask=t.IdleTaskQueue=t.PriorityTaskQueue=void 0;const s=i(6114);class r{constructor(){this._tasks=[],this._i=0}enqueue(e){this._tasks.push(e),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(e){this._idleCallback=void 0;let t=0,i=0,s=e.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(t=Date.now(),this._tasks[this._i]()||this._i++,t=Math.max(1,Date.now()-t),i=Math.max(t,i),r=e.timeRemaining(),1.5*i>r)return s-t<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(s-t))}ms`),void this._start();s=r}this.clear()}}class n extends r{_requestCallback(e){return setTimeout((()=>e(this._createDeadline(16))))}_cancelCallback(e){clearTimeout(e)}_createDeadline(e){const t=Date.now()+e;return{timeRemaining:()=>Math.max(0,t-Date.now())}}}t.PriorityTaskQueue=n,t.IdleTaskQueue=!s.isNode&&"requestIdleCallback"in window?class extends r{_requestCallback(e){return requestIdleCallback(e)}_cancelCallback(e){cancelIdleCallback(e)}}:n,t.DebouncedIdleTask=class{constructor(){this._queue=new t.IdleTaskQueue}set(e){this._queue.clear(),this._queue.enqueue(e)}flush(){this._queue.flush()}}},9282:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateWindowsModeWrappedState=void 0;const s=i(643);t.updateWindowsModeWrappedState=function(e){const t=e.buffer.lines.get(e.buffer.ybase+e.buffer.y-1),i=t?.get(e.cols-1),r=e.buffer.lines.get(e.buffer.ybase+e.buffer.y);r&&i&&(r.isWrapped=i[s.CHAR_DATA_CODE_INDEX]!==s.NULL_CELL_CODE&&i[s.CHAR_DATA_CODE_INDEX]!==s.WHITESPACE_CELL_CODE)}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedAttrs=t.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new s}static toColorRGB(e){return[e>>>16&255,e>>>8&255,255&e]}static fromColorRGB(e){return(255&e[0])<<16|(255&e[1])<<8|255&e[2]}clone(){const e=new i;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&0!==this.extended.underlineStyle?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return 50331648==(50331648&this.fg)}isBgRGB(){return 50331648==(50331648&this.bg)}isFgPalette(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)}isBgPalette(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)}isFgDefault(){return 0==(50331648&this.fg)}isBgDefault(){return 0==(50331648&this.bg)}isAttributeDefault(){return 0===this.fg&&0===this.bg}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}t.AttributeData=i;class s{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(e){this._ext=e}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(e){this._ext&=-469762049,this._ext|=e<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(e){this._ext&=-67108864,this._ext|=67108863&e}get urlId(){return this._urlId}set urlId(e){this._urlId=e}get underlineVariantOffset(){const e=(3758096384&this._ext)>>29;return e<0?4294967288^e:e}set underlineVariantOffset(e){this._ext&=536870911,this._ext|=e<<29&3758096384}constructor(e=0,t=0){this._ext=0,this._urlId=0,this._ext=e,this._urlId=t}clone(){return new s(this._ext,this._urlId)}isEmpty(){return 0===this.underlineStyle&&0===this._urlId}}t.ExtendedAttrs=s},9092:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=t.MAX_BUFFER_SIZE=void 0;const s=i(6349),r=i(7226),n=i(3734),o=i(8437),a=i(4634),h=i(511),c=i(643),l=i(4863),d=i(7116);t.MAX_BUFFER_SIZE=4294967295,t.Buffer=class{constructor(e,t,i){this._hasScrollback=e,this._optionsService=t,this._bufferService=i,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=h.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=h.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new r.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(e){return e?(this._nullCell.fg=e.fg,this._nullCell.bg=e.bg,this._nullCell.extended=e.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new n.ExtendedAttrs),this._nullCell}getWhitespaceCell(e){return e?(this._whitespaceCell.fg=e.fg,this._whitespaceCell.bg=e.bg,this._whitespaceCell.extended=e.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new n.ExtendedAttrs),this._whitespaceCell}getBlankLine(e,t){return new o.BufferLine(this._bufferService.cols,this.getNullCell(e),t)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const e=this.ybase+this.y-this.ydisp;return e>=0&&e<this._rows}_getCorrectBufferLength(e){if(!this._hasScrollback)return e;const i=e+this._optionsService.rawOptions.scrollback;return i>t.MAX_BUFFER_SIZE?t.MAX_BUFFER_SIZE:i}fillViewportRows(e){if(0===this.lines.length){void 0===e&&(e=o.DEFAULT_ATTR_DATA);let t=this._rows;for(;t--;)this.lines.push(this.getBlankLine(e))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new s.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA);let s=0;const r=this._getCorrectBufferLength(t);if(r>this.lines.maxLength&&(this.lines.maxLength=r),this.lines.length>0){if(this._cols<e)for(let t=0;t<this.lines.length;t++)s+=+this.lines.get(t).resize(e,i);let n=0;if(this._rows<t)for(let s=this._rows;s<t;s++)this.lines.length<t+this.ybase&&(this._optionsService.rawOptions.windowsMode||void 0!==this._optionsService.rawOptions.windowsPty.backend||void 0!==this._optionsService.rawOptions.windowsPty.buildNumber?this.lines.push(new o.BufferLine(e,i)):this.ybase>0&&this.lines.length<=this.ybase+this.y+n+1?(this.ybase--,n++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(e,i)));else for(let e=this._rows;e>t;e--)this.lines.length>t+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(r<this.lines.maxLength){const e=this.lines.length-r;e>0&&(this.lines.trimStart(e),this.ybase=Math.max(this.ybase-e,0),this.ydisp=Math.max(this.ydisp-e,0),this.savedY=Math.max(this.savedY-e,0)),this.lines.maxLength=r}this.x=Math.min(this.x,e-1),this.y=Math.min(this.y,t-1),n&&(this.y+=n),this.savedX=Math.min(this.savedX,e-1),this.scrollTop=0}if(this.scrollBottom=t-1,this._isReflowEnabled&&(this._reflow(e,t),this._cols>e))for(let t=0;t<this.lines.length;t++)s+=+this.lines.get(t).resize(e,i);this._cols=e,this._rows=t,this._memoryCleanupQueue.clear(),s>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let e=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,e=!1);let t=0;for(;this._memoryCleanupPosition<this.lines.length;)if(t+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),t>100)return!0;return e}get _isReflowEnabled(){const e=this._optionsService.rawOptions.windowsPty;return e&&e.buildNumber?this._hasScrollback&&"conpty"===e.backend&&e.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(e,t){this._cols!==e&&(e>this._cols?this._reflowLarger(e,t):this._reflowSmaller(e,t))}_reflowLarger(e,t){const i=(0,a.reflowLargerGetLinesToRemove)(this.lines,this._cols,e,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(i.length>0){const s=(0,a.reflowLargerCreateNewLayout)(this.lines,i);(0,a.reflowLargerApplyNewLayout)(this.lines,s.layout),this._reflowLargerAdjustViewport(e,t,s.countRemoved)}}_reflowLargerAdjustViewport(e,t,i){const s=this.getNullCell(o.DEFAULT_ATTR_DATA);let r=i;for(;r-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<t&&this.lines.push(new o.BufferLine(e,s))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-i,0)}_reflowSmaller(e,t){const i=this.getNullCell(o.DEFAULT_ATTR_DATA),s=[];let r=0;for(let n=this.lines.length-1;n>=0;n--){let h=this.lines.get(n);if(!h||!h.isWrapped&&h.getTrimmedLength()<=e)continue;const c=[h];for(;h.isWrapped&&n>0;)h=this.lines.get(--n),c.unshift(h);const l=this.ybase+this.y;if(l>=n&&l<n+c.length)continue;const d=c[c.length-1].getTrimmedLength(),_=(0,a.reflowSmallerGetNewLineLengths)(c,this._cols,e),u=_.length-c.length;let f;f=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+u):Math.max(0,this.lines.length-this.lines.maxLength+u);const v=[];for(let e=0;e<u;e++){const e=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);v.push(e)}v.length>0&&(s.push({start:n+c.length+r,newLines:v}),r+=v.length),c.push(...v);let p=_.length-1,g=_[p];0===g&&(p--,g=_[p]);let m=c.length-u-1,S=d;for(;m>=0;){const e=Math.min(S,g);if(void 0===c[p])break;if(c[p].copyCellsFrom(c[m],S-e,g-e,e,!0),g-=e,0===g&&(p--,g=_[p]),S-=e,0===S){m--;const e=Math.max(m,0);S=(0,a.getWrappedLineTrimmedLength)(c,e,this._cols)}}for(let t=0;t<c.length;t++)_[t]<e&&c[t].setCell(_[t],i);let C=u-f;for(;C-- >0;)0===this.ybase?this.y<t-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+r)-t&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+u,this.ybase+t-1)}if(s.length>0){const e=[],t=[];for(let e=0;e<this.lines.length;e++)t.push(this.lines.get(e));const i=this.lines.length;let n=i-1,o=0,a=s[o];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+r);let h=0;for(let c=Math.min(this.lines.maxLength-1,i+r-1);c>=0;c--)if(a&&a.start>n+h){for(let e=a.newLines.length-1;e>=0;e--)this.lines.set(c--,a.newLines[e]);c++,e.push({index:n+1,amount:a.newLines.length}),h+=a.newLines.length,a=s[++o]}else this.lines.set(c,t[n--]);let c=0;for(let t=e.length-1;t>=0;t--)e[t].index+=c,this.lines.onInsertEmitter.fire(e[t]),c+=e[t].amount;const l=Math.max(0,i+r-this.lines.maxLength);l>0&&this.lines.onTrimEmitter.fire(l)}}translateBufferLineToString(e,t,i=0,s){const r=this.lines.get(e);return r?r.translateToString(t,i,s):""}getWrappedRangeForLine(e){let t=e,i=e;for(;t>0&&this.lines.get(t).isWrapped;)t--;for(;i+1<this.lines.length&&this.lines.get(i+1).isWrapped;)i++;return{first:t,last:i}}setupTabStops(e){for(null!=e?this.tabs[e]||(e=this.prevStop(e)):(this.tabs={},e=0);e<this._cols;e+=this._optionsService.rawOptions.tabStopWidth)this.tabs[e]=!0}prevStop(e){for(null==e&&(e=this.x);!this.tabs[--e]&&e>0;);return e>=this._cols?this._cols-1:e<0?0:e}nextStop(e){for(null==e&&(e=this.x);!this.tabs[++e]&&e<this._cols;);return e>=this._cols?this._cols-1:e<0?0:e}clearMarkers(e){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].line===e&&(this.markers[t].dispose(),this.markers.splice(t--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let e=0;e<this.markers.length;e++)this.markers[e].dispose(),this.markers.splice(e--,1);this._isClearing=!1}addMarker(e){const t=new l.Marker(e);return this.markers.push(t),t.register(this.lines.onTrim((e=>{t.line-=e,t.line<0&&t.dispose()}))),t.register(this.lines.onInsert((e=>{t.line>=e.index&&(t.line+=e.amount)}))),t.register(this.lines.onDelete((e=>{t.line>=e.index&&t.line<e.index+e.amount&&t.dispose(),t.line>e.index&&(t.line-=e.amount)}))),t.register(t.onDispose((()=>this._removeMarker(t)))),t}_removeMarker(e){this._isClearing||this.markers.splice(this.markers.indexOf(e),1)}}},8437:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLine=t.DEFAULT_ATTR_DATA=void 0;const s=i(3734),r=i(511),n=i(643),o=i(482);t.DEFAULT_ATTR_DATA=Object.freeze(new s.AttributeData);let a=0;class h{constructor(e,t,i=!1){this.isWrapped=i,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*e);const s=t||r.CellData.fromCharData([0,n.NULL_CELL_CHAR,n.NULL_CELL_WIDTH,n.NULL_CELL_CODE]);for(let t=0;t<e;++t)this.setCell(t,s);this.length=e}get(e){const t=this._data[3*e+0],i=2097151&t;return[this._data[3*e+1],2097152&t?this._combined[e]:i?(0,o.stringFromCodePoint)(i):"",t>>22,2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):i]}set(e,t){this._data[3*e+1]=t[n.CHAR_DATA_ATTR_INDEX],t[n.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[e]=t[1],this._data[3*e+0]=2097152|e|t[n.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*e+0]=t[n.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[n.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(e){return this._data[3*e+0]>>22}hasWidth(e){return 12582912&this._data[3*e+0]}getFg(e){return this._data[3*e+1]}getBg(e){return this._data[3*e+2]}hasContent(e){return 4194303&this._data[3*e+0]}getCodePoint(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e].charCodeAt(this._combined[e].length-1):2097151&t}isCombined(e){return 2097152&this._data[3*e+0]}getString(e){const t=this._data[3*e+0];return 2097152&t?this._combined[e]:2097151&t?(0,o.stringFromCodePoint)(2097151&t):""}isProtected(e){return 536870912&this._data[3*e+2]}loadCell(e,t){return a=3*e,t.content=this._data[a+0],t.fg=this._data[a+1],t.bg=this._data[a+2],2097152&t.content&&(t.combinedData=this._combined[e]),268435456&t.bg&&(t.extended=this._extendedAttrs[e]),t}setCell(e,t){2097152&t.content&&(this._combined[e]=t.combinedData),268435456&t.bg&&(this._extendedAttrs[e]=t.extended),this._data[3*e+0]=t.content,this._data[3*e+1]=t.fg,this._data[3*e+2]=t.bg}setCellFromCodepoint(e,t,i,s){268435456&s.bg&&(this._extendedAttrs[e]=s.extended),this._data[3*e+0]=t|i<<22,this._data[3*e+1]=s.fg,this._data[3*e+2]=s.bg}addCodepointToCell(e,t,i){let s=this._data[3*e+0];2097152&s?this._combined[e]+=(0,o.stringFromCodePoint)(t):2097151&s?(this._combined[e]=(0,o.stringFromCodePoint)(2097151&s)+(0,o.stringFromCodePoint)(t),s&=-2097152,s|=2097152):s=t|1<<22,i&&(s&=-12582913,s|=i<<22),this._data[3*e+0]=s}insertCells(e,t,i){if((e%=this.length)&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length-e){const s=new r.CellData;for(let i=this.length-e-t-1;i>=0;--i)this.setCell(e+t+i,this.loadCell(e+i,s));for(let s=0;s<t;++s)this.setCell(e+s,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);2===this.getWidth(this.length-1)&&this.setCellFromCodepoint(this.length-1,0,1,i)}deleteCells(e,t,i){if(e%=this.length,t<this.length-e){const s=new r.CellData;for(let i=0;i<this.length-e-t;++i)this.setCell(e+i,this.loadCell(e+t+i,s));for(let e=this.length-t;e<this.length;++e)this.setCell(e,i)}else for(let t=e;t<this.length;++t)this.setCell(t,i);e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),0!==this.getWidth(e)||this.hasContent(e)||this.setCellFromCodepoint(e,0,1,i)}replaceCells(e,t,i,s=!1){if(s)for(e&&2===this.getWidth(e-1)&&!this.isProtected(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length&&2===this.getWidth(t-1)&&!this.isProtected(t)&&this.setCellFromCodepoint(t,0,1,i);e<t&&e<this.length;)this.isProtected(e)||this.setCell(e,i),e++;else for(e&&2===this.getWidth(e-1)&&this.setCellFromCodepoint(e-1,0,1,i),t<this.length&&2===this.getWidth(t-1)&&this.setCellFromCodepoint(t,0,1,i);e<t&&e<this.length;)this.setCell(e++,i)}resize(e,t){if(e===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const i=3*e;if(e>this.length){if(this._data.buffer.byteLength>=4*i)this._data=new Uint32Array(this._data.buffer,0,i);else{const e=new Uint32Array(i);e.set(this._data),this._data=e}for(let i=this.length;i<e;++i)this.setCell(i,t)}else{this._data=this._data.subarray(0,i);const t=Object.keys(this._combined);for(let i=0;i<t.length;i++){const s=parseInt(t[i],10);s>=e&&delete this._combined[s]}const s=Object.keys(this._extendedAttrs);for(let t=0;t<s.length;t++){const i=parseInt(s[t],10);i>=e&&delete this._extendedAttrs[i]}}return this.length=e,4*i*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const e=new Uint32Array(this._data.length);return e.set(this._data),this._data=e,1}return 0}fill(e,t=!1){if(t)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,e);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,e)}}copyFrom(e){this.length!==e.length?this._data=new Uint32Array(e._data):this._data.set(e._data),this.length=e.length,this._combined={};for(const t in e._combined)this._combined[t]=e._combined[t];this._extendedAttrs={};for(const t in e._extendedAttrs)this._extendedAttrs[t]=e._extendedAttrs[t];this.isWrapped=e.isWrapped}clone(){const e=new h(0);e._data=new Uint32Array(this._data),e.length=this.length;for(const t in this._combined)e._combined[t]=this._combined[t];for(const t in this._extendedAttrs)e._extendedAttrs[t]=this._extendedAttrs[t];return e.isWrapped=this.isWrapped,e}getTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0])return e+(this._data[3*e+0]>>22);return 0}getNoBgTrimmedLength(){for(let e=this.length-1;e>=0;--e)if(4194303&this._data[3*e+0]||50331648&this._data[3*e+2])return e+(this._data[3*e+0]>>22);return 0}copyCellsFrom(e,t,i,s,r){const n=e._data;if(r)for(let r=s-1;r>=0;r--){for(let e=0;e<3;e++)this._data[3*(i+r)+e]=n[3*(t+r)+e];268435456&n[3*(t+r)+2]&&(this._extendedAttrs[i+r]=e._extendedAttrs[t+r])}else for(let r=0;r<s;r++){for(let e=0;e<3;e++)this._data[3*(i+r)+e]=n[3*(t+r)+e];268435456&n[3*(t+r)+2]&&(this._extendedAttrs[i+r]=e._extendedAttrs[t+r])}const o=Object.keys(e._combined);for(let s=0;s<o.length;s++){const r=parseInt(o[s],10);r>=t&&(this._combined[r-t+i]=e._combined[r])}}translateToString(e,t,i,s){t=t??0,i=i??this.length,e&&(i=Math.min(i,this.getTrimmedLength())),s&&(s.length=0);let r="";for(;t<i;){const e=this._data[3*t+0],i=2097151&e,a=2097152&e?this._combined[t]:i?(0,o.stringFromCodePoint)(i):n.WHITESPACE_CELL_CHAR;if(r+=a,s)for(let e=0;e<a.length;++e)s.push(t);t+=e>>22||1}return s&&s.push(t),r}}t.BufferLine=h},4841:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRangeLength=void 0,t.getRangeLength=function(e,t){if(e.start.y>e.end.y)throw new Error(`Buffer range end (${e.end.x}, ${e.end.y}) cannot be before start (${e.start.x}, ${e.start.y})`);return t*(e.end.y-e.start.y)+(e.end.x-e.start.x+1)}},4634:(e,t)=>{function i(e,t,i){if(t===e.length-1)return e[t].getTrimmedLength();const s=!e[t].hasContent(i-1)&&1===e[t].getWidth(i-1),r=2===e[t+1].getWidth(0);return s&&r?i-1:i}Object.defineProperty(t,"__esModule",{value:!0}),t.getWrappedLineTrimmedLength=t.reflowSmallerGetNewLineLengths=t.reflowLargerApplyNewLayout=t.reflowLargerCreateNewLayout=t.reflowLargerGetLinesToRemove=void 0,t.reflowLargerGetLinesToRemove=function(e,t,s,r,n){const o=[];for(let a=0;a<e.length-1;a++){let h=a,c=e.get(++h);if(!c.isWrapped)continue;const l=[e.get(a)];for(;h<e.length&&c.isWrapped;)l.push(c),c=e.get(++h);if(r>=a&&r<h){a+=l.length-1;continue}let d=0,_=i(l,d,t),u=1,f=0;for(;u<l.length;){const e=i(l,u,t),r=e-f,o=s-_,a=Math.min(r,o);l[d].copyCellsFrom(l[u],f,_,a,!1),_+=a,_===s&&(d++,_=0),f+=a,f===e&&(u++,f=0),0===_&&0!==d&&2===l[d-1].getWidth(s-1)&&(l[d].copyCellsFrom(l[d-1],s-1,_++,1,!1),l[d-1].setCell(s-1,n))}l[d].replaceCells(_,s,n);let v=0;for(let e=l.length-1;e>0&&(e>d||0===l[e].getTrimmedLength());e--)v++;v>0&&(o.push(a+l.length-v),o.push(v)),a+=l.length-1}return o},t.reflowLargerCreateNewLayout=function(e,t){const i=[];let s=0,r=t[s],n=0;for(let o=0;o<e.length;o++)if(r===o){const i=t[++s];e.onDeleteEmitter.fire({index:o-n,amount:i}),o+=i-1,n+=i,r=t[++s]}else i.push(o);return{layout:i,countRemoved:n}},t.reflowLargerApplyNewLayout=function(e,t){const i=[];for(let s=0;s<t.length;s++)i.push(e.get(t[s]));for(let t=0;t<i.length;t++)e.set(t,i[t]);e.length=t.length},t.reflowSmallerGetNewLineLengths=function(e,t,s){const r=[],n=e.map(((s,r)=>i(e,r,t))).reduce(((e,t)=>e+t));let o=0,a=0,h=0;for(;h<n;){if(n-h<s){r.push(n-h);break}o+=s;const c=i(e,a,t);o>c&&(o-=c,a++);const l=2===e[a].getWidth(o-1);l&&o--;const d=l?s-1:s;r.push(d),h+=d}return r},t.getWrappedLineTrimmedLength=i},5295:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSet=void 0;const s=i(8460),r=i(844),n=i(9092);class o extends r.Disposable{constructor(e,t){super(),this._optionsService=e,this._bufferService=t,this._onBufferActivate=this.register(new s.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new n.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new n.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(e){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(e),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(e,t){this._normal.resize(e,t),this._alt.resize(e,t),this.setupTabStops(e)}setupTabStops(e){this._normal.setupTabStops(e),this._alt.setupTabStops(e)}}t.BufferSet=o},511:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CellData=void 0;const s=i(482),r=i(643),n=i(3734);class o extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(e){const t=new o;return t.setFromCharData(e),t}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,s.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(e){this.fg=e[r.CHAR_DATA_ATTR_INDEX],this.bg=0;let t=!1;if(e[r.CHAR_DATA_CHAR_INDEX].length>2)t=!0;else if(2===e[r.CHAR_DATA_CHAR_INDEX].length){const i=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){const s=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(i-55296)+s-56320+65536|e[r.CHAR_DATA_WIDTH_INDEX]<<22:t=!0}else t=!0}else this.content=e[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|e[r.CHAR_DATA_WIDTH_INDEX]<<22;t&&(this.combinedData=e[r.CHAR_DATA_CHAR_INDEX],this.content=2097152|e[r.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}t.CellData=o},643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WHITESPACE_CELL_CODE=t.WHITESPACE_CELL_WIDTH=t.WHITESPACE_CELL_CHAR=t.NULL_CELL_CODE=t.NULL_CELL_WIDTH=t.NULL_CELL_CHAR=t.CHAR_DATA_CODE_INDEX=t.CHAR_DATA_WIDTH_INDEX=t.CHAR_DATA_CHAR_INDEX=t.CHAR_DATA_ATTR_INDEX=t.DEFAULT_EXT=t.DEFAULT_ATTR=t.DEFAULT_COLOR=void 0,t.DEFAULT_COLOR=0,t.DEFAULT_ATTR=256|t.DEFAULT_COLOR<<9,t.DEFAULT_EXT=0,t.CHAR_DATA_ATTR_INDEX=0,t.CHAR_DATA_CHAR_INDEX=1,t.CHAR_DATA_WIDTH_INDEX=2,t.CHAR_DATA_CODE_INDEX=3,t.NULL_CELL_CHAR="",t.NULL_CELL_WIDTH=1,t.NULL_CELL_CODE=0,t.WHITESPACE_CELL_CHAR=" ",t.WHITESPACE_CELL_WIDTH=1,t.WHITESPACE_CELL_CODE=32},4863:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Marker=void 0;const s=i(8460),r=i(844);class n{get id(){return this._id}constructor(e){this.line=e,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,r.disposeArray)(this._disposables),this._disposables.length=0)}register(e){return this._disposables.push(e),e}}t.Marker=n,n._nextId=1},7116:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CHARSET=t.CHARSETS=void 0,t.CHARSETS={},t.DEFAULT_CHARSET=t.CHARSETS.B,t.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},t.CHARSETS.A={"#":"Â£"},t.CHARSETS.B=void 0,t.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},t.CHARSETS.C=t.CHARSETS[5]={"[":"Ã","\\\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},t.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},t.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},t.CHARSETS.K={"@":"Â§","[":"Ã","\\\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},t.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},t.CHARSETS.E=t.CHARSETS[6]={"@":"Ã","[":"Ã","\\\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},t.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},t.CHARSETS.H=t.CHARSETS[7]={"@":"Ã","[":"Ã","\\\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},t.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(e,t)=>{var i,s,r;Object.defineProperty(t,"__esModule",{value:!0}),t.C1_ESCAPED=t.C1=t.C0=void 0,function(e){e.NUL="\\0",e.SOH="",e.STX="",e.ETX="",e.EOT="",e.ENQ="",e.ACK="",e.BEL="",e.BS="\\b",e.HT="\\t",e.LF="\\n",e.VT="\\v",e.FF="\\f",e.CR="\\r",e.SO="",e.SI="",e.DLE="",e.DC1="",e.DC2="",e.DC3="",e.DC4="",e.NAK="",e.SYN="",e.ETB="",e.CAN="",e.EM="",e.SUB="",e.ESC="",e.FS="",e.GS="",e.RS="",e.US="",e.SP=" ",e.DEL=""}(i||(t.C0=i={})),function(e){e.PAD="Â",e.HOP="Â",e.BPH="Â",e.NBH="Â",e.IND="Â",e.NEL="Â",e.SSA="Â",e.ESA="Â",e.HTS="Â",e.HTJ="Â",e.VTS="Â",e.PLD="Â",e.PLU="Â",e.RI="Â",e.SS2="Â",e.SS3="Â",e.DCS="Â",e.PU1="Â",e.PU2="Â",e.STS="Â",e.CCH="Â",e.MW="Â",e.SPA="Â",e.EPA="Â",e.SOS="Â",e.SGCI="Â",e.SCI="Â",e.CSI="Â",e.ST="Â",e.OSC="Â",e.PM="Â",e.APC="Â"}(s||(t.C1=s={})),function(e){e.ST=`${i.ESC}\\\\`}(r||(t.C1_ESCAPED=r={}))},7399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.evaluateKeyboardEvent=void 0;const s=i(2584),r={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\\\","|"],221:["]","}"],222:["\'",\'"\']};t.evaluateKeyboardEvent=function(e,t,i,n){const o={type:0,cancel:!1,key:void 0},a=(e.shiftKey?1:0)|(e.altKey?2:0)|(e.ctrlKey?4:0)|(e.metaKey?8:0);switch(e.keyCode){case 0:"UIKeyInputUpArrow"===e.key?o.key=t?s.C0.ESC+"OA":s.C0.ESC+"[A":"UIKeyInputLeftArrow"===e.key?o.key=t?s.C0.ESC+"OD":s.C0.ESC+"[D":"UIKeyInputRightArrow"===e.key?o.key=t?s.C0.ESC+"OC":s.C0.ESC+"[C":"UIKeyInputDownArrow"===e.key&&(o.key=t?s.C0.ESC+"OB":s.C0.ESC+"[B");break;case 8:o.key=e.ctrlKey?"\\b":s.C0.DEL,e.altKey&&(o.key=s.C0.ESC+o.key);break;case 9:if(e.shiftKey){o.key=s.C0.ESC+"[Z";break}o.key=s.C0.HT,o.cancel=!0;break;case 13:o.key=e.altKey?s.C0.ESC+s.C0.CR:s.C0.CR,o.cancel=!0;break;case 27:o.key=s.C0.ESC,e.altKey&&(o.key=s.C0.ESC+s.C0.ESC),o.cancel=!0;break;case 37:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"D",o.key===s.C0.ESC+"[1;3D"&&(o.key=s.C0.ESC+(i?"b":"[1;5D"))):o.key=t?s.C0.ESC+"OD":s.C0.ESC+"[D";break;case 39:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"C",o.key===s.C0.ESC+"[1;3C"&&(o.key=s.C0.ESC+(i?"f":"[1;5C"))):o.key=t?s.C0.ESC+"OC":s.C0.ESC+"[C";break;case 38:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"A",i||o.key!==s.C0.ESC+"[1;3A"||(o.key=s.C0.ESC+"[1;5A")):o.key=t?s.C0.ESC+"OA":s.C0.ESC+"[A";break;case 40:if(e.metaKey)break;a?(o.key=s.C0.ESC+"[1;"+(a+1)+"B",i||o.key!==s.C0.ESC+"[1;3B"||(o.key=s.C0.ESC+"[1;5B")):o.key=t?s.C0.ESC+"OB":s.C0.ESC+"[B";break;case 45:e.shiftKey||e.ctrlKey||(o.key=s.C0.ESC+"[2~");break;case 46:o.key=a?s.C0.ESC+"[3;"+(a+1)+"~":s.C0.ESC+"[3~";break;case 36:o.key=a?s.C0.ESC+"[1;"+(a+1)+"H":t?s.C0.ESC+"OH":s.C0.ESC+"[H";break;case 35:o.key=a?s.C0.ESC+"[1;"+(a+1)+"F":t?s.C0.ESC+"OF":s.C0.ESC+"[F";break;case 33:e.shiftKey?o.type=2:e.ctrlKey?o.key=s.C0.ESC+"[5;"+(a+1)+"~":o.key=s.C0.ESC+"[5~";break;case 34:e.shiftKey?o.type=3:e.ctrlKey?o.key=s.C0.ESC+"[6;"+(a+1)+"~":o.key=s.C0.ESC+"[6~";break;case 112:o.key=a?s.C0.ESC+"[1;"+(a+1)+"P":s.C0.ESC+"OP";break;case 113:o.key=a?s.C0.ESC+"[1;"+(a+1)+"Q":s.C0.ESC+"OQ";break;case 114:o.key=a?s.C0.ESC+"[1;"+(a+1)+"R":s.C0.ESC+"OR";break;case 115:o.key=a?s.C0.ESC+"[1;"+(a+1)+"S":s.C0.ESC+"OS";break;case 116:o.key=a?s.C0.ESC+"[15;"+(a+1)+"~":s.C0.ESC+"[15~";break;case 117:o.key=a?s.C0.ESC+"[17;"+(a+1)+"~":s.C0.ESC+"[17~";break;case 118:o.key=a?s.C0.ESC+"[18;"+(a+1)+"~":s.C0.ESC+"[18~";break;case 119:o.key=a?s.C0.ESC+"[19;"+(a+1)+"~":s.C0.ESC+"[19~";break;case 120:o.key=a?s.C0.ESC+"[20;"+(a+1)+"~":s.C0.ESC+"[20~";break;case 121:o.key=a?s.C0.ESC+"[21;"+(a+1)+"~":s.C0.ESC+"[21~";break;case 122:o.key=a?s.C0.ESC+"[23;"+(a+1)+"~":s.C0.ESC+"[23~";break;case 123:o.key=a?s.C0.ESC+"[24;"+(a+1)+"~":s.C0.ESC+"[24~";break;default:if(!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)if(i&&!n||!e.altKey||e.metaKey)!i||e.altKey||e.ctrlKey||e.shiftKey||!e.metaKey?e.key&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&e.keyCode>=48&&1===e.key.length?o.key=e.key:e.key&&e.ctrlKey&&("_"===e.key&&(o.key=s.C0.US),"@"===e.key&&(o.key=s.C0.NUL)):65===e.keyCode&&(o.type=1);else{const t=r[e.keyCode],i=t?.[e.shiftKey?1:0];if(i)o.key=s.C0.ESC+i;else if(e.keyCode>=65&&e.keyCode<=90){const t=e.ctrlKey?e.keyCode-64:e.keyCode+32;let i=String.fromCharCode(t);e.shiftKey&&(i=i.toUpperCase()),o.key=s.C0.ESC+i}else if(32===e.keyCode)o.key=s.C0.ESC+(e.ctrlKey?s.C0.NUL:" ");else if("Dead"===e.key&&e.code.startsWith("Key")){let t=e.code.slice(3,4);e.shiftKey||(t=t.toLowerCase()),o.key=s.C0.ESC+t,o.cancel=!0}}else e.keyCode>=65&&e.keyCode<=90?o.key=String.fromCharCode(e.keyCode-64):32===e.keyCode?o.key=s.C0.NUL:e.keyCode>=51&&e.keyCode<=55?o.key=String.fromCharCode(e.keyCode-51+27):56===e.keyCode?o.key=s.C0.DEL:219===e.keyCode?o.key=s.C0.ESC:220===e.keyCode?o.key=s.C0.FS:221===e.keyCode&&(o.key=s.C0.GS)}return o}},482:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8ToUtf32=t.StringToUtf32=t.utf32ToString=t.stringFromCodePoint=void 0,t.stringFromCodePoint=function(e){return e>65535?(e-=65536,String.fromCharCode(55296+(e>>10))+String.fromCharCode(e%1024+56320)):String.fromCharCode(e)},t.utf32ToString=function(e,t=0,i=e.length){let s="";for(let r=t;r<i;++r){let t=e[r];t>65535?(t-=65536,s+=String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):s+=String.fromCharCode(t)}return s},t.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(e,t){const i=e.length;if(!i)return 0;let s=0,r=0;if(this._interim){const i=e.charCodeAt(r++);56320<=i&&i<=57343?t[s++]=1024*(this._interim-55296)+i-56320+65536:(t[s++]=this._interim,t[s++]=i),this._interim=0}for(let n=r;n<i;++n){const r=e.charCodeAt(n);if(55296<=r&&r<=56319){if(++n>=i)return this._interim=r,s;const o=e.charCodeAt(n);56320<=o&&o<=57343?t[s++]=1024*(r-55296)+o-56320+65536:(t[s++]=r,t[s++]=o)}else 65279!==r&&(t[s++]=r)}return s}},t.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(e,t){const i=e.length;if(!i)return 0;let s,r,n,o,a=0,h=0,c=0;if(this.interim[0]){let s=!1,r=this.interim[0];r&=192==(224&r)?31:224==(240&r)?15:7;let n,o=0;for(;(n=63&this.interim[++o])&&o<4;)r<<=6,r|=n;const h=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,l=h-o;for(;c<l;){if(c>=i)return 0;if(n=e[c++],128!=(192&n)){c--,s=!0;break}this.interim[o++]=n,r<<=6,r|=63&n}s||(2===h?r<128?c--:t[a++]=r:3===h?r<2048||r>=55296&&r<=57343||65279===r||(t[a++]=r):r<65536||r>1114111||(t[a++]=r)),this.interim.fill(0)}const l=i-4;let d=c;for(;d<i;){for(;!(!(d<l)||128&(s=e[d])||128&(r=e[d+1])||128&(n=e[d+2])||128&(o=e[d+3]));)t[a++]=s,t[a++]=r,t[a++]=n,t[a++]=o,d+=4;if(s=e[d++],s<128)t[a++]=s;else if(192==(224&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(h=(31&s)<<6|63&r,h<128){d--;continue}t[a++]=h}else if(224==(240&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(h=(15&s)<<12|(63&r)<<6|63&n,h<2048||h>=55296&&h<=57343||65279===h)continue;t[a++]=h}else if(240==(248&s)){if(d>=i)return this.interim[0]=s,a;if(r=e[d++],128!=(192&r)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,a;if(n=e[d++],128!=(192&n)){d--;continue}if(d>=i)return this.interim[0]=s,this.interim[1]=r,this.interim[2]=n,a;if(o=e[d++],128!=(192&o)){d--;continue}if(h=(7&s)<<18|(63&r)<<12|(63&n)<<6|63&o,h<65536||h>1114111)continue;t[a++]=h}}return a}}},225:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeV6=void 0;const s=i(1480),r=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],n=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let o;t.UnicodeV6=class{constructor(){if(this.version="6",!o){o=new Uint8Array(65536),o.fill(1),o[0]=0,o.fill(0,1,32),o.fill(0,127,160),o.fill(2,4352,4448),o[9001]=2,o[9002]=2,o.fill(2,11904,42192),o[12351]=1,o.fill(2,44032,55204),o.fill(2,63744,64256),o.fill(2,65040,65050),o.fill(2,65072,65136),o.fill(2,65280,65377),o.fill(2,65504,65511);for(let e=0;e<r.length;++e)o.fill(0,r[e][0],r[e][1]+1)}}wcwidth(e){return e<32?0:e<127?1:e<65536?o[e]:function(e,t){let i,s=0,r=t.length-1;if(e<t[0][0]||e>t[r][1])return!1;for(;r>=s;)if(i=s+r>>1,e>t[i][1])s=i+1;else{if(!(e<t[i][0]))return!0;r=i-1}return!1}(e,n)?0:e>=131072&&e<=196605||e>=196608&&e<=262141?2:1}charProperties(e,t){let i=this.wcwidth(e),r=0===i&&0!==t;if(r){const e=s.UnicodeService.extractWidth(t);0===e?r=!1:e>i&&(i=e)}return s.UnicodeService.createPropertyValue(0,i,r)}}},5981:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteBuffer=void 0;const s=i(8460),r=i(844);class n extends r.Disposable{constructor(e){super(),this._action=e,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new s.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(e,t){if(void 0!==t&&this._syncCalls>t)return void(this._syncCalls=0);if(this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);const e=this._callbacks.shift();e&&e()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(e,t){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=e.length,this._writeBuffer.push(e),this._callbacks.push(t)}_innerWrite(e=0,t=!0){const i=e||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const e=this._writeBuffer[this._bufferOffset],s=this._action(e,t);if(s){const e=e=>Date.now()-i>=12?setTimeout((()=>this._innerWrite(0,e))):this._innerWrite(i,e);return void s.catch((e=>(queueMicrotask((()=>{throw e})),Promise.resolve(!1)))).then(e)}const r=this._callbacks[this._bufferOffset];if(r&&r(),this._bufferOffset++,this._pendingData-=e.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}t.WriteBuffer=n},5941:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toRgbString=t.parseColor=void 0;const i=/^([\\da-f])\\/([\\da-f])\\/([\\da-f])$|^([\\da-f]{2})\\/([\\da-f]{2})\\/([\\da-f]{2})$|^([\\da-f]{3})\\/([\\da-f]{3})\\/([\\da-f]{3})$|^([\\da-f]{4})\\/([\\da-f]{4})\\/([\\da-f]{4})$/,s=/^[\\da-f]+$/;function r(e,t){const i=e.toString(16),s=i.length<2?"0"+i:i;switch(t){case 4:return i[0];case 8:return s;case 12:return(s+s).slice(0,3);default:return s+s}}t.parseColor=function(e){if(!e)return;let t=e.toLowerCase();if(0===t.indexOf("rgb:")){t=t.slice(4);const e=i.exec(t);if(e){const t=e[1]?15:e[4]?255:e[7]?4095:65535;return[Math.round(parseInt(e[1]||e[4]||e[7]||e[10],16)/t*255),Math.round(parseInt(e[2]||e[5]||e[8]||e[11],16)/t*255),Math.round(parseInt(e[3]||e[6]||e[9]||e[12],16)/t*255)]}}else if(0===t.indexOf("#")&&(t=t.slice(1),s.exec(t)&&[3,6,9,12].includes(t.length))){const e=t.length/3,i=[0,0,0];for(let s=0;s<3;++s){const r=parseInt(t.slice(e*s,e*s+e),16);i[s]=1===e?r<<4:2===e?r:3===e?r>>4:r>>8}return i}},t.toRgbString=function(e,t=16){const[i,s,n]=e;return`rgb:${r(i,t)}/${r(s,t)}/${r(n,t)}`}},5770:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PAYLOAD_LIMIT=void 0,t.PAYLOAD_LIMIT=1e7},6351:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DcsHandler=t.DcsParser=void 0;const s=i(482),r=i(8742),n=i(5770),o=[];t.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=o,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}reset(){if(this._active.length)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].unhook(!1);this._stack.paused=!1,this._active=o,this._ident=0}hook(e,t){if(this.reset(),this._ident=e,this._active=this._handlers[e]||o,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].hook(t);else this._handlerFb(this._ident,"HOOK",t)}put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._ident,"PUT",(0,s.utf32ToString)(e,t,i))}unhook(e,t=!0){if(this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].unhook(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].unhook(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._ident,"UNHOOK",e);this._active=o,this._ident=0}};const a=new r.Params;a.addParam(0),t.DcsHandler=class{constructor(e){this._handler=e,this._data="",this._params=a,this._hitLimit=!1}hook(e){this._params=e.length>1||e.params[0]?e.clone():a,this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,s.utf32ToString)(e,t,i),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data,this._params),t instanceof Promise))return t.then((e=>(this._params=a,this._data="",this._hitLimit=!1,e)));return this._params=a,this._data="",this._hitLimit=!1,t}}},2015:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeSequenceParser=t.VT500_TRANSITION_TABLE=t.TransitionTable=void 0;const s=i(844),r=i(8742),n=i(6242),o=i(6351);class a{constructor(e){this.table=new Uint8Array(e)}setDefault(e,t){this.table.fill(e<<4|t)}add(e,t,i,s){this.table[t<<8|e]=i<<4|s}addMany(e,t,i,s){for(let r=0;r<e.length;r++)this.table[t<<8|e[r]]=i<<4|s}}t.TransitionTable=a;const h=160;t.VT500_TRANSITION_TABLE=function(){const e=new a(4095),t=Array.apply(null,Array(256)).map(((e,t)=>t)),i=(e,i)=>t.slice(e,i),s=i(32,127),r=i(0,24);r.push(25),r.push.apply(r,i(28,32));const n=i(0,14);let o;for(o in e.setDefault(1,0),e.addMany(s,0,2,0),n)e.addMany([24,26,153,154],o,3,0),e.addMany(i(128,144),o,3,0),e.addMany(i(144,152),o,3,0),e.add(156,o,0,0),e.add(27,o,11,1),e.add(157,o,4,8),e.addMany([152,158,159],o,0,7),e.add(155,o,11,3),e.add(144,o,11,9);return e.addMany(r,0,3,0),e.addMany(r,1,3,1),e.add(127,1,0,1),e.addMany(r,8,0,8),e.addMany(r,3,3,3),e.add(127,3,0,3),e.addMany(r,4,3,4),e.add(127,4,0,4),e.addMany(r,6,3,6),e.addMany(r,5,3,5),e.add(127,5,0,5),e.addMany(r,2,3,2),e.add(127,2,0,2),e.add(93,1,4,8),e.addMany(s,8,5,8),e.add(127,8,5,8),e.addMany([156,27,24,26,7],8,6,0),e.addMany(i(28,32),8,0,8),e.addMany([88,94,95],1,0,7),e.addMany(s,7,0,7),e.addMany(r,7,0,7),e.add(156,7,0,0),e.add(127,7,0,7),e.add(91,1,11,3),e.addMany(i(64,127),3,7,0),e.addMany(i(48,60),3,8,4),e.addMany([60,61,62,63],3,9,4),e.addMany(i(48,60),4,8,4),e.addMany(i(64,127),4,7,0),e.addMany([60,61,62,63],4,0,6),e.addMany(i(32,64),6,0,6),e.add(127,6,0,6),e.addMany(i(64,127),6,0,0),e.addMany(i(32,48),3,9,5),e.addMany(i(32,48),5,9,5),e.addMany(i(48,64),5,0,6),e.addMany(i(64,127),5,7,0),e.addMany(i(32,48),4,9,5),e.addMany(i(32,48),1,9,2),e.addMany(i(32,48),2,9,2),e.addMany(i(48,127),2,10,0),e.addMany(i(48,80),1,10,0),e.addMany(i(81,88),1,10,0),e.addMany([89,90,92],1,10,0),e.addMany(i(96,127),1,10,0),e.add(80,1,11,9),e.addMany(r,9,0,9),e.add(127,9,0,9),e.addMany(i(28,32),9,0,9),e.addMany(i(32,48),9,9,12),e.addMany(i(48,60),9,8,10),e.addMany([60,61,62,63],9,9,10),e.addMany(r,11,0,11),e.addMany(i(32,128),11,0,11),e.addMany(i(28,32),11,0,11),e.addMany(r,10,0,10),e.add(127,10,0,10),e.addMany(i(28,32),10,0,10),e.addMany(i(48,60),10,8,10),e.addMany([60,61,62,63],10,0,11),e.addMany(i(32,48),10,9,12),e.addMany(r,12,0,12),e.add(127,12,0,12),e.addMany(i(28,32),12,0,12),e.addMany(i(32,48),12,9,12),e.addMany(i(48,64),12,0,11),e.addMany(i(64,127),12,12,13),e.addMany(i(64,127),10,12,13),e.addMany(i(64,127),9,12,13),e.addMany(r,13,13,13),e.addMany(s,13,13,13),e.add(127,13,0,13),e.addMany([27,156,24,26],13,14,0),e.add(h,0,2,0),e.add(h,8,5,8),e.add(h,6,0,6),e.add(h,11,0,11),e.add(h,13,13,13),e}();class c extends s.Disposable{constructor(e=t.VT500_TRANSITION_TABLE){super(),this._transitions=e,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new r.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(e,t,i)=>{},this._executeHandlerFb=e=>{},this._csiHandlerFb=(e,t)=>{},this._escHandlerFb=e=>{},this._errorHandlerFb=e=>e,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,s.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new o.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\\\"},(()=>!0))}_identifier(e,t=[64,126]){let i=0;if(e.prefix){if(e.prefix.length>1)throw new Error("only one byte as prefix supported");if(i=e.prefix.charCodeAt(0),i&&60>i||i>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(e.intermediates){if(e.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let t=0;t<e.intermediates.length;++t){const s=e.intermediates.charCodeAt(t);if(32>s||s>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");i<<=8,i|=s}}if(1!==e.final.length)throw new Error("final must be a single byte");const s=e.final.charCodeAt(0);if(t[0]>s||s>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return i<<=8,i|=s,i}identToString(e){const t=[];for(;e;)t.push(String.fromCharCode(255&e)),e>>=8;return t.reverse().join("")}setPrintHandler(e){this._printHandler=e}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(e,t){const i=this._identifier(e,[48,126]);void 0===this._escHandlers[i]&&(this._escHandlers[i]=[]);const s=this._escHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearEscHandler(e){this._escHandlers[this._identifier(e,[48,126])]&&delete this._escHandlers[this._identifier(e,[48,126])]}setEscHandlerFallback(e){this._escHandlerFb=e}setExecuteHandler(e,t){this._executeHandlers[e.charCodeAt(0)]=t}clearExecuteHandler(e){this._executeHandlers[e.charCodeAt(0)]&&delete this._executeHandlers[e.charCodeAt(0)]}setExecuteHandlerFallback(e){this._executeHandlerFb=e}registerCsiHandler(e,t){const i=this._identifier(e);void 0===this._csiHandlers[i]&&(this._csiHandlers[i]=[]);const s=this._csiHandlers[i];return s.push(t),{dispose:()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}}clearCsiHandler(e){this._csiHandlers[this._identifier(e)]&&delete this._csiHandlers[this._identifier(e)]}setCsiHandlerFallback(e){this._csiHandlerFb=e}registerDcsHandler(e,t){return this._dcsParser.registerHandler(this._identifier(e),t)}clearDcsHandler(e){this._dcsParser.clearHandler(this._identifier(e))}setDcsHandlerFallback(e){this._dcsParser.setHandlerFallback(e)}registerOscHandler(e,t){return this._oscParser.registerHandler(e,t)}clearOscHandler(e){this._oscParser.clearHandler(e)}setOscHandlerFallback(e){this._oscParser.setHandlerFallback(e)}setErrorHandler(e){this._errorHandler=e}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,0!==this._parseStack.state&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(e,t,i,s,r){this._parseStack.state=e,this._parseStack.handlers=t,this._parseStack.handlerPos=i,this._parseStack.transition=s,this._parseStack.chunkPos=r}parse(e,t,i){let s,r=0,n=0,o=0;if(this._parseStack.state)if(2===this._parseStack.state)this._parseStack.state=0,o=this._parseStack.chunkPos+1;else{if(void 0===i||1===this._parseStack.state)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const t=this._parseStack.handlers;let n=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](this._params),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 4:if(!1===i&&n>-1)for(;n>=0&&(s=t[n](),!0!==s);n--)if(s instanceof Promise)return this._parseStack.handlerPos=n,s;this._parseStack.handlers=[];break;case 6:if(r=e[this._parseStack.chunkPos],s=this._dcsParser.unhook(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(r=e[this._parseStack.chunkPos],s=this._oscParser.end(24!==r&&26!==r,i),s)return s;27===r&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,o=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let i=o;i<t;++i){switch(r=e[i],n=this._transitions.table[this.currentState<<8|(r<160?r:h)],n>>4){case 2:for(let s=i+1;;++s){if(s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}if(++s>=t||(r=e[s])<32||r>126&&r<h){this._printHandler(e,i,s),i=s-1;break}}break;case 3:this._executeHandlers[r]?this._executeHandlers[r]():this._executeHandlerFb(r),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:i,code:r,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const o=this._csiHandlers[this._collect<<8|r];let a=o?o.length-1:-1;for(;a>=0&&(s=o[a](this._params),!0!==s);a--)if(s instanceof Promise)return this._preserveStack(3,o,a,n,i),s;a<0&&this._csiHandlerFb(this._collect<<8|r,this._params),this.precedingJoinState=0;break;case 8:do{switch(r){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(r-48)}}while(++i<t&&(r=e[i])>47&&r<60);i--;break;case 9:this._collect<<=8,this._collect|=r;break;case 10:const c=this._escHandlers[this._collect<<8|r];let l=c?c.length-1:-1;for(;l>=0&&(s=c[l](),!0!==s);l--)if(s instanceof Promise)return this._preserveStack(4,c,l,n,i),s;l<0&&this._escHandlerFb(this._collect<<8|r),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|r,this._params);break;case 13:for(let s=i+1;;++s)if(s>=t||24===(r=e[s])||26===r||27===r||r>127&&r<h){this._dcsParser.put(e,i,s),i=s-1;break}break;case 14:if(s=this._dcsParser.unhook(24!==r&&26!==r),s)return this._preserveStack(6,[],0,n,i),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let s=i+1;;s++)if(s>=t||(r=e[s])<32||r>127&&r<h){this._oscParser.put(e,i,s),i=s-1;break}break;case 6:if(s=this._oscParser.end(24!==r&&26!==r),s)return this._preserveStack(5,[],0,n,i),s;27===r&&(n|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&n}}}t.EscapeSequenceParser=c},6242:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OscHandler=t.OscParser=void 0;const s=i(5770),r=i(482),n=[];t.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(e,t){void 0===this._handlers[e]&&(this._handlers[e]=[]);const i=this._handlers[e];return i.push(t),{dispose:()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}clearHandler(e){this._handlers[e]&&delete this._handlers[e]}setHandlerFallback(e){this._handlerFb=e}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(2===this._state)for(let e=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;e>=0;--e)this._active[e].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let e=this._active.length-1;e>=0;e--)this._active[e].start();else this._handlerFb(this._id,"START")}_put(e,t,i){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(e,t,i);else this._handlerFb(this._id,"PUT",(0,r.utf32ToString)(e,t,i))}start(){this.reset(),this._state=1}put(e,t,i){if(3!==this._state){if(1===this._state)for(;t<i;){const i=e[t++];if(59===i){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+i-48}2===this._state&&i-t>0&&this._put(e,t,i)}}end(e,t=!0){if(0!==this._state){if(3!==this._state)if(1===this._state&&this._start(),this._active.length){let i=!1,s=this._active.length-1,r=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,i=t,r=this._stack.fallThrough,this._stack.paused=!1),!r&&!1===i){for(;s>=0&&(i=this._active[s].end(e),!0!==i);s--)if(i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,i;s--}for(;s>=0;s--)if(i=this._active[s].end(!1),i instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,i}else this._handlerFb(this._id,"END",e);this._active=n,this._id=-1,this._state=0}}},t.OscHandler=class{constructor(e){this._handler=e,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(e,t,i){this._hitLimit||(this._data+=(0,r.utf32ToString)(e,t,i),this._data.length>s.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(e){let t=!1;if(this._hitLimit)t=!1;else if(e&&(t=this._handler(this._data),t instanceof Promise))return t.then((e=>(this._data="",this._hitLimit=!1,e)));return this._data="",this._hitLimit=!1,t}}},8742:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Params=void 0;const i=2147483647;class s{static fromArray(e){const t=new s;if(!e.length)return t;for(let i=Array.isArray(e[0])?1:0;i<e.length;++i){const s=e[i];if(Array.isArray(s))for(let e=0;e<s.length;++e)t.addSubParam(s[e]);else t.addParam(s)}return t}constructor(e=32,t=32){if(this.maxLength=e,this.maxSubParamsLength=t,t>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(e),this.length=0,this._subParams=new Int32Array(t),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(e),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const e=new s(this.maxLength,this.maxSubParamsLength);return e.params.set(this.params),e.length=this.length,e._subParams.set(this._subParams),e._subParamsLength=this._subParamsLength,e._subParamsIdx.set(this._subParamsIdx),e._rejectDigits=this._rejectDigits,e._rejectSubDigits=this._rejectSubDigits,e._digitIsSub=this._digitIsSub,e}toArray(){const e=[];for(let t=0;t<this.length;++t){e.push(this.params[t]);const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&e.push(Array.prototype.slice.call(this._subParams,i,s))}return e}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(e){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=e>i?i:e}}addSubParam(e){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(e<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=e>i?i:e,this._subParamsIdx[this.length-1]++}}hasSubParams(e){return(255&this._subParamsIdx[e])-(this._subParamsIdx[e]>>8)>0}getSubParams(e){const t=this._subParamsIdx[e]>>8,i=255&this._subParamsIdx[e];return i-t>0?this._subParams.subarray(t,i):null}getSubParamsAll(){const e={};for(let t=0;t<this.length;++t){const i=this._subParamsIdx[t]>>8,s=255&this._subParamsIdx[t];s-i>0&&(e[t]=this._subParams.slice(i,s))}return e}addDigit(e){let t;if(this._rejectDigits||!(t=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const s=this._digitIsSub?this._subParams:this.params,r=s[t-1];s[t-1]=~r?Math.min(10*r+e,i):e}}t.Params=s},5741:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AddonManager=void 0,t.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let e=this._addons.length-1;e>=0;e--)this._addons[e].instance.dispose()}loadAddon(e,t){const i={instance:t,dispose:t.dispose,isDisposed:!1};this._addons.push(i),t.dispose=()=>this._wrappedAddonDispose(i),t.activate(e)}_wrappedAddonDispose(e){if(e.isDisposed)return;let t=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===e){t=i;break}if(-1===t)throw new Error("Could not dispose an addon that has not been loaded");e.isDisposed=!0,e.dispose.apply(e.instance),this._addons.splice(t,1)}}},8771:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferApiView=void 0;const s=i(3785),r=i(511);t.BufferApiView=class{constructor(e,t){this._buffer=e,this.type=t}init(e){return this._buffer=e,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(e){const t=this._buffer.lines.get(e);if(t)return new s.BufferLineApiView(t)}getNullCell(){return new r.CellData}}},3785:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLineApiView=void 0;const s=i(511);t.BufferLineApiView=class{constructor(e){this._line=e}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(e,t){if(!(e<0||e>=this._line.length))return t?(this._line.loadCell(e,t),t):this._line.loadCell(e,new s.CellData)}translateToString(e,t,i){return this._line.translateToString(e,t,i)}}},8285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BufferNamespaceApi=void 0;const s=i(8771),r=i(8460),n=i(844);class o extends n.Disposable{constructor(e){super(),this._core=e,this._onBufferChange=this.register(new r.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new s.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new s.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}t.BufferNamespaceApi=o},7975:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ParserApi=void 0,t.ParserApi=class{constructor(e){this._core=e}registerCsiHandler(e,t){return this._core.registerCsiHandler(e,(e=>t(e.toArray())))}addCsiHandler(e,t){return this.registerCsiHandler(e,t)}registerDcsHandler(e,t){return this._core.registerDcsHandler(e,((e,i)=>t(e,i.toArray())))}addDcsHandler(e,t){return this.registerDcsHandler(e,t)}registerEscHandler(e,t){return this._core.registerEscHandler(e,t)}addEscHandler(e,t){return this.registerEscHandler(e,t)}registerOscHandler(e,t){return this._core.registerOscHandler(e,t)}addOscHandler(e,t){return this.registerOscHandler(e,t)}}},7090:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeApi=void 0,t.UnicodeApi=class{constructor(e){this._core=e}register(e){this._core.unicodeService.register(e)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(e){this._core.unicodeService.activeVersion=e}}},744:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferService=t.MINIMUM_ROWS=t.MINIMUM_COLS=void 0;const n=i(8460),o=i(844),a=i(5295),h=i(2585);t.MINIMUM_COLS=2,t.MINIMUM_ROWS=1;let c=t.BufferService=class extends o.Disposable{get buffer(){return this.buffers.active}constructor(e){super(),this.isUserScrolling=!1,this._onResize=this.register(new n.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new n.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(e.rawOptions.cols||0,t.MINIMUM_COLS),this.rows=Math.max(e.rawOptions.rows||0,t.MINIMUM_ROWS),this.buffers=this.register(new a.BufferSet(e,this))}resize(e,t){this.cols=e,this.rows=t,this.buffers.resize(e,t),this._onResize.fire({cols:e,rows:t})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(e,t=!1){const i=this.buffer;let s;s=this._cachedBlankLine,s&&s.length===this.cols&&s.getFg(0)===e.fg&&s.getBg(0)===e.bg||(s=i.getBlankLine(e,t),this._cachedBlankLine=s),s.isWrapped=t;const r=i.ybase+i.scrollTop,n=i.ybase+i.scrollBottom;if(0===i.scrollTop){const e=i.lines.isFull;n===i.lines.length-1?e?i.lines.recycle().copyFrom(s):i.lines.push(s.clone()):i.lines.splice(n+1,0,s.clone()),e?this.isUserScrolling&&(i.ydisp=Math.max(i.ydisp-1,0)):(i.ybase++,this.isUserScrolling||i.ydisp++)}else{const e=n-r+1;i.lines.shiftElements(r+1,e-1,-1),i.lines.set(n,s.clone())}this.isUserScrolling||(i.ydisp=i.ybase),this._onScroll.fire(i.ydisp)}scrollLines(e,t,i){const s=this.buffer;if(e<0){if(0===s.ydisp)return;this.isUserScrolling=!0}else e+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);const r=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+e,s.ybase),0),r!==s.ydisp&&(t||this._onScroll.fire(s.ydisp))}};t.BufferService=c=s([r(0,h.IOptionsService)],c)},7994:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CharsetService=void 0,t.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(e){this.glevel=e,this.charset=this._charsets[e]}setgCharset(e,t){this._charsets[e]=t,this.glevel===e&&(this.charset=t)}}},1753:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreMouseService=void 0;const n=i(2585),o=i(8460),a=i(844),h={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:e=>4!==e.button&&1===e.action&&(e.ctrl=!1,e.alt=!1,e.shift=!1,!0)},VT200:{events:19,restrict:e=>32!==e.action},DRAG:{events:23,restrict:e=>32!==e.action||3!==e.button},ANY:{events:31,restrict:e=>!0}};function c(e,t){let i=(e.ctrl?16:0)|(e.shift?4:0)|(e.alt?8:0);return 4===e.button?(i|=64,i|=e.action):(i|=3&e.button,4&e.button&&(i|=64),8&e.button&&(i|=128),32===e.action?i|=32:0!==e.action||t||(i|=3)),i}const l=String.fromCharCode,d={DEFAULT:e=>{const t=[c(e,!1)+32,e.col+32,e.row+32];return t[0]>255||t[1]>255||t[2]>255?"":`[M${l(t[0])}${l(t[1])}${l(t[2])}`},SGR:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.col};${e.row}${t}`},SGR_PIXELS:e=>{const t=0===e.action&&4!==e.button?"m":"M";return`[<${c(e,!0)};${e.x};${e.y}${t}`}};let _=t.CoreMouseService=class extends a.Disposable{constructor(e,t){super(),this._bufferService=e,this._coreService=t,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new o.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const e of Object.keys(h))this.addProtocol(e,h[e]);for(const e of Object.keys(d))this.addEncoding(e,d[e]);this.reset()}addProtocol(e,t){this._protocols[e]=t}addEncoding(e,t){this._encodings[e]=t}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return 0!==this._protocols[this._activeProtocol].events}set activeProtocol(e){if(!this._protocols[e])throw new Error(`unknown protocol "${e}"`);this._activeProtocol=e,this._onProtocolChange.fire(this._protocols[e].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(e){if(!this._encodings[e])throw new Error(`unknown encoding "${e}"`);this._activeEncoding=e}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(e){if(e.col<0||e.col>=this._bufferService.cols||e.row<0||e.row>=this._bufferService.rows)return!1;if(4===e.button&&32===e.action)return!1;if(3===e.button&&32!==e.action)return!1;if(4!==e.button&&(2===e.action||3===e.action))return!1;if(e.col++,e.row++,32===e.action&&this._lastEvent&&this._equalEvents(this._lastEvent,e,"SGR_PIXELS"===this._activeEncoding))return!1;if(!this._protocols[this._activeProtocol].restrict(e))return!1;const t=this._encodings[this._activeEncoding](e);return t&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(t):this._coreService.triggerDataEvent(t,!0)),this._lastEvent=e,!0}explainEvents(e){return{down:!!(1&e),up:!!(2&e),drag:!!(4&e),move:!!(8&e),wheel:!!(16&e)}}_equalEvents(e,t,i){if(i){if(e.x!==t.x)return!1;if(e.y!==t.y)return!1}else{if(e.col!==t.col)return!1;if(e.row!==t.row)return!1}return e.button===t.button&&e.action===t.action&&e.ctrl===t.ctrl&&e.alt===t.alt&&e.shift===t.shift}};t.CoreMouseService=_=s([r(0,n.IBufferService),r(1,n.ICoreService)],_)},6975:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoreService=void 0;const n=i(1439),o=i(8460),a=i(844),h=i(2585),c=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let d=t.CoreService=class extends a.Disposable{constructor(e,t,i){super(),this._bufferService=e,this._logService=t,this._optionsService=i,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new o.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new o.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(l)}reset(){this.modes=(0,n.clone)(c),this.decPrivateModes=(0,n.clone)(l)}triggerDataEvent(e,t=!1){if(this._optionsService.rawOptions.disableStdin)return;const i=this._bufferService.buffer;t&&this._optionsService.rawOptions.scrollOnUserInput&&i.ybase!==i.ydisp&&this._onRequestScrollToBottom.fire(),t&&this._onUserInput.fire(),this._logService.debug(`sending data "${e}"`,(()=>e.split("").map((e=>e.charCodeAt(0))))),this._onData.fire(e)}triggerBinaryEvent(e){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${e}"`,(()=>e.split("").map((e=>e.charCodeAt(0))))),this._onBinary.fire(e))}};t.CoreService=d=s([r(0,h.IBufferService),r(1,h.ILogService),r(2,h.IOptionsService)],d)},9074:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DecorationService=void 0;const s=i(8055),r=i(8460),n=i(844),o=i(6106);let a=0,h=0;class c extends n.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new o.SortedList((e=>e?.marker.line)),this._onDecorationRegistered=this.register(new r.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new r.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)((()=>this.reset())))}registerDecoration(e){if(e.marker.isDisposed)return;const t=new l(e);if(t){const e=t.marker.onDispose((()=>t.dispose()));t.onDispose((()=>{t&&(this._decorations.delete(t)&&this._onDecorationRemoved.fire(t),e.dispose())})),this._decorations.insert(t),this._onDecorationRegistered.fire(t)}return t}reset(){for(const e of this._decorations.values())e.dispose();this._decorations.clear()}*getDecorationsAtCell(e,t,i){let s=0,r=0;for(const n of this._decorations.getKeyIterator(t))s=n.options.x??0,r=s+(n.options.width??1),e>=s&&e<r&&(!i||(n.options.layer??"bottom")===i)&&(yield n)}forEachDecorationAtCell(e,t,i,s){this._decorations.forEachByKey(t,(t=>{a=t.options.x??0,h=a+(t.options.width??1),e>=a&&e<h&&(!i||(t.options.layer??"bottom")===i)&&s(t)}))}}t.DecorationService=c;class l extends n.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return null===this._cachedBg&&(this.options.backgroundColor?this._cachedBg=s.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return null===this._cachedFg&&(this.options.foregroundColor?this._cachedFg=s.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(e){super(),this.options=e,this.onRenderEmitter=this.register(new r.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new r.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=e.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InstantiationService=t.ServiceCollection=void 0;const s=i(2585),r=i(8343);class n{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}forEach(e){for(const[t,i]of this._entries.entries())e(t,i)}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}t.ServiceCollection=n,t.InstantiationService=class{constructor(){this._services=new n,this._services.set(s.IInstantiationService,this)}setService(e,t){this._services.set(e,t)}getService(e){return this._services.get(e)}createInstance(e,...t){const i=(0,r.getServiceDependencies)(e).sort(((e,t)=>e.index-t.index)),s=[];for(const t of i){const i=this._services.get(t.id);if(!i)throw new Error(`[createInstance] ${e.name} depends on UNKNOWN service ${t.id}.`);s.push(i)}const n=i.length>0?i[0].index:t.length;if(t.length!==n)throw new Error(`[createInstance] First service dependency of ${e.name} at position ${n+1} conflicts with ${t.length} static arguments`);return new e(...[...t,...s])}}},7866:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.traceCall=t.setTraceLogger=t.LogService=void 0;const n=i(844),o=i(2585),a={trace:o.LogLevelEnum.TRACE,debug:o.LogLevelEnum.DEBUG,info:o.LogLevelEnum.INFO,warn:o.LogLevelEnum.WARN,error:o.LogLevelEnum.ERROR,off:o.LogLevelEnum.OFF};let h,c=t.LogService=class extends n.Disposable{get logLevel(){return this._logLevel}constructor(e){super(),this._optionsService=e,this._logLevel=o.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),h=this}_updateLogLevel(){this._logLevel=a[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(e){for(let t=0;t<e.length;t++)"function"==typeof e[t]&&(e[t]=e[t]())}_log(e,t,i){this._evalLazyOptionalParams(i),e.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+t,...i)}trace(e,...t){this._logLevel<=o.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,e,t)}debug(e,...t){this._logLevel<=o.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,e,t)}info(e,...t){this._logLevel<=o.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,e,t)}warn(e,...t){this._logLevel<=o.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,e,t)}error(e,...t){this._logLevel<=o.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,e,t)}};t.LogService=c=s([r(0,o.IOptionsService)],c),t.setTraceLogger=function(e){h=e},t.traceCall=function(e,t,i){if("function"!=typeof i.value)throw new Error("not supported");const s=i.value;i.value=function(...e){if(h.logLevel!==o.LogLevelEnum.TRACE)return s.apply(this,e);h.trace(`GlyphRenderer#${s.name}(${e.map((e=>JSON.stringify(e))).join(", ")})`);const t=s.apply(this,e);return h.trace(`GlyphRenderer#${s.name} return`,t),t}}},7302:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionsService=t.DEFAULT_OPTIONS=void 0;const s=i(8460),r=i(844),n=i(6114);t.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:n.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}\',\\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const o=["normal","bold","100","200","300","400","500","600","700","800","900"];class a extends r.Disposable{constructor(e){super(),this._onOptionChange=this.register(new s.EventEmitter),this.onOptionChange=this._onOptionChange.event;const i={...t.DEFAULT_OPTIONS};for(const t in e)if(t in i)try{const s=e[t];i[t]=this._sanitizeAndValidateOption(t,s)}catch(e){console.error(e)}this.rawOptions=i,this.options={...i},this._setupOptions(),this.register((0,r.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(e,t){return this.onOptionChange((i=>{i===e&&t(this.rawOptions[e])}))}onMultipleOptionChange(e,t){return this.onOptionChange((i=>{-1!==e.indexOf(i)&&t()}))}_setupOptions(){const e=e=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);return this.rawOptions[e]},i=(e,i)=>{if(!(e in t.DEFAULT_OPTIONS))throw new Error(`No option with key "${e}"`);i=this._sanitizeAndValidateOption(e,i),this.rawOptions[e]!==i&&(this.rawOptions[e]=i,this._onOptionChange.fire(e))};for(const t in this.rawOptions){const s={get:e.bind(this,t),set:i.bind(this,t)};Object.defineProperty(this.options,t,s)}}_sanitizeAndValidateOption(e,i){switch(e){case"cursorStyle":if(i||(i=t.DEFAULT_OPTIONS[e]),!function(e){return"block"===e||"underline"===e||"bar"===e}(i))throw new Error(`"${i}" is not a valid value for ${e}`);break;case"wordSeparator":i||(i=t.DEFAULT_OPTIONS[e]);break;case"fontWeight":case"fontWeightBold":if("number"==typeof i&&1<=i&&i<=1e3)break;i=o.includes(i)?i:t.DEFAULT_OPTIONS[e];break;case"cursorWidth":i=Math.floor(i);case"lineHeight":case"tabStopWidth":if(i<1)throw new Error(`${e} cannot be less than 1, value: ${i}`);break;case"minimumContrastRatio":i=Math.max(1,Math.min(21,Math.round(10*i)/10));break;case"scrollback":if((i=Math.min(i,4294967295))<0)throw new Error(`${e} cannot be less than 0, value: ${i}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(i<=0)throw new Error(`${e} cannot be less than or equal to 0, value: ${i}`);break;case"rows":case"cols":if(!i&&0!==i)throw new Error(`${e} must be numeric, value: ${i}`);break;case"windowsPty":i=i??{}}return i}}t.OptionsService=a},2660:function(e,t,i){var s=this&&this.__decorate||function(e,t,i,s){var r,n=arguments.length,o=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(o=(n<3?r(o):n>3?r(t,i,o):r(t,i))||o);return n>3&&o&&Object.defineProperty(t,i,o),o},r=this&&this.__param||function(e,t){return function(i,s){t(i,s,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.OscLinkService=void 0;const n=i(2585);let o=t.OscLinkService=class{constructor(e){this._bufferService=e,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(e){const t=this._bufferService.buffer;if(void 0===e.id){const i=t.addMarker(t.ybase+t.y),s={data:e,id:this._nextId++,lines:[i]};return i.onDispose((()=>this._removeMarkerFromLink(s,i))),this._dataByLinkId.set(s.id,s),s.id}const i=e,s=this._getEntryIdKey(i),r=this._entriesWithId.get(s);if(r)return this.addLineToLink(r.id,t.ybase+t.y),r.id;const n=t.addMarker(t.ybase+t.y),o={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[n]};return n.onDispose((()=>this._removeMarkerFromLink(o,n))),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(e,t){const i=this._dataByLinkId.get(e);if(i&&i.lines.every((e=>e.line!==t))){const e=this._bufferService.buffer.addMarker(t);i.lines.push(e),e.onDispose((()=>this._removeMarkerFromLink(i,e)))}}getLinkData(e){return this._dataByLinkId.get(e)?.data}_getEntryIdKey(e){return`${e.id};;${e.uri}`}_removeMarkerFromLink(e,t){const i=e.lines.indexOf(t);-1!==i&&(e.lines.splice(i,1),0===e.lines.length&&(void 0!==e.data.id&&this._entriesWithId.delete(e.key),this._dataByLinkId.delete(e.id)))}};t.OscLinkService=o=s([r(0,n.IBufferService)],o)},8343:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createDecorator=t.getServiceDependencies=t.serviceRegistry=void 0;const i="di$target",s="di$dependencies";t.serviceRegistry=new Map,t.getServiceDependencies=function(e){return e[s]||[]},t.createDecorator=function(e){if(t.serviceRegistry.has(e))return t.serviceRegistry.get(e);const r=function(e,t,n){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,r){t[i]===t?t[s].push({id:e,index:r}):(t[s]=[{id:e,index:r}],t[i]=t)}(r,e,n)};return r.toString=()=>e,t.serviceRegistry.set(e,r),r}},2585:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IDecorationService=t.IUnicodeService=t.IOscLinkService=t.IOptionsService=t.ILogService=t.LogLevelEnum=t.IInstantiationService=t.ICharsetService=t.ICoreService=t.ICoreMouseService=t.IBufferService=void 0;const s=i(8343);var r;t.IBufferService=(0,s.createDecorator)("BufferService"),t.ICoreMouseService=(0,s.createDecorator)("CoreMouseService"),t.ICoreService=(0,s.createDecorator)("CoreService"),t.ICharsetService=(0,s.createDecorator)("CharsetService"),t.IInstantiationService=(0,s.createDecorator)("InstantiationService"),function(e){e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.OFF=5]="OFF"}(r||(t.LogLevelEnum=r={})),t.ILogService=(0,s.createDecorator)("LogService"),t.IOptionsService=(0,s.createDecorator)("OptionsService"),t.IOscLinkService=(0,s.createDecorator)("OscLinkService"),t.IUnicodeService=(0,s.createDecorator)("UnicodeService"),t.IDecorationService=(0,s.createDecorator)("DecorationService")},1480:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnicodeService=void 0;const s=i(8460),r=i(225);class n{static extractShouldJoin(e){return 0!=(1&e)}static extractWidth(e){return e>>1&3}static extractCharKind(e){return e>>3}static createPropertyValue(e,t,i=!1){return(16777215&e)<<3|(3&t)<<1|(i?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new s.EventEmitter,this.onChange=this._onChange.event;const e=new r.UnicodeV6;this.register(e),this._active=e.version,this._activeProvider=e}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(e){if(!this._providers[e])throw new Error(`unknown Unicode version "${e}"`);this._active=e,this._activeProvider=this._providers[e],this._onChange.fire(e)}register(e){this._providers[e.version]=e}wcwidth(e){return this._activeProvider.wcwidth(e)}getStringCellWidth(e){let t=0,i=0;const s=e.length;for(let r=0;r<s;++r){let o=e.charCodeAt(r);if(55296<=o&&o<=56319){if(++r>=s)return t+this.wcwidth(o);const i=e.charCodeAt(r);56320<=i&&i<=57343?o=1024*(o-55296)+i-56320+65536:t+=this.wcwidth(i)}const a=this.charProperties(o,i);let h=n.extractWidth(a);n.extractShouldJoin(a)&&(h-=n.extractWidth(i)),t+=h,i=a}return t}charProperties(e,t){return this._activeProvider.charProperties(e,t)}}t.UnicodeService=n}},t={};function i(s){var r=t[s];if(void 0!==r)return r.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,i),n.exports}var s={};return(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;const t=i(9042),r=i(3236),n=i(844),o=i(5741),a=i(8285),h=i(7975),c=i(7090),l=["cols","rows"];class d extends n.Disposable{constructor(e){super(),this._core=this.register(new r.Terminal(e)),this._addonManager=this.register(new o.AddonManager),this._publicOptions={...this._core.options};const t=e=>this._core.options[e],i=(e,t)=>{this._checkReadonlyOptions(e),this._core.options[e]=t};for(const e in this._core.options){const s={get:t.bind(this,e),set:i.bind(this,e)};Object.defineProperty(this._publicOptions,e,s)}}_checkReadonlyOptions(e){if(l.includes(e))throw new Error(`Option "${e}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new h.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const e=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:e.applicationCursorKeys,applicationKeypadMode:e.applicationKeypad,bracketedPasteMode:e.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:e.origin,reverseWraparoundMode:e.reverseWraparound,sendFocusMode:e.sendFocus,wraparoundMode:e.wraparound}}get options(){return this._publicOptions}set options(e){for(const t in e)this._publicOptions[t]=e[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(e,t=!0){this._core.input(e,t)}resize(e,t){this._verifyIntegers(e,t),this._core.resize(e,t)}open(e){this._core.open(e)}attachCustomKeyEventHandler(e){this._core.attachCustomKeyEventHandler(e)}attachCustomWheelEventHandler(e){this._core.attachCustomWheelEventHandler(e)}registerLinkProvider(e){return this._core.registerLinkProvider(e)}registerCharacterJoiner(e){return this._checkProposedApi(),this._core.registerCharacterJoiner(e)}deregisterCharacterJoiner(e){this._checkProposedApi(),this._core.deregisterCharacterJoiner(e)}registerMarker(e=0){return this._verifyIntegers(e),this._core.registerMarker(e)}registerDecoration(e){return this._checkProposedApi(),this._verifyPositiveIntegers(e.x??0,e.width??0,e.height??0),this._core.registerDecoration(e)}hasSelection(){return this._core.hasSelection()}select(e,t,i){this._verifyIntegers(e,t,i),this._core.select(e,t,i)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(e,t){this._verifyIntegers(e,t),this._core.selectLines(e,t)}dispose(){super.dispose()}scrollLines(e){this._verifyIntegers(e),this._core.scrollLines(e)}scrollPages(e){this._verifyIntegers(e),this._core.scrollPages(e)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(e){this._verifyIntegers(e),this._core.scrollToLine(e)}clear(){this._core.clear()}write(e,t){this._core.write(e,t)}writeln(e,t){this._core.write(e),this._core.write("\\r\\n",t)}paste(e){this._core.paste(e)}refresh(e,t){this._verifyIntegers(e,t),this._core.refresh(e,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(e){this._addonManager.loadAddon(this,e)}static get strings(){return t}_verifyIntegers(...e){for(const t of e)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...e){for(const t of e)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}e.Terminal=d})(),s})()));\n//# sourceMappingURL=xterm.js.map\n\n//# sourceURL=webpack://winbows11/./node_modules/@xterm/xterm/lib/xterm.js?\n}')},"./node_modules/css-loader/dist/cjs.js!./src/lib/winui/contextMenu/contextMenu.css":
/*!*****************************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/lib/winui/contextMenu/contextMenu.css ***!
  \*****************************************************************************************/(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/noSourceMaps.js */ "./node_modules/css-loader/dist/runtime/noSourceMaps.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../node_modules/css-loader/dist/runtime/api.js */ "./node_modules/css-loader/dist/runtime/api.js");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.winui-contextmenu-container {\r\n    position: fixed;\r\n    --contextmenu-bg: #fff;\r\n    --contextmenu-color: #000;\r\n    --contextmenu-border: 1px solid rgba(0, 0, 0, .1);\r\n    --contextmenu-hover: rgba(0, 0, 0, .08);\r\n    --contextmenu-active: rgba(0, 0, 0, .12);\r\n    --contextmenu-separator-bg: rgba(0, 0, 0, .1);\r\n    --contextmenu-backdrop-filter: initial;\r\n    --contextmenu-icon-width: 1rem;\r\n    --contextmenu-icon-height: 1rem;\r\n    --contextmenu-icon-size: .875rem;\r\n    --contextmenu-text-size: .75rem;\r\n    --contextmenu-expand-width: 1rem;\r\n    --contextmenu-expand-height: 1rem;\r\n    --contextmenu-expand-size: .875rem;\r\n    --contextmenu-maxwidth: 20rem;\r\n    --contextmenu-maxheight: 1.5rem;\r\n    --contextmenu-item-padding: .375rem .75rem;\r\n    --contextmenu-label-padding: .375rem .75rem;\r\n}\r\n\r\n[data-theme="dark"] .winui-contextmenu-container {\r\n    --contextmenu-bg: rgb(30, 30, 30);\r\n    --contextmenu-color: #fff;\r\n    --contextmenu-border: 1px solid rgba(255, 255, 255, .08);\r\n    --contextmenu-hover: rgba(255, 255, 255, .05);\r\n    --contextmenu-active: rgba(255, 255, 255, .1);\r\n    --contextmenu-separator-bg: rgba(255, 255, 255, .08);\r\n}\r\n\r\n.winui-contextmenu-container,\r\n.winui-contextmenu-container * {\r\n    font-family: var(--winbows-font-default);\r\n    user-select: none;\r\n    -webkit-user-select: none;\r\n    -webkit-user-drag: none;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.winui-contextmenu-menu-layer {\r\n    height: fit-content;\r\n}\r\n\r\n.winui-contextmenu-menu {\r\n    backdrop-filter: var(--contextmenu-backdrop-filter);\r\n    -webkit-backdrop-filter: var(--contextmenu-backdrop-filter);\r\n    background: var(--contextmenu-bg);\r\n    display: flex;\r\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 4px 16px 4px;\r\n    border: var(--contextmenu-border);\r\n    border-radius: .5rem;\r\n    flex-direction: column;\r\n    padding: .25rem;\r\n    gap: .25rem;\r\n    transition: all .2s ease-in-out;\r\n}\r\n\r\n.winui-contextmenu-menu-separator {\r\n    height: 1.5px;\r\n    width: 100%;\r\n    background: var(--contextmenu-separator-bg);\r\n}\r\n\r\n.winui-contextmenu-menu-item,\r\n.winui-contextmenu-menu-label {\r\n    display: flex;\r\n    border-radius: .25rem;\r\n    cursor: default;\r\n    position: relative;\r\n    transition: all .1s ease-in-out;\r\n    align-items: center;\r\n    max-width: var(--contextmenu-maxwidth);\r\n    max-height: var(--contextmenu-maxheight);\r\n}\r\n\r\n.winui-contextmenu-menu-item {\r\n    padding: var(--contextmenu-item-padding);\r\n}\r\n\r\n.winui-contextmenu-menu-label {\r\n    padding: var(--contextmenu-label-padding);\r\n}\r\n\r\n.winui-contextmenu-menu-item.disabled {\r\n    pointer-events: none;\r\n    opacity: .5;\r\n}\r\n\r\n.winui-contextmenu-menu-item.selected:before {\r\n    content: \'\';\r\n    background: var(--winbows-primary-color);\r\n    border-radius: 99px;\r\n    width: .25rem;\r\n    height: 50%;\r\n    position: absolute;\r\n    left: 0;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n}\r\n\r\n.winui-contextmenu-menu-item:hover,\r\n.winui-contextmenu-menu-item.selected {\r\n    background: var(--contextmenu-hover);\r\n}\r\n\r\n.winui-contextmenu-menu-item:active,\r\n.winui-contextmenu-menu-item.active {\r\n    background: var(--contextmenu-active);\r\n}\r\n\r\n.winui-contextmenu-menu-icon {\r\n    width: var(--contextmenu-icon-width);\r\n    height: var(--contextmenu-icon-height);\r\n    min-width: var(--contextmenu-icon-width);\r\n    min-height: var(--contextmenu-icon-height);\r\n    font-family: var(--winbows-font-icon);\r\n    font-size: var(--contextmenu-icon-size);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.winui-contextmenu-menu-text {\r\n    font-size: var(--contextmenu-text-size);\r\n    white-space: nowrap;\r\n    width: -webkit-fill-available;\r\n    padding: 0 .5rem;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.winui-contextmenu-menu-label .winui-contextmenu-menu-text {\r\n    padding: 0;\r\n}\r\n\r\n.winui-contextmenu-menu-expand {\r\n    width: var(--contextmenu-expand-width);\r\n    height: var(--contextmenu-expand-height);\r\n    min-width: var(--contextmenu-expand-width);\r\n    min-height: var(--contextmenu-expand-height);\r\n    flex: 1;\r\n    text-align: right;\r\n    margin-left: auto;\r\n    position: sticky;\r\n    right: 0;\r\n    padding: 0 .5rem;\r\n}\r\n\r\n.winui-contextmenu-menu-expand::before {\r\n    width: var(--contextmenu-expand-width);\r\n    height: var(--contextmenu-expand-height);\r\n    min-width: var(--contextmenu-expand-width);\r\n    min-height: var(--contextmenu-expand-height);\r\n    font-size: var(--contextmenu-expand-size);\r\n    content: \'\\\\e76c\';\r\n    font-family: var(--winbows-font-icon);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.winui-contextmenu-submenu {\r\n    position: absolute;\r\n    left: 100%;\r\n    top: 0;\r\n}`, ""]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://winbows11/./src/lib/winui/contextMenu/contextMenu.css?./node_modules/css-loader/dist/cjs.js\n}')},"./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/module=>{"use strict";eval('{\r\n\r\n/*\r\n  MIT License http://www.opensource.org/licenses/mit-license.php\r\n  Author Tobias Koppers @sokra\r\n*/\r\nmodule.exports = function (cssWithMappingToString) {\r\n  var list = [];\r\n\r\n  // return the list of modules as css string\r\n  list.toString = function toString() {\r\n    return this.map(function (item) {\r\n      var content = "";\r\n      var needLayer = typeof item[5] !== "undefined";\r\n      if (item[4]) {\r\n        content += "@supports (".concat(item[4], ") {");\r\n      }\r\n      if (item[2]) {\r\n        content += "@media ".concat(item[2], " {");\r\n      }\r\n      if (needLayer) {\r\n        content += "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {");\r\n      }\r\n      content += cssWithMappingToString(item);\r\n      if (needLayer) {\r\n        content += "}";\r\n      }\r\n      if (item[2]) {\r\n        content += "}";\r\n      }\r\n      if (item[4]) {\r\n        content += "}";\r\n      }\r\n      return content;\r\n    }).join("");\r\n  };\r\n\r\n  // import a list of modules into the list\r\n  list.i = function i(modules, media, dedupe, supports, layer) {\r\n    if (typeof modules === "string") {\r\n      modules = [[null, modules, undefined]];\r\n    }\r\n    var alreadyImportedModules = {};\r\n    if (dedupe) {\r\n      for (var k = 0; k < this.length; k++) {\r\n        var id = this[k][0];\r\n        if (id != null) {\r\n          alreadyImportedModules[id] = true;\r\n        }\r\n      }\r\n    }\r\n    for (var _k = 0; _k < modules.length; _k++) {\r\n      var item = [].concat(modules[_k]);\r\n      if (dedupe && alreadyImportedModules[item[0]]) {\r\n        continue;\r\n      }\r\n      if (typeof layer !== "undefined") {\r\n        if (typeof item[5] === "undefined") {\r\n          item[5] = layer;\r\n        } else {\r\n          item[1] = "@layer".concat(item[5].length > 0 ? " ".concat(item[5]) : "", " {").concat(item[1], "}");\r\n          item[5] = layer;\r\n        }\r\n      }\r\n      if (media) {\r\n        if (!item[2]) {\r\n          item[2] = media;\r\n        } else {\r\n          item[1] = "@media ".concat(item[2], " {").concat(item[1], "}");\r\n          item[2] = media;\r\n        }\r\n      }\r\n      if (supports) {\r\n        if (!item[4]) {\r\n          item[4] = "".concat(supports);\r\n        } else {\r\n          item[1] = "@supports (".concat(item[4], ") {").concat(item[1], "}");\r\n          item[4] = supports;\r\n        }\r\n      }\r\n      list.push(item);\r\n    }\r\n  };\r\n  return list;\r\n};\n\n//# sourceURL=webpack://winbows11/./node_modules/css-loader/dist/runtime/api.js?\n}')},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \**************************************************************/module=>{"use strict";eval("{\r\n\r\nmodule.exports = function (i) {\r\n  return i[1];\r\n};\n\n//# sourceURL=webpack://winbows11/./node_modules/css-loader/dist/runtime/noSourceMaps.js?\n}")},"./node_modules/string-argv/index.js":
/*!*******************************************!*\
  !*** ./node_modules/string-argv/index.js ***!
  \*******************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ parseArgsStringToArgv),\n/* harmony export */   parseArgsStringToArgv: () => (/* binding */ parseArgsStringToArgv)\n/* harmony export */ });\n\nfunction parseArgsStringToArgv(value, env, file) {\n    // ([^\\s\'"]([^\\s\'"]*([\'"])([^\\3]*?)\\3)+[^\\s\'"]*) Matches nested quotes until the first space outside of quotes\n    // [^\\s\'"]+ or Match if not a space \' or "\n    // ([\'"])([^\\5]*?)\\5 or Match "quoted text" without quotes\n    // `\\3` and `\\5` are a backreference to the quote style (\' or ") captured\n    var myRegexp = /([^\\s\'"]([^\\s\'"]*([\'"])([^\\3]*?)\\3)+[^\\s\'"]*)|[^\\s\'"]+|([\'"])([^\\5]*?)\\5/gi;\n    var myString = value;\n    var myArray = [];\n    if (env) {\n        myArray.push(env);\n    }\n    if (file) {\n        myArray.push(file);\n    }\n    var match;\n    do {\n        // Each call to exec returns the next regex match as an array\n        match = myRegexp.exec(myString);\n        if (match !== null) {\n            // Index 1 in the array is the captured group if it exists\n            // Index 0 is the matched text, which we use if no captured group exists\n            myArray.push(firstString(match[1], match[6], match[0]));\n        }\n    } while (match !== null);\n    return myArray;\n}\n// Accepts any number of arguments, and returns the first one that is a string\n// (even an empty string)\nfunction firstString() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    for (var i = 0; i < args.length; i++) {\n        var arg = args[i];\n        if (typeof arg === "string") {\n            return arg;\n        }\n    }\n}\n\n\n//# sourceURL=webpack://winbows11/./node_modules/string-argv/index.js?\n}')},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/module=>{"use strict";eval('{\r\n\r\nvar stylesInDOM = [];\r\nfunction getIndexByIdentifier(identifier) {\r\n  var result = -1;\r\n  for (var i = 0; i < stylesInDOM.length; i++) {\r\n    if (stylesInDOM[i].identifier === identifier) {\r\n      result = i;\r\n      break;\r\n    }\r\n  }\r\n  return result;\r\n}\r\nfunction modulesToDom(list, options) {\r\n  var idCountMap = {};\r\n  var identifiers = [];\r\n  for (var i = 0; i < list.length; i++) {\r\n    var item = list[i];\r\n    var id = options.base ? item[0] + options.base : item[0];\r\n    var count = idCountMap[id] || 0;\r\n    var identifier = "".concat(id, " ").concat(count);\r\n    idCountMap[id] = count + 1;\r\n    var indexByIdentifier = getIndexByIdentifier(identifier);\r\n    var obj = {\r\n      css: item[1],\r\n      media: item[2],\r\n      sourceMap: item[3],\r\n      supports: item[4],\r\n      layer: item[5]\r\n    };\r\n    if (indexByIdentifier !== -1) {\r\n      stylesInDOM[indexByIdentifier].references++;\r\n      stylesInDOM[indexByIdentifier].updater(obj);\r\n    } else {\r\n      var updater = addElementStyle(obj, options);\r\n      options.byIndex = i;\r\n      stylesInDOM.splice(i, 0, {\r\n        identifier: identifier,\r\n        updater: updater,\r\n        references: 1\r\n      });\r\n    }\r\n    identifiers.push(identifier);\r\n  }\r\n  return identifiers;\r\n}\r\nfunction addElementStyle(obj, options) {\r\n  var api = options.domAPI(options);\r\n  api.update(obj);\r\n  var updater = function updater(newObj) {\r\n    if (newObj) {\r\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\r\n        return;\r\n      }\r\n      api.update(obj = newObj);\r\n    } else {\r\n      api.remove();\r\n    }\r\n  };\r\n  return updater;\r\n}\r\nmodule.exports = function (list, options) {\r\n  options = options || {};\r\n  list = list || [];\r\n  var lastIdentifiers = modulesToDom(list, options);\r\n  return function update(newList) {\r\n    newList = newList || [];\r\n    for (var i = 0; i < lastIdentifiers.length; i++) {\r\n      var identifier = lastIdentifiers[i];\r\n      var index = getIndexByIdentifier(identifier);\r\n      stylesInDOM[index].references--;\r\n    }\r\n    var newLastIdentifiers = modulesToDom(newList, options);\r\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\r\n      var _identifier = lastIdentifiers[_i];\r\n      var _index = getIndexByIdentifier(_identifier);\r\n      if (stylesInDOM[_index].references === 0) {\r\n        stylesInDOM[_index].updater();\r\n        stylesInDOM.splice(_index, 1);\r\n      }\r\n    }\r\n    lastIdentifiers = newLastIdentifiers;\r\n  };\r\n};\n\n//# sourceURL=webpack://winbows11/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?\n}')},"./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/module=>{"use strict";eval('{\r\n\r\nvar memo = {};\r\n\r\n/* istanbul ignore next  */\r\nfunction getTarget(target) {\r\n  if (typeof memo[target] === "undefined") {\r\n    var styleTarget = document.querySelector(target);\r\n\r\n    // Special case to return head of iframe instead of iframe itself\r\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\r\n      try {\r\n        // This will throw an exception if access to iframe is blocked\r\n        // due to cross-origin restrictions\r\n        styleTarget = styleTarget.contentDocument.head;\r\n      } catch (e) {\r\n        // istanbul ignore next\r\n        styleTarget = null;\r\n      }\r\n    }\r\n    memo[target] = styleTarget;\r\n  }\r\n  return memo[target];\r\n}\r\n\r\n/* istanbul ignore next  */\r\nfunction insertBySelector(insert, style) {\r\n  var target = getTarget(insert);\r\n  if (!target) {\r\n    throw new Error("Couldn\'t find a style target. This probably means that the value for the \'insert\' parameter is invalid.");\r\n  }\r\n  target.appendChild(style);\r\n}\r\nmodule.exports = insertBySelector;\n\n//# sourceURL=webpack://winbows11/./node_modules/style-loader/dist/runtime/insertBySelector.js?\n}')},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/module=>{"use strict";eval('{\r\n\r\n/* istanbul ignore next  */\r\nfunction insertStyleElement(options) {\r\n  var element = document.createElement("style");\r\n  options.setAttributes(element, options.attributes);\r\n  options.insert(element, options.options);\r\n  return element;\r\n}\r\nmodule.exports = insertStyleElement;\n\n//# sourceURL=webpack://winbows11/./node_modules/style-loader/dist/runtime/insertStyleElement.js?\n}')},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/(module,__unused_webpack_exports,__webpack_require__)=>{"use strict";eval('{\r\n\r\n/* istanbul ignore next  */\r\nfunction setAttributesWithoutAttributes(styleElement) {\r\n  var nonce =  true ? __webpack_require__.nc : 0;\r\n  if (nonce) {\r\n    styleElement.setAttribute("nonce", nonce);\r\n  }\r\n}\r\nmodule.exports = setAttributesWithoutAttributes;\n\n//# sourceURL=webpack://winbows11/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js?\n}')},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/module=>{"use strict";eval('{\r\n\r\n/* istanbul ignore next  */\r\nfunction apply(styleElement, options, obj) {\r\n  var css = "";\r\n  if (obj.supports) {\r\n    css += "@supports (".concat(obj.supports, ") {");\r\n  }\r\n  if (obj.media) {\r\n    css += "@media ".concat(obj.media, " {");\r\n  }\r\n  var needLayer = typeof obj.layer !== "undefined";\r\n  if (needLayer) {\r\n    css += "@layer".concat(obj.layer.length > 0 ? " ".concat(obj.layer) : "", " {");\r\n  }\r\n  css += obj.css;\r\n  if (needLayer) {\r\n    css += "}";\r\n  }\r\n  if (obj.media) {\r\n    css += "}";\r\n  }\r\n  if (obj.supports) {\r\n    css += "}";\r\n  }\r\n  var sourceMap = obj.sourceMap;\r\n  if (sourceMap && typeof btoa !== "undefined") {\r\n    css += "\\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), " */");\r\n  }\r\n\r\n  // For old IE\r\n  /* istanbul ignore if  */\r\n  options.styleTagTransform(css, styleElement, options.options);\r\n}\r\nfunction removeStyleElement(styleElement) {\r\n  // istanbul ignore if\r\n  if (styleElement.parentNode === null) {\r\n    return false;\r\n  }\r\n  styleElement.parentNode.removeChild(styleElement);\r\n}\r\n\r\n/* istanbul ignore next  */\r\nfunction domAPI(options) {\r\n  if (typeof document === "undefined") {\r\n    return {\r\n      update: function update() {},\r\n      remove: function remove() {}\r\n    };\r\n  }\r\n  var styleElement = options.insertStyleElement(options);\r\n  return {\r\n    update: function update(obj) {\r\n      apply(styleElement, options, obj);\r\n    },\r\n    remove: function remove() {\r\n      removeStyleElement(styleElement);\r\n    }\r\n  };\r\n}\r\nmodule.exports = domAPI;\n\n//# sourceURL=webpack://winbows11/./node_modules/style-loader/dist/runtime/styleDomAPI.js?\n}')},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/module=>{"use strict";eval("{\r\n\r\n/* istanbul ignore next  */\r\nfunction styleTagTransform(css, styleElement) {\r\n  if (styleElement.styleSheet) {\r\n    styleElement.styleSheet.cssText = css;\r\n  } else {\r\n    while (styleElement.firstChild) {\r\n      styleElement.removeChild(styleElement.firstChild);\r\n    }\r\n    styleElement.appendChild(document.createTextNode(css));\r\n  }\r\n}\r\nmodule.exports = styleTagTransform;\n\n//# sourceURL=webpack://winbows11/./node_modules/style-loader/dist/runtime/styleTagTransform.js?\n}")},"./node_modules/uri-js/dist/es5/uri.all.js":
/*!*************************************************!*\
  !*** ./node_modules/uri-js/dist/es5/uri.all.js ***!
  \*************************************************/function(__unused_webpack_module,exports){eval('{/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */\n(function (global, factory) {\n\t true ? factory(exports) :\n\t0;\n}(this, (function (exports) { \'use strict\';\n\nfunction merge() {\n    for (var _len = arguments.length, sets = Array(_len), _key = 0; _key < _len; _key++) {\n        sets[_key] = arguments[_key];\n    }\n\n    if (sets.length > 1) {\n        sets[0] = sets[0].slice(0, -1);\n        var xl = sets.length - 1;\n        for (var x = 1; x < xl; ++x) {\n            sets[x] = sets[x].slice(1, -1);\n        }\n        sets[xl] = sets[xl].slice(1);\n        return sets.join(\'\');\n    } else {\n        return sets[0];\n    }\n}\nfunction subexp(str) {\n    return "(?:" + str + ")";\n}\nfunction typeOf(o) {\n    return o === undefined ? "undefined" : o === null ? "null" : Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase();\n}\nfunction toUpperCase(str) {\n    return str.toUpperCase();\n}\nfunction toArray(obj) {\n    return obj !== undefined && obj !== null ? obj instanceof Array ? obj : typeof obj.length !== "number" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj) : [];\n}\nfunction assign(target, source) {\n    var obj = target;\n    if (source) {\n        for (var key in source) {\n            obj[key] = source[key];\n        }\n    }\n    return obj;\n}\n\nfunction buildExps(isIRI) {\n    var ALPHA$$ = "[A-Za-z]",\n        CR$ = "[\\\\x0D]",\n        DIGIT$$ = "[0-9]",\n        DQUOTE$$ = "[\\\\x22]",\n        HEXDIG$$ = merge(DIGIT$$, "[A-Fa-f]"),\n        //case-insensitive\n    LF$$ = "[\\\\x0A]",\n        SP$$ = "[\\\\x20]",\n        PCT_ENCODED$ = subexp(subexp("%[EFef]" + HEXDIG$$ + "%" + HEXDIG$$ + HEXDIG$$ + "%" + HEXDIG$$ + HEXDIG$$) + "|" + subexp("%[89A-Fa-f]" + HEXDIG$$ + "%" + HEXDIG$$ + HEXDIG$$) + "|" + subexp("%" + HEXDIG$$ + HEXDIG$$)),\n        //expanded\n    GEN_DELIMS$$ = "[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]",\n        SUB_DELIMS$$ = "[\\\\!\\\\$\\\\&\\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]",\n        RESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n        UCSCHAR$$ = isIRI ? "[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]" : "[]",\n        //subset, excludes bidi control characters\n    IPRIVATE$$ = isIRI ? "[\\\\uE000-\\\\uF8FF]" : "[]",\n        //subset\n    UNRESERVED$$ = merge(ALPHA$$, DIGIT$$, "[\\\\-\\\\.\\\\_\\\\~]", UCSCHAR$$),\n        SCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, "[\\\\+\\\\-\\\\.]") + "*"),\n        USERINFO$ = subexp(subexp(PCT_ENCODED$ + "|" + merge(UNRESERVED$$, SUB_DELIMS$$, "[\\\\:]")) + "*"),\n        DEC_OCTET$ = subexp(subexp("25[0-5]") + "|" + subexp("2[0-4]" + DIGIT$$) + "|" + subexp("1" + DIGIT$$ + DIGIT$$) + "|" + subexp("[1-9]" + DIGIT$$) + "|" + DIGIT$$),\n        DEC_OCTET_RELAXED$ = subexp(subexp("25[0-5]") + "|" + subexp("2[0-4]" + DIGIT$$) + "|" + subexp("1" + DIGIT$$ + DIGIT$$) + "|" + subexp("0?[1-9]" + DIGIT$$) + "|0?0?" + DIGIT$$),\n        //relaxed parsing rules\n    IPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + "\\\\." + DEC_OCTET_RELAXED$ + "\\\\." + DEC_OCTET_RELAXED$ + "\\\\." + DEC_OCTET_RELAXED$),\n        H16$ = subexp(HEXDIG$$ + "{1,4}"),\n        LS32$ = subexp(subexp(H16$ + "\\\\:" + H16$) + "|" + IPV4ADDRESS$),\n        IPV6ADDRESS1$ = subexp(subexp(H16$ + "\\\\:") + "{6}" + LS32$),\n        //                           6( h16 ":" ) ls32\n    IPV6ADDRESS2$ = subexp("\\\\:\\\\:" + subexp(H16$ + "\\\\:") + "{5}" + LS32$),\n        //                      "::" 5( h16 ":" ) ls32\n    IPV6ADDRESS3$ = subexp(subexp(H16$) + "?\\\\:\\\\:" + subexp(H16$ + "\\\\:") + "{4}" + LS32$),\n        //[               h16 ] "::" 4( h16 ":" ) ls32\n    IPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + "\\\\:") + "{0,1}" + H16$) + "?\\\\:\\\\:" + subexp(H16$ + "\\\\:") + "{3}" + LS32$),\n        //[ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32\n    IPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + "\\\\:") + "{0,2}" + H16$) + "?\\\\:\\\\:" + subexp(H16$ + "\\\\:") + "{2}" + LS32$),\n        //[ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32\n    IPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + "\\\\:") + "{0,3}" + H16$) + "?\\\\:\\\\:" + H16$ + "\\\\:" + LS32$),\n        //[ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32\n    IPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + "\\\\:") + "{0,4}" + H16$) + "?\\\\:\\\\:" + LS32$),\n        //[ *4( h16 ":" ) h16 ] "::"              ls32\n    IPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + "\\\\:") + "{0,5}" + H16$) + "?\\\\:\\\\:" + H16$),\n        //[ *5( h16 ":" ) h16 ] "::"              h16\n    IPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + "\\\\:") + "{0,6}" + H16$) + "?\\\\:\\\\:"),\n        //[ *6( h16 ":" ) h16 ] "::"\n    IPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join("|")),\n        ZONEID$ = subexp(subexp(UNRESERVED$$ + "|" + PCT_ENCODED$) + "+"),\n        //RFC 6874\n    IPV6ADDRZ$ = subexp(IPV6ADDRESS$ + "\\\\%25" + ZONEID$),\n        //RFC 6874\n    IPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp("\\\\%25|\\\\%(?!" + HEXDIG$$ + "{2})") + ZONEID$),\n        //RFC 6874, with relaxed parsing rules\n    IPVFUTURE$ = subexp("[vV]" + HEXDIG$$ + "+\\\\." + merge(UNRESERVED$$, SUB_DELIMS$$, "[\\\\:]") + "+"),\n        IP_LITERAL$ = subexp("\\\\[" + subexp(IPV6ADDRZ_RELAXED$ + "|" + IPV6ADDRESS$ + "|" + IPVFUTURE$) + "\\\\]"),\n        //RFC 6874\n    REG_NAME$ = subexp(subexp(PCT_ENCODED$ + "|" + merge(UNRESERVED$$, SUB_DELIMS$$)) + "*"),\n        HOST$ = subexp(IP_LITERAL$ + "|" + IPV4ADDRESS$ + "(?!" + REG_NAME$ + ")" + "|" + REG_NAME$),\n        PORT$ = subexp(DIGIT$$ + "*"),\n        AUTHORITY$ = subexp(subexp(USERINFO$ + "@") + "?" + HOST$ + subexp("\\\\:" + PORT$) + "?"),\n        PCHAR$ = subexp(PCT_ENCODED$ + "|" + merge(UNRESERVED$$, SUB_DELIMS$$, "[\\\\:\\\\@]")),\n        SEGMENT$ = subexp(PCHAR$ + "*"),\n        SEGMENT_NZ$ = subexp(PCHAR$ + "+"),\n        SEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + "|" + merge(UNRESERVED$$, SUB_DELIMS$$, "[\\\\@]")) + "+"),\n        PATH_ABEMPTY$ = subexp(subexp("\\\\/" + SEGMENT$) + "*"),\n        PATH_ABSOLUTE$ = subexp("\\\\/" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + "?"),\n        //simplified\n    PATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_EMPTY$ = "(?!" + PCHAR$ + ")",\n        PATH$ = subexp(PATH_ABEMPTY$ + "|" + PATH_ABSOLUTE$ + "|" + PATH_NOSCHEME$ + "|" + PATH_ROOTLESS$ + "|" + PATH_EMPTY$),\n        QUERY$ = subexp(subexp(PCHAR$ + "|" + merge("[\\\\/\\\\?]", IPRIVATE$$)) + "*"),\n        FRAGMENT$ = subexp(subexp(PCHAR$ + "|[\\\\/\\\\?]") + "*"),\n        HIER_PART$ = subexp(subexp("\\\\/\\\\/" + AUTHORITY$ + PATH_ABEMPTY$) + "|" + PATH_ABSOLUTE$ + "|" + PATH_ROOTLESS$ + "|" + PATH_EMPTY$),\n        URI$ = subexp(SCHEME$ + "\\\\:" + HIER_PART$ + subexp("\\\\?" + QUERY$) + "?" + subexp("\\\\#" + FRAGMENT$) + "?"),\n        RELATIVE_PART$ = subexp(subexp("\\\\/\\\\/" + AUTHORITY$ + PATH_ABEMPTY$) + "|" + PATH_ABSOLUTE$ + "|" + PATH_NOSCHEME$ + "|" + PATH_EMPTY$),\n        RELATIVE$ = subexp(RELATIVE_PART$ + subexp("\\\\?" + QUERY$) + "?" + subexp("\\\\#" + FRAGMENT$) + "?"),\n        URI_REFERENCE$ = subexp(URI$ + "|" + RELATIVE$),\n        ABSOLUTE_URI$ = subexp(SCHEME$ + "\\\\:" + HIER_PART$ + subexp("\\\\?" + QUERY$) + "?"),\n        GENERIC_REF$ = "^(" + SCHEME$ + ")\\\\:" + subexp(subexp("\\\\/\\\\/(" + subexp("(" + USERINFO$ + ")@") + "?(" + HOST$ + ")" + subexp("\\\\:(" + PORT$ + ")") + "?)") + "?(" + PATH_ABEMPTY$ + "|" + PATH_ABSOLUTE$ + "|" + PATH_ROOTLESS$ + "|" + PATH_EMPTY$ + ")") + subexp("\\\\?(" + QUERY$ + ")") + "?" + subexp("\\\\#(" + FRAGMENT$ + ")") + "?$",\n        RELATIVE_REF$ = "^(){0}" + subexp(subexp("\\\\/\\\\/(" + subexp("(" + USERINFO$ + ")@") + "?(" + HOST$ + ")" + subexp("\\\\:(" + PORT$ + ")") + "?)") + "?(" + PATH_ABEMPTY$ + "|" + PATH_ABSOLUTE$ + "|" + PATH_NOSCHEME$ + "|" + PATH_EMPTY$ + ")") + subexp("\\\\?(" + QUERY$ + ")") + "?" + subexp("\\\\#(" + FRAGMENT$ + ")") + "?$",\n        ABSOLUTE_REF$ = "^(" + SCHEME$ + ")\\\\:" + subexp(subexp("\\\\/\\\\/(" + subexp("(" + USERINFO$ + ")@") + "?(" + HOST$ + ")" + subexp("\\\\:(" + PORT$ + ")") + "?)") + "?(" + PATH_ABEMPTY$ + "|" + PATH_ABSOLUTE$ + "|" + PATH_ROOTLESS$ + "|" + PATH_EMPTY$ + ")") + subexp("\\\\?(" + QUERY$ + ")") + "?$",\n        SAMEDOC_REF$ = "^" + subexp("\\\\#(" + FRAGMENT$ + ")") + "?$",\n        AUTHORITY_REF$ = "^" + subexp("(" + USERINFO$ + ")@") + "?(" + HOST$ + ")" + subexp("\\\\:(" + PORT$ + ")") + "?$";\n    return {\n        NOT_SCHEME: new RegExp(merge("[^]", ALPHA$$, DIGIT$$, "[\\\\+\\\\-\\\\.]"), "g"),\n        NOT_USERINFO: new RegExp(merge("[^\\\\%\\\\:]", UNRESERVED$$, SUB_DELIMS$$), "g"),\n        NOT_HOST: new RegExp(merge("[^\\\\%\\\\[\\\\]\\\\:]", UNRESERVED$$, SUB_DELIMS$$), "g"),\n        NOT_PATH: new RegExp(merge("[^\\\\%\\\\/\\\\:\\\\@]", UNRESERVED$$, SUB_DELIMS$$), "g"),\n        NOT_PATH_NOSCHEME: new RegExp(merge("[^\\\\%\\\\/\\\\@]", UNRESERVED$$, SUB_DELIMS$$), "g"),\n        NOT_QUERY: new RegExp(merge("[^\\\\%]", UNRESERVED$$, SUB_DELIMS$$, "[\\\\:\\\\@\\\\/\\\\?]", IPRIVATE$$), "g"),\n        NOT_FRAGMENT: new RegExp(merge("[^\\\\%]", UNRESERVED$$, SUB_DELIMS$$, "[\\\\:\\\\@\\\\/\\\\?]"), "g"),\n        ESCAPE: new RegExp(merge("[^]", UNRESERVED$$, SUB_DELIMS$$), "g"),\n        UNRESERVED: new RegExp(UNRESERVED$$, "g"),\n        OTHER_CHARS: new RegExp(merge("[^\\\\%]", UNRESERVED$$, RESERVED$$), "g"),\n        PCT_ENCODED: new RegExp(PCT_ENCODED$, "g"),\n        IPV4ADDRESS: new RegExp("^(" + IPV4ADDRESS$ + ")$"),\n        IPV6ADDRESS: new RegExp("^\\\\[?(" + IPV6ADDRESS$ + ")" + subexp(subexp("\\\\%25|\\\\%(?!" + HEXDIG$$ + "{2})") + "(" + ZONEID$ + ")") + "?\\\\]?$") //RFC 6874, with relaxed parsing rules\n    };\n}\nvar URI_PROTOCOL = buildExps(false);\n\nvar IRI_PROTOCOL = buildExps(true);\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i["return"]) _i["return"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError("Invalid attempt to destructure non-iterable instance");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/** Highest positive signed 32-bit float value */\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = \'-\'; // \'\\x2D\'\n\n/** Regular expressions */\nvar regexPunycode = /^xn--/;\nvar regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nvar regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nvar errors = {\n\t\'overflow\': \'Overflow: input needs wider integers to process\',\n\t\'not-basic\': \'Illegal input >= 0x80 (not a basic code point)\',\n\t\'invalid-input\': \'Invalid input\'\n};\n\n/** Convenience shortcuts */\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error$1(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tvar result = [];\n\tvar length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tvar parts = string.split(\'@\');\n\tvar result = \'\';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + \'@\';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, \'\\x2E\');\n\tvar labels = string.split(\'.\');\n\tvar encoded = map(labels, fn).join(\'.\');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\twhile (counter < length) {\n\t\tvar value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It\'s a high surrogate, and there is a next character.\n\t\t\tvar extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) {\n\t\t\t\t// Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It\'s an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nvar ucs2encode = function ucs2encode(array) {\n\treturn String.fromCodePoint.apply(String, toConsumableArray(array));\n};\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nvar basicToDigit = function basicToDigit(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nvar digitToBasic = function digitToBasic(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nvar adapt = function adapt(delta, numPoints, firstTime) {\n\tvar k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (; /* no initialization */delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nvar decode = function decode(input) {\n\t// Don\'t use UCS-2.\n\tvar output = [];\n\tvar inputLength = input.length;\n\tvar i = 0;\n\tvar n = initialN;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tvar basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (var j = 0; j < basic; ++j) {\n\t\t// if it\'s not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror$1(\'not-basic\');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (var index = basic > 0 ? basic + 1 : 0; index < inputLength;) /* no final expression */{\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tvar oldi = i;\n\t\tfor (var w = 1, k = base;; /* no condition */k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror$1(\'invalid-input\');\n\t\t\t}\n\n\t\t\tvar digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror$1(\'overflow\');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror$1(\'overflow\');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\t\t}\n\n\t\tvar out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we\'ll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror$1(\'overflow\');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\t}\n\n\treturn String.fromCodePoint.apply(String, output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nvar encode = function encode(input) {\n\tvar output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tvar inputLength = input.length;\n\n\t// Initialize the state.\n\tvar n = initialN;\n\tvar delta = 0;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points.\n\tvar _iteratorNormalCompletion = true;\n\tvar _didIteratorError = false;\n\tvar _iteratorError = undefined;\n\n\ttry {\n\t\tfor (var _iterator = input[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\tvar _currentValue2 = _step.value;\n\n\t\t\tif (_currentValue2 < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(_currentValue2));\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\t_didIteratorError = true;\n\t\t_iteratorError = err;\n\t} finally {\n\t\ttry {\n\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t_iterator.return();\n\t\t\t}\n\t\t} finally {\n\t\t\tif (_didIteratorError) {\n\t\t\t\tthrow _iteratorError;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar basicLength = output.length;\n\tvar handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it\'s empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tvar m = maxInt;\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = input[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar currentValue = _step2.value;\n\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder\'s <n,i> state to <m,0>,\n\t\t\t// but guard against overflow.\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t_iterator2.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror$1(\'overflow\');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = input[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar _currentValue = _step3.value;\n\n\t\t\t\tif (_currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror$1(\'overflow\');\n\t\t\t\t}\n\t\t\t\tif (_currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\t\tvar q = delta;\n\t\t\t\t\tfor (var k = base;; /* no condition */k += base) {\n\t\t\t\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar qMinusT = q - t;\n\t\t\t\t\t\tvar baseMinusT = base - t;\n\t\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t_iterator3.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\t}\n\treturn output.join(\'\');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn\'t matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nvar toUnicode = function toUnicode(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn\'t matter if you call it with a domain that\'s already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nvar toASCII = function toASCII(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexNonASCII.test(string) ? \'xn--\' + encode(string) : string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nvar punycode = {\n\t/**\n  * A string representing the current Punycode.js version number.\n  * @memberOf punycode\n  * @type String\n  */\n\t\'version\': \'2.1.0\',\n\t/**\n  * An object of methods to convert from JavaScript\'s internal character\n  * representation (UCS-2) to Unicode code points, and back.\n  * @see <https://mathiasbynens.be/notes/javascript-encoding>\n  * @memberOf punycode\n  * @type Object\n  */\n\t\'ucs2\': {\n\t\t\'decode\': ucs2decode,\n\t\t\'encode\': ucs2encode\n\t},\n\t\'decode\': decode,\n\t\'encode\': encode,\n\t\'toASCII\': toASCII,\n\t\'toUnicode\': toUnicode\n};\n\n/**\n * URI.js\n *\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\n * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>\n * @see http://github.com/garycourt/uri-js\n */\n/**\n * Copyright 2011 Gary Court. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are\n * permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice, this list of\n *       conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\n *       of conditions and the following disclaimer in the documentation and/or other materials\n *       provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS\'\' AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those of the\n * authors and should not be interpreted as representing official policies, either expressed\n * or implied, of Gary Court.\n */\nvar SCHEMES = {};\nfunction pctEncChar(chr) {\n    var c = chr.charCodeAt(0);\n    var e = void 0;\n    if (c < 16) e = "%0" + c.toString(16).toUpperCase();else if (c < 128) e = "%" + c.toString(16).toUpperCase();else if (c < 2048) e = "%" + (c >> 6 | 192).toString(16).toUpperCase() + "%" + (c & 63 | 128).toString(16).toUpperCase();else e = "%" + (c >> 12 | 224).toString(16).toUpperCase() + "%" + (c >> 6 & 63 | 128).toString(16).toUpperCase() + "%" + (c & 63 | 128).toString(16).toUpperCase();\n    return e;\n}\nfunction pctDecChars(str) {\n    var newStr = "";\n    var i = 0;\n    var il = str.length;\n    while (i < il) {\n        var c = parseInt(str.substr(i + 1, 2), 16);\n        if (c < 128) {\n            newStr += String.fromCharCode(c);\n            i += 3;\n        } else if (c >= 194 && c < 224) {\n            if (il - i >= 6) {\n                var c2 = parseInt(str.substr(i + 4, 2), 16);\n                newStr += String.fromCharCode((c & 31) << 6 | c2 & 63);\n            } else {\n                newStr += str.substr(i, 6);\n            }\n            i += 6;\n        } else if (c >= 224) {\n            if (il - i >= 9) {\n                var _c = parseInt(str.substr(i + 4, 2), 16);\n                var c3 = parseInt(str.substr(i + 7, 2), 16);\n                newStr += String.fromCharCode((c & 15) << 12 | (_c & 63) << 6 | c3 & 63);\n            } else {\n                newStr += str.substr(i, 9);\n            }\n            i += 9;\n        } else {\n            newStr += str.substr(i, 3);\n            i += 3;\n        }\n    }\n    return newStr;\n}\nfunction _normalizeComponentEncoding(components, protocol) {\n    function decodeUnreserved(str) {\n        var decStr = pctDecChars(str);\n        return !decStr.match(protocol.UNRESERVED) ? str : decStr;\n    }\n    if (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, "");\n    if (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    return components;\n}\n\nfunction _stripLeadingZeros(str) {\n    return str.replace(/^0*(.*)/, "$1") || "0";\n}\nfunction _normalizeIPv4(host, protocol) {\n    var matches = host.match(protocol.IPV4ADDRESS) || [];\n\n    var _matches = slicedToArray(matches, 2),\n        address = _matches[1];\n\n    if (address) {\n        return address.split(".").map(_stripLeadingZeros).join(".");\n    } else {\n        return host;\n    }\n}\nfunction _normalizeIPv6(host, protocol) {\n    var matches = host.match(protocol.IPV6ADDRESS) || [];\n\n    var _matches2 = slicedToArray(matches, 3),\n        address = _matches2[1],\n        zone = _matches2[2];\n\n    if (address) {\n        var _address$toLowerCase$ = address.toLowerCase().split(\'::\').reverse(),\n            _address$toLowerCase$2 = slicedToArray(_address$toLowerCase$, 2),\n            last = _address$toLowerCase$2[0],\n            first = _address$toLowerCase$2[1];\n\n        var firstFields = first ? first.split(":").map(_stripLeadingZeros) : [];\n        var lastFields = last.split(":").map(_stripLeadingZeros);\n        var isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n        var fieldCount = isLastFieldIPv4Address ? 7 : 8;\n        var lastFieldsStart = lastFields.length - fieldCount;\n        var fields = Array(fieldCount);\n        for (var x = 0; x < fieldCount; ++x) {\n            fields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || \'\';\n        }\n        if (isLastFieldIPv4Address) {\n            fields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n        }\n        var allZeroFields = fields.reduce(function (acc, field, index) {\n            if (!field || field === "0") {\n                var lastLongest = acc[acc.length - 1];\n                if (lastLongest && lastLongest.index + lastLongest.length === index) {\n                    lastLongest.length++;\n                } else {\n                    acc.push({ index: index, length: 1 });\n                }\n            }\n            return acc;\n        }, []);\n        var longestZeroFields = allZeroFields.sort(function (a, b) {\n            return b.length - a.length;\n        })[0];\n        var newHost = void 0;\n        if (longestZeroFields && longestZeroFields.length > 1) {\n            var newFirst = fields.slice(0, longestZeroFields.index);\n            var newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n            newHost = newFirst.join(":") + "::" + newLast.join(":");\n        } else {\n            newHost = fields.join(":");\n        }\n        if (zone) {\n            newHost += "%" + zone;\n        }\n        return newHost;\n    } else {\n        return host;\n    }\n}\nvar URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nvar NO_MATCH_IS_UNDEFINED = "".match(/(){0}/)[1] === undefined;\nfunction parse(uriString) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var components = {};\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    if (options.reference === "suffix") uriString = (options.scheme ? options.scheme + ":" : "") + "//" + uriString;\n    var matches = uriString.match(URI_PARSE);\n    if (matches) {\n        if (NO_MATCH_IS_UNDEFINED) {\n            //store each component\n            components.scheme = matches[1];\n            components.userinfo = matches[3];\n            components.host = matches[4];\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || "";\n            components.query = matches[7];\n            components.fragment = matches[8];\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = matches[5];\n            }\n        } else {\n            //IE FIX for improper RegExp matching\n            //store each component\n            components.scheme = matches[1] || undefined;\n            components.userinfo = uriString.indexOf("@") !== -1 ? matches[3] : undefined;\n            components.host = uriString.indexOf("//") !== -1 ? matches[4] : undefined;\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || "";\n            components.query = uriString.indexOf("?") !== -1 ? matches[7] : undefined;\n            components.fragment = uriString.indexOf("#") !== -1 ? matches[8] : undefined;\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined;\n            }\n        }\n        if (components.host) {\n            //normalize IP hosts\n            components.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n        }\n        //determine reference type\n        if (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\n            components.reference = "same-document";\n        } else if (components.scheme === undefined) {\n            components.reference = "relative";\n        } else if (components.fragment === undefined) {\n            components.reference = "absolute";\n        } else {\n            components.reference = "uri";\n        }\n        //check for reference errors\n        if (options.reference && options.reference !== "suffix" && options.reference !== components.reference) {\n            components.error = components.error || "URI is not a " + options.reference + " reference.";\n        }\n        //find scheme handler\n        var schemeHandler = SCHEMES[(options.scheme || components.scheme || "").toLowerCase()];\n        //check if scheme can\'t handle IRIs\n        if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n            //if host component is a domain name\n            if (components.host && (options.domainHost || schemeHandler && schemeHandler.domainHost)) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    components.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n                } catch (e) {\n                    components.error = components.error || "Host\'s domain name can not be converted to ASCII via punycode: " + e;\n                }\n            }\n            //convert IRI -> URI\n            _normalizeComponentEncoding(components, URI_PROTOCOL);\n        } else {\n            //normalize encodings\n            _normalizeComponentEncoding(components, protocol);\n        }\n        //perform scheme specific parsing\n        if (schemeHandler && schemeHandler.parse) {\n            schemeHandler.parse(components, options);\n        }\n    } else {\n        components.error = components.error || "URI can not be parsed.";\n    }\n    return components;\n}\n\nfunction _recomposeAuthority(components, options) {\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    if (components.userinfo !== undefined) {\n        uriTokens.push(components.userinfo);\n        uriTokens.push("@");\n    }\n    if (components.host !== undefined) {\n        //normalize IP hosts, add brackets and escape zone separator for IPv6\n        uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, function (_, $1, $2) {\n            return "[" + $1 + ($2 ? "%25" + $2 : "") + "]";\n        }));\n    }\n    if (typeof components.port === "number" || typeof components.port === "string") {\n        uriTokens.push(":");\n        uriTokens.push(String(components.port));\n    }\n    return uriTokens.length ? uriTokens.join("") : undefined;\n}\n\nvar RDS1 = /^\\.\\.?\\//;\nvar RDS2 = /^\\/\\.(\\/|$)/;\nvar RDS3 = /^\\/\\.\\.(\\/|$)/;\nvar RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\nfunction removeDotSegments(input) {\n    var output = [];\n    while (input.length) {\n        if (input.match(RDS1)) {\n            input = input.replace(RDS1, "");\n        } else if (input.match(RDS2)) {\n            input = input.replace(RDS2, "/");\n        } else if (input.match(RDS3)) {\n            input = input.replace(RDS3, "/");\n            output.pop();\n        } else if (input === "." || input === "..") {\n            input = "";\n        } else {\n            var im = input.match(RDS5);\n            if (im) {\n                var s = im[0];\n                input = input.slice(s.length);\n                output.push(s);\n            } else {\n                throw new Error("Unexpected dot segment condition");\n            }\n        }\n    }\n    return output.join("");\n}\n\nfunction serialize(components) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var protocol = options.iri ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    //find scheme handler\n    var schemeHandler = SCHEMES[(options.scheme || components.scheme || "").toLowerCase()];\n    //perform scheme specific serialization\n    if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options);\n    if (components.host) {\n        //if host component is an IPv6 address\n        if (protocol.IPV6ADDRESS.test(components.host)) {}\n        //TODO: normalize IPv6 address as per RFC 5952\n\n        //if host component is a domain name\n        else if (options.domainHost || schemeHandler && schemeHandler.domainHost) {\n                //convert IDN via punycode\n                try {\n                    components.host = !options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host);\n                } catch (e) {\n                    components.error = components.error || "Host\'s domain name can not be converted to " + (!options.iri ? "ASCII" : "Unicode") + " via punycode: " + e;\n                }\n            }\n    }\n    //normalize encoding\n    _normalizeComponentEncoding(components, protocol);\n    if (options.reference !== "suffix" && components.scheme) {\n        uriTokens.push(components.scheme);\n        uriTokens.push(":");\n    }\n    var authority = _recomposeAuthority(components, options);\n    if (authority !== undefined) {\n        if (options.reference !== "suffix") {\n            uriTokens.push("//");\n        }\n        uriTokens.push(authority);\n        if (components.path && components.path.charAt(0) !== "/") {\n            uriTokens.push("/");\n        }\n    }\n    if (components.path !== undefined) {\n        var s = components.path;\n        if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n            s = removeDotSegments(s);\n        }\n        if (authority === undefined) {\n            s = s.replace(/^\\/\\//, "/%2F"); //don\'t allow the path to start with "//"\n        }\n        uriTokens.push(s);\n    }\n    if (components.query !== undefined) {\n        uriTokens.push("?");\n        uriTokens.push(components.query);\n    }\n    if (components.fragment !== undefined) {\n        uriTokens.push("#");\n        uriTokens.push(components.fragment);\n    }\n    return uriTokens.join(""); //merge tokens into a string\n}\n\nfunction resolveComponents(base, relative) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var skipNormalization = arguments[3];\n\n    var target = {};\n    if (!skipNormalization) {\n        base = parse(serialize(base, options), options); //normalize base components\n        relative = parse(serialize(relative, options), options); //normalize relative components\n    }\n    options = options || {};\n    if (!options.tolerant && relative.scheme) {\n        target.scheme = relative.scheme;\n        //target.authority = relative.authority;\n        target.userinfo = relative.userinfo;\n        target.host = relative.host;\n        target.port = relative.port;\n        target.path = removeDotSegments(relative.path || "");\n        target.query = relative.query;\n    } else {\n        if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n            //target.authority = relative.authority;\n            target.userinfo = relative.userinfo;\n            target.host = relative.host;\n            target.port = relative.port;\n            target.path = removeDotSegments(relative.path || "");\n            target.query = relative.query;\n        } else {\n            if (!relative.path) {\n                target.path = base.path;\n                if (relative.query !== undefined) {\n                    target.query = relative.query;\n                } else {\n                    target.query = base.query;\n                }\n            } else {\n                if (relative.path.charAt(0) === "/") {\n                    target.path = removeDotSegments(relative.path);\n                } else {\n                    if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n                        target.path = "/" + relative.path;\n                    } else if (!base.path) {\n                        target.path = relative.path;\n                    } else {\n                        target.path = base.path.slice(0, base.path.lastIndexOf("/") + 1) + relative.path;\n                    }\n                    target.path = removeDotSegments(target.path);\n                }\n                target.query = relative.query;\n            }\n            //target.authority = base.authority;\n            target.userinfo = base.userinfo;\n            target.host = base.host;\n            target.port = base.port;\n        }\n        target.scheme = base.scheme;\n    }\n    target.fragment = relative.fragment;\n    return target;\n}\n\nfunction resolve(baseURI, relativeURI, options) {\n    var schemelessOptions = assign({ scheme: \'null\' }, options);\n    return serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n}\n\nfunction normalize(uri, options) {\n    if (typeof uri === "string") {\n        uri = serialize(parse(uri, options), options);\n    } else if (typeOf(uri) === "object") {\n        uri = parse(serialize(uri, options), options);\n    }\n    return uri;\n}\n\nfunction equal(uriA, uriB, options) {\n    if (typeof uriA === "string") {\n        uriA = serialize(parse(uriA, options), options);\n    } else if (typeOf(uriA) === "object") {\n        uriA = serialize(uriA, options);\n    }\n    if (typeof uriB === "string") {\n        uriB = serialize(parse(uriB, options), options);\n    } else if (typeOf(uriB) === "object") {\n        uriB = serialize(uriB, options);\n    }\n    return uriA === uriB;\n}\n\nfunction escapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE, pctEncChar);\n}\n\nfunction unescapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED, pctDecChars);\n}\n\nvar handler = {\n    scheme: "http",\n    domainHost: true,\n    parse: function parse(components, options) {\n        //report missing host\n        if (!components.host) {\n            components.error = components.error || "HTTP URIs must have a host.";\n        }\n        return components;\n    },\n    serialize: function serialize(components, options) {\n        var secure = String(components.scheme).toLowerCase() === "https";\n        //normalize the default port\n        if (components.port === (secure ? 443 : 80) || components.port === "") {\n            components.port = undefined;\n        }\n        //normalize the empty path\n        if (!components.path) {\n            components.path = "/";\n        }\n        //NOTE: We do not parse query strings for HTTP URIs\n        //as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n        //and not the HTTP spec.\n        return components;\n    }\n};\n\nvar handler$1 = {\n    scheme: "https",\n    domainHost: handler.domainHost,\n    parse: handler.parse,\n    serialize: handler.serialize\n};\n\nfunction isSecure(wsComponents) {\n    return typeof wsComponents.secure === \'boolean\' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === "wss";\n}\n//RFC 6455\nvar handler$2 = {\n    scheme: "ws",\n    domainHost: true,\n    parse: function parse(components, options) {\n        var wsComponents = components;\n        //indicate if the secure flag is set\n        wsComponents.secure = isSecure(wsComponents);\n        //construct resouce name\n        wsComponents.resourceName = (wsComponents.path || \'/\') + (wsComponents.query ? \'?\' + wsComponents.query : \'\');\n        wsComponents.path = undefined;\n        wsComponents.query = undefined;\n        return wsComponents;\n    },\n    serialize: function serialize(wsComponents, options) {\n        //normalize the default port\n        if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === "") {\n            wsComponents.port = undefined;\n        }\n        //ensure scheme matches secure flag\n        if (typeof wsComponents.secure === \'boolean\') {\n            wsComponents.scheme = wsComponents.secure ? \'wss\' : \'ws\';\n            wsComponents.secure = undefined;\n        }\n        //reconstruct path from resource name\n        if (wsComponents.resourceName) {\n            var _wsComponents$resourc = wsComponents.resourceName.split(\'?\'),\n                _wsComponents$resourc2 = slicedToArray(_wsComponents$resourc, 2),\n                path = _wsComponents$resourc2[0],\n                query = _wsComponents$resourc2[1];\n\n            wsComponents.path = path && path !== \'/\' ? path : undefined;\n            wsComponents.query = query;\n            wsComponents.resourceName = undefined;\n        }\n        //forbid fragment component\n        wsComponents.fragment = undefined;\n        return wsComponents;\n    }\n};\n\nvar handler$3 = {\n    scheme: "wss",\n    domainHost: handler$2.domainHost,\n    parse: handler$2.parse,\n    serialize: handler$2.serialize\n};\n\nvar O = {};\nvar isIRI = true;\n//RFC 3986\nvar UNRESERVED$$ = "[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~" + (isIRI ? "\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF" : "") + "]";\nvar HEXDIG$$ = "[0-9A-Fa-f]"; //case-insensitive\nvar PCT_ENCODED$ = subexp(subexp("%[EFef]" + HEXDIG$$ + "%" + HEXDIG$$ + HEXDIG$$ + "%" + HEXDIG$$ + HEXDIG$$) + "|" + subexp("%[89A-Fa-f]" + HEXDIG$$ + "%" + HEXDIG$$ + HEXDIG$$) + "|" + subexp("%" + HEXDIG$$ + HEXDIG$$)); //expanded\n//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =\n//const ATEXT$$ = "[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]";\n//const WSP$$ = "[\\\\x20\\\\x09]";\n//const OBS_QTEXT$$ = "[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]";  //(%d1-8 / %d11-12 / %d14-31 / %d127)\n//const QTEXT$$ = merge("[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext\n//const VCHAR$$ = "[\\\\x21-\\\\x7E]";\n//const WSP$$ = "[\\\\x20\\\\x09]";\n//const OBS_QP$ = subexp("\\\\\\\\" + merge("[\\\\x00\\\\x0D\\\\x0A]", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext\n//const FWS$ = subexp(subexp(WSP$$ + "*" + "\\\\x0D\\\\x0A") + "?" + WSP$$ + "+");\n//const QUOTED_PAIR$ = subexp(subexp("\\\\\\\\" + subexp(VCHAR$$ + "|" + WSP$$)) + "|" + OBS_QP$);\n//const QUOTED_STRING$ = subexp(\'\\\\"\' + subexp(FWS$ + "?" + QCONTENT$) + "*" + FWS$ + "?" + \'\\\\"\');\nvar ATEXT$$ = "[A-Za-z0-9\\\\!\\\\$\\\\%\\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]";\nvar QTEXT$$ = "[\\\\!\\\\$\\\\%\\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]";\nvar VCHAR$$ = merge(QTEXT$$, "[\\\\\\"\\\\\\\\]");\nvar SOME_DELIMS$$ = "[\\\\!\\\\$\\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]";\nvar UNRESERVED = new RegExp(UNRESERVED$$, "g");\nvar PCT_ENCODED = new RegExp(PCT_ENCODED$, "g");\nvar NOT_LOCAL_PART = new RegExp(merge("[^]", ATEXT$$, "[\\\\.]", \'[\\\\"]\', VCHAR$$), "g");\nvar NOT_HFNAME = new RegExp(merge("[^]", UNRESERVED$$, SOME_DELIMS$$), "g");\nvar NOT_HFVALUE = NOT_HFNAME;\nfunction decodeUnreserved(str) {\n    var decStr = pctDecChars(str);\n    return !decStr.match(UNRESERVED) ? str : decStr;\n}\nvar handler$4 = {\n    scheme: "mailto",\n    parse: function parse$$1(components, options) {\n        var mailtoComponents = components;\n        var to = mailtoComponents.to = mailtoComponents.path ? mailtoComponents.path.split(",") : [];\n        mailtoComponents.path = undefined;\n        if (mailtoComponents.query) {\n            var unknownHeaders = false;\n            var headers = {};\n            var hfields = mailtoComponents.query.split("&");\n            for (var x = 0, xl = hfields.length; x < xl; ++x) {\n                var hfield = hfields[x].split("=");\n                switch (hfield[0]) {\n                    case "to":\n                        var toAddrs = hfield[1].split(",");\n                        for (var _x = 0, _xl = toAddrs.length; _x < _xl; ++_x) {\n                            to.push(toAddrs[_x]);\n                        }\n                        break;\n                    case "subject":\n                        mailtoComponents.subject = unescapeComponent(hfield[1], options);\n                        break;\n                    case "body":\n                        mailtoComponents.body = unescapeComponent(hfield[1], options);\n                        break;\n                    default:\n                        unknownHeaders = true;\n                        headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n                        break;\n                }\n            }\n            if (unknownHeaders) mailtoComponents.headers = headers;\n        }\n        mailtoComponents.query = undefined;\n        for (var _x2 = 0, _xl2 = to.length; _x2 < _xl2; ++_x2) {\n            var addr = to[_x2].split("@");\n            addr[0] = unescapeComponent(addr[0]);\n            if (!options.unicodeSupport) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n                } catch (e) {\n                    mailtoComponents.error = mailtoComponents.error || "Email address\'s domain name can not be converted to ASCII via punycode: " + e;\n                }\n            } else {\n                addr[1] = unescapeComponent(addr[1], options).toLowerCase();\n            }\n            to[_x2] = addr.join("@");\n        }\n        return mailtoComponents;\n    },\n    serialize: function serialize$$1(mailtoComponents, options) {\n        var components = mailtoComponents;\n        var to = toArray(mailtoComponents.to);\n        if (to) {\n            for (var x = 0, xl = to.length; x < xl; ++x) {\n                var toAddr = String(to[x]);\n                var atIdx = toAddr.lastIndexOf("@");\n                var localPart = toAddr.slice(0, atIdx).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n                var domain = toAddr.slice(atIdx + 1);\n                //convert IDN via punycode\n                try {\n                    domain = !options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain);\n                } catch (e) {\n                    components.error = components.error || "Email address\'s domain name can not be converted to " + (!options.iri ? "ASCII" : "Unicode") + " via punycode: " + e;\n                }\n                to[x] = localPart + "@" + domain;\n            }\n            components.path = to.join(",");\n        }\n        var headers = mailtoComponents.headers = mailtoComponents.headers || {};\n        if (mailtoComponents.subject) headers["subject"] = mailtoComponents.subject;\n        if (mailtoComponents.body) headers["body"] = mailtoComponents.body;\n        var fields = [];\n        for (var name in headers) {\n            if (headers[name] !== O[name]) {\n                fields.push(name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) + "=" + headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));\n            }\n        }\n        if (fields.length) {\n            components.query = fields.join("&");\n        }\n        return components;\n    }\n};\n\nvar URN_PARSE = /^([^\\:]+)\\:(.*)/;\n//RFC 2141\nvar handler$5 = {\n    scheme: "urn",\n    parse: function parse$$1(components, options) {\n        var matches = components.path && components.path.match(URN_PARSE);\n        var urnComponents = components;\n        if (matches) {\n            var scheme = options.scheme || urnComponents.scheme || "urn";\n            var nid = matches[1].toLowerCase();\n            var nss = matches[2];\n            var urnScheme = scheme + ":" + (options.nid || nid);\n            var schemeHandler = SCHEMES[urnScheme];\n            urnComponents.nid = nid;\n            urnComponents.nss = nss;\n            urnComponents.path = undefined;\n            if (schemeHandler) {\n                urnComponents = schemeHandler.parse(urnComponents, options);\n            }\n        } else {\n            urnComponents.error = urnComponents.error || "URN can not be parsed.";\n        }\n        return urnComponents;\n    },\n    serialize: function serialize$$1(urnComponents, options) {\n        var scheme = options.scheme || urnComponents.scheme || "urn";\n        var nid = urnComponents.nid;\n        var urnScheme = scheme + ":" + (options.nid || nid);\n        var schemeHandler = SCHEMES[urnScheme];\n        if (schemeHandler) {\n            urnComponents = schemeHandler.serialize(urnComponents, options);\n        }\n        var uriComponents = urnComponents;\n        var nss = urnComponents.nss;\n        uriComponents.path = (nid || options.nid) + ":" + nss;\n        return uriComponents;\n    }\n};\n\nvar UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\n//RFC 4122\nvar handler$6 = {\n    scheme: "urn:uuid",\n    parse: function parse(urnComponents, options) {\n        var uuidComponents = urnComponents;\n        uuidComponents.uuid = uuidComponents.nss;\n        uuidComponents.nss = undefined;\n        if (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {\n            uuidComponents.error = uuidComponents.error || "UUID is not valid.";\n        }\n        return uuidComponents;\n    },\n    serialize: function serialize(uuidComponents, options) {\n        var urnComponents = uuidComponents;\n        //normalize UUID\n        urnComponents.nss = (uuidComponents.uuid || "").toLowerCase();\n        return urnComponents;\n    }\n};\n\nSCHEMES[handler.scheme] = handler;\nSCHEMES[handler$1.scheme] = handler$1;\nSCHEMES[handler$2.scheme] = handler$2;\nSCHEMES[handler$3.scheme] = handler$3;\nSCHEMES[handler$4.scheme] = handler$4;\nSCHEMES[handler$5.scheme] = handler$5;\nSCHEMES[handler$6.scheme] = handler$6;\n\nexports.SCHEMES = SCHEMES;\nexports.pctEncChar = pctEncChar;\nexports.pctDecChars = pctDecChars;\nexports.parse = parse;\nexports.removeDotSegments = removeDotSegments;\nexports.serialize = serialize;\nexports.resolveComponents = resolveComponents;\nexports.resolve = resolve;\nexports.normalize = normalize;\nexports.equal = equal;\nexports.escapeComponent = escapeComponent;\nexports.unescapeComponent = unescapeComponent;\n\nObject.defineProperty(exports, \'__esModule\', { value: true });\n\n})));\n//# sourceMappingURL=uri.all.js.map\n\n\n//# sourceURL=webpack://winbows11/./node_modules/uri-js/dist/es5/uri.all.js?\n}')},"./src/lib/minimist.js/index.js":
/*!**************************************!*\
  !*** ./src/lib/minimist.js/index.js ***!
  \**************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// https://github.com/minimistjs/minimist\r\n\r\n\r\n\r\nfunction hasKey(obj, keys) {\r\n\tvar o = obj;\r\n\tkeys.slice(0, -1).forEach(function (key) {\r\n\t\to = o[key] || {};\r\n\t});\r\n\r\n\tvar key = keys[keys.length - 1];\r\n\treturn key in o;\r\n}\r\n\r\nfunction isNumber(x) {\r\n\tif (typeof x === 'number') { return true; }\r\n\tif ((/^0x[0-9a-f]+$/i).test(x)) { return true; }\r\n\treturn (/^[-+]?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(e[-+]?\\d+)?$/).test(x);\r\n}\r\n\r\nfunction isConstructorOrProto(obj, key) {\r\n\treturn (key === 'constructor' && typeof obj[key] === 'function') || key === '__proto__';\r\n}\r\n\r\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(args, opts) {\r\n\tif (!opts) { opts = {}; }\r\n\r\n\tvar flags = {\r\n\t\tbools: {},\r\n\t\tstrings: {},\r\n\t\tunknownFn: null,\r\n\t};\r\n\r\n\tif (typeof opts.unknown === 'function') {\r\n\t\tflags.unknownFn = opts.unknown;\r\n\t}\r\n\r\n\tif (typeof opts.boolean === 'boolean' && opts.boolean) {\r\n\t\tflags.allBools = true;\r\n\t} else {\r\n\t\t[].concat(opts.boolean).filter(Boolean).forEach(function (key) {\r\n\t\t\tflags.bools[key] = true;\r\n\t\t});\r\n\t}\r\n\r\n\tvar aliases = {};\r\n\r\n\tfunction isBooleanKey(key) {\r\n\t\tif (flags.bools[key]) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tif (!aliases[key]) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn aliases[key].some(function (x) {\r\n\t\t\treturn flags.bools[x];\r\n\t\t});\r\n\t}\r\n\r\n\tObject.keys(opts.alias || {}).forEach(function (key) {\r\n\t\taliases[key] = [].concat(opts.alias[key]);\r\n\t\taliases[key].forEach(function (x) {\r\n\t\t\taliases[x] = [key].concat(aliases[key].filter(function (y) {\r\n\t\t\t\treturn x !== y;\r\n\t\t\t}));\r\n\t\t});\r\n\t});\r\n\r\n\t[].concat(opts.string).filter(Boolean).forEach(function (key) {\r\n\t\tflags.strings[key] = true;\r\n\t\tif (aliases[key]) {\r\n\t\t\t[].concat(aliases[key]).forEach(function (k) {\r\n\t\t\t\tflags.strings[k] = true;\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tvar defaults = opts.default || {};\r\n\r\n\tvar argv = { _: [] };\r\n\r\n\tfunction argDefined(key, arg) {\r\n\t\treturn (flags.allBools && (/^--[^=]+$/).test(arg))\r\n\t\t\t|| flags.strings[key]\r\n\t\t\t|| flags.bools[key]\r\n\t\t\t|| aliases[key];\r\n\t}\r\n\r\n\tfunction setKey(obj, keys, value) {\r\n\t\tvar o = obj;\r\n\t\tfor (var i = 0; i < keys.length - 1; i++) {\r\n\t\t\tvar key = keys[i];\r\n\t\t\tif (isConstructorOrProto(o, key)) { return; }\r\n\t\t\tif (o[key] === undefined) { o[key] = {}; }\r\n\t\t\tif (\r\n\t\t\t\to[key] === Object.prototype\r\n\t\t\t\t|| o[key] === Number.prototype\r\n\t\t\t\t|| o[key] === String.prototype\r\n\t\t\t) {\r\n\t\t\t\to[key] = {};\r\n\t\t\t}\r\n\t\t\tif (o[key] === Array.prototype) { o[key] = []; }\r\n\t\t\to = o[key];\r\n\t\t}\r\n\r\n\t\tvar lastKey = keys[keys.length - 1];\r\n\t\tif (isConstructorOrProto(o, lastKey)) { return; }\r\n\t\tif (\r\n\t\t\to === Object.prototype\r\n\t\t\t|| o === Number.prototype\r\n\t\t\t|| o === String.prototype\r\n\t\t) {\r\n\t\t\to = {};\r\n\t\t}\r\n\t\tif (o === Array.prototype) { o = []; }\r\n\t\tif (o[lastKey] === undefined || isBooleanKey(lastKey) || typeof o[lastKey] === 'boolean') {\r\n\t\t\to[lastKey] = value;\r\n\t\t} else if (Array.isArray(o[lastKey])) {\r\n\t\t\to[lastKey].push(value);\r\n\t\t} else {\r\n\t\t\to[lastKey] = [o[lastKey], value];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setArg(key, val, arg) {\r\n\t\tif (arg && flags.unknownFn && !argDefined(key, arg)) {\r\n\t\t\tif (flags.unknownFn(arg) === false) { return; }\r\n\t\t}\r\n\r\n\t\tvar value = !flags.strings[key] && isNumber(val)\r\n\t\t\t? Number(val)\r\n\t\t\t: val;\r\n\t\tsetKey(argv, key.split('.'), value);\r\n\r\n\t\t(aliases[key] || []).forEach(function (x) {\r\n\t\t\tsetKey(argv, x.split('.'), value);\r\n\t\t});\r\n\t}\r\n\r\n\t// Set booleans to false by default.\r\n\tObject.keys(flags.bools).forEach(function (key) {\r\n\t\tsetArg(key, false);\r\n\t});\r\n\t// Set booleans to user defined default if supplied.\r\n\tObject.keys(defaults).filter(isBooleanKey).forEach(function (key) {\r\n\t\tsetArg(key, defaults[key]);\r\n\t});\r\n\tvar notFlags = [];\r\n\r\n\tif (args.indexOf('--') !== -1) {\r\n\t\tnotFlags = args.slice(args.indexOf('--') + 1);\r\n\t\targs = args.slice(0, args.indexOf('--'));\r\n\t}\r\n\r\n\tfor (var i = 0; i < args.length; i++) {\r\n\t\tvar arg = args[i];\r\n\t\tvar key;\r\n\t\tvar next;\r\n\r\n\t\tif ((/^--.+=/).test(arg)) {\r\n\t\t\t// Using [\\s\\S] instead of . because js doesn't support the\r\n\t\t\t// 'dotall' regex modifier. See:\r\n\t\t\t// http://stackoverflow.com/a/1068308/13216\r\n\t\t\tvar m = arg.match(/^--([^=]+)=([\\s\\S]*)$/);\r\n\t\t\tkey = m[1];\r\n\t\t\tvar value = m[2];\r\n\t\t\tif (isBooleanKey(key)) {\r\n\t\t\t\tvalue = value !== 'false';\r\n\t\t\t}\r\n\t\t\tsetArg(key, value, arg);\r\n\t\t} else if ((/^--no-.+/).test(arg)) {\r\n\t\t\tkey = arg.match(/^--no-(.+)/)[1];\r\n\t\t\tsetArg(key, false, arg);\r\n\t\t} else if ((/^--.+/).test(arg)) {\r\n\t\t\tkey = arg.match(/^--(.+)/)[1];\r\n\t\t\tnext = args[i + 1];\r\n\t\t\tif (\r\n\t\t\t\tnext !== undefined\r\n\t\t\t\t&& !(/^(-|--)[^-]/).test(next)\r\n\t\t\t\t&& !isBooleanKey(key)\r\n\t\t\t\t&& !flags.allBools\r\n\t\t\t) {\r\n\t\t\t\tsetArg(key, next, arg);\r\n\t\t\t\ti += 1;\r\n\t\t\t} else if ((/^(true|false)$/).test(next)) {\r\n\t\t\t\tsetArg(key, next === 'true', arg);\r\n\t\t\t\ti += 1;\r\n\t\t\t} else {\r\n\t\t\t\tsetArg(key, flags.strings[key] ? '' : true, arg);\r\n\t\t\t}\r\n\t\t} else if ((/^-[^-]+/).test(arg)) {\r\n\t\t\tvar letters = arg.slice(1, -1).split('');\r\n\r\n\t\t\tvar broken = false;\r\n\t\t\tfor (var j = 0; j < letters.length; j++) {\r\n\t\t\t\tnext = arg.slice(j + 2);\r\n\r\n\t\t\t\tif (next === '-') {\r\n\t\t\t\t\tsetArg(letters[j], next, arg);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((/[A-Za-z]/).test(letters[j]) && next[0] === '=') {\r\n\t\t\t\t\tsetArg(letters[j], next.slice(1), arg);\r\n\t\t\t\t\tbroken = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\r\n\t\t\t\t\t(/[A-Za-z]/).test(letters[j])\r\n\t\t\t\t\t&& (/-?\\d+(\\.\\d*)?(e-?\\d+)?$/).test(next)\r\n\t\t\t\t) {\r\n\t\t\t\t\tsetArg(letters[j], next, arg);\r\n\t\t\t\t\tbroken = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (letters[j + 1] && letters[j + 1].match(/\\W/)) {\r\n\t\t\t\t\tsetArg(letters[j], arg.slice(j + 2), arg);\r\n\t\t\t\t\tbroken = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetArg(letters[j], flags.strings[letters[j]] ? '' : true, arg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tkey = arg.slice(-1)[0];\r\n\t\t\tif (!broken && key !== '-') {\r\n\t\t\t\tif (\r\n\t\t\t\t\targs[i + 1]\r\n\t\t\t\t\t&& !(/^(-|--)[^-]/).test(args[i + 1])\r\n\t\t\t\t\t&& !isBooleanKey(key)\r\n\t\t\t\t) {\r\n\t\t\t\t\tsetArg(key, args[i + 1], arg);\r\n\t\t\t\t\ti += 1;\r\n\t\t\t\t} else if (args[i + 1] && (/^(true|false)$/).test(args[i + 1])) {\r\n\t\t\t\t\tsetArg(key, args[i + 1] === 'true', arg);\r\n\t\t\t\t\ti += 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetArg(key, flags.strings[key] ? '' : true, arg);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (!flags.unknownFn || flags.unknownFn(arg) !== false) {\r\n\t\t\t\targv._.push(flags.strings._ || !isNumber(arg) ? arg : Number(arg));\r\n\t\t\t}\r\n\t\t\tif (opts.stopEarly) {\r\n\t\t\t\targv._.push.apply(argv._, args.slice(i + 1));\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tObject.keys(defaults).forEach(function (k) {\r\n\t\tif (!hasKey(argv, k.split('.'))) {\r\n\t\t\tsetKey(argv, k.split('.'), defaults[k]);\r\n\r\n\t\t\t(aliases[k] || []).forEach(function (x) {\r\n\t\t\t\tsetKey(argv, x.split('.'), defaults[k]);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\tif (opts['--']) {\r\n\t\targv['--'] = notFlags.slice();\r\n\t} else {\r\n\t\tnotFlags.forEach(function (k) {\r\n\t\t\targv._.push(k);\r\n\t\t});\r\n\t}\r\n\r\n\treturn argv;\r\n};\n\n//# sourceURL=webpack://winbows11/./src/lib/minimist.js/index.js?\n}")},"./src/lib/winbows-devtool/dist/index.js":
/*!***********************************************!*\
  !*** ./src/lib/winbows-devtool/dist/index.js ***!
  \***********************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* binding */ A)\n/* harmony export */ });\n/*!\r\n * winbows-devtool v1.3.2\r\n * Copyright (c) Siyu1017 2025\r\n * Github : Siyu1017/winbows-devtool\r\n */\r\nfunction e(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}function t(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function n(e){return"number"==typeof e&&isFinite(e)}function o(e){if(n(e))return e;const o=(l=e?.valueOf,"function"==typeof l?e.valueOf():e);var l;return+(e=t(o)?o+"":o)}function l(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function a(e){let t=null;return function(...n){t||(t=setTimeout(()=>{t=null,e.apply(this,n)},16))}}const s="â¦",i="Æ";function r(e){const n=d(e);return!!["map","set","file","blob"].includes(n)||(Array.isArray(e)?e.length>0:!!t(e)&&(Object.keys(e).length>0||!!(e.__proto__&&Object.keys(e.__proto__).length>0)))}function c(e){return"string"!=typeof e&&(e=String(e)),l(e)}function d(e){const t=typeof e;return null===e?"null":"string"===t?"string":"boolean"===t?"boolean":"number"===t?"number":"undefined"===t?"undefined":"symbol"===t?"symbol":"function"===t?"function":Array.isArray(e)?"array":"[object Object]"==={}.toString.call(e)?"object":"object"===t?{}.toString.call(e).slice(8,-1).toLowerCase():void 0}function p(e,t){return`<span class="obj-viewer-value-preview obj-viewer-value-${t}">${e}</span>`}function u(t,o=0){const l=new WeakSet;return function t(n,o){const a=d(n),r=0==o;let u="";if("object"==a){if(l.has(n))return"[Circular]";l.add(n)}if(o>2)return s;if("array"==a){const e=n.length;if(r){let l=n.slice(0,100).map(e=>t(e,o+1)).join(", ");e>100&&(l+=", "+s),u=p(`${e>1?`<span class="obj-viewer-value-desc">(${c(e)})</span>`:""} [${l}]`,"array")}else u=p(`Array(${c(e)})`,"array")}else if("object"==a)if(r){const e=Reflect.ownKeys(n);let l=e.slice(0,5).map(e=>{const l=n[e];return`${a=e,`<span class="obj-viewer-key-preview obj-viewer-key">${c(a)}</span>`}: ${p(t(l,o+1),d(l))}`;// removed by dead control flow\n{ var a; }}).join(", ");e.length>5&&(l+=", "+s),u=p(`{${l}}`,"object")}else u=p(`{${s}}`,"object");else if("string"==a)u=p(`\'${c(n)}\'`,"string");else if("function"==a)if(r){const e=function(e){try{return Function.prototype.toString.call(e)}catch(e){}try{return e+""}catch(e){}}(n),t=n.constructor?.toString().toLowerCase()||"",o=!n.prototype&&!/^(?:async\\s+)?function/.test(e),l=t.includes("async"),a=t.includes("generator");(e||"").trim().startsWith("class")?u=p(`<span style="color: #ff8b1c;">class</span> ${c(n.prototype?.constructor?.name)}`,"function"):o?u=p((l?\'<span style="color: #ff8b1c;">async</span>\':"")+" () => {}","function"):(u+=l?\'<span style="color: #ff8b1c;">async</span>\':"",u+=`<span style="color: #ff8b1c;">${l?" ":""}${i}</span>`,u+=a?\'<span style="color: #ff8b1c;">*</span>\':"",u+=` ${n.name&&e.match(/function([\\s\\S]*?)\\(.*?\\)/)?.[1]?.replace("*","").trim()?c(n.name):""}()`,u=p(u,"function"))}else u=p(i,"function");else if(e(n)){const e=n.id,t=[...n.classList],o=(t.length>0?".":"")+t.join(".");u=p(`<span style="color: #659fff;">${c(n.tagName.toLowerCase())}</span><span style="color: #ff8f26;">${c(e?"#"+e:"")}</span><span style="color: #a6d2ff;">${c(o)}</span>`,"generic")}else if("map"==a)if(r){const e=[...n.keys()];let l=e.slice(0,5).map(e=>{const l=n.get(e);return`${p(`\'${c(e)}\'`,"string")} => ${t(l,o+1)}`}).join(", ");e.length>5&&(l+=", "+s),u=p(`<span class="obj-viewer-value-desc">Map(${c(n.size)})</span> {${l}}`,"map")}else u=p(`Map(${c(n.size)})`,"map");else if("set"==a)if(r){const e=[...n.keys()];let l=e.slice(0,5).map(e=>`${t(e,o+1)}`).join(", ");e.length>5&&(l+=", "+s),u=p(`<span class="obj-viewer-value-desc">Set(${c(n.size)})</span> {${l}}`,"set")}else u=p(`Set(${c(n.size)})`,"set");else u="error"==a?p("Error: "+c(n.message),"error"):["number","boolean","null","undefined","symbol","date","regexp"].includes(a)?p(c(n),a):p(c((h=a,String(h).charAt(0).toUpperCase()+String(h).slice(1))),a);var h;return u}(t,o=n(o)?o:0)}function h({key:e,value:t,preview:n,separator:o,nextFn:l,type:a,expandable:s}){const i=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div"),u=document.createTextNode((o||":")+" "),h=document.createElement("div");if(i.className="obj-viewer-item",r.className="obj-viewer-line",c.className="obj-viewer-next",d.className="obj-viewer-expand",i.appendChild(r),r.appendChild(d),r.setAttribute("data-expandable",1==s),i.appendChild(c),1==s){let e=!1;r.setAttribute("data-expand",e),r.addEventListener("click",()=>{e=!e,r.setAttribute("data-expand",e),c.innerHTML="",l(t,c)})}return e&&"string"==typeof e&&(p.className="obj-viewer-key",p.textContent=e,r.appendChild(p),r.appendChild(u)),h.className="obj-viewer-value "+(a?"obj-viewer-value-"+a:""),h.innerHTML=n,r.appendChild(h),{item:i,line:r,next:c,key:p,preview:h}}const g=Symbol("triggerEvent"),m=Symbol("listeners");class v{constructor(e,n={shallow:!1}){var o;this.options=t(n)?n:{shallow:!1},this.container=document.createElement("div"),this.overview=document.createElement("div"),this.overviewExpand=document.createElement("div"),this.overviewContent=document.createElement("div"),this.content=document.createElement("div"),this.container.className="obj-viewer-container",this.overview.className="obj-viewer-overview",this.overviewExpand.className="obj-viewer-expand",this.overviewContent.className="obj-viewer-overview-content",this.content.className="obj-viewer-content",this.container.appendChild(this.overview),this.container.appendChild(this.content),this.overview.appendChild(this.overviewExpand),this.overview.appendChild(this.overviewContent),o=this.overview,r(e)?o.setAttribute("data-expandable",!0):o.setAttribute("data-expandable",!1);var l=!1;if(r(e))return this.overviewContent.innerHTML=this.getPreview(e,this.options.shallow?1:0),this.container.addEventListener("click",e=>{e.cancelable&&e.preventDefault(),e.stopPropagation()}),this.overview.addEventListener("click",()=>{l=!l,this.overview.setAttribute("data-expand",l),this.content.innerHTML="",this.getLevel(e,this.content)}),this[g]=(e,t)=>{this[m][e]&&this[m][e].forEach(e=>{e(t)})},this[m]={},this;this.container.innerHTML=this.getPreview(e,this.options.shallow?1:0)}on(e,t){this[m][e]||(this[m][e]=[]),this[m][e].push(t)}getLevel(e,t,n={levels:[],type:"generic",start:0,parentVLevels:void 0}){const o=d(e);if("array"==o)return function(e,t,n){return function e(t,o,l=0,a=0){const i=t.length,c=a||0;if(i>100||l>1&&100==i){const a=l?l-1:~~(Math.log10(i-1)/2),p=Math.pow(100,a),g=i/p;for(let l=0;l<g;l++){let g=t.slice(l*p,(l+1)*p),m=[c+l*p,c+(l+1)*p-1];m[1]>i-1&&0==c&&(m[1]=i-1),m[0]==m[1]&&(g=g[0]);const{item:v}=h(m[0]==m[1]?{key:String(m[0]),value:g,preview:u(g),nextFn:n,type:d(g),expandable:r(g)}:{value:g,preview:`[${m[0]} ${s} ${m[1]}]`,nextFn:(t,n)=>{e(g,n,a,m[0])},type:"array",expandable:!0});o.appendChild(v)}}else for(let e=0;e<i;e++){const l=t[e],{item:a}=h({key:String(c?c+e:e),value:l,preview:u(l),nextFn:n,type:d(l),expandable:r(l)});o.appendChild(a)}}(e,t)}(e,t,this.getLevel.bind(this));if("map"==o)e.keys().forEach((n,o)=>{const l=e.get(n),{item:a}=h({key:String(o),value:{key:n,value:l},preview:`{\'${c(n)}\' => ${this.getPreview(l,1)}}`,nextFn:this.getLevel.bind(this),type:"styleless",expandable:!0});t.appendChild(a)});else if("set"==o)e.keys().forEach((e,n)=>{const{item:o}=h({key:String(n),value:{value:e},preview:this.getPreview(e,1),nextFn:this.getLevel.bind(this),type:"styleless",expandable:!0});t.appendChild(o)});else if("file"==o){["lastModified","lastModifiedDate","name","size","type","webkitRelativePath"].forEach(n=>{const o=e[n],{item:l}=h({key:n,value:o,preview:this.getPreview(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:!1});t.appendChild(l)})}else if("blob"==o){["size","type"].forEach(n=>{const o=e[n],{item:l}=h({key:n,value:o,preview:this.getPreview(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:!1});t.appendChild(l)})}else{const n=Object.keys(e).sort(),o=Object.getOwnPropertyNames(e).filter(e=>!n.includes(e)).sort(),l=Object.getOwnPropertySymbols(e);n.concat(l).forEach(n=>{const o=e[n],{item:l}=h({key:n?.toString(),value:o,preview:u(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:r(o)});t.appendChild(l)}),o.forEach(n=>{const o=e[n],{item:l,key:a}=h({key:n?.toString(),value:o,preview:u(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:r(o)});t.appendChild(l),a.style.opacity=".6"})}}getPreview=u}v.utils={isJSON:function(e){let t="string"!=typeof e?JSON.stringify(e):e;try{t=JSON.parse(t)}catch(e){return!1}return"object"==typeof t&&null!==t},isObject:t,isElement:e,isFinite:isFinite,isNaN:isNaN,getType:d,getClassName:function(e){switch(typeof e){case"string":return"obj-viewer-value-string";case"number":return"obj-viewer-value-number";case"boolean":return"obj-viewer-value-symbol";case"object":return null===e?"obj-viewer-value-empty":(Array.isArray(e),"obj-viewer-value-generic");case"undefined":return"obj-viewer-value-empty";default:return"obj-viewer-value-generic"}},expandable:r,parseJSON:function(e){const n=new WeakSet;return function e(o){if(t(o)){if(n.has(o))return"[Circular]";n.add(o)}if("string"==typeof o)try{o=JSON.parse(o)}catch(e){return""}if(Array.isArray(o))return o.map(t=>e(t));if(t(o)){const t={};return Object.keys(o).forEach(n=>{t[n]=e(o[n])}),t}return o}(e)},getPreview:u};var f={logContainer:"log-module_logContainer__RTRoP",noSep:"log-module_noSep__kpXQI",pt0:"log-module_pt0__gmfNw",pt5:"log-module_pt5__0Nnes",logIndent:"log-module_logIndent__hkxtj",logLevelIndent:"log-module_logLevelIndent__fcg-q",logItem:"log-module_logItem__nEqRs",warn:"log-module_warn__XWTVJ",error:"log-module_error__bESfD",info:"log-module_info__GH1qz",logIconContainer:"log-module_logIconContainer__3AkON",logIcon:"log-module_logIcon__gF-Ax",logCountContainer:"log-module_logCountContainer__2csmc",logCount:"log-module_logCount__N-mMq",logContent:"log-module_logContent__emWWb",logPlaintext:"log-module_logPlaintext__BA4Xk",logStyled:"log-module_logStyled__ebxwy",logClear:"log-module_logClear__v-Zvg",collapsibleContainer:"log-module_collapsibleContainer__-Df9-",collapsibleSummaryContainer:"log-module_collapsibleSummaryContainer__88ugq",collapsibleSummaryIconContainer:"log-module_collapsibleSummaryIconContainer__SuhjM",collapsibleSummaryIcon:"log-module_collapsibleSummaryIcon__drjo9",collapsed:"log-module_collapsed__FjxOv",collapsibleSummary:"log-module_collapsibleSummary__xbyOi",collapsibleContentContainer:"log-module_collapsibleContentContainer__z-1W3",collapsibleContent:"log-module_collapsibleContent__sKUKu",tableContainer:"log-module_tableContainer__vh3ut",table:"log-module_table__LCElu",tableHeader:"log-module_tableHeader__wL3Wr",tableBody:"log-module_tableBody__uGV9y",tableHeaderCell:"log-module_tableHeaderCell__eBa-G",tableHeaderCellCaret:"log-module_tableHeaderCellCaret__aubAp",up:"log-module_up__AW6is",tableCell:"log-module_tableCell__5KzwY",tableRow:"log-module_tableRow__LYjh-"};const b=/(?:blob:.+?\\/[a-f0-9A-F\\-]+|https?:\\/\\/([a-zA-Z0-9\\-\\.]+|localhost)(:\\d+)?\\/[a-zA-Z0-9?&#=.%_\\-~/]*)/g,y=/(?:blob:.+?\\/[a-f0-9A-F\\-]+|https?:\\/\\/([a-zA-Z0-9\\-\\.]+|localhost)(:\\d+)?\\/(?:[A-Za-z0-9\\-._~!$&()*+,;=:@/?#]|%[0-9A-Fa-f]{2})*)/g,C=/([A-Z]:[\\\\/](?:[^<>:"|?*\\r\\n]+[\\\\/])*[^<>:"\'|? *\\r\\n]*)/g;function w(e){return"string"!=typeof e&&(e=String(e)),l(e)}function _(e,t){const n=function(e){const t=[...e],n=t.shift();let l=[];if("string"==typeof n){const e=n.length,a={type:"plaintext",value:[]};let s="",i=null;for(let l=0;l<e;l++){const r=n[l];if("%"==r&&l+1<e){const e=n[++l],r=null!=i?i.value:a.value;if(0==t.length||!"sdifoOcj".includes(e)){s+="%",s+="%"!=e?e:"";continue}s&&(r.push({type:"auto",value:s}),s="");const c=t.shift();switch(e){case"s":r.push({type:"string",value:String(c)});break;case"d":case"i":r.push({type:"number",value:parseInt(c)});break;case"f":r.push({type:"number",value:o(c)});break;case"o":r.push({type:"object",options:{shallow:!0},value:c});break;case"O":r.push({type:"object",value:c});break;case"c":i&&a.value.push(i),i={type:"styled",value:[],style:c};break;case"j":r.push({type:"object",value:v.utils.parseJSON(c)})}}else s+=r}s&&(i?i.value:a.value).push({type:"auto",value:s}),i&&a.value.push(i),l.push(a)}else t.unshift(n);for(;t.length>0;)l.push({type:"auto",value:t.shift()});return l}(t),l=n[0],a="plaintext"==l.type||"string"==typeof l.value;!function t(n,o,l=0,s={}){const i=0==l;for(const r in n){const c=n[r];let d=document.createElement("span");if(i&&"plaintext"==c.type&&0==r)d.className=f.logPlaintext,t(c.value,d,l+1,s);else if(i||"styled"!=c.type)if(v.utils.expandable(c.value))d=new v(c.value,{shallow:c.options?.shallow||!1}).container;else if(i){const t=v.utils.getType(c.value);a&&"string"==t&&"object"!=c.type?d.innerHTML=(e.childElementCount>0?" ":"")+w(c.value).replace(y,e=>`<a href="${e}" target="_blank">${e}</a>`).replace(C,e=>`<a href="javascript:void(0)" data-href="${e}">${e}</a>`):"string"==t?d.innerHTML=(e.childElementCount>0?" ":"")+v.utils.getPreview(c.value).replace(y,e=>`<a href="${e}" target="_blank">${e}</a>`).replace(C,e=>`<a href="javascript:void(0)" data-href="${e}">${e}</a>`):(d.className=`obj-viewer-value-${t}`,d.innerHTML=(e.childElementCount>0?" ":"")+v.utils.getPreview(c.value))}else s.type,d.innerHTML=w(c.value).replace(/\\n/,"<br>").replace(y,e=>`<a href="${e}" target="_blank">${e}</a>`).replace(C,e=>`<a href="javascript:void(0)" data-href="${e}">${e}</a>`);else d.style.cssText=c.style,d.className=f.logStyled,t(c.value,d,l+1,{type:"styled"});o.appendChild(d)}}(n,e,0)}function E(e=!0){const t=[],n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),a=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");function c(t){(e=1==t)?n.classList.add(f.collapsed):n.classList.remove(f.collapsed),p(e)}function d(){(e=1!=e)?n.classList.add(f.collapsed):n.classList.remove(f.collapsed),p(e)}function p(e){t.forEach(t=>t(e))}return n.className=f.collapsibleContainer,o.className=f.collapsibleSummaryContainer,l.className=f.collapsibleSummaryIconContainer,a.className=f.collapsibleSummaryIcon,s.className=f.collapsibleSummary,i.className=f.collapsibleContentContainer,r.className=f.collapsibleContent,n.appendChild(o),o.appendChild(l),l.appendChild(a),o.appendChild(s),n.appendChild(i),i.appendChild(r),o.addEventListener("click",d),c(e),{get isCollapsed(){return e},container:n,summary:s,content:r,setCollapsed:c,toggle:d,onChange:function(e){t.push(e)}}}const S=Symbol("listeners"),x=Symbol("emit");class j{constructor(e="log",t){this[S]={},this[x]=(e,t)=>{if(this[S][e])for(const n of this[S][e])n(t)},this.on=(e,t)=>{this[S][e]||(this[S][e]=[]),this[S][e].push(t)},this.type=e,this.args=t,this.noSep=["info","warn","error"].includes(this.type),this.count=1,this.groupStack=[],this.container=document.createElement("div"),this.logIndent=document.createElement("div"),this.logItem=document.createElement("div"),this.logIconContainer=document.createElement("div"),this.logIcon=document.createElement("div"),this.logContent=document.createElement("div"),this.container.className=f.logContainer,this.logIndent.className=f.logIndent,this.logItem.classList.add(f.logItem),this.logIconContainer.className=f.logIconContainer,this.logIcon.className=f.logIcon,this.logContent.className=f.logContent,"log"!=this.type&&this.logItem.classList.add(f[this.type]),this.noSep&&(this.container.classList.add(f.noSep),this.logIcon.classList.add(f[this.type])),this.container.appendChild(this.logIndent),this.container.appendChild(this.logItem),this.logItem.appendChild(this.logIconContainer),this.logIconContainer.appendChild(this.logIcon),this.logItem.appendChild(this.logContent),this.isSimple=!0;for(const e of this.args)v.utils.expandable(e)&&(this.isSimple=!1);switch(this.observer=new ResizeObserver(()=>{this.updateSize(),this[x]("resize")}),this.observer.observe(this.logContent),this.width=0,this.height=0,this.onChange=()=>{},this.updateSize=a(()=>{if(this.measureEl){const e=this.container.cloneNode(!0);this.measureEl.appendChild(e);const{width:t,height:n}=e.getBoundingClientRect();this.width!=t&&(this.width=t),this.height!=n&&(this.height=n),e.remove()}}),this.type){case"log":case"info":case"debug":_(this.logContent,t);break;case"warn":case"error":case"trace":{const{summary:e,content:n,container:o}=E();_(e,t);const l=document.createElement("div");(function(){var e;try{throw new Error("")}catch(t){e=t.stack||""}return(e=e.split("\\n").map(function(e){return e.trim()})).splice("Error"==e[0]?2:1)})().forEach(e=>{const t=document.createElement("div");t.innerHTML="string"==typeof e?w(e).replace(b,e=>`<a href="${e}" target="_blank">${e}</a>`).replace(C,e=>`<a href="javascript:void(0)" data-href="${e}">${e}</a>`):"",l.appendChild(t)}),n.appendChild(l),this.logContent.appendChild(o);break}case"clear":const e=document.createElement("div");e.className=f.logClear,e.textContent="Console was cleared.",this.logContent.appendChild(e);break;case"group":case"groupCollapsed":{const{summary:e,container:n,onChange:o,isCollapsed:l,setCollapsed:a}=E("group"!=this.type);_(e,t),e.style.fontWeight="bold",this.logContent.appendChild(n),this.onChange=o,this.isCollapsed=l,this.setCollapsed=a;break}case"table":!function(e,t){const n=t[0],o=v.utils.getType(t[0]);let l=[],a=new Set;if("array"==o)n.forEach((e,t)=>{let n={"(index)":t,...e};Object.keys(n).forEach(e=>a.add(e)),l.push(n)});else{if("object"!=o)return _(e,t);Object.entries(n).forEach(([e,t])=>{let n={"(index)":e,...t};Object.keys(n).forEach(e=>a.add(e)),l.push(n)})}let s=t[1];s&&Array.isArray(s)&&(a=a.intersection(new Set(["(index)",...s])));const i=document.createElement("div"),r=document.createElement("table"),c=document.createElement("colgroup"),d=document.createElement("thead"),p=document.createElement("tr"),u=document.createElement("tbody");i.className=f.tableContainer,r.className=f.table,c.className=f.tableColgroup,d.className=f.tableHeader,p.className=f.tableHeaderRow,u.className=f.tableBody,e.appendChild(i),i.appendChild(r),r.appendChild(c),r.appendChild(d),d.appendChild(p),r.appendChild(u),a.forEach((e,t)=>{const n=document.createElement("th");n.className=f.tableHeaderCell,n.textContent=e,p.appendChild(n)}),l.forEach((e,t)=>{const n=document.createElement("tr");n.className=f.tableRow,u.appendChild(n),a.forEach(o=>{const l=document.createElement("td");l.className=f.tableCell,"(index)"==o?l.textContent=t:Object.prototype.hasOwnProperty.call(e,o)?l.innerHTML=v.utils.getPreview(e[o],1):l.textContent="",n.appendChild(l)})}),_(e,[n]),(()=>{const e=Array.from(u.rows),t=d.rows[0].cells,n=document.createElement("span");n.className=f.tableHeaderCellCaret;for(const o of t){const t=o.cellIndex;let l=0;o.addEventListener("click",()=>{n.remove(),1==l?n.classList.add(f.up):n.classList.remove(f.up),o.appendChild(n),e.sort((e,n)=>{const o=e.cells[t].textContent,a=n.cells[t].textContent;return 0==l?o.localeCompare(a):a.localeCompare(o)}),u.append(...e),l=0==l?1:0})}})()}(this.logContent,t)}}equals(e){if(!e)return!1;if(["group","groupCollapsed","groupEnd"].includes(this.type))return!1;if(0==this.isSimple)return!1;if(this.type!=e.type)return!1;if(this.args.length!=e.args.length)return!1;if(this.text()!=e.text())return!1;for(let t=0;t<this.args.length;t++)if(v.utils.getType(this.args[t])!=v.utils.getType(e.args[t]))return!1;return!0}addCount(){this.logCount&&this.logCountContainer||(this.logCountContainer=document.createElement("div"),this.logCount=document.createElement("div"),this.logCountContainer.className=f.logCountContainer,this.logCount.className=f.logCount,this.logIconContainer.remove(),this.logItem.insertAdjacentElement("afterbegin",this.logCountContainer),this.logCountContainer.appendChild(this.logCount)),this.count++,this.logCount.textContent=this.count}setGroupStack(e){this.groupStack=Array.from(e);for(let e=0;e<this.groupStack.length;e++){const e=document.createElement("div");e.className=f.logLevelIndent,this.logIndent.appendChild(e)}}getGroupID(){return this.groupStack[this.groupStack.length-1]||"root"}setMeasureEl(e){this.measureEl=e,this.updateSize()}setLastLog(e){null==e||0==e.noSep&&1==this.noSep?this.container.classList.add(f.pt0):0==e.noSep&&0==this.noSep&&this.container.classList.add(f.pt5)}text(){return this.logContent.textContent||""}}var L="devtool-module_devtool__40Bsh",N="devtool-module_devtoolLogsArea__PZMBh",$="devtool-module_devtoolMeasurementArea__CDPbA",k="devtool-module_devtoolLogs__BDFhB";class A{constructor(){let e;this.version="1.3.2",this.devtool=document.createElement("div"),this.devtoolLogsArea=document.createElement("div"),this.devtoolMeasurementArea=document.createElement("div"),this.devtoolLogs=document.createElement("div"),this.devtool.className=L,this.devtoolLogsArea.className=N,this.devtoolMeasurementArea.className=$,this.devtoolLogs.className=k,this.devtool.appendChild(this.devtoolLogsArea),this.devtoolLogsArea.appendChild(this.devtoolMeasurementArea),this.devtoolLogsArea.appendChild(this.devtoolLogs);let t=[],n=[],o=new Set,l=new Map,s={};const i=new Map,r=new Map,c=a((e=800,n=800)=>{const l=this.devtool.clientHeight,a=this.devtool.scrollTop,s=Math.max(0,a-e),i=a+l+n;let r=0,c=-1,d=0,p=0,u=t.filter(e=>!o.has(e.getGroupID()));for(let e=0;e<u.length;e++){const t=r;r+=u[e].height,r>=s&&t<=i&&(-1==c&&(c=e,p=t),d=e)}const h=this.devtool.scrollHeight-this.devtool.clientHeight<this.scrollTop+1;this.devtoolLogsArea.style.height=r+"px",this.devtoolLogs.style.top=p+"px";const g=this.devtoolLogs,m=u.slice(c,d+1).map(e=>e.container);return h&&(this.devtool.scrollTop=99999999),function(e,t){const n=t,o=Array.from(e.children),l=new Map;for(let e=0;e<o.length;e++)l.set(o[e],e);const a=new Array(n.length);for(let e=0;e<n.length;e++){const t=l.has(n[e])?l.get(n[e]):-1;a[e]=t}const s=[],i=new Array(n.length);for(let e=0;e<n.length;e++){const t=a[e];if(-1===t)continue;let n=0,o=s.length;for(;n<o;){const e=n+o>>1;a[s[e]]<t?n=e+1:o=e}n>=s.length?s.push(e):s[n]=e,i[e]=n>0?s[n-1]:-1}let r=new Set(s),c=null;for(let t=n.length-1;t>=0;t--){const o=n[t];-1===a[t]?e.insertBefore(o,c):r.has(t)||e.insertBefore(o,c),c=o}for(const e of o)n.includes(e)||e.remove()}(g,m)}),d=a=>{if(1==a.equals(e))e.addCount();else{if(t.push(a),a.setLastLog(e),a.setMeasureEl(this.devtoolMeasurementArea),a.on("resize",c),a.setGroupStack(n),"group"==a.type||"groupCollapsed"==a.type){const e=function(e,t){var n="",o=(t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length;for(let l=0;l<e;l++)n+=t.charAt(Math.floor(Math.random()*o));return n}(12),t={id:e,collapsed:"groupCollapsed"==a.type,update:n=>{t.collapsed=n;let a=n;return[e].concat(Array.from(l.get(e))).forEach(e=>{1==a||1==s[e].collapsed?(o.add(e),a=!0):o.delete(e)}),c()}};for(const t of n)l.get(t).add(e);n.push(e),l.set(e,new Set),s[e]=t,a.onChange(t.update);let i=!1;n.forEach(e=>{1==s[e].collapsed||1==i?(o.add(e),i=!0):o.delete(e)})}e=a}c()};let p=0,u=0;this.devtool.onscroll=()=>{const e=this.devtool.scrollTop,t=performance.now(),n=t-u;let o=100*(Math.abs(e-p)/n),l=0,a=0;n>500&&(o=800),o>2e3&&(o=2e3),o<100&&(o=100),e<p?(l=o,a=100):(l=100,a=o),p=e,u=t,c(l,a)},this.console={log:(...e)=>{0!=e.length&&d(new j("log",e))},info:(...e)=>{0!=e.length&&d(new j("info",e))},debug:(...e)=>{0!=e.length&&d(new j("debug",e))},warn:(...e)=>{0!=e.length&&d(new j("warn",e))},error:(...e)=>{0!=e.length&&d(new j("error",e))},group:(...e)=>{e[0]||(e[0]="console.group"),d(new j("group",e))},groupCollapsed:(...e)=>{e[0]||(e[0]="console.groupCollapsed"),d(new j("groupCollapsed",e))},groupEnd:()=>{n.pop(),e={type:"groupEnd"}},count:(e="default")=>{e=String(e);const t=(r.get(e)||0)+1;r.set(e,t),d(new j("log",[`${e}: ${t}`]))},countReset:(e="default")=>{if(e=String(e),!r.has(e))return d(new j("warn",[`Count for \'${e}\' does not exist`]));r.set(e,0)},time:(e="default")=>{if(e=String(e),i.has(e))return d(new j("warn",[`Timer \'${e}\' already exists`]));i.set(e,performance.now())},timeLog:(e="default",...t)=>{if(e=String(e),!i.has(e))return d(new j("warn",[`Timer \'${e}\' does not exist`]));const n=performance.now()-i.get(e);d(new j("log",[`${e}: ${n}ms`].concat(t)))},timeEnd:(e="default")=>{if(e=String(e),!i.has(e))return d(new j("warn",[`Timer \'${e}\' does not exist`]));const t=performance.now()-i.get(e);d(new j("log",[`${e}: ${t}ms`])),i.delete(e)},table:(...e)=>{e[0]&&d(new j("table",e))},trace:(...e)=>{e[0]||(e[0]="console.trace"),d(new j("trace",e))},assert:(e,...t)=>{e||d(new j("error",["Assertion failed:",...t]))},clear:()=>{t=[],e=null,n=[],o=new Set,l=new Map,s={},d(new j("clear",["Console was cleared"])),c()}}}}\r\n\n\n//# sourceURL=webpack://winbows11/./src/lib/winbows-devtool/dist/index.js?\n}')},"./src/lib/winui/contextMenu/contextMenu.css":
/*!***************************************************!*\
  !*** ./src/lib/winui/contextMenu/contextMenu.css ***!
  \***************************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js */ "./node_modules/style-loader/dist/runtime/styleDomAPI.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/insertBySelector.js */ "./node_modules/style-loader/dist/runtime/insertBySelector.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js */ "./node_modules/style-loader/dist/runtime/insertStyleElement.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js */ "./node_modules/style-loader/dist/runtime/styleTagTransform.js");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_contextMenu_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../../../../node_modules/css-loader/dist/cjs.js!./contextMenu.css */ "./node_modules/css-loader/dist/cjs.js!./src/lib/winui/contextMenu/contextMenu.css");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\noptions.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, "head");\noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_contextMenu_css__WEBPACK_IMPORTED_MODULE_6__["default"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_contextMenu_css__WEBPACK_IMPORTED_MODULE_6__["default"] && _node_modules_css_loader_dist_cjs_js_contextMenu_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals ? _node_modules_css_loader_dist_cjs_js_contextMenu_css__WEBPACK_IMPORTED_MODULE_6__["default"].locals : undefined);\n\n\n//# sourceURL=webpack://winbows11/./src/lib/winui/contextMenu/contextMenu.css?\n}')},"./src/lib/winui/contextMenu/contextMenu.js":
/*!**************************************************!*\
  !*** ./src/lib/winui/contextMenu/contextMenu.js ***!
  \**************************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _os_core_viewport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../os/core/viewport.js */ "./src/os/core/viewport.js");\n/* harmony import */ var _contextMenu_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contextMenu.css */ "./src/lib/winui/contextMenu/contextMenu.css");\n\r\n\r\n\r\nvar icons = {\r\n    "global-nav-button": "e700",\r\n    "wifi": "e701",\r\n    "bluetooth": "e702",\r\n    "connect": "e703",\r\n    "internet-sharing": "e704",\r\n    "vpn": "e705",\r\n    "brightness": "e706",\r\n    "map-pin": "e707",\r\n    "quiet-hours": "e708",\r\n    "airplane": "e709",\r\n    "tablet": "e70a",\r\n    "quick-note": "e70b",\r\n    "remembered-device": "e70c",\r\n    "chevron-down": "e70d",\r\n    "chevron-up": "e70e",\r\n    "edit": "e70f",\r\n    "add": "e710",\r\n    "cancel": "e711",\r\n    "more": "e712",\r\n    "settings": "e713",\r\n    "video": "e714",\r\n    "mail": "e715",\r\n    "people": "e716",\r\n    "phone": "e717",\r\n    "pin": "e718",\r\n    "shop": "e719",\r\n    "stop": "e71a",\r\n    "link": "e71b",\r\n    "filter": "e71c",\r\n    "all-apps": "e71d",\r\n    "zoom": "e71e",\r\n    "zoom-out": "e71f",\r\n    "microphone": "e720",\r\n    "search": "e721",\r\n    "camera": "e722",\r\n    "attach": "e723",\r\n    "send": "e724",\r\n    "send-fill": "e725",\r\n    "walk-solid": "e726",\r\n    "in-private": "e727",\r\n    "favorite-list": "e728",\r\n    "page-solid": "e729",\r\n    "forward": "e72a",\r\n    "back": "e72b",\r\n    "refresh": "e72c",\r\n    "share": "e72d",\r\n    "lock": "e72e",\r\n    "report-hacked": "e730",\r\n    "emi": "e731",\r\n    "favorite-star": "e734",\r\n    "favorite-star-fill": "e735",\r\n    "reading-mode": "e736",\r\n    "favicon": "e737",\r\n    "remove": "e738",\r\n    "checkbox": "e739",\r\n    "checkbox-composite": "e73a",\r\n    "checkbox-fill": "e73b",\r\n    "checkbox-indeterminate": "e73c",\r\n    "checkbox-composite-reversed": "e73d",\r\n    "check-mark": "e73e",\r\n    "back-to-window": "e73f",\r\n    "full-screen": "e740",\r\n    "resize-touch-larger": "e741",\r\n    "resize-touch-smaller": "e742",\r\n    "resize-mouse-small": "e743",\r\n    "resize-mouse-medium": "e744",\r\n    "resize-mouse-wide": "e745",\r\n    "resize-mouse-tall": "e746",\r\n    "resize-mouse-large": "e747",\r\n    "switch-user": "e748",\r\n    "print": "e749",\r\n    "up": "e74a",\r\n    "down": "e74b",\r\n    "oem": "e74c",\r\n    "delete": "e74d",\r\n    "save": "e74e",\r\n    "mute": "e74f",\r\n    "back-space-qwerty": "e750",\r\n    "return-key": "e751",\r\n    "up-arrow-shift-key": "e752",\r\n    "cloud": "e753",\r\n    "flashlight": "e754",\r\n    "rotation-lock": "e755",\r\n    "command-prompt": "e756",\r\n    "sip-move": "e759",\r\n    "sip-undock": "e75a",\r\n    "sip-redock": "e75b",\r\n    "erase-tool": "e75c",\r\n    "underscore-space": "e75d",\r\n    "gripper-tool": "e75e",\r\n    "dialpad": "e75f",\r\n    "page-left": "e760",\r\n    "page-right": "e761",\r\n    "multi-select": "e762",\r\n    "keyboard-left-handed": "e763",\r\n    "keyboard-right-handed": "e764",\r\n    "keyboard-classic": "e765",\r\n    "keyboard-split": "e766",\r\n    "volume": "e767",\r\n    "play": "e768",\r\n    "pause": "e769",\r\n    "chevron-left": "e76b",\r\n    "chevron-right": "e76c",\r\n    "inking-tool": "e76d",\r\n    "emoji2": "e76e",\r\n    "gripper-bar-horizontal": "e76f",\r\n    "system": "e770",\r\n    "personalize": "e771",\r\n    "devices": "e772",\r\n    "search-and-apps": "e773",\r\n    "globe": "e774",\r\n    "time-language": "e775",\r\n    "ease-of-access": "e776",\r\n    "update-restore": "e777",\r\n    "hang-up": "e778",\r\n    "contact-info": "e779",\r\n    "unpin": "e77a",\r\n    "contact": "e77b",\r\n    "memo": "e77c",\r\n    "incoming-call": "e77e",\r\n    "paste": "e77f",\r\n    "phone-book": "e780",\r\n    "led-light": "e781",\r\n    "error": "e783",\r\n    "gripper-bar-vertical": "e784",\r\n    "unlock": "e785",\r\n    "slideshow": "e786",\r\n    "calendar": "e787",\r\n    "gripper-resize": "e788",\r\n    "megaphone": "e789",\r\n    "trim": "e78a",\r\n    "new-window": "e78b",\r\n    "save-local": "e78c",\r\n    "color": "e790",\r\n    "data-sense": "e791",\r\n    "save-as": "e792",\r\n    "light": "e793",\r\n    "aspect-ratio": "e799",\r\n    "data-sense-bar": "e7a5",\r\n    "redo": "e7a6",\r\n    "undo": "e7a7",\r\n    "crop": "e7a8",\r\n    "open-with": "e7ac",\r\n    "rotate": "e7ad",\r\n    "red-eye": "e7b3",\r\n    "setlock-screen": "e7b5",\r\n    "map-pin2": "e7b7",\r\n    "package": "e7b8",\r\n    "warning": "e7ba",\r\n    "reading-list": "e7bc",\r\n    "education": "e7be",\r\n    "shopping-cart": "e7bf",\r\n    "train": "e7c0",\r\n    "flag": "e7c1",\r\n    "move": "e7c2",\r\n    "page": "e7c3",\r\n    "task-view": "e7c4",\r\n    "browse-photos": "e7c5",\r\n    "half-star-left": "e7c6",\r\n    "half-star-right": "e7c7",\r\n    "record": "e7c8",\r\n    "touch-pointer": "e7c9",\r\n    "lang-jpn": "e7de",\r\n    "ferry": "e7e3",\r\n    "highlight": "e7e6",\r\n    "action-center-notification": "e7e7",\r\n    "power-button": "e7e8",\r\n    "resize-touch-narrower": "e7ea",\r\n    "resize-touch-shorter": "e7eb",\r\n    "driving-mode": "e7ec",\r\n    "ringer-silent": "e7ed",\r\n    "other-user": "e7ee",\r\n    "admin": "e7ef",\r\n    "cc": "e7f0",\r\n    "sd-card": "e7f1",\r\n    "call-forwarding": "e7f2",\r\n    "settings-display-sound": "e7f3",\r\n    "tv-monitor": "e7f4",\r\n    "speakers": "e7f5",\r\n    "headphone": "e7f6",\r\n    "device-laptop-pic": "e7f7",\r\n    "device-laptop-no-pic": "e7f8",\r\n    "device-monitor-right-pic": "e7f9",\r\n    "device-monitor-left-pic": "e7fa",\r\n    "device-monitor-no-pic": "e7fb",\r\n    "game": "e7fc",\r\n    "horizontal-tab-key": "e7fd",\r\n    "streetside-split-minimize": "e802",\r\n    "streetside-split-expand": "e803",\r\n    "car": "e804",\r\n    "walk": "e805",\r\n    "bus": "e806",\r\n    "tilt-up": "e809",\r\n    "tilt-down": "e80a",\r\n    "call-control": "e80b",\r\n    "rotate-map-right": "e80c",\r\n    "rotate-map-left": "e80d",\r\n    "home": "e80f",\r\n    "parking-location": "e811",\r\n    "map-compass-top": "e812",\r\n    "map-compass-bottom": "e813",\r\n    "incident-triangle": "e814",\r\n    "touch": "e815",\r\n    "map-directions": "e816",\r\n    "start-point": "e819",\r\n    "stop-point": "e81a",\r\n    "end-point": "e81b",\r\n    "history": "e81c",\r\n    "location": "e81d",\r\n    "map-layers": "e81e",\r\n    "accident": "e81f",\r\n    "work": "e821",\r\n    "construction": "e822",\r\n    "recent": "e823",\r\n    "bank": "e825",\r\n    "download-map": "e826",\r\n    "inking-tool-fill2": "e829",\r\n    "highlight-fill2": "e82a",\r\n    "erase-tool-fill": "e82b",\r\n    "erase-tool-fill2": "e82c",\r\n    "dictionary": "e82d",\r\n    "dictionary-add": "e82e",\r\n    "tool-tip": "e82f",\r\n    "chrome-back": "e830",\r\n    "provisioning-package": "e835",\r\n    "add-remote-device": "e836",\r\n    "folder-open": "e838",\r\n    "ethernet": "e839",\r\n    "share-broadband": "e83a",\r\n    "direct-access": "e83b",\r\n    "dial-up": "e83c",\r\n    "defender-app": "e83d",\r\n    "battery-charging9": "e83e",\r\n    "battery10": "e83f",\r\n    "pinned": "e840",\r\n    "pin-fill": "e841",\r\n    "pinned-fill": "e842",\r\n    "period-key": "e843",\r\n    "punc-key": "e844",\r\n    "rev-toggle-key": "e845",\r\n    "right-arrow-key-time1": "e846",\r\n    "right-arrow-key-time2": "e847",\r\n    "left-quote": "e848",\r\n    "right-quote": "e849",\r\n    "down-shift-key": "e84a",\r\n    "up-shift-key": "e84b",\r\n    "punc-key0": "e84c",\r\n    "punc-key-left-bottom": "e84d",\r\n    "right-arrow-key-time3": "e84e",\r\n    "right-arrow-key-time4": "e84f",\r\n    "battery0": "e850",\r\n    "battery1": "e851",\r\n    "battery2": "e852",\r\n    "battery3": "e853",\r\n    "battery4": "e854",\r\n    "battery5": "e855",\r\n    "battery6": "e856",\r\n    "battery7": "e857",\r\n    "battery8": "e858",\r\n    "battery9": "e859",\r\n    "battery-charging0": "e85a",\r\n    "battery-charging1": "e85b",\r\n    "battery-charging2": "e85c",\r\n    "battery-charging3": "e85d",\r\n    "battery-charging4": "e85e",\r\n    "battery-charging5": "e85f",\r\n    "battery-charging6": "e860",\r\n    "battery-charging7": "e861",\r\n    "battery-charging8": "e862",\r\n    "battery-saver0": "e863",\r\n    "battery-saver1": "e864",\r\n    "battery-saver2": "e865",\r\n    "battery-saver3": "e866",\r\n    "battery-saver4": "e867",\r\n    "battery-saver5": "e868",\r\n    "battery-saver6": "e869",\r\n    "battery-saver7": "e86a",\r\n    "battery-saver8": "e86b",\r\n    "signal-bars1": "e86c",\r\n    "signal-bars2": "e86d",\r\n    "signal-bars3": "e86e",\r\n    "signal-bars4": "e86f",\r\n    "signal-bars5": "e870",\r\n    "signal-not-connected": "e871",\r\n    "wifi1": "e872",\r\n    "wifi2": "e873",\r\n    "wifi3": "e874",\r\n    "mob-sim-lock": "e875",\r\n    "mob-sim-missing": "e876",\r\n    "vibrate": "e877",\r\n    "roaming-international": "e878",\r\n    "roaming-domestic": "e879",\r\n    "call-forward-international": "e87a",\r\n    "call-forward-roaming": "e87b",\r\n    "jpn-romanji": "e87c",\r\n    "jpn-romanji-lock": "e87d",\r\n    "jpn-romanji-shift": "e87e",\r\n    "jpn-romanji-shift-lock": "e87f",\r\n    "status-data-transfer": "e880",\r\n    "status-data-transfer-vpn": "e881",\r\n    "status-dual-sim2": "e882",\r\n    "status-dual-sim2vpn": "e883",\r\n    "status-dual-sim1": "e884",\r\n    "status-dual-sim1vpn": "e885",\r\n    "status-sglte": "e886",\r\n    "status-sglte-cell": "e887",\r\n    "status-sglte-data-vpn": "e888",\r\n    "status-vpn": "e889",\r\n    "wifi-hotspot": "e88a",\r\n    "language-kor": "e88b",\r\n    "language-cht": "e88c",\r\n    "language-chs": "e88d",\r\n    "usb": "e88e",\r\n    "inking-tool-fill": "e88f",\r\n    "view": "e890",\r\n    "highlight-fill": "e891",\r\n    "previous": "e892",\r\n    "next": "e893",\r\n    "clear": "e894",\r\n    "sync": "e895",\r\n    "download": "e896",\r\n    "help": "e897",\r\n    "upload": "e898",\r\n    "emoji": "e899",\r\n    "two-page": "e89a",\r\n    "leave-chat": "e89b",\r\n    "mail-forward": "e89c",\r\n    "rotate-camera": "e89e",\r\n    "close-pane": "e89f",\r\n    "open-pane": "e8a0",\r\n    "preview-link": "e8a1",\r\n    "attach-camera": "e8a2",\r\n    "zoom-in": "e8a3",\r\n    "bookmarks": "e8a4",\r\n    "document": "e8a5",\r\n    "protected-document": "e8a6",\r\n    "open-in-new-window": "e8a7",\r\n    "mail-fill": "e8a8",\r\n    "view-all": "e8a9",\r\n    "video-chat": "e8aa",\r\n    "switch": "e8ab",\r\n    "rename": "e8ac",\r\n    "go": "e8ad",\r\n    "surface-hub": "e8ae",\r\n    "remote": "e8af",\r\n    "click": "e8b0",\r\n    "shuffle": "e8b1",\r\n    "movies": "e8b2",\r\n    "select-all": "e8b3",\r\n    "orientation": "e8b4",\r\n    "import": "e8b5",\r\n    "import-all": "e8b6",\r\n    "folder": "e8b7",\r\n    "webcam": "e8b8",\r\n    "picture": "e8b9",\r\n    "caption": "e8ba",\r\n    "chrome-close": "e8bb",\r\n    "show-results": "e8bc",\r\n    "message": "e8bd",\r\n    "leaf": "e8be",\r\n    "calendar-day": "e8bf",\r\n    "calendar-week": "e8c0",\r\n    "characters": "e8c1",\r\n    "mail-reply-all": "e8c2",\r\n    "read": "e8c3",\r\n    "show-bcc": "e8c4",\r\n    "hide-bcc": "e8c5",\r\n    "cut": "e8c6",\r\n    "payment-card": "e8c7",\r\n    "copy": "e8c8",\r\n    "important": "e8c9",\r\n    "mail-reply": "e8ca",\r\n    "sort": "e8cb",\r\n    "mobile-tablet": "e8cc",\r\n    "disconnect-drive": "e8cd",\r\n    "map-drive": "e8ce",\r\n    "contact-presence": "e8cf",\r\n    "priority": "e8d0",\r\n    "goto-today": "e8d1",\r\n    "font": "e8d2",\r\n    "font-color": "e8d3",\r\n    "contact2": "e8d4",\r\n    "folder-fill": "e8d5",\r\n    "audio": "e8d6",\r\n    "permissions": "e8d7",\r\n    "disable-updates": "e8d8",\r\n    "unfavorite": "e8d9",\r\n    "open-local": "e8da",\r\n    "italic": "e8db",\r\n    "underline": "e8dc",\r\n    "bold": "e8dd",\r\n    "move-to-folder": "e8de",\r\n    "like-dislike": "e8df",\r\n    "dislike": "e8e0",\r\n    "like": "e8e1",\r\n    "align-right": "e8e2",\r\n    "align-center": "e8e3",\r\n    "align-left": "e8e4",\r\n    "open-file": "e8e5",\r\n    "clear-selection": "e8e6",\r\n    "font-decrease": "e8e7",\r\n    "font-increase": "e8e8",\r\n    "font-size": "e8e9",\r\n    "cell-phone": "e8ea",\r\n    "reshare": "e8eb",\r\n    "tag": "e8ec",\r\n    "repeat-one": "e8ed",\r\n    "repeat-all": "e8ee",\r\n    "calculator": "e8ef",\r\n    "directions": "e8f0",\r\n    "library": "e8f1",\r\n    "chat-bubbles": "e8f2",\r\n    "post-update": "e8f3",\r\n    "new-folder": "e8f4",\r\n    "calendar-reply": "e8f5",\r\n    "unsync-folder": "e8f6",\r\n    "sync-folder": "e8f7",\r\n    "block-contact": "e8f8",\r\n    "switch-apps": "e8f9",\r\n    "add-friend": "e8fa",\r\n    "accept": "e8fb",\r\n    "go-to-start": "e8fc",\r\n    "bulleted-list": "e8fd",\r\n    "scan": "e8fe",\r\n    "preview": "e8ff",\r\n    "group": "e902",\r\n    "zero-bars": "e904",\r\n    "one-bar": "e905",\r\n    "two-bars": "e906",\r\n    "three-bars": "e907",\r\n    "four-bars": "e908",\r\n    "world": "e909",\r\n    "comment": "e90a",\r\n    "music-info": "e90b",\r\n    "dock-left": "e90c",\r\n    "dock-right": "e90d",\r\n    "dock-bottom": "e90e",\r\n    "repair": "e90f",\r\n    "accounts": "e910",\r\n    "dull-sound": "e911",\r\n    "manage": "e912",\r\n    "street": "e913",\r\n    "printer3d": "e914",\r\n    "radio-bullet": "e915",\r\n    "stopwatch": "e916",\r\n    "photo": "e91b",\r\n    "action-center": "e91c",\r\n    "full-circle-mask": "e91f",\r\n    "chrome-minimize": "e921",\r\n    "chrome-maximize": "e922",\r\n    "chrome-restore": "e923",\r\n    "annotation": "e924",\r\n    "back-space-qwerty-sm": "e925",\r\n    "back-space-qwerty-md": "e926",\r\n    "swipe": "e927",\r\n    "fingerprint": "e928",\r\n    "handwriting": "e929",\r\n    "chrome-back-to-window": "e92c",\r\n    "chrome-full-screen": "e92d",\r\n    "keyboard-standard": "e92e",\r\n    "keyboard-dismiss": "e92f",\r\n    "completed": "e930",\r\n    "chrome-annotate": "e931",\r\n    "label": "e932",\r\n    "i-beam": "e933",\r\n    "i-beam-outline": "e934",\r\n    "flick-down": "e935",\r\n    "flick-up": "e936",\r\n    "flick-left": "e937",\r\n    "flick-right": "e938",\r\n    "feedback-app": "e939",\r\n    "music-album": "e93c",\r\n    "streaming": "e93e",\r\n    "code": "e943",\r\n    "return-to-window": "e944",\r\n    "lightning-bolt": "e945",\r\n    "info": "e946",\r\n    "calculator-multiply": "e947",\r\n    "calculator-addition": "e948",\r\n    "calculator-subtract": "e949",\r\n    "calculator-divide": "e94a",\r\n    "calculator-squareroot": "e94b",\r\n    "calculator-percentage": "e94c",\r\n    "calculator-negate": "e94d",\r\n    "calculator-equal-to": "e94e",\r\n    "calculator-backspace": "e94f",\r\n    "component": "e950",\r\n    "dmc": "e951",\r\n    "dock": "e952",\r\n    "multimedia-dms": "e953",\r\n    "multimedia-dvr": "e954",\r\n    "multimedia-pmp": "e955",\r\n    "printfax-printer-file": "e956",\r\n    "sensor": "e957",\r\n    "storage-optical": "e958",\r\n    "communications": "e95a",\r\n    "headset": "e95b",\r\n    "projector": "e95d",\r\n    "health": "e95e",\r\n    "wire": "e95f",\r\n    "webcam2": "e960",\r\n    "input": "e961",\r\n    "mouse": "e962",\r\n    "smartcard": "e963",\r\n    "smartcard-virtual": "e964",\r\n    "media-storage-tower": "e965",\r\n    "return-key-sm": "e966",\r\n    "game-console": "e967",\r\n    "network": "e968",\r\n    "storage-network-wireless": "e969",\r\n    "storage-tape": "e96a",\r\n    "chevron-up-small": "e96d",\r\n    "chevron-down-small": "e96e",\r\n    "chevron-left-small": "e96f",\r\n    "chevron-right-small": "e970",\r\n    "chevron-up-med": "e971",\r\n    "chevron-down-med": "e972",\r\n    "chevron-left-med": "e973",\r\n    "chevron-right-med": "e974",\r\n    "devices2": "e975",\r\n    "expand-tile": "e976",\r\n    "pc1": "e977",\r\n    "presence-chicklet": "e978",\r\n    "presence-chicklet-video": "e979",\r\n    "reply": "e97a",\r\n    "set-tile": "e97b",\r\n    "type": "e97c",\r\n    "korean": "e97d",\r\n    "half-alpha": "e97e",\r\n    "full-alpha": "e97f",\r\n    "key12on": "e980",\r\n    "chinese-changjie": "e981",\r\n    "qwerty-on": "e982",\r\n    "qwerty-off": "e983",\r\n    "chinese-quick": "e984",\r\n    "japanese": "e985",\r\n    "full-hiragana": "e986",\r\n    "full-katakana": "e987",\r\n    "half-katakana": "e988",\r\n    "chinese-bo-po-mo-fo": "e989",\r\n    "chinese-pinyin": "e98a",\r\n    "construction-cone": "e98f",\r\n    "xbox-one-console": "e990",\r\n    "volume0": "e992",\r\n    "volume1": "e993",\r\n    "volume2": "e994",\r\n    "volume3": "e995",\r\n    "battery-unknown": "e996",\r\n    "wifi-attention-overlay": "e998",\r\n    "robot": "e99a",\r\n    "tap-and-send": "e9a1",\r\n    "fit-page": "e9a6",\r\n    "password-key-show": "e9a8",\r\n    "password-key-hide": "e9a9",\r\n    "bidi-ltr": "e9aa",\r\n    "bidi-rtl": "e9ab",\r\n    "forward-sm": "e9ac",\r\n    "comma-key": "e9ad",\r\n    "dash-key": "e9ae",\r\n    "dull-sound-key": "e9af",\r\n    "half-dull-sound": "e9b0",\r\n    "right-double-quote": "e9b1",\r\n    "left-double-quote": "e9b2",\r\n    "punc-key-right-bottom": "e9b3",\r\n    "punc-key1": "e9b4",\r\n    "punc-key2": "e9b5",\r\n    "punc-key3": "e9b6",\r\n    "punc-key4": "e9b7",\r\n    "punc-key5": "e9b8",\r\n    "punc-key6": "e9b9",\r\n    "punc-key9": "e9ba",\r\n    "punc-key7": "e9bb",\r\n    "punc-key8": "e9bc",\r\n    "frigid": "e9ca",\r\n    "unknown": "e9ce",\r\n    "area-chart": "e9d2",\r\n    "check-list": "e9d5",\r\n    "diagnostic": "e9d9",\r\n    "equalizer": "e9e9",\r\n    "process": "e9f3",\r\n    "processing": "e9f5",\r\n    "report-document": "e9f9",\r\n    "video-solid": "ea0c",\r\n    "mixed-media-badge": "ea0d",\r\n    "disconnect-display": "ea14",\r\n    "shield": "ea18",\r\n    "info2": "ea1f",\r\n    "action-center-asterisk": "ea21",\r\n    "beta": "ea24",\r\n    "save-copy": "ea35",\r\n    "list": "ea37",\r\n    "asterisk": "ea38",\r\n    "error-badge": "ea39",\r\n    "circle-ring": "ea3a",\r\n    "circle-fill": "ea3b",\r\n    "merge-call": "ea3c",\r\n    "private-call": "ea3d",\r\n    "record2": "ea3f",\r\n    "all-apps-mirrored": "ea40",\r\n    "bookmarks-mirrored": "ea41",\r\n    "bulleted-list-mirrored": "ea42",\r\n    "call-forward-international-mirrored": "ea43",\r\n    "call-forward-roaming-mirrored": "ea44",\r\n    "chrome-back-mirrored": "ea47",\r\n    "clear-selection-mirrored": "ea48",\r\n    "close-pane-mirrored": "ea49",\r\n    "contact-info-mirrored": "ea4a",\r\n    "dock-right-mirrored": "ea4b",\r\n    "dock-left-mirrored": "ea4c",\r\n    "expand-tile-mirrored": "ea4e",\r\n    "go-mirrored": "ea4f",\r\n    "gripper-resize-mirrored": "ea50",\r\n    "help-mirrored": "ea51",\r\n    "import-mirrored": "ea52",\r\n    "import-all-mirrored": "ea53",\r\n    "leave-chat-mirrored": "ea54",\r\n    "list-mirrored": "ea55",\r\n    "mail-forward-mirrored": "ea56",\r\n    "mail-reply-mirrored": "ea57",\r\n    "mail-reply-all-mirrored": "ea58",\r\n    "open-pane-mirrored": "ea5b",\r\n    "open-with-mirrored": "ea5c",\r\n    "parking-location-mirrored": "ea5e",\r\n    "resize-mouse-medium-mirrored": "ea5f",\r\n    "resize-mouse-small-mirrored": "ea60",\r\n    "resize-mouse-tall-mirrored": "ea61",\r\n    "resize-touch-narrower-mirrored": "ea62",\r\n    "send-mirrored": "ea63",\r\n    "send-fill-mirrored": "ea64",\r\n    "show-results-mirrored": "ea65",\r\n    "media": "ea69",\r\n    "sync-error": "ea6a",\r\n    "devices3": "ea6c",\r\n    "slow-motion-on": "ea79",\r\n    "lightbulb": "ea80",\r\n    "status-circle": "ea81",\r\n    "status-triangle": "ea82",\r\n    "status-error": "ea83",\r\n    "status-warning": "ea84",\r\n    "puzzle": "ea86",\r\n    "calendar-solid": "ea89",\r\n    "home-solid": "ea8a",\r\n    "parking-location-solid": "ea8b",\r\n    "contact-solid": "ea8c",\r\n    "construction-solid": "ea8d",\r\n    "accident-solid": "ea8e",\r\n    "ringer": "ea8f",\r\n    "pdf": "ea90",\r\n    "thought-bubble": "ea91",\r\n    "heart-broken": "ea92",\r\n    "battery-charging10": "ea93",\r\n    "battery-saver9": "ea94",\r\n    "battery-saver10": "ea95",\r\n    "call-forwarding-mirrored": "ea97",\r\n    "multi-select-mirrored": "ea98",\r\n    "broom": "ea99",\r\n    "forward-call": "eac2",\r\n    "trackers": "eadf",\r\n    "market": "eafc",\r\n    "pie-single": "eb05",\r\n    "stock-up": "eb0f",\r\n    "stock-down": "eb11",\r\n    "design": "eb3c",\r\n    "website": "eb41",\r\n    "drop": "eb42",\r\n    "radar": "eb44",\r\n    "bus-solid": "eb47",\r\n    "ferry-solid": "eb48",\r\n    "start-point-solid": "eb49",\r\n    "stop-point-solid": "eb4a",\r\n    "end-point-solid": "eb4b",\r\n    "airplane-solid": "eb4c",\r\n    "train-solid": "eb4d",\r\n    "work-solid": "eb4e",\r\n    "reminder-fill": "eb4f",\r\n    "reminder": "eb50",\r\n    "heart": "eb51",\r\n    "heart-fill": "eb52",\r\n    "ethernet-error": "eb55",\r\n    "ethernet-warning": "eb56",\r\n    "status-connecting1": "eb57",\r\n    "status-connecting2": "eb58",\r\n    "status-unsecure": "eb59",\r\n    "wifi-error0": "eb5a",\r\n    "wifi-error1": "eb5b",\r\n    "wifi-error2": "eb5c",\r\n    "wifi-error3": "eb5d",\r\n    "wifi-error4": "eb5e",\r\n    "wifi-warning0": "eb5f",\r\n    "wifi-warning1": "eb60",\r\n    "wifi-warning2": "eb61",\r\n    "wifi-warning3": "eb62",\r\n    "wifi-warning4": "eb63",\r\n    "devices4": "eb66",\r\n    "nui-iris": "eb67",\r\n    "nui-face": "eb68",\r\n    "gateway-router": "eb77",\r\n    "edit-mirrored": "eb7e",\r\n    "nuifp-start-slide-hand": "eb82",\r\n    "nuifp-start-slide-action": "eb83",\r\n    "nuifp-continue-slide-hand": "eb84",\r\n    "nuifp-continue-slide-action": "eb85",\r\n    "nuifp-roll-right-hand": "eb86",\r\n    "nuifp-roll-right-hand-action": "eb87",\r\n    "nuifp-roll-left-hand": "eb88",\r\n    "nuifp-roll-left-action": "eb89",\r\n    "nuifp-press-hand": "eb8a",\r\n    "nuifp-press-action": "eb8b",\r\n    "nuifp-press-repeat-hand": "eb8c",\r\n    "nuifp-press-repeat-action": "eb8d",\r\n    "status-error-full": "eb90",\r\n    "task-view-expanded": "eb91",\r\n    "certificate": "eb95",\r\n    "back-space-qwerty-lg": "eb96",\r\n    "return-key-lg": "eb97",\r\n    "fast-forward": "eb9d",\r\n    "rewind": "eb9e",\r\n    "photo2": "eb9f",\r\n    "mob-battery0": "eba0",\r\n    "mob-battery1": "eba1",\r\n    "mob-battery2": "eba2",\r\n    "mob-battery3": "eba3",\r\n    "mob-battery4": "eba4",\r\n    "mob-battery5": "eba5",\r\n    "mob-battery6": "eba6",\r\n    "mob-battery7": "eba7",\r\n    "mob-battery8": "eba8",\r\n    "mob-battery9": "eba9",\r\n    "mob-battery10": "ebaa",\r\n    "mob-battery-charging0": "ebab",\r\n    "mob-battery-charging1": "ebac",\r\n    "mob-battery-charging2": "ebad",\r\n    "mob-battery-charging3": "ebae",\r\n    "mob-battery-charging4": "ebaf",\r\n    "mob-battery-charging5": "ebb0",\r\n    "mob-battery-charging6": "ebb1",\r\n    "mob-battery-charging7": "ebb2",\r\n    "mob-battery-charging8": "ebb3",\r\n    "mob-battery-charging9": "ebb4",\r\n    "mob-battery-charging10": "ebb5",\r\n    "mob-battery-saver0": "ebb6",\r\n    "mob-battery-saver1": "ebb7",\r\n    "mob-battery-saver2": "ebb8",\r\n    "mob-battery-saver3": "ebb9",\r\n    "mob-battery-saver4": "ebba",\r\n    "mob-battery-saver5": "ebbb",\r\n    "mob-battery-saver6": "ebbc",\r\n    "mob-battery-saver7": "ebbd",\r\n    "mob-battery-saver8": "ebbe",\r\n    "mob-battery-saver9": "ebbf",\r\n    "mob-battery-saver10": "ebc0",\r\n    "dictionary-cloud": "ebc3",\r\n    "reset-drive": "ebc4",\r\n    "volume-bars": "ebc5",\r\n    "project": "ebc6",\r\n    "adjust-hologram": "ebd2",\r\n    "cloud-download": "ebd3",\r\n    "mob-wifi-call-bars": "ebd4",\r\n    "mob-wifi-call0": "ebd5",\r\n    "mob-wifi-call1": "ebd6",\r\n    "mob-wifi-call2": "ebd7",\r\n    "mob-wifi-call3": "ebd8",\r\n    "mob-wifi-call4": "ebd9",\r\n    "family": "ebda",\r\n    "lock-feedback": "ebdb",\r\n    "device-discovery": "ebde",\r\n    "wind-direction": "ebe6",\r\n    "right-arrow-key-time0": "ebe7",\r\n    "bug": "ebe8",\r\n    "tablet-mode": "ebfc",\r\n    "status-circle-left": "ebfd",\r\n    "status-triangle-left": "ebfe",\r\n    "status-error-left": "ebff",\r\n    "status-warning-left": "ec00",\r\n    "mob-battery-unknown": "ec02",\r\n    "network-tower": "ec05",\r\n    "city-next": "ec06",\r\n    "city-next2": "ec07",\r\n    "courthouse": "ec08",\r\n    "groceries": "ec09",\r\n    "sustainable": "ec0a",\r\n    "building-energy": "ec0b",\r\n    "toggle-filled": "ec11",\r\n    "toggle-border": "ec12",\r\n    "slider-thumb": "ec13",\r\n    "toggle-thumb": "ec14",\r\n    "miracast-logo-small": "ec15",\r\n    "miracast-logo-large": "ec16",\r\n    "plap": "ec19",\r\n    "badge": "ec1b",\r\n    "signal-roaming": "ec1e",\r\n    "mobile-locked": "ec20",\r\n    "insider-hub-app": "ec24",\r\n    "personal-folder": "ec25",\r\n    "home-group": "ec26",\r\n    "my-network": "ec27",\r\n    "keyboard-full": "ec31",\r\n    "cafe": "ec32",\r\n    "mob-signal1": "ec37",\r\n    "mob-signal2": "ec38",\r\n    "mob-signal3": "ec39",\r\n    "mob-signal4": "ec3a",\r\n    "mob-signal5": "ec3b",\r\n    "mob-wifi1": "ec3c",\r\n    "mob-wifi2": "ec3d",\r\n    "mob-wifi3": "ec3e",\r\n    "mob-wifi4": "ec3f",\r\n    "mob-airplane": "ec40",\r\n    "mob-bluetooth": "ec41",\r\n    "mob-action-center": "ec42",\r\n    "mob-location": "ec43",\r\n    "mob-wifi-hotspot": "ec44",\r\n    "language-jpn": "ec45",\r\n    "mob-quiet-hours": "ec46",\r\n    "mob-driving-mode": "ec47",\r\n    "speed-off": "ec48",\r\n    "speed-medium": "ec49",\r\n    "speed-high": "ec4a",\r\n    "this-pc": "ec4e",\r\n    "music-note": "ec4f",\r\n    "file-explorer": "ec50",\r\n    "file-explorer-app": "ec51",\r\n    "left-arrow-key-time0": "ec52",\r\n    "mic-off": "ec54",\r\n    "mic-sleep": "ec55",\r\n    "mic-error": "ec56",\r\n    "playback-rate1x": "ec57",\r\n    "playback-rate-other": "ec58",\r\n    "cash-drawer": "ec59",\r\n    "barcode-scanner": "ec5a",\r\n    "receipt-printer": "ec5b",\r\n    "mag-stripe-reader": "ec5c",\r\n    "completed-solid": "ec61",\r\n    "companion-app": "ec64",\r\n    "favicon2": "ec6c",\r\n    "swipe-reveal-art": "ec6d",\r\n    "mic-on": "ec71",\r\n    "mic-clipping": "ec72",\r\n    "tablet-selected": "ec74",\r\n    "mobile-selected": "ec75",\r\n    "laptop-selected": "ec76",\r\n    "tv-monitor-selected": "ec77",\r\n    "developer-tools": "ec7a",\r\n    "mob-call-forwarding": "ec7e",\r\n    "mob-call-forwarding-mirrored": "ec7f",\r\n    "body-cam": "ec80",\r\n    "police-car": "ec81",\r\n    "draw": "ec87",\r\n    "draw-solid": "ec88",\r\n    "lower-brightness": "ec8a",\r\n    "scroll-up-down": "ec8f",\r\n    "date-time": "ec92",\r\n    "holo-lens": "ec94",\r\n    "tiles": "eca5",\r\n    "party-leader": "eca7",\r\n    "app-icon-default": "ecaa",\r\n    "calories": "ecad",\r\n    "poi": "ecaf",\r\n    "band-battery0": "ecb9",\r\n    "band-battery1": "ecba",\r\n    "band-battery2": "ecbb",\r\n    "band-battery3": "ecbc",\r\n    "band-battery4": "ecbd",\r\n    "band-battery5": "ecbe",\r\n    "band-battery6": "ecbf",\r\n    "add-surface-hub": "ecc4",\r\n    "dev-update": "ecc5",\r\n    "unit": "ecc6",\r\n    "add-to": "ecc8",\r\n    "remove-from": "ecc9",\r\n    "radio-btn-off": "ecca",\r\n    "radio-btn-on": "eccb",\r\n    "radio-bullet2": "eccc",\r\n    "explore-content": "eccd",\r\n    "blocked2": "ece4",\r\n    "scroll-mode": "ece7",\r\n    "zoom-mode": "ece8",\r\n    "pan-mode": "ece9",\r\n    "wired-usb": "ecf0",\r\n    "wireless-usb": "ecf1",\r\n    "usb-safe-connect": "ecf3",\r\n    "action-center-notification-mirrored": "ed0c",\r\n    "action-center-mirrored": "ed0d",\r\n    "subscription-add": "ed0e",\r\n    "reset-device": "ed10",\r\n    "subscription-add-mirrored": "ed11",\r\n    "qr-code": "ed14",\r\n    "feedback": "ed15",\r\n    "hide": "ed1a",\r\n    "subtitles": "ed1e",\r\n    "subtitles-audio": "ed1f",\r\n    "open-folder-horizontal": "ed25",\r\n    "calendar-mirrored": "ed28",\r\n    "mobe-sim": "ed2a",\r\n    "mobe-sim-no-profile": "ed2b",\r\n    "mobe-sim-locked": "ed2c",\r\n    "mobe-sim-busy": "ed2d",\r\n    "signal-error": "ed2e",\r\n    "streaming-enterprise": "ed2f",\r\n    "headphone0": "ed30",\r\n    "headphone1": "ed31",\r\n    "headphone2": "ed32",\r\n    "headphone3": "ed33",\r\n    "apps": "ed35",\r\n    "keyboard-brightness": "ed39",\r\n    "keyboard-lower-brightness": "ed3a",\r\n    "skip-back10": "ed3c",\r\n    "skip-forward30": "ed3d",\r\n    "tree-folder-folder": "ed41",\r\n    "tree-folder-folder-fill": "ed42",\r\n    "tree-folder-folder-open": "ed43",\r\n    "tree-folder-folder-open-fill": "ed44",\r\n    "multimedia-dmp": "ed47",\r\n    "keyboard-one-handed": "ed4c",\r\n    "narrator": "ed4d",\r\n    "emoji-tab-people": "ed53",\r\n    "emoji-tab-smiles-animals": "ed54",\r\n    "emoji-tab-celebration-objects": "ed55",\r\n    "emoji-tab-food-plants": "ed56",\r\n    "emoji-tab-transit-places": "ed57",\r\n    "emoji-tab-symbols": "ed58",\r\n    "emoji-tab-text-smiles": "ed59",\r\n    "emoji-tab-favorites": "ed5a",\r\n    "emoji-swatch": "ed5b",\r\n    "connect-app": "ed5c",\r\n    "companion-device-framework": "ed5d",\r\n    "ruler": "ed5e",\r\n    "finger-inking": "ed5f",\r\n    "stroke-erase": "ed60",\r\n    "point-erase": "ed61",\r\n    "clear-all-ink": "ed62",\r\n    "pencil": "ed63",\r\n    "marker": "ed64",\r\n    "inking-caret": "ed65",\r\n    "inking-color-outline": "ed66",\r\n    "inking-color-fill": "ed67",\r\n    "hard-drive": "eda2",\r\n    "network-adapter": "eda3",\r\n    "touchscreen": "eda4",\r\n    "network-printer": "eda5",\r\n    "cloud-printer": "eda6",\r\n    "keyboard-shortcut": "eda7",\r\n    "brush-size": "eda8",\r\n    "narrator-forward": "eda9",\r\n    "narrator-forward-mirrored": "edaa",\r\n    "sync-badge12": "edab",\r\n    "ringer-badge12": "edac",\r\n    "asterisk-badge12": "edad",\r\n    "error-badge12": "edae",\r\n    "circle-ring-badge12": "edaf",\r\n    "circle-fill-badge12": "edb0",\r\n    "important-badge12": "edb1",\r\n    "mail-badge12": "edb3",\r\n    "pause-badge12": "edb4",\r\n    "play-badge12": "edb5",\r\n    "pen-workspace": "edc6",\r\n    "caret-left8": "edd5",\r\n    "caret-right8": "edd6",\r\n    "caret-up8": "edd7",\r\n    "caret-down8": "edd8",\r\n    "caret-left-solid8": "edd9",\r\n    "caret-right-solid8": "edda",\r\n    "caret-up-solid8": "eddb",\r\n    "caret-down-solid8": "eddc",\r\n    "strikethrough": "ede0",\r\n    "export": "ede1",\r\n    "export-mirrored": "ede2",\r\n    "button-menu": "ede3",\r\n    "cloud-search": "ede4",\r\n    "pinyin-ime-logo": "ede5",\r\n    "calligraphy-pen": "edfb",\r\n    "reply-mirrored": "ee35",\r\n    "lockscreen-desktop": "ee3f",\r\n    "task-view-settings": "ee40",\r\n    "mini-expand2mirrored": "ee47",\r\n    "mini-contract2mirrored": "ee49",\r\n    "play36": "ee4a",\r\n    "pen-palette": "ee56",\r\n    "guest-user": "ee57",\r\n    "settings-battery": "ee63",\r\n    "taskbar-phone": "ee64",\r\n    "lock-screen-glance": "ee65",\r\n    "generic-scan": "ee6f",\r\n    "image-export": "ee71",\r\n    "wifi-ethernet": "ee77",\r\n    "action-center-quiet": "ee79",\r\n    "action-center-quiet-notification": "ee7a",\r\n    "trackers-mirrored": "ee92",\r\n    "date-time-mirrored": "ee93",\r\n    "wheel": "ee94",\r\n    "virtual-machine-group": "eea3",\r\n    "button-view2": "eeca",\r\n    "pen-workspace-mirrored": "ef15",\r\n    "pen-palette-mirrored": "ef16",\r\n    "stroke-erase-mirrored": "ef17",\r\n    "point-erase-mirrored": "ef18",\r\n    "clear-all-ink-mirrored": "ef19",\r\n    "background-toggle": "ef1f",\r\n    "marquee": "ef20",\r\n    "chrome-close-contrast": "ef2c",\r\n    "chrome-minimize-contrast": "ef2d",\r\n    "chrome-maximize-contrast": "ef2e",\r\n    "chrome-restore-contrast": "ef2f",\r\n    "traffic-light": "ef31",\r\n    "replay": "ef3b",\r\n    "eyedropper": "ef3c",\r\n    "line-display": "ef3d",\r\n    "pin-pad": "ef3e",\r\n    "signature-capture": "ef3f",\r\n    "chip-card-credit-card-reader": "ef40",\r\n    "market-down": "ef42",\r\n    "player-settings": "ef58",\r\n    "landscape-orientation": "ef6b",\r\n    "flow": "ef90",\r\n    "touchpad": "efa5",\r\n    "speech": "efa9",\r\n    "knowledge-article": "f000",\r\n    "relationship": "f003",\r\n    "zip-folder": "f012",\r\n    "default-apn": "f080",\r\n    "user-apn": "f081",\r\n    "double-pinyin": "f085",\r\n    "blue-light": "f08c",\r\n    "caret-solid-left": "f08d",\r\n    "caret-solid-down": "f08e",\r\n    "caret-solid-right": "f08f",\r\n    "caret-solid-up": "f090",\r\n    "button-a": "f093",\r\n    "button-b": "f094",\r\n    "button-y": "f095",\r\n    "button-x": "f096",\r\n    "arrow-up8": "f0ad",\r\n    "arrow-down8": "f0ae",\r\n    "arrow-right8": "f0af",\r\n    "arrow-left8": "f0b0",\r\n    "quarentined-items": "f0b2",\r\n    "quarentined-items-mirrored": "f0b3",\r\n    "protractor": "f0b4",\r\n    "checklist-mirrored": "f0b5",\r\n    "status-circle7": "f0b6",\r\n    "status-checkmark7": "f0b7",\r\n    "status-error-circle7": "f0b8",\r\n    "connected": "f0b9",\r\n    "pencil-fill": "f0c6",\r\n    "calligraphy-fill": "f0c7",\r\n    "quarter-star-left": "f0ca",\r\n    "quarter-star-right": "f0cb",\r\n    "three-quarter-star-left": "f0cc",\r\n    "three-quarter-star-right": "f0cd",\r\n    "quiet-hours-badge12": "f0ce",\r\n    "back-mirrored": "f0d2",\r\n    "forward-mirrored": "f0d3",\r\n    "chrome-back-contrast": "f0d5",\r\n    "chrome-back-contrast-mirrored": "f0d6",\r\n    "chrome-back-to-window-contrast": "f0d7",\r\n    "chrome-full-screen-contrast": "f0d8",\r\n    "grid-view": "f0e2",\r\n    "clipboard-list": "f0e3",\r\n    "clipboard-list-mirrored": "f0e4",\r\n    "outline-quarter-star-left": "f0e5",\r\n    "outline-quarter-star-right": "f0e6",\r\n    "outline-half-star-left": "f0e7",\r\n    "outline-half-star-right": "f0e8",\r\n    "outline-three-quarter-star-left": "f0e9",\r\n    "outline-three-quarter-star-right": "f0ea",\r\n    "spatial-volume0": "f0eb",\r\n    "spatial-volume1": "f0ec",\r\n    "spatial-volume2": "f0ed",\r\n    "spatial-volume3": "f0ee",\r\n    "application-guard": "f0ef",\r\n    "outline-star-left-half": "f0f7",\r\n    "outline-star-right-half": "f0f8",\r\n    "chrome-annotate-contrast": "f0f9",\r\n    "defender-badge12": "f0fb",\r\n    "detachable-pc": "f103",\r\n    "left-stick": "f108",\r\n    "right-stick": "f109",\r\n    "trigger-left": "f10a",\r\n    "trigger-right": "f10b",\r\n    "bumper-left": "f10c",\r\n    "bumper-right": "f10d",\r\n    "dpad": "f10e",\r\n    "english-punctuation": "f110",\r\n    "chinese-punctuation": "f111",\r\n    "hmd": "f119",\r\n    "ctrl-spatial-right": "f11b",\r\n    "pagination-dot-outline10": "f126",\r\n    "pagination-dot-solid10": "f127",\r\n    "stroke-erase2": "f128",\r\n    "small-erase": "f129",\r\n    "large-erase": "f12a",\r\n    "folder-horizontal": "f12b",\r\n    "microphone-listening": "f12e",\r\n    "status-exclamation-circle7": "f12f",\r\n    "video360": "f131",\r\n    "giftbox-open": "f133",\r\n    "status-circle-outer": "f136",\r\n    "status-circle-inner": "f137",\r\n    "status-circle-ring": "f138",\r\n    "status-triangle-outer": "f139",\r\n    "status-triangle-inner": "f13a",\r\n    "status-triangle-exclamation": "f13b",\r\n    "status-circle-exclamation": "f13c",\r\n    "status-circle-error-x": "f13d",\r\n    "status-circle-checkmark": "f13e",\r\n    "status-circle-info": "f13f",\r\n    "status-circle-block": "f140",\r\n    "status-circle-block2": "f141",\r\n    "status-circle-question-mark": "f142",\r\n    "status-circle-sync": "f143",\r\n    "dial1": "f146",\r\n    "dial2": "f147",\r\n    "dial3": "f148",\r\n    "dial4": "f149",\r\n    "dial5": "f14a",\r\n    "dial6": "f14b",\r\n    "dial7": "f14c",\r\n    "dial8": "f14d",\r\n    "dial9": "f14e",\r\n    "dial10": "f14f",\r\n    "dial11": "f150",\r\n    "dial12": "f151",\r\n    "dial13": "f152",\r\n    "dial14": "f153",\r\n    "dial15": "f154",\r\n    "dial16": "f155",\r\n    "dial-shape1": "f156",\r\n    "dial-shape2": "f157",\r\n    "dial-shape3": "f158",\r\n    "dial-shape4": "f159",\r\n    "closed-captions-international": "f15f",\r\n    "toll-solid": "f161",\r\n    "traffic-congestion-solid": "f163",\r\n    "explore-content-single": "f164",\r\n    "collapse-content": "f165",\r\n    "collapse-content-single": "f166",\r\n    "info-solid": "f167",\r\n    "group-list": "f168",\r\n    "caret-bottom-right-solid-center8": "f169",\r\n    "progress-ring-dots": "f16a",\r\n    "checkbox14": "f16b",\r\n    "checkbox-composite14": "f16c",\r\n    "checkbox-indeterminate-combo14": "f16d",\r\n    "checkbox-indeterminate-combo": "f16e",\r\n    "status-pause7": "f175",\r\n    "character-appearance": "f17f",\r\n    "lexicon": "f180",\r\n    "screen-time": "f182",\r\n    "headless-device": "f191",\r\n    "network-sharing": "f193",\r\n    "eye-gaze": "f19d",\r\n    "toggle-left": "f19e",\r\n    "toggle-right": "f19f",\r\n    "windows-insider": "f1ad",\r\n    "chrome-switch": "f1cb",\r\n    "chrome-switch-contast": "f1cc",\r\n    "status-checkmark": "f1d8",\r\n    "status-checkmark-left": "f1d9",\r\n    "keyboard-left-aligned": "f20c",\r\n    "keyboard-right-aligned": "f20d",\r\n    "keyboard-settings": "f210",\r\n    "network-physical": "f211",\r\n    "iot": "f22c",\r\n    "unknown-mirrored": "f22e",\r\n    "view-dashboard": "f246",\r\n    "exploit-protection-settings": "f259",\r\n    "keyboard-narrow": "f260",\r\n    "keyboard12key": "f261",\r\n    "keyboard-dock": "f26b",\r\n    "keyboard-undock": "f26c",\r\n    "keyboard-left-dock": "f26d",\r\n    "keyboard-right-dock": "f26e",\r\n    "ear": "f270",\r\n    "pointer-hand": "f271",\r\n    "bullseye": "f272",\r\n    "document-approval": "f28b",\r\n    "locale-language": "f2b7",\r\n    "passive-authentication": "f32a",\r\n    "color-solid": "f354",\r\n    "network-offline": "f384",\r\n    "network-connected": "f385",\r\n    "network-connected-checkmark": "f386",\r\n    "sign-out": "f3b1",\r\n    "status-info": "f3cc",\r\n    "status-info-left": "f3cd",\r\n    "nearby-sharing": "f3e2",\r\n    "ctrl-spatial-left": "f3e7",\r\n    "interactive-dashboard": "f404",\r\n    "decline-call": "f405",\r\n    "clipping-tool": "f406",\r\n    "rectangular-clipping": "f407",\r\n    "free-form-clipping": "f408",\r\n    "copy-to": "f413",\r\n    "id-badge": "f427",\r\n    "dynamic-lock": "f439",\r\n    "pen-tips": "f45e",\r\n    "pen-tips-mirrored": "f45f",\r\n    "hwp-join": "f460",\r\n    "hwp-insert": "f461",\r\n    "hwp-strike-through": "f462",\r\n    "hwp-scratch-out": "f463",\r\n    "hwp-split": "f464",\r\n    "hwp-new-line": "f465",\r\n    "hwp-overwrite": "f466",\r\n    "mob-wifi-warning1": "f473",\r\n    "mob-wifi-warning2": "f474",\r\n    "mob-wifi-warning3": "f475",\r\n    "mob-wifi-warning4": "f476",\r\n    "mic-location-combo": "f47f",\r\n    "globe2": "f49a",\r\n    "special-effect-size": "f4a5",\r\n    "gif": "f4a9",\r\n    "sticker2": "f4aa",\r\n    "surface-hub-selected": "f4be",\r\n    "holo-lens-selected": "f4bf",\r\n    "earbud": "f4c0",\r\n    "mix-volumes": "f4c3",\r\n    "safe": "f540",\r\n    "laptop-secure": "f552",\r\n    "print-default": "f56d",\r\n    "page-mirrored": "f56e",\r\n    "landscape-orientation-mirrored": "f56f",\r\n    "color-off": "f570",\r\n    "print-all-pages": "f571",\r\n    "print-custom-range": "f572",\r\n    "page-margin-portrait-narrow": "f573",\r\n    "page-margin-portrait-normal": "f574",\r\n    "page-margin-portrait-moderate": "f575",\r\n    "page-margin-portrait-wide": "f576",\r\n    "page-margin-landscape-narrow": "f577",\r\n    "page-margin-landscape-normal": "f578",\r\n    "page-margin-landscape-moderate": "f579",\r\n    "page-margin-landscape-wide": "f57a",\r\n    "collate-landscape": "f57b",\r\n    "collate-portrait": "f57c",\r\n    "collate-portrait-separated": "f57d",\r\n    "duplex-landscape-one-sided": "f57e",\r\n    "duplex-landscape-one-sided-mirrored": "f57f",\r\n    "duplex-landscape-two-sided-long-edge": "f580",\r\n    "duplex-landscape-two-sided-long-edge-mirrored": "f581",\r\n    "duplex-landscape-two-sided-short-edge": "f582",\r\n    "duplex-landscape-two-sided-short-edge-mirrored": "f583",\r\n    "duplex-portrait-one-sided": "f584",\r\n    "duplex-portrait-one-sided-mirrored": "f585",\r\n    "duplex-portrait-two-sided-long-edge": "f586",\r\n    "duplex-portrait-two-sided-long-edge-mirrored": "f587",\r\n    "duplex-portrait-two-sided-short-edge": "f588",\r\n    "duplex-portrait-two-sided-short-edge-mirrored": "f589",\r\n    "pps-one-landscape": "f58a",\r\n    "pps-two-landscape": "f58b",\r\n    "pps-two-portrait": "f58c",\r\n    "pps-four-landscape": "f58d",\r\n    "pps-four-portrait": "f58e",\r\n    "hole-punch-off": "f58f",\r\n    "hole-punch-portrait-left": "f590",\r\n    "hole-punch-portrait-right": "f591",\r\n    "hole-punch-portrait-top": "f592",\r\n    "hole-punch-portrait-bottom": "f593",\r\n    "hole-punch-landscape-left": "f594",\r\n    "hole-punch-landscape-right": "f595",\r\n    "hole-punch-landscape-top": "f596",\r\n    "hole-punch-landscape-bottom": "f597",\r\n    "stapling-off": "f598",\r\n    "stapling-portrait-top-left": "f599",\r\n    "stapling-portrait-top-right": "f59a",\r\n    "stapling-portrait-bottom-right": "f59b",\r\n    "stapling-portrait-two-left": "f59c",\r\n    "stapling-portrait-two-right": "f59d",\r\n    "stapling-portrait-two-top": "f59e",\r\n    "stapling-portrait-two-bottom": "f59f",\r\n    "stapling-portrait-book-binding": "f5a0",\r\n    "stapling-landscape-top-left": "f5a1",\r\n    "stapling-landscape-top-right": "f5a2",\r\n    "stapling-landscape-bottom-left": "f5a3",\r\n    "stapling-landscape-bottom-right": "f5a4",\r\n    "stapling-landscape-two-left": "f5a5",\r\n    "stapling-landscape-two-right": "f5a6",\r\n    "stapling-landscape-two-top": "f5a7",\r\n    "stapling-landscape-two-bottom": "f5a8",\r\n    "stapling-landscape-book-binding": "f5a9",\r\n    "status-data-transfer-roaming": "f5aa",\r\n    "mob-sim-error": "f5ab",\r\n    "collate-landscape-separated": "f5ac",\r\n    "pps-one-portrait": "f5ad",\r\n    "stapling-portrait-bottom-left": "f5ae",\r\n    "play-solid": "f5b0",\r\n    "repeat-off": "f5e7",\r\n    "set": "f5ed",\r\n    "set-solid": "f5ee",\r\n    "fuzzy-reading": "f5ef",\r\n    "vertical-battery0": "f5f2",\r\n    "vertical-battery1": "f5f3",\r\n    "vertical-battery2": "f5f4",\r\n    "vertical-battery3": "f5f5",\r\n    "vertical-battery4": "f5f6",\r\n    "vertical-battery5": "f5f7",\r\n    "vertical-battery6": "f5f8",\r\n    "vertical-battery7": "f5f9",\r\n    "vertical-battery8": "f5fa",\r\n    "vertical-battery9": "f5fb",\r\n    "vertical-battery10": "f5fc",\r\n    "vertical-battery-charging0": "f5fd",\r\n    "vertical-battery-charging1": "f5fe",\r\n    "vertical-battery-charging2": "f5ff",\r\n    "vertical-battery-charging3": "f600",\r\n    "vertical-battery-charging4": "f601",\r\n    "vertical-battery-charging5": "f602",\r\n    "vertical-battery-charging6": "f603",\r\n    "vertical-battery-charging7": "f604",\r\n    "vertical-battery-charging8": "f605",\r\n    "vertical-battery-charging9": "f606",\r\n    "vertical-battery-charging10": "f607",\r\n    "vertical-battery-unknown": "f608",\r\n    "sim-error": "f618",\r\n    "sim-missing": "f619",\r\n    "sim-lock": "f61a",\r\n    "e-sim": "f61b",\r\n    "e-sim-no-profile": "f61c",\r\n    "e-sim-locked": "f61d",\r\n    "e-sim-busy": "f61e",\r\n    "noise-cancelation": "f61f",\r\n    "noise-cancelation-off": "f620",\r\n    "music-sharing": "f623",\r\n    "music-sharing-off": "f624",\r\n    "circle-shape-solid": "f63c",\r\n    "wifi-call-bars": "f657",\r\n    "wifi-call0": "f658",\r\n    "wifi-call1": "f659",\r\n    "wifi-call2": "f65a",\r\n    "wifi-call3": "f65b",\r\n    "wifi-call4": "f65c",\r\n    "cht-language-bar": "f69e",\r\n    "compose-mode": "f6a9",\r\n    "expressive-input-entry": "f6b8",\r\n    "emoji-tab-more-symbols": "f6ba",\r\n    "web-search": "f6fa",\r\n    "kiosk": "f712",\r\n    "rtt-logo": "f714",\r\n    "voice-call": "f715",\r\n    "go-to-message": "f716",\r\n    "return-to-call": "f71a",\r\n    "start-presenting": "f71c",\r\n    "stop-presenting": "f71d",\r\n    "productivity-mode": "f71e",\r\n    "set-history-status": "f738",\r\n    "set-history-status2": "f739",\r\n    "keyboardsettings20": "f73d",\r\n    "one-handed-right20": "f73e",\r\n    "one-handed-left20": "f73f",\r\n    "split20": "f740",\r\n    "full20": "f741",\r\n    "handwriting20": "f742",\r\n    "chevron-left20": "f743",\r\n    "chevron-left32": "f744",\r\n    "chevron-right20": "f745",\r\n    "chevron-right32": "f746",\r\n    "event12": "f763",\r\n    "mic-off2": "f781",\r\n    "delivery-optimization": "f785",\r\n    "cancel-medium": "f78a",\r\n    "search-medium": "f78b",\r\n    "accept-medium": "f78c",\r\n    "reveal-password-medium": "f78d",\r\n    "delete-word": "f7ad",\r\n    "delete-word-fill": "f7ae",\r\n    "delete-lines": "f7af",\r\n    "delete-lines-fill": "f7b0",\r\n    "instert-words": "f7b1",\r\n    "instert-words-fill": "f7b2",\r\n    "join-words": "f7b3",\r\n    "join-words-fill": "f7b4",\r\n    "overwrite-words": "f7b5",\r\n    "overwrite-words-fill": "f7b6",\r\n    "add-new-line": "f7b7",\r\n    "add-new-line-fill": "f7b8",\r\n    "overwrite-words-korean": "f7b9",\r\n    "overwrite-words-fill-korean": "f7ba",\r\n    "education-icon": "f7bb",\r\n    "window-snipping": "f7ed",\r\n    "video-capture": "f7ee",\r\n    "status-secured": "f809",\r\n    "narrator-app": "f83b",\r\n    "power-button-update": "f83d",\r\n    "restart-update": "f83e",\r\n    "update-status-dot": "f83f",\r\n    "eject": "f847",\r\n    "spelling": "f87b",\r\n    "spelling-korean": "f87c",\r\n    "spelling-serbian": "f87d",\r\n    "spelling-chinese": "f87e",\r\n    "folder-select": "f89a",\r\n    "smart-screen": "f8a5",\r\n    "exploit-protection": "f8a6",\r\n    "add-bold": "f8aa",\r\n    "subtract-bold": "f8ab",\r\n    "back-solid-bold": "f8ac",\r\n    "forward-solid-bold": "f8ad",\r\n    "pause-bold": "f8ae",\r\n    "click-solid": "f8af",\r\n    "settings-solid": "f8b0",\r\n    "microphone-solid-bold": "f8b1",\r\n    "speech-solid-bold": "f8b2",\r\n    "clicked-out-loud-solid-bold": "f8b3"\r\n}\r\n\r\n/**\r\n * \r\n * @param {HTMLElement} target \r\n * @param {Array} items \r\n * @param {Object} config \r\n * @returns \r\n */\r\nfunction contextMenu(items, config = {}) {\r\n    var container = document.createElement(\'div\');\r\n    var createdContainer = false;\r\n    var items = items;\r\n    var listeners = {};\r\n    container.className = \'winui-contextmenu-container\';\r\n\r\n    function triggerEvent(event, detail) {\r\n        if (listeners[event]) {\r\n            listeners[event].forEach(listener => listener(detail));\r\n        }\r\n    }\r\n\r\n    function generateMenu(target, items, config) {\r\n        var menuLayer = document.createElement(\'div\');\r\n        var menuList = document.createElement(\'div\');\r\n        menuLayer.className = \'winui-contextmenu-menu-layer\';\r\n        menuList.className = \'winui-contextmenu-menu\';\r\n        target.appendChild(menuLayer);\r\n        menuLayer.appendChild(menuList);\r\n\r\n        items.forEach(item => {\r\n            var itemElement = document.createElement(\'div\');\r\n            itemElement.className = \'winui-contextmenu-menu-item\';\r\n            menuList.appendChild(itemElement);\r\n\r\n            if (item.type == \'separator\') {\r\n                return itemElement.className = \'winui-contextmenu-menu-separator\';\r\n            }\r\n\r\n            var itemIcon = document.createElement(\'div\');\r\n            var itemText = document.createElement(\'div\');\r\n            var itemExpand = document.createElement(\'div\');\r\n            var itemSubmenu = document.createElement(\'div\');\r\n            var submenu = null;\r\n            var created = false;\r\n            var focused = false;\r\n            var pointerOver = false;\r\n            var disabled = item.disabled == true;\r\n\r\n            itemIcon.className = \'winui-contextmenu-menu-icon\';\r\n            itemText.className = \'winui-contextmenu-menu-text\';\r\n            itemExpand.className = \'winui-contextmenu-menu-expand\';\r\n            itemSubmenu.className = \'winui-contextmenu-submenu\';\r\n\r\n            itemIcon.innerHTML = icons[item.icon] ? \'&#x\' + icons[item.icon] + \';\' : \'\';\r\n            itemText.innerText = item.text;\r\n\r\n            if (!icons[item.icon] && item.icon) {\r\n                itemIcon.style.backgroundImage = \'url(\' + item.icon + \')\';\r\n                itemIcon.style.backgroundSize = \'cover\';\r\n                itemIcon.style.backgroundPosition = \'center\';\r\n                itemIcon.style.backgroundRepeat = \'no-repeat\';\r\n            }\r\n\r\n            itemElement.appendChild(itemIcon);\r\n            itemElement.appendChild(itemText);\r\n            itemElement.appendChild(itemExpand);\r\n            itemElement.appendChild(itemSubmenu);\r\n\r\n            if (!item.submenu || item.type == \'label\') {\r\n                itemExpand.remove();\r\n            }\r\n            if (config.showIcon == false || item.type == \'label\') {\r\n                itemIcon.remove();\r\n            }\r\n            if (disabled == true) {\r\n                itemElement.classList.add(\'disabled\');\r\n            }\r\n            if (item.type == \'label\') {\r\n                itemElement.className = \'winui-contextmenu-menu-label\';\r\n            }\r\n            if (item.selected == true) {\r\n                itemElement.classList.add(\'selected\');\r\n            }\r\n\r\n            itemElement.addEventListener(\'pointerover\', () => {\r\n                if (disabled == true || item.type == \'label\') return;\r\n                pointerOver = true;\r\n                if (created == true) return;\r\n                if (item.submenu) {\r\n                    itemElement.classList.add(\'active\');\r\n                    submenu = generateMenu(itemSubmenu, item.submenu, config);\r\n                    created = true;\r\n                }\r\n            })\r\n\r\n            itemElement.addEventListener(\'pointerout\', () => {\r\n                if (disabled == true || item.type == \'label\') return;\r\n                pointerOver = false;\r\n                function removeSubmenu() {\r\n                    if (pointerOver == true || focused == true || submenu == null) return clearTimeout(removeSubmenu);\r\n                    submenu.remove();\r\n                    submenu = null;\r\n                    created = false;\r\n                    itemElement.classList.remove(\'active\');\r\n                    clearTimeout(removeSubmenu);\r\n                }\r\n                setTimeout(removeSubmenu, 200)\r\n            })\r\n\r\n            itemElement.addEventListener(\'click\', () => {\r\n                if (disabled == true || item.type == \'label\') return;\r\n                focused = true;\r\n                if (created == true) return;\r\n                if (item.submenu) {\r\n                    itemElement.classList.add(\'active\');\r\n                    submenu = generateMenu(itemSubmenu, item.submenu, config);\r\n                    created = true;\r\n                } else {\r\n                    item.action();\r\n                    triggerEvent(\'select\', {\r\n                        \r\n                    })\r\n                    close();\r\n                }\r\n            });\r\n            return;\r\n        });\r\n        return menuLayer;\r\n    }\r\n\r\n    function open(horizontal, vertical, fixed = \'left-top\') {\r\n        if (fixed.includes(\'right\')) {\r\n            container.style.right = horizontal + \'px\';\r\n        } else {\r\n            container.style.left = horizontal + \'px\';\r\n        }\r\n        if (fixed.includes(\'bottom\')) {\r\n            container.style.bottom = vertical + \'px\';\r\n        } else {\r\n            container.style.top = vertical + \'px\';\r\n        }\r\n        container.style.zIndex = \'1\';\r\n        if (createdContainer == false) {\r\n            _os_core_viewport_js__WEBPACK_IMPORTED_MODULE_0__.viewport.root.appendChild(container);\r\n            generateMenu(container, items, config);\r\n        }\r\n        createdContainer = true;\r\n    }\r\n\r\n    function close() {\r\n        createdContainer = false;\r\n        container.remove();\r\n        container.innerHTML = \'\';\r\n        container.style.zIndex = \'-1\';\r\n    }\r\n\r\n    function setItems(value) {\r\n        items = value;\r\n    }\r\n\r\n    function on(event, listener) {\r\n        if (!listeners[event]) {\r\n            listeners[event] = [];\r\n        }\r\n        listeners[event].push(listener);\r\n    }\r\n\r\n    return { open, close, setItems, on, container }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (contextMenu);\n\n//# sourceURL=webpack://winbows11/./src/lib/winui/contextMenu/contextMenu.js?\n}')},"./src/lib/winui/lib/select.min.js":
/*!*****************************************!*\
  !*** ./src/lib/winui/lib/select.min.js ***!
  \*****************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n(()=>{"use strict";var e={522:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(601),o=n.n(r),s=n(314),a=n.n(s),i=n(417),p=n.n(i),c=new URL(n(657),n.b),d=a()(o()),u=p()(c);d.push([e.id,`@charset "UTF-8";\\n\\n.light,\\n:root {\\n    --s-trigger-border: rgb(210, 210, 210);\\n    --s-trigger-background: rgb(252, 252, 252);\\n    --s-popup-border: rgb(210, 210, 210);\\n    --s-popup-background: rgb(252, 252, 252);\\n    --s-popup-shadow: rgba(0, 0, 0, 0.1) 0px 4px 32px 0px;\\n    --s-popup-option-hover: rgba(238, 238, 238, .7);\\n    --s-popup-option-selected-background: #0d6efd;\\n    --s-popup-option-selected-color: #fff;\\n    --s-popup-separator: rgb(210, 210, 210);\\n    --s-icon-color: rgb(120, 120, 120);\\n    --s-font-color: rgb(24, 24, 24);\\n}\\n\\n.dark {\\n    --s-trigger-border: rgb(81, 81, 81);\\n    --s-trigger-background: rgb(37, 37, 38);\\n    --s-popup-border: rgb(81, 81, 81);\\n    --s-popup-background: rgb(37, 37, 38);\\n    --s-popup-shadow: rgba(0, 0, 0, 0.1) 0px 4px 32px 0px;\\n    --s-popup-option-hover: rgba(71, 71, 71, .7);\\n    --s-popup-option-selected-background: #0d6efd;\\n    --s-popup-option-selected-color: #fff;\\n    --s-popup-separator: rgb(81, 81, 81);\\n    --s-icon-color: rgb(225, 225, 225);\\n    --s-font-color: rgb(230, 230, 230);\\n}\\n\\n@media (prefers-color-scheme: light) {\\n    :root {\\n        --s-trigger-border: rgb(210, 210, 210);\\n        --s-trigger-background: rgb(252, 252, 252);\\n        --s-popup-border: rgb(210, 210, 210);\\n        --s-popup-background: rgb(252, 252, 252);\\n        --s-popup-shadow: rgba(0, 0, 0, 0.1) 0px 4px 32px 0px;\\n        --s-popup-option-hover: rgba(238, 238, 238, .7);\\n        --s-popup-option-selected-background: #0d6efd;\\n        --s-popup-option-selected-color: #fff;\\n        --s-popup-separator: rgb(210, 210, 210);\\n        --s-icon-color: rgb(120, 120, 120);\\n        --s-font-color: rgb(24, 24, 24);\\n    }\\n}\\n\\n@media (prefers-color-scheme: dark) {\\n    :root {\\n        --s-trigger-border: rgb(81, 81, 81);\\n        --s-trigger-background: rgb(37, 37, 38);\\n        --s-popup-border: rgb(81, 81, 81);\\n        --s-popup-background: rgb(37, 37, 38);\\n        --s-popup-shadow: rgba(0, 0, 0, 0.1) 0px 4px 32px 0px;\\n        --s-popup-option-hover: rgba(71, 71, 71, .7);\\n        --s-popup-option-selected-background: #0d6efd;\\n        --s-popup-option-selected-color: #fff;\\n        --s-popup-separator: rgb(81, 81, 81);\\n        --s-icon-color: rgb(225, 225, 225);\\n        --s-font-color: rgb(230, 230, 230);\\n    }\\n}\\n\\n:root {\\n    --s-popup-option-padding: 0.25rem .5rem;\\n    --s-popup-option-border-radius: 0.25rem;\\n    --s-popup-option-font-size: .875rem;\\n    --s-popup-option-gap: .25rem;\\n    --s-popup-padding: .375rem;\\n}\\n\\n.siyu-select-trigger,\\n.siyu-select-trigger *,\\n.siyu-select-popup {\\n    font-family: Inter, system-ui, Segoe UI, Roboto, Helvetica Neue, sans-serif;\\n    user-select: none;\\n    box-sizing: border-box;\\n}\\n\\n.siyu-select-trigger {\\n    width: fit-content;\\n    padding: .25rem .75rem;\\n    border: 1px solid;\\n    border-radius: 4px;\\n    border-color: var(--s-trigger-border);\\n    display: flex;\\n    background: var(--s-trigger-background);\\n    position: relative;\\n    height: fit-content;\\n    align-items: center;\\n    /* max-width: 150px; */\\n    max-width: calc(100vw - 16px);\\n    --siyu-select-trigger-rotate: 0deg;\\n}\\n\\n/*.siyu-select.active:not(.disabled, [disabled]) .siyu-select-popup, */\\n.siyu-select-popup.active {\\n    display: block;\\n    --siyu-select-trigger-rotate: 90deg;\\n}\\n\\n.siyu-select-popup {\\n    overflow-y: auto;\\n    z-index: 9999999999;\\n    display: none;\\n    position: absolute;\\n    background: var(--s-popup-background);\\n    border: 1px solid;\\n    border-radius: 4px;\\n    border-color: var(--s-popup-border);\\n    box-shadow: var(--s-popup-shadow);\\n    padding: var(--s-popup-padding);\\n    /*\\n    min-width: 120px;\\n    max-width: 150px;\\n    */\\n    display: none;\\n    max-width: calc(100vw - 16px);\\n    max-height: calc(100vh - 16px);\\n}\\n\\n.siyu-select-trigger::before,\\n.siyu-select-trigger.active:not(.disabled, [disabled])::before {\\n    min-width: 12px;\\n    content: \'\';\\n    display: block;\\n    width: 12px;\\n    height: 12px;\\n    -webkit-mask-size: 12px;\\n    -webkit-mask-repeat: no-repeat;\\n    margin: auto 0;\\n    background: var(--s-icon-color);\\n    margin-left: -4px;\\n    margin-right: 6px;\\n    font-size: 8px;\\n    transition: all .1s ease;\\n}\\n\\n.siyu-select-trigger::before {\\n    -webkit-mask-image: url(${u});\\n    transform: rotate(var(--siyu-select-trigger-rotate));\\n}\\n\\n.siyu-select-trigger.disabled::before,\\n.siyu-select-trigger[disabled]::before {\\n    /* -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'none\' viewBox=\'0 0 24 24\' stroke-width=\'1.5\' stroke=\'rgb(170, 170, 170)\' class=\'w-6 h-6\'%3E%3Cpath stroke-linecap=\'round\' stroke-linejoin=\'round\' d=\'M19.5 8.25l-7.5 7.5-7.5-7.5\' /%3E%3C/svg%3E%0A"); */\\n    transform: rotate(0) !important;\\n}\\n\\n.siyu-select-current-content {\\n    font-size: .875rem;\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n}\\n\\n.siyu-select-option,\\n.siyu-select-current-content {\\n    color: var(--s-font-color);\\n}\\n\\n.siyu-select-option {\\n    white-space: nowrap;\\n    font-size: var(--s-popup-option-font-size);\\n    border-radius: var(--s-popup-option-border-radius);\\n    padding: var(--s-popup-option-padding);\\n    cursor: pointer;\\n    display: block;\\n    align-items: center;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n    max-width: 100%;\\n    width: -webkit-fill-available;\\n}\\n\\n.siyu-select-option:hover {\\n    background: var(--s-popup-option-hover);\\n}\\n\\n.siyu-select-option+.siyu-select-option {\\n    margin-top: var(--s-popup-option-gap);\\n}\\n\\n.siyu-select-separator {\\n    width: 100%;\\n    height: .5px;\\n    background: var(--s-popup-separator);\\n    margin: var(--s-popup-option-gap) 0;\\n    font-size: 0;\\n}\\n\\n.siyu-select-group.disabled .siyu-select-option,\\n.siyu-select-option.disabled,\\n.siyu-select.disabled,\\n.siyu-select-group[disabled] .siyu-select-option,\\n.siyu-select-option[disabled],\\n.siyu-select[disabled] {\\n    opacity: .7;\\n    pointer-events: none;\\n}\\n\\n.siyu-select-option.selected:not([disabled], [disabled="true"], .disabled) {\\n    background: var(--s-popup-option-selected-background);\\n    color: var(--s-popup-option-selected-color);\\n}\\n\\n.siyu-select-trigger * ::-webkit-scrollbar,\\n.siyu-select-popup * ::-webkit-scrollbar {\\n    width: 6px;\\n    height: 6px;\\n    border-radius: 0px;\\n    background: none;\\n}\\n\\n.siyu-select-trigger * ::-webkit-scrollbar-thumb,\\n.siyu-select-popup * ::-webkit-scrollbar-thumb {\\n    background: rgba(171, 171, 171, 0.5);\\n    min-height: 50px;\\n    min-width: 50px;\\n    border-radius: 10px;\\n}\\n\\n.siyu-select-trigger * ::-webkit-scrollbar-thumb:hover,\\n.siyu-select-popup * ::-webkit-scrollbar-thumb:hover {\\n    background: rgba(171, 171, 171, 1);\\n    min-height: 50px;\\n    min-width: 50px;\\n    border-radius: 10px;\\n}\\n\\n.siyu-select-trigger * ::-webkit-scrollbar-corner,\\n.siyu-select-popup * ::-webkit-scrollbar-corner {\\n    background: none;\\n}\\n\\n.siyu-select-option-icon {\\n    width: 18px;\\n    height: 18px;\\n    min-width: 18px;\\n    margin-right: 4px;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n}\\n\\n.siyu-select-option * {\\n    pointer-events: none;\\n}\\n\\n.siyu-select-option-icon * {\\n    width: 14px;\\n    height: 14px;\\n}\\n\\n.siyu-select-group {\\n    min-width: inherit;\\n    max-width: inherit;\\n}\\n\\n.siyu-select-option-text {\\n    white-space: nowrap;\\n    overflow: hidden;\\n    text-overflow: ellipsis;\\n    max-width: inherit;\\n}`,""]);const l=d},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var i=0;i<this.length;i++){var p=this[i][0];null!=p&&(a[p]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);r&&a[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^[\'"].*[\'"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["\'() \\t\\n]|(%20)/.test(e)||t.needQuotes?\'"\'.concat(e.replace(/"/g,\'\\\\"\').replace(/\\n/g,"\\\\n"),\'"\'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},a=[],i=0;i<e.length;i++){var p=e[i],c=r.base?p[0]+r.base:p[0],d=s[c]||0,u="".concat(c," ").concat(d);s[c]=d+1;var l=n(u),g={css:p[1],media:p[2],sourceMap:p[3],supports:p[4],layer:p[5]};if(-1!==l)t[l].references++,t[l].updater(g);else{var f=o(g,r);r.byIndex=i,t.splice(i,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var s=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var i=n(s[a]);t[i].references--}for(var p=r(e,o),c=0;c<s.length;c++){var d=n(s[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=p}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn\'t find a style target. This probably means that the value for the \'insert\' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},657:e=>{e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 fill=%27none%27 viewBox=%270 0 24 24%27 stroke-width=%271.5%27 stroke=%27rgb%28170, 170, 170%29%27 class=%27w-6 h-6%27%3E%3Cpath stroke-linecap=%27round%27 stroke-linejoin=%27round%27 d=%27M8.25 4.5l7.5 7.5-7.5 7.5%27 /%3E%3C/svg%3E%0A"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e={isArray:function(e){return Array.isArray(e)},isElement:function(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}},isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"object"==typeof e&&!Array.isArray(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},randomString:function(e,t){var n="",r=(t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length;for(let o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*r));return n},mergeDeep:function(t,...n){if(!n.length)return t;const r=n.shift();if(e.isObject(t)&&e.isObject(r))for(const n in r)e.isObject(r[n])?(t[n]||Object.assign(t,{[n]:{}}),e.mergeDeep(t[n],r[n])):Object.assign(t,{[n]:r[n]});return e.mergeDeep(t,...n)},delay:function(e){return new Promise((t=>setTimeout(t,e)))},offset:function(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+n}},getPosition:function(t){return{x:e.offset(t).left,y:e.offset(t).top}},formatDate:function(e,t){var n={"M+":(e=new Date(e)).getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},setCookie:function(e,t,n){let r=e+"="+encodeURIComponent(t);"number"==typeof n&&(r+="; max-age ="+60*n*60*24),document.cookie=r},getCookie:function(e){let t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},toCamelCase:function(e){return e.replace(/-(\\w)/g,((e,t)=>t.toUpperCase()))}};const t=e;(()=>{var e=(e,t)=>1==t?document.querySelectorAll(e):document.querySelector(e);const n={version:"1.2.0",datas:{},config:{margin:8,trigger:null,triggerClassName:"siyu-select-trigger",triggerAttributes:{},popupClassName:"siyu-select-popup",popupAttributes:{},noSelectedContent:"è«é¸æ...",theme:"system"},install:(r,o,s={})=>{if(t.isElement(r)||(r=e(r)),t.isElement(r)){s=Object.assign({},n.config,s);var a=function(e,t){var n="",r=(t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length;for(let o=0;o<e;o++)n+=t.charAt(Math.floor(Math.random()*r));return n}(96);return n.datas[a]={target:r,options:o,config:s,trigger:s.trigger||null,currentContent:null,selected:null,value:null,popup:null,listeners:{},showPopup:!1,useCustomTrigger:null!=s.trigger},null==n.datas[a].trigger?(n.datas[a].trigger=document.createElement("div"),n.datas[a].trigger.className=n.datas[a].config.triggerClassName,"system"!=n.datas[a].config.theme&&n.datas[a].trigger.classList.add(n.datas[a].config.theme),Object.keys(n.datas[a].config.triggerAttributes).forEach((e=>{n.datas[a].trigger.setAttribute(e,n.datas[a].config.triggerAttributes[e])})),n.datas[a].target.appendChild(n.datas[a].trigger),n.datas[a].currentContent=document.createElement("div"),n.datas[a].currentContent.className="siyu-select-current-content",n.datas[a].trigger.appendChild(n.datas[a].currentContent)):t.isElement(n.datas[a].trigger)||(n.datas[a].trigger=e(n.datas[a].trigger)),n.datas[a].popup=document.createElement("div"),n.datas[a].popup.className=n.datas[a].config.popupClassName,"system"!=n.datas[a].config.theme&&n.datas[a].popup.classList.add(n.datas[a].config.theme),Object.keys(n.datas[a].config.popupAttributes).forEach((e=>{n.datas[a].popup.setAttribute(e,n.datas[a].config.popupAttributes[e])})),n.datas[a].popup.setAttribute("data-popup-id",a),n.datas[a].options.forEach((e=>{if("separator"==e.type){var r=document.createElement("div");r.className="siyu-select-separator",n.datas[a].popup.appendChild(r)}else{var o=document.createElement("div");o.className="siyu-select-option",1==e.disabled&&o.classList.add("disabled"),1==e.selected&&p(e,o),t.isObject(e.attributes)&&Object.keys(e.attributes).forEach((t=>{o.setAttribute(t,e.attributes[t])})),t.isArray(e.classList)&&e.classList.forEach((e=>{o.classList.add(e)})),t.isObject(e.styles)?Object.keys(e.styles).forEach((t=>{o.style[t]=e.styles[t]})):t.isString(e.styles)&&(o.style=e.styles),o.setAttribute("value",e.value),o.innerHTML=e.content,t.isFunction(e.action)&&o.addEventListener("click",(()=>{e.action({value:e.value,content:e.content})})),o.addEventListener("click",(()=>{p(e,o),i("change",{value:e.value,content:e.content}),u()})),e.element=o,n.datas[a].popup.appendChild(o)}})),0!=n.datas[a].useCustomTrigger||null!=n.datas[a].selected&&null!=n.datas[a].value||(n.datas[a].currentContent.innerHTML=n.datas[a].config.noSelectedContent),n.datas[a].trigger.addEventListener("click",(e=>{1==n.datas[a].showPopup?u():(d(),i("trigger",{type:e.type}))})),window.addEventListener("blur",(()=>{u()})),window.addEventListener("resize",(function(e){1==n.datas[a].showPopup&&c()})),document.addEventListener("click",(e=>{n.datas[a].popup.contains(e.target)||n.datas[a].trigger.contains(e.target)||u()})),document.addEventListener("scroll",(function(e){n.datas[a].popup.contains(e.target)||1==n.datas[a].showPopup&&c()})),{on:function(e,r){n.datas[a].listeners[e]&&t.isArray(n.datas[a].listeners[e])||(n.datas[a].listeners[e]=[]),n.datas[a].listeners[e].push(r)},showPopup:d,hidePopup:u,select:function(e,t=0){var r=[];if(n.datas[a].options.forEach((t=>{t.value==e&&r.push(t)})),r[t])return p(r[t],r[t].element)},clearSelect:function(){n.datas[a].popup.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected"),n.datas[a].value=null,n.datas[a].selected=null,0==n.datas[a].useCustomTrigger&&(n.datas[a].currentContent.innerHTML=n.datas[a].config.noSelectedContent)}))},setStyle:function(e,t,r,o=!1){function s(e,t,n,r){1==r?e.style.setProperty(t,n):e.style[t]=n}"popup"==e?s(n.datas[a].popup,t,r,o):"trigger"==e?s(n.datas[a].trigger,t,r,o):"currentContent"==e&&s(n.datas[a].currentContent,t,r,o)},elements:{popup:n.datas[a].popup,trigger:n.datas[a].trigger,currentContent:n.datas[a].currentContent},id:a}}function i(e,r){n.datas[a].listeners[e]&&t.isArray(n.datas[a].listeners[e])&&n.datas[a].listeners[e].forEach((e=>e(r)))}function p(e,t){n.datas[a].popup.querySelectorAll(".selected").forEach((e=>{e.classList.remove("selected")})),t.classList.add("selected"),n.datas[a].value=e.value,n.datas[a].selected=e,0==n.datas[a].useCustomTrigger&&(n.datas[a].currentContent.innerHTML=e.content)}function c(){var e=t.getPosition(n.datas[a].trigger).x-window.scrollX,r=t.getPosition(n.datas[a].trigger).y-window.scrollY;n.datas[a].popup.style.maxWidth=window.innerWidth-2*n.config.margin+"px",n.datas[a].popup.style.maxHeight=window.innerHeight-2*n.config.margin+"px",e+n.datas[a].popup.offsetWidth+n.config.margin>window.innerWidth?n.datas[a].popup.style.left=window.innerWidth-n.datas[a].popup.offsetWidth-n.config.margin+"px":window.innerWidth-n.datas[a].popup.offsetWidth-n.config.margin<n.config.margin?n.datas[a].popup.style.left=n.config.margin+"px":n.datas[a].popup.style.left=e+"px",n.datas[a].popup.style.top=r+n.datas[a].trigger.offsetHeight+n.config.margin+"px",r+n.datas[a].popup.offsetHeight+2*n.config.margin>window.innerHeight&&(n.datas[a].popup.style.top=r-n.config.margin-n.datas[a].popup.offsetHeight+"px",r-n.config.margin-n.datas[a].popup.offsetHeight<n.config.margin&&(n.datas[a].popup.style.top=n.config.margin+"px")),parseInt(n.datas[a].popup.style.top)>r?n.datas[a].trigger.style.setProperty("--siyu-select-trigger-rotate","90deg"):n.datas[a].trigger.style.setProperty("--siyu-select-trigger-rotate","-90deg")}function d(){document.body.appendChild(n.datas[a].popup),n.datas[a].showPopup=!0,n.datas[a].popup.classList.add("active"),c()}function u(){n.datas[a].popup.remove(),n.datas[a].showPopup=!1,n.datas[a].trigger.classList.remove("active"),n.datas[a].popup.classList.remove("active"),n.datas[a].trigger.style.setProperty("--siyu-select-trigger-rotate","0deg")}},getValue:e=>e.getAttribute("value")};window.S=n})()})(),(()=>{var e=n(72),t=n.n(e),r=n(825),o=n.n(r),s=n(659),a=n.n(s),i=n(56),p=n.n(i),c=n(540),d=n.n(c),u=n(113),l=n.n(u),g=n(522),f={};f.styleTagTransform=l(),f.setAttributes=p(),f.insert=a().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=d();t()(g.A,f),g.A&&g.A.locals&&g.A.locals})()})();\n\n//# sourceURL=webpack://winbows11/./src/lib/winui/lib/select.min.js?\n}')},"./src/lib/winui/utils.js":
/*!********************************!*\
  !*** ./src/lib/winui/utils.js ***!
  \********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getPosition: () => (/* binding */ getPosition)\n/* harmony export */ });\nfunction getPosition(element) {\r\n    function offset(el) {\r\n        var rect = el.getBoundingClientRect(),\r\n            scrollLeft = window.pageXOffset || document.documentElement.scrollLeft,\r\n            scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n        return { top: rect.top + scrollTop, left: rect.left + scrollLeft }\r\n    }\r\n    return { x: offset(element).left, y: offset(element).top };\r\n}\r\n\r\n\n\n//# sourceURL=webpack://winbows11/./src/lib/winui/utils.js?\n}")},"./src/lib/winui/winui.js":
/*!********************************!*\
  !*** ./src/lib/winui/winui.js ***!
  \********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_select_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/select.min.js */ "./src/lib/winui/lib/select.min.js");\n/* harmony import */ var _contextMenu_contextMenu_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contextMenu/contextMenu.js */ "./src/lib/winui/contextMenu/contextMenu.js");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils.js */ "./src/lib/winui/utils.js");\n/* harmony import */ var _xterm_xterm__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @xterm/xterm */ "./node_modules/@xterm/xterm/lib/xterm.js");\n\r\n\r\n\r\n\r\n\r\nconst WinUI = { contextMenu: _contextMenu_contextMenu_js__WEBPACK_IMPORTED_MODULE_1__["default"], utils: _utils_js__WEBPACK_IMPORTED_MODULE_2__, Terminal: _xterm_xterm__WEBPACK_IMPORTED_MODULE_3__.Terminal };\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WinUI);\n\n//# sourceURL=webpack://winbows11/./src/lib/winui/winui.js?\n}')},"./src/os/core/boot.js":
/*!*****************************!*\
  !*** ./src/os/core/boot.js ***!
  \*****************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _timer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./timer.js */ "./src/os/core/timer.js");\n/* harmony import */ var _viewport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./viewport.js */ "./src/os/core/viewport.js");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/fs.js */ "./src/shared/fs.js");\n/* harmony import */ var _kernel_kernel_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../kernel/kernel.js */ "./src/os/kernel/kernel.js");\n/* harmony import */ var _log_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./log.js */ "./src/os/core/log.js");\n/* harmony import */ var _shared_events_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/events.js */ "./src/shared/events.js");\n/* harmony import */ var _stat_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./stat.js */ "./src/os/core/stat.js");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_2__, _kernel_kernel_js__WEBPACK_IMPORTED_MODULE_3__]);\n([_shared_fs_js__WEBPACK_IMPORTED_MODULE_2__, _kernel_kernel_js__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n_timer_js__WEBPACK_IMPORTED_MODULE_0__["default"].mark(\'IDB file system\');\r\n\r\nconst fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_2__.IDBFS)("~BOOT");\r\nconst logger = new _log_js__WEBPACK_IMPORTED_MODULE_4__["default"]({\r\n    module: \'Boot\'\r\n})\r\n\r\nlogger.info(\'Starting Winbows11...\');\r\n\r\ntry {\r\n    const requires = [\'C:/Winbows/System/styles/app.css\'];\r\n\r\n    for (const r of requires) {\r\n        if (!fs.exists(r)) throw new Error(`File ${r} not found`);\r\n    }\r\n} catch (e) {\r\n    // Remove installation information\r\n    localStorage.removeItem("WINBOWS_BUILD_ID");\r\n\r\n    let evts = JSON.parse(localStorage.getItem("WINBOWS_EVENTS") || \'[]\') || [];\r\n    if (typeof evts !== \'array\') {\r\n        localStorage.removeItem("WINBOWS_EVENTS");\r\n        evts = [];\r\n    }\r\n\r\n    evts.push({\r\n        evt: \'CRASH\',\r\n        code: _shared_events_js__WEBPACK_IMPORTED_MODULE_5__.codes[\'CORRUPTED_INSTALLATION\'],\r\n        msg: \'A corrupted Windows installation has been detected\',\r\n        ts: Date.now()\r\n    })\r\n    localStorage.setItem("WINBOWS_EVENTS", JSON.stringify(evts));\r\n}\r\n\r\ntry {\r\n    fs.getFileURL(\'C:/Winbows/icons/applications/tools/start.ico\').then(url => {\r\n        _viewport_js__WEBPACK_IMPORTED_MODULE_1__.loading.image.style.backgroundImage = `url(${url})`;\r\n    })\r\n} catch (e) {\r\n    console.error(e);\r\n}\r\n\r\ntry {\r\n    await fs.mkdir(\'C:/\');\r\n} catch (e) { }\r\n\r\n// Start Winbows kernel\r\n(0,_kernel_kernel_js__WEBPACK_IMPORTED_MODULE_3__["default"])();\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } }, 1);\n\n//# sourceURL=webpack://winbows11/./src/os/core/boot.js?\n}')},"./src/os/core/crashHandler.js":
/*!*************************************!*\
  !*** ./src/os/core/crashHandler.js ***!
  \*************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ crashHandler)\n/* harmony export */ });\n/* harmony import */ var _viewport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _sysInfo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sysInfo.js */ \"./src/os/core/sysInfo.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _log_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./log.js */ \"./src/os/core/log.js\");\n\r\n\r\n\r\n\r\n\r\nlet crashed = false;\r\nconst logger = new _log_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\r\n    module: 'CrashHandler'\r\n})\r\n\r\nfunction crashHandler(e) {\r\n    if (crashed == true) return;\r\n    crashed = true;\r\n    try {\r\n        const stacktrace = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.getStackTrace)();\r\n        const message = `System Information:\\nBuild ID: ${_sysInfo_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].buildId}\\nLocal Build ID: ${_sysInfo_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].localBuildId}\\nWinbows Version: ${_sysInfo_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].version}${e ? '\\n\\nError Message: ' + e.message : ''}`;\r\n        const reportURL = `https://github.com/Siyu1017/winbows11/issues/new?title=${encodeURIComponent('Kernel Error')}&body=${encodeURIComponent(`${message}\\n\\nStacktrace:\\n` + stacktrace.join('\\n'))}`;\r\n\r\n        console.clear();\r\n        if (e) {\r\n            logger.fatal('[Crash]', e);\r\n        }\r\n        logger.warn('We will restart for you in 10 seconds.');\r\n        logger.info(`System Information:\\nBuild ID: ${_sysInfo_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].buildId}\\nLocal Build ID: ${_sysInfo_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].localBuildId}\\nWinbows Version: ${_sysInfo_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].version}`);\r\n        logger.info(`Report a bug: ${reportURL}`);\r\n\r\n        const bsodEl = document.createElement('div');\r\n        const containerEl = document.createElement('div');\r\n        const headerEl = document.createElement('h1');\r\n        const contentEl = document.createElement('div');\r\n        const messageEl = document.createElement('div');\r\n        const stacktraceEl = document.createElement('div');\r\n        const reportEl = document.createElement('a');\r\n        const downloadEl = document.createElement('div');\r\n\r\n        bsodEl.className = 'bsod';\r\n        containerEl.className = 'bsod-container';\r\n        headerEl.textContent = ':(';\r\n        contentEl.textContent = 'Your PC ran into a problem and needs to restart. We will restart for you in 10 seconds.';\r\n        messageEl.textContent = message;\r\n        stacktraceEl.textContent = stacktrace.map(t => {\r\n            if (typeof t != 'string') return '';\r\n            return (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.safeEscape)(t);\r\n        }).join('\\n');\r\n        reportEl.href = reportURL;\r\n        reportEl.target = '_blank';\r\n        reportEl.textContent = 'Report a bug';\r\n        downloadEl.textContent = 'Download debug log';\r\n        downloadEl.addEventListener('click', (e) => {\r\n            const t = Date.now();\r\n            _log_js__WEBPACK_IMPORTED_MODULE_3__.WinbowsDebugLog.export(`winbows-debug-${t}.log`);\r\n        });\r\n\r\n        headerEl.style = \"font-size: 6rem;margin: 0 0 2rem;font-weight: 300;\";\r\n        contentEl.style = \"font-size:1.375rem;\";\r\n        messageEl.style = \"font-size:1.125rem;padding-top:1rem;white-space:pre-wrap;\";\r\n        reportEl.style = \"margin-top: 2rem;color: rgb(0, 103, 192);padding: .5rem 1rem;background: #fff;border-radius: 0.5rem;font-size: 1rem;text-decoration: none;cursor: pointer;user-select: none;-webkit-user-drag: none;outline: 0px;border: 0;font-family: inherit;font-weight: 600;max-width: 12rem;width: fit-content;display: block;\";\r\n        downloadEl.style = \"margin-top: 2rem;color: rgb(0, 103, 192);padding: .5rem 1rem;background: #fff;border-radius: 0.5rem;font-size: 1rem;text-decoration: none;cursor: pointer;user-select: none;-webkit-user-drag: none;outline: 0px;border: 0;font-family: inherit;font-weight: 600;max-width: 12rem;width: fit-content;display: block;\";\r\n\r\n        _viewport_js__WEBPACK_IMPORTED_MODULE_0__.viewport.root.innerHTML = '';\r\n        _viewport_js__WEBPACK_IMPORTED_MODULE_0__.viewport.root.appendChild(bsodEl);\r\n        bsodEl.appendChild(containerEl);\r\n        containerEl.appendChild(headerEl);\r\n        containerEl.appendChild(contentEl);\r\n        containerEl.appendChild(messageEl);\r\n        containerEl.appendChild(stacktraceEl);\r\n        containerEl.appendChild(reportEl);\r\n        containerEl.appendChild(downloadEl);\r\n\r\n        /*\r\n        viewport.root.innerHTML = `<div class=\"bsod\"><div class=\"bsod-container\"><h1 style=\"font-size: 6rem;margin: 0 0 2rem;font-weight: 300;\">:(</h1><div style=\"font-size:1.375rem\">Your PC ran into a problem and needs to restart. We will restart for you in 10 seconds.</div><div style=\"font-size:1.125rem;padding-top:1rem;white-space:pre-wrap;\">${message}\\n\\nStacktrace: \\n${stacktrace.map(t => {\r\n            if (typeof t != 'string') return '';\r\n            return safeEscape(t);\r\n        }).join('\\n')}</div><a href=\"${reportURL}\" target=\"_blank\" style=\"margin-top: 2rem;color: rgb(0, 103, 192);padding: .5rem 1rem;background: #fff;border-radius: 0.5rem;font-size: 1rem;text-decoration: none;cursor: pointer;user-select: none;-webkit-user-drag: none;outline: 0px;border: 0;font-family: inherit;font-weight: 600;max-width: 12rem;width: fit-content;display: block;\">Report a bug</a></div>`;*/\r\n    } catch (e) {\r\n        logger.error(e);\r\n    }\r\n\r\n    setTimeout(() => { location.reload() }, 10000);\r\n}\n\n//# sourceURL=webpack://winbows11/./src/os/core/crashHandler.js?\n}")},"./src/os/core/fallback.js":
/*!*********************************!*\
  !*** ./src/os/core/fallback.js ***!
  \*********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fallbackImage: () => (/* binding */ fallbackImage)\n/* harmony export */ });\nconst fallbackImage = (function () {\r\n    const canvas = document.createElement("canvas");\r\n    const size = 40;\r\n    canvas.width = size;\r\n    canvas.height = size;\r\n    const ctx = canvas.getContext("2d");\r\n    ctx.fillStyle = "#000";\r\n    ctx.fillRect(0, 0, size, size);\r\n    ctx.fillStyle = "#ff5cff";\r\n    ctx.fillRect(0, 0, size / 2, size / 2);\r\n    ctx.fillRect(size / 2, size / 2, size / 2, size / 2);\r\n\r\n    return canvas.toDataURL("image/png");\r\n})();\n\n//# sourceURL=webpack://winbows11/./src/os/core/fallback.js?\n}')},"./src/os/core/lockScreen.js":
/*!***********************************!*\
  !*** ./src/os/core/lockScreen.js ***!
  \***********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/utils.ts */ \"./src/shared/utils.ts\");\n\r\n// import i18n from \"../i18n/i18n.js\";\r\n\r\nconst lockScreenContainer = document.createElement('div');\r\nconst lockScreen = document.createElement('div');\r\nconst lockScreenBackground = document.createElement('div');\r\nconst lockScreenMain = document.createElement('div');\r\nconst lockScreenSignin = document.createElement('div');\r\nlockScreenContainer.className = 'lock-screen-container active';\r\nlockScreen.className = 'lock-screen';\r\nlockScreenBackground.className = 'lock-screen-background';\r\nlockScreenMain.className = 'lock-screen-main';\r\nlockScreenSignin.className = 'lock-screen-signin';\r\nlockScreenContainer.appendChild(lockScreen);\r\nlockScreen.appendChild(lockScreenBackground);\r\nlockScreen.appendChild(lockScreenMain);\r\nlockScreen.appendChild(lockScreenSignin);\r\n\r\n// Clock on lock panel\r\nconst lockScreenTime = document.createElement('div');\r\nconst lockScreenDate = document.createElement('div');\r\nlockScreenTime.className = 'lock-screen-time';\r\nlockScreenDate.className = 'lock-screen-date';\r\nlockScreenMain.appendChild(lockScreenTime);\r\nlockScreenMain.appendChild(lockScreenDate);\r\n\r\n// Signin panel\r\nconst lockScreenSigninAvatar = document.createElement('div');\r\nconst lockScreenSigninUsername = document.createElement('div');\r\nconst lockScreenSigninButton = document.createElement('button');\r\nlockScreenSigninAvatar.className = 'lock-screen-signin-avatar';\r\nlockScreenSigninUsername.className = 'lock-screen-signin-username';\r\nlockScreenSigninButton.className = 'lock-screen-signin-button';\r\nlockScreenSignin.appendChild(lockScreenSigninAvatar);\r\nlockScreenSignin.appendChild(lockScreenSigninUsername);\r\nlockScreenSignin.appendChild(lockScreenSigninButton);\r\n\r\nlockScreenSigninUsername.innerHTML = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.replaceHTMLTags('Admin'); //i18n.t('lockscreen.username');\r\nlockScreenSigninButton.innerHTML = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.replaceHTMLTags('Sign In'); //i18n.t('lockscreen.signin');\r\n\r\nlet init = true;\r\nconst now = new Date();\r\nconst leftToUpdateTime = (60 - now.getSeconds()) * 1000;\r\nconst leftToUpdateDate = (((24 - now.getHours()) * 60 * 60) - (now.getMinutes() * 60) - now.getSeconds()) * 1000;\r\n\r\nlockScreenTime.innerHTML = now.format(\"hh\") < 13 ? now.format(\"hh:mm\") : new Date(now.getTime() - 12 * 1000 * 60 * 60).format(\"hh:mm\");\r\nlockScreenDate.innerHTML = now.toLocaleDateString(void 0, {\r\n    weekday: \"long\",\r\n    month: \"long\",\r\n    day: \"numeric\"\r\n})\r\n\r\nfunction updateTime() {\r\n    const now = new Date();\r\n    const leftToUpdateTime = (60 - now.getSeconds()) * 1000;\r\n    lockScreenTime.innerHTML = now.format(\"hh\") < 13 ? now.format(\"hh:mm\") : new Date(now.getTime() - 12 * 1000 * 60 * 60).format(\"hh:mm\");\r\n    setTimeout(updateTime, leftToUpdateTime);\r\n}\r\n\r\nfunction updateDate() {\r\n    const now = new Date();\r\n    const leftToUpdateDate = (((24 - now.getHours()) * 60 * 60) - ((60 - now.getMinutes()) * 60) - now.getSeconds()) * 1000;\r\n    lockScreenDate.innerHTML = now.toLocaleDateString(void 0, {\r\n        weekday: \"long\",\r\n        month: \"long\",\r\n        day: \"numeric\"\r\n    })\r\n    setTimeout(updateDate, leftToUpdateDate);\r\n}\r\n\r\n//console.log('Next update of time :', new Date(Date.now() + leftToUpdateTime))\r\n//console.log('Next update of date :', new Date(Date.now() + leftToUpdateDate))\r\n\r\nsetTimeout(updateTime, leftToUpdateTime);\r\nsetTimeout(updateDate, leftToUpdateDate);\r\n\r\nlockScreenMain.addEventListener('click', () => {\r\n    lockScreen.classList.add('signin');\r\n})\r\n\r\nlet initFn = () => { };\r\nlockScreenSigninButton.addEventListener('click', () => {\r\n    lockScreenContainer.classList.remove('active');\r\n    lockScreen.classList.remove('signin');\r\n    if (init == true) {\r\n        init = false;\r\n        initFn();\r\n    }\r\n})\r\n\r\nfunction setInitFn(fn) {\r\n    initFn = fn;\r\n}\r\n\r\nconst lockScreenObj = {\r\n    container: lockScreenContainer,\r\n    avatar: lockScreenSigninAvatar,\r\n    username: lockScreenSigninUsername,\r\n    button: lockScreenSigninButton,\r\n    background: lockScreenBackground,\r\n    setInitFn\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (lockScreenObj);\n\n//# sourceURL=webpack://winbows11/./src/os/core/lockScreen.js?\n}")},"./src/os/core/log.js":
/*!****************************!*\
  !*** ./src/os/core/log.js ***!
  \****************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WinbowsDebugLog: () => (/* binding */ WinbowsDebugLog),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _crashHandler_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./crashHandler.js */ \"./src/os/core/crashHandler.js\");\n/* harmony import */ var _sysInfo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sysInfo.js */ \"./src/os/core/sysInfo.js\");\n\r\n\r\n\r\nconst flags = {\r\n    disableConsoleOutput: false\r\n}\r\nconst Log = (function () {\r\n    let logs = [];\r\n    let startTime = Date.now();\r\n    let lastTime = startTime;\r\n    let version = 1;\r\n\r\n    function getType(obj) {\r\n        const type = typeof obj;\r\n        if (obj === null) return 'null';\r\n        if (type === 'string') return 'string';\r\n        if (type === 'boolean') return 'boolean';\r\n        if (type === 'number') return 'number';\r\n        if (type === 'undefined') return 'undefined';\r\n        if (type === 'symbol') return 'symbol';\r\n        if (type === 'function') return 'function';\r\n        if (Array.isArray(obj)) return 'array';\r\n        if ({}.toString.call(obj) === '[object Object]') return 'object';\r\n        if (type === 'object') {\r\n            return {}.toString.call(obj).slice(8, -1).toLowerCase();\r\n        }\r\n    }\r\n\r\n    function functionToCode(fn) {\r\n        try {\r\n            return Function.prototype.toString.call(fn);\r\n        } catch (e) { }\r\n        try {\r\n            return fn + '';\r\n        } catch (e) { }\r\n    }\r\n\r\n    function isElement(obj) {\r\n        try {\r\n            return obj instanceof HTMLElement;\r\n        }\r\n        catch (e) {\r\n            return (typeof obj === \"object\") &&\r\n                (obj.nodeType === 1) && (typeof obj.style === \"object\") &&\r\n                (typeof obj.ownerDocument === \"object\");\r\n        }\r\n    }\r\n\r\n    function capitalizeFirstLetter(val) {\r\n        return String(val).charAt(0).toUpperCase() + String(val).slice(1);\r\n    }\r\n\r\n    function toJSONstr(data) {\r\n        const seen = new WeakSet();\r\n\r\n        function traversal(data) {\r\n            const type = getType(data);\r\n            let res;\r\n\r\n            if (type == 'object') {\r\n                if (seen.has(data)) {\r\n                    return '\"[Circular]\"';\r\n                }\r\n                seen.add(data);\r\n                res = {};\r\n                Reflect.ownKeys(data).forEach(k => {\r\n                    res[k] = traversal(data[k]);\r\n                })\r\n            } else if (type === 'array') {\r\n                res = data.map(traversal);\r\n            } else if (type === 'map') {\r\n                res = {};\r\n                data.keys().forEach((key, i) => {\r\n                    res[i] = {\r\n                        key,\r\n                        value: traversal(data.get(key))\r\n                    }\r\n                })\r\n            } else if (type === 'set') {\r\n                res = {};\r\n                data.values().forEach((value, i) => {\r\n                    res[i] = { value: traversal(value) }\r\n                })\r\n            } else if (type === 'file') {\r\n                const props = [\"lastModified\", \"lastModifiedDate\", \"name\", \"size\", \"type\", \"webkitRelativePath\"];\r\n                res = {};\r\n                props.forEach((prop) => {\r\n                    const value = data[prop];\r\n                    res[prop] = traversal(value);\r\n                })\r\n            } else if (type === 'blob') {\r\n                const props = [\"size\", \"type\"];\r\n                res = {};\r\n                props.forEach((prop) => {\r\n                    const value = data[prop];\r\n                    res[prop] = traversal(value);\r\n                })\r\n            } else if (type === 'string') {\r\n                res = data;\r\n            } else if (type == 'function') {\r\n                const fnCode = functionToCode(data);\r\n                const cName = data.constructor?.toString().toLowerCase() || '';\r\n                const isArrow = !data.prototype && !/^(?:async\\s+)?function/.test(fnCode);\r\n                const isAsync = cName.includes('async');\r\n                const isGenerator = cName.includes('generator');\r\n                const isClass = (fnCode || '').trim().startsWith('class');\r\n                res = '';\r\n                if (isClass) {\r\n                    res = `class ${data.prototype?.constructor?.name}`;\r\n                } else if (isArrow) {\r\n                    res = `${isAsync ? `async` : ''} () => {}`;\r\n                } else {\r\n                    res += isAsync ? `async ` : '';\r\n                    res += 'Æ';\r\n                    res += isGenerator ? `*` : '';\r\n                    res += ` ${data.name && fnCode.match(/function([\\s\\S]*?)\\(.*?\\)/)?.[1]?.replace('*', '').trim() ? data.name : ''}()`;\r\n                }\r\n            } else if (isElement(data)) {\r\n                const id = data.id;\r\n                const classArr = [...data.classList];\r\n                const className = (classArr.length > 0 ? '.' : '') + classArr.join('.');\r\n                res = data.tagName.toLowerCase() + (id ? `#${id}` : '') + className;\r\n            } else if (type == 'error') {\r\n                res = `Error[${data.message}]`;\r\n            } else if ([\r\n                // Normal types\r\n                'number', 'boolean', 'null', 'undefined', 'symbol',\r\n                // Other types\r\n                'date', 'regexp'\r\n            ].includes(type)) {\r\n                res = String(data);\r\n            } else {\r\n                // Show type only\r\n                res = capitalizeFirstLetter(type);\r\n            }\r\n            return res;\r\n        }\r\n\r\n        try {\r\n            return JSON.stringify(traversal(data));\r\n        } catch (e) {\r\n            return String(data);\r\n        }\r\n    }\r\n\r\n    function append(log) {\r\n        const now = Date.now();\r\n\r\n        const delta = now - lastTime;\r\n        const sum = now - startTime;\r\n        const level = log.level.toUpperCase();\r\n\r\n        if (!['DEBUG', 'INFO', 'WARN', 'ERROR', 'FATAL'].includes(level)) return;\r\n\r\n        lastTime = now;\r\n\r\n        const entry = {\r\n            time: new Date().toISOString(),\r\n            sum: Math.round(sum),\r\n            delta: Math.round(delta),\r\n            msg: log.msg,\r\n            module: log.module,\r\n            level,\r\n            data: log.data ? toJSONstr(log.data) : null\r\n        };\r\n\r\n        logs.push(entry);\r\n\r\n        if (level === 'FATAL') {\r\n            if (typeof log.msg === 'string') {\r\n                (0,_crashHandler_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(new Error(log.msg));\r\n            } else {\r\n                (0,_crashHandler_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(log.msg);\r\n            }\r\n        }\r\n\r\n        if (flags.disableConsoleOutput) return;\r\n\r\n        if (level === 'INFO' || (_sysInfo_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].mode === 'development' && level === 'DEBUG')) {\r\n            // INFO, DEBUG ( Only shown during development )\r\n            console.log(`%c${entry.time} Î£${entry.sum}ms Î${entry.delta}ms\\n%c[${log.module}]: %c${log.msg}`, 'color: rgb(154 154 154);'\r\n                , 'color: rgb(192 170 251);font-weight:bold;', 'color: unset;font-weight:bold;', log.data ? log.data : '');\r\n        } else if (level === 'WARN') {\r\n            // WARN\r\n            console.warn(`[${log.module}]: ${log.msg}`, log.data ? log.data : '')\r\n        } else if (level === 'ERROR' || level === 'FATAL') {\r\n            // ERROR, FATAL\r\n            console.error(`[${log.module}]: ${log.msg}`, log.data ? log.data : '')\r\n        }\r\n    }\r\n\r\n    function exportFile(filename) {\r\n        const content = logs.map(e => JSON.stringify(e)).join(\"\\n\");\r\n        const blob = new Blob([`//VERSION=${version},TYPE=NDJSON\\n`, content], { type: \"application/winbowslog\" });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement(\"a\");\r\n        a.href = url;\r\n        a.download = filename || 'debug.log';\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n    }\r\n\r\n    return {\r\n        export: exportFile,\r\n        append: append\r\n    }\r\n})();\r\n\r\nclass Logger {\r\n    constructor({\r\n        module\r\n    }) {\r\n        if (!module || typeof module != 'string') return;\r\n        this.module = module;\r\n    }\r\n    debug(msg, data = null) {\r\n        Log.append({\r\n            msg,\r\n            data,\r\n            module: this.module,\r\n            level: 'debug'\r\n        })\r\n    }\r\n    info(msg, data = null) {\r\n        Log.append({\r\n            msg,\r\n            data,\r\n            module: this.module,\r\n            level: 'info'\r\n        })\r\n    }\r\n    warn(msg, data = null) {\r\n        Log.append({\r\n            msg,\r\n            data,\r\n            module: this.module,\r\n            level: 'warn'\r\n        })\r\n    }\r\n    error(msg, data = null) {\r\n        Log.append({\r\n            msg,\r\n            data,\r\n            module: this.module,\r\n            level: 'error'\r\n        })\r\n    }\r\n    fatal(msg, data = null) {\r\n        Log.append({\r\n            msg,\r\n            data,\r\n            module: this.module,\r\n            level: 'fatal'\r\n        })\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Logger);\r\nconst WinbowsDebugLog = Log;\n\n//# sourceURL=webpack://winbows11/./src/os/core/log.js?\n}")},"./src/os/core/rom.js":
/*!****************************!*\
  !*** ./src/os/core/rom.js ***!
  \****************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// ROM\r\nfunction list() {\r\n    const item = localStorage.getItem('WINBOWS_ROM_FT');\r\n    if (item) return JSON.parse(item);\r\n    localStorage.setItem('WINBOWS_ROM_FT', '[]');\r\n    return [];\r\n}\r\n\r\nfunction getKey(fileName) {\r\n    return 'WINBOWS_ROM_FT:' + fileName;\r\n}\r\n\r\nconst rom = {\r\n    list,\r\n    exists: function (fileName) {\r\n        return list().some(f => f.n === fileName);\r\n    },\r\n    write: function (fileName, fileContent) {\r\n        const FT = list();\r\n        const fileIndex = FT.findIndex(f => f.n === fileName);\r\n        if (fileIndex !== -1) {\r\n            FT.splice(fileIndex, 1);\r\n        }\r\n        FT.push({\r\n            n: fileName,\r\n            l: fileContent.length\r\n        });\r\n        localStorage.setItem(getKey(fileName), fileContent);\r\n        localStorage.setItem('WINBOWS_ROM_FT', JSON.stringify(FT));\r\n    },\r\n    read: function (fileName) {\r\n        return localStorage.getItem(getKey(fileName)) || \"\";\r\n    },\r\n    rm: function (fileName) {\r\n        const FT = list();\r\n        const fileIndex = FT.findIndex(f => f.n === fileName);\r\n        if (fileIndex !== -1) {\r\n            FT.splice(fileIndex, 1);\r\n        }\r\n        localStorage.removeItem(getKey(fileName));\r\n        localStorage.setItem('WINBOWS_ROM_FT', JSON.stringify(FT));\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (rom);\n\n//# sourceURL=webpack://winbows11/./src/os/core/rom.js?\n}")},"./src/os/core/stat.js":
/*!*****************************!*\
  !*** ./src/os/core/stat.js ***!
  \*****************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   stat: () => (/* binding */ stat)\n/* harmony export */ });\nconst startTime = Date.now();\r\nconst _stat = {\r\n    running: true\r\n}\r\n\r\nconst stat = {\r\n    set(k, v) {\r\n        _stat[k] = v;\r\n    },\r\n    get(k) {\r\n        return _stat[k];\r\n    }\r\n}\n\n//# sourceURL=webpack://winbows11/./src/os/core/stat.js?\n}")},"./src/os/core/sysInfo.js":
/*!********************************!*\
  !*** ./src/os/core/sysInfo.js ***!
  \********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst SystemInformation = {}\r\n\r\nObject.defineProperty(SystemInformation, 'buildId', {\r\n    value: \"ae07e500caf69310\",\r\n    writable: false,\r\n    configurable: false\r\n})\r\nObject.defineProperty(SystemInformation, 'localBuildId', {\r\n    value: localStorage.getItem('WINBOWS_BUILD_ID') || 'UNKNOWN',\r\n    writable: false,\r\n    configurable: false\r\n})\r\nObject.defineProperty(SystemInformation, 'version', {\r\n    value: \"1.0.0-beta.17\",\r\n    writable: false,\r\n    configurable: false\r\n})\r\nObject.defineProperty(SystemInformation, 'mode', {\r\n    value: \"development\",\r\n    writable: false,\r\n    configurable: false\r\n})\r\nObject.defineProperty(SystemInformation, 'startTime', {\r\n    value: Date.now(),\r\n    writable: false,\r\n    configurable: false\r\n})\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SystemInformation);\n\n//# sourceURL=webpack://winbows11/./src/os/core/sysInfo.js?\n}")},"./src/os/core/timer.js":
/*!******************************!*\
  !*** ./src/os/core/timer.js ***!
  \******************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getDuration: () => (/* binding */ getDuration),\n/* harmony export */   marks: () => (/* binding */ marks)\n/* harmony export */ });\nfunction randomID(count = 12, chars) {\r\n    var chars = chars || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',\r\n        result = '',\r\n        length = chars.length;\r\n    for (let i = 0; i < count; i++) {\r\n        result += chars.charAt(Math.floor(Math.random() * length));\r\n    }\r\n    return result;\r\n};\r\n\r\nconst marks = [];\r\nconst groups = new Map();\r\nconst level = 'root';\r\nconst levels = [level];\r\nconst startTime = Date.now();\r\n\r\ngroups.set(level, marks);\r\nlet target = marks;\r\nlet lastTime = startTime;\r\n\r\nconst timer = {\r\n    group(name) {\r\n        const gId = randomID();\r\n        const group = {\r\n            name,\r\n            start: Date.now(),\r\n            marks: []\r\n        }\r\n        levels.push(gId);\r\n        target.push(group);\r\n        groups.set(gId, group);\r\n        target = group.marks;\r\n    },\r\n    groupEnd() {\r\n        if (levels.length > 1) {\r\n            const now = Date.now();\r\n            const groupId = levels.pop();\r\n            const group = groups.get(groupId);\r\n            group.sum = now - group.start;\r\n            lastTime = now;\r\n            groups.delete(groupId);\r\n\r\n            target = groups.get(levels[levels.length - 1]);\r\n            target = target.marks || target;\r\n        }\r\n    },\r\n    mark(label) {\r\n        const now = Date.now();\r\n        target.push({\r\n            label,\r\n            sum: now - lastTime\r\n        })\r\n        lastTime = now;\r\n    }\r\n}\r\n\r\nfunction getDuration() {\r\n    return lastTime - startTime;\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (timer);\r\n\n\n//# sourceURL=webpack://winbows11/./src/os/core/timer.js?\n}")},"./src/os/core/viewport.js":
/*!*********************************!*\
  !*** ./src/os/core/viewport.js ***!
  \*********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   loading: () => (/* binding */ loading),\n/* harmony export */   viewport: () => (/* binding */ viewport),\n/* harmony export */   winbowsIcon: () => (/* binding */ winbowsIcon)\n/* harmony export */ });\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/utils.ts */ \"./src/shared/utils.ts\");\n\r\n\r\n// Viewport\r\ndocument.body.innerHTML = '';\r\ndocument.body.style.background = 'transparent';\r\n\r\n// Root element\r\nconst noStretch = !!(0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.getJsonFromURL)()['no-stretch'];\r\nconst res = [1920, 1080];\r\nconst root = document.createElement('div');\r\nroot.className = 'root';\r\ndocument.body.appendChild(root);\r\n\r\nif (noStretch) {\r\n    document.body.style.background = '#000';\r\n    root.style.setProperty('--viewport-width', res[0] + 'px');\r\n    root.style.setProperty('--viewport-height', res[1] + 'px');\r\n    root.style.transformOrigin = 'center';\r\n    root.style.transform = `translate(-50%, -50%) scale(${Math.min(root.offsetWidth / res[0], root.offsetHeight / res[1])})`;\r\n    root.style.left = '50%';\r\n    root.style.top = '50%';\r\n    root.style.overflow = 'hidden';\r\n    root.style.width = 'var(--viewport-width)';\r\n    root.style.height = 'var(--viewport-height)';\r\n}\r\n\r\nwindow.addEventListener('contextmenu', (e) => {\r\n    if (root.contains(e.target)) {\r\n        e.preventDefault();\r\n    }\r\n})\r\n\r\n// Screen of winbows\r\nconst screenElement = document.createElement('div');\r\nconst appWrapper = document.createElement('div');\r\nscreenElement.className = 'screen';\r\nappWrapper.className = 'app-wrapper';\r\nroot.appendChild(screenElement);\r\nscreenElement.appendChild(appWrapper);\r\n\r\nconst viewportEventEmitter = new _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\r\nfunction updateScreenSize() {\r\n    if (!noStretch) {\r\n        root.style.setProperty('--viewport-width', root.offsetWidth + 'px');\r\n        root.style.setProperty('--viewport-height', root.offsetHeight + 'px');\r\n    } else {\r\n        root.style.transform = `translate(-50%, -50%) scale(${Math.min(document.body.offsetWidth / res[0], document.body.offsetHeight / res[1])})`;\r\n    }\r\n\r\n    viewportEventEmitter._emit('resize', {\r\n        width: root.offsetWidth,\r\n        height: root.offsetHeight\r\n    })\r\n}\r\nwindow.addEventListener('resize', updateScreenSize);\r\nwindow.addEventListener('load', updateScreenSize);\r\n\r\nconst observer = new ResizeObserver(updateScreenSize);\r\nobserver.observe(root);\r\n\r\nconst viewport = {\r\n    root,\r\n    screenElement,\r\n    appWrapper,\r\n    get width() {\r\n        return root.offsetWidth;\r\n    },\r\n    get height() {\r\n        return root.offsetHeight;\r\n    },\r\n    onResize(cb) {\r\n        viewportEventEmitter.on('resize', cb);\r\n    }\r\n}\r\n\r\n// Loading\r\nconst startLoadingTime = Date.now();\r\nconst loadingContainer = document.createElement('div');\r\nconst loadingImage = document.createElement('div');\r\nconst loadingSpinner = window.modes?.dev == true || window.needsUpdate == true ? document.createElement('div') : document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\r\nconst loadingTextContainer = document.createElement('div');\r\nconst loadingTextShadowTop = document.createElement('div');\r\nconst loadingTextShadowBottom = document.createElement('div');\r\nconst loadingTextStrip = document.createElement('div');\r\nconst loadingProgress = document.createElement('div');\r\nconst loadingProgressBar = document.createElement('div');\r\n\r\nloadingContainer.className = 'winbows-loading active';\r\nloadingImage.className = 'winbows-loading-image';\r\nloadingTextContainer.className = 'winbows-loading-text-container';\r\nloadingTextShadowTop.className = 'winbows-loading-text-shadow-top';\r\nloadingTextShadowBottom.className = 'winbows-loading-text-shadow-bottom';\r\nloadingTextStrip.className = 'winbows-loading-text-strip';\r\nloadingContainer.appendChild(loadingImage);\r\nviewport.root.appendChild(loadingContainer);\r\n\r\nconst winbowsIcon = (function () {\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d');\r\n    const size = 300;\r\n    const gap = size / 32;\r\n    const cellSize = (size - gap * 3) / 2;\r\n    canvas.width = size;\r\n    canvas.height = size;\r\n    ctx.fillStyle = '#0067c0';\r\n    ctx.fillRect(gap, gap, cellSize, cellSize);\r\n    ctx.fillRect(gap, cellSize + gap * 2, cellSize, cellSize);\r\n    ctx.fillRect(cellSize + gap * 2, gap, cellSize, cellSize);\r\n    ctx.fillRect(cellSize + gap * 2, cellSize + gap * 2, cellSize, cellSize);\r\n\r\n    return canvas.toDataURL();\r\n})();\r\n\r\nloadingImage.style.backgroundImage = `url(${winbowsIcon})`;\r\n\r\nfunction text(content) {\r\n    const loadingText = document.createElement('div');\r\n    loadingText.textContent = content;\r\n    loadingText.className = 'winbows-loading-text';\r\n    loadingTextStrip.appendChild(loadingText);\r\n    loadingTextStrip.style.transform = `translateY(-${loadingTextStrip.offsetHeight - 24}px)`;\r\n    // loadingTextStrip.scrollTo({\r\n    //     top: loadingTextStrip.scrollHeight,\r\n    //     behavior: \"smooth\"\r\n    // })\r\n    return loadingText;\r\n}\r\n\r\nif (window.modes?.dev == false && window.needsUpdate == false) {\r\n    loadingSpinner.setAttribute('class', 'winbows-loading-spinner');\r\n    loadingSpinner.setAttribute('width', 48);\r\n    loadingSpinner.setAttribute('height', 48);\r\n    loadingSpinner.setAttribute('viewBox', \"0 0 16 16\");\r\n    loadingSpinner.innerHTML = '<circle cx=\"8px\" cy=\"8px\" r=\"7px\"></circle>';\r\n    loadingContainer.appendChild(loadingSpinner);\r\n} else {\r\n    loadingProgress.classList.add('winbows-loading-progress');\r\n    loadingProgressBar.classList.add('winbows-loading-progress-bar');\r\n    loadingContainer.appendChild(loadingTextContainer);\r\n    loadingTextContainer.appendChild(loadingTextShadowTop);\r\n    loadingTextContainer.appendChild(loadingTextShadowBottom);\r\n    loadingTextContainer.appendChild(loadingTextStrip);\r\n    loadingContainer.appendChild(loadingProgress);\r\n    loadingProgress.appendChild(loadingProgressBar);\r\n}\r\n\r\ntext('Starting Winbows11...');\r\n\r\nlet progress = 0;\r\nlet current = 0;\r\nlet target = 0;\r\nconst easeFn = t => t;\r\nconst easeDuration = 50;\r\n\r\nlet isRunning = false;\r\nlet startRenderTime = 0;\r\nfunction render() {\r\n    startRenderTime = Date.now();\r\n    if (isRunning === true) return;\r\n    renderer();\r\n}\r\n\r\nfunction renderer() {\r\n    const n = Date.now();\r\n    const p = (n - startRenderTime) / easeDuration;\r\n    const v = easeFn(p);\r\n\r\n    progress = current + (target - current) * (v < 0 ? 0 : v > 1 ? 1 : v)\r\n    loadingProgressBar.style.width = progress + '%';\r\n\r\n    if (p < 1) {\r\n        requestAnimationFrame(renderer);\r\n    }\r\n}\r\n\r\nconst updateProgressId = setInterval(function () {\r\n    current = progress;\r\n    target += Math.random() * .2 + .2;\r\n    if (target > 99) {\r\n        target = 99;\r\n    }\r\n    render();\r\n\r\n}, 200);\r\nfunction setProgress(p) {\r\n    if (p >= 0 && p <= 100) {\r\n        current = progress;\r\n        target = p;\r\n        render();\r\n        // loadingProgressBar.style.width = progress + '%';\r\n    }\r\n}\r\nfunction textWithProgress(t, p) {\r\n    if (p >= 0 && p <= 100) {\r\n        current = progress;\r\n        target = p;\r\n        render();\r\n        // loadingProgressBar.style.width = progress + '%';\r\n    }\r\n    text(t);\r\n}\r\n\r\nconst loading = {\r\n    container: loadingContainer,\r\n    image: loadingImage,\r\n    progressBar: loadingProgressBar,\r\n    text,\r\n    textWithProgress,\r\n    startLoadingTime,\r\n    updateProgressId,\r\n    setProgress,\r\n    hide() {\r\n        loadingContainer.classList.remove('active');\r\n    }\r\n}\n\n//# sourceURL=webpack://winbows11/./src/os/core/viewport.js?\n}")},"./src/os/explorer/desktop/backgroundImage.js":
/*!****************************************************!*\
  !*** ./src/os/explorer/desktop/backgroundImage.js ***!
  \****************************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _init_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./init.js */ \"./src/os/explorer/desktop/init.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__]);\n_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\n\r\n\r\n\r\n\r\nconst fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.IDBFS)(\"~EXPLORER\");\r\nconst { screenElement } = _core_viewport_js__WEBPACK_IMPORTED_MODULE_2__.viewport;\r\n\r\n// Bg\r\nconst background = document.createElement('div');\r\nconst backgroundImage = document.createElement('div');\r\nbackground.className = 'background';\r\nbackgroundImage.className = 'background-image';\r\nscreenElement.appendChild(background);\r\nbackground.appendChild(backgroundImage);\r\n\r\nconst canvas = document.createElement('canvas');\r\nconst ctx = canvas.getContext(\"2d\");\r\n\r\nfunction compressImage(file) {\r\n    const img = new Image();\r\n\r\n    if ({}.toString.call(file) === '[object Blob]') {\r\n        img.src = URL.createObjectURL(file);\r\n    } else {\r\n        img.src = file;\r\n    }\r\n\r\n    return new Promise((resolve) => {\r\n        img.onload = () => {\r\n            const targetWidth = Math.max(window.innerWidth / 20, 80);\r\n            const scale = targetWidth / img.width;\r\n            const targetHeight = img.height * scale;\r\n\r\n            canvas.width = targetWidth;\r\n            canvas.height = targetHeight;\r\n\r\n            ctx.drawImage(img, 0, 0, targetWidth, targetHeight);\r\n            canvas.style.imageRendering = \"pixelated\";\r\n\r\n            resolve(canvas.toDataURL('image/jpeg', 0.7));\r\n        };\r\n    })\r\n}\r\n\r\nlet currentBackgroundImage;\r\n/**\r\n * @returns {string}\r\n */\r\nfunction get() {\r\n    return currentBackgroundImage;\r\n}\r\n\r\n/**\r\n * @param {string} image \r\n * @returns {any}\r\n */\r\nasync function set(image = '') {\r\n    if (!image || image == currentBackgroundImage) return;\r\n    const stats = fs.stat(image);\r\n    if (stats.exists != true) {\r\n        await fs.downloadFile(image).catch(err => {\r\n            image = 'C:/Winbows/bg/img0.jpg';\r\n            console.warn(err);\r\n        });\r\n    }\r\n    currentBackgroundImage = image;\r\n    localStorage.setItem('WINBOWS_BACKGROUND_IMAGE', currentBackgroundImage);\r\n    const url = await fs.getFileURL(currentBackgroundImage);\r\n\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.src = url;\r\n        img.onload = async () => {\r\n            try {\r\n                const micaURL = await compressImage(url);\r\n                document.querySelector(':root').style.setProperty('--winbows-mica', `url(${micaURL})`);\r\n            } catch (e) {\r\n                document.querySelector(':root').style.setProperty('--winbows-mica', `url(${url})`);\r\n                console.error(e);\r\n            }\r\n\r\n            const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('System');\r\n            const theme = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_3__.getImageTheme)(img);\r\n\r\n            _init_js__WEBPACK_IMPORTED_MODULE_4__.desktopEl.classList.remove('winui-light', 'winui-dark');\r\n            _init_js__WEBPACK_IMPORTED_MODULE_4__.desktopEl.classList.add(`winui-${theme}`);\r\n            System.theme.set(theme);\r\n            backgroundImage.style.backgroundImage = `url(${url})`;\r\n\r\n            resolve();\r\n        }\r\n    })\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    get,\r\n    set,\r\n    backgroundEl: background,\r\n    backgroundImageEl: backgroundImage\r\n});\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/desktop/backgroundImage.js?\n}")},"./src/os/explorer/desktop/desktop.js":
/*!********************************************!*\
  !*** ./src/os/explorer/desktop/desktop.js ***!
  \********************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _init_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./init.js */ \"./src/os/explorer/desktop/init.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _core_fallback_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/fallback.js */ \"./src/os/core/fallback.js\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/winui/winui.js */ \"./src/lib/winui/winui.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__]);\n_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst desktop = {\r\n    init\r\n};\r\n\r\nasync function init(params) {\r\n    const fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.IDBFS)('~EXPLORER');\r\n    const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get('System');\r\n\r\n    desktop.update = updateDesktop;\r\n\r\n    var createdItems = [];\r\n    var originalContent = [];\r\n    var updating = false;\r\n    var fileTransfer = 0;\r\n\r\n    var startXInCanvas = 0;\r\n    var startYInCanvas = 0;\r\n    var startX = 0;\r\n    var startY = 0;\r\n    var pointerXInCanvas = 0;\r\n    var pointerYInCanvas = 0;\r\n    var pointerX = 0;\r\n    var pointerY = 0;\r\n    var selected = [];\r\n    var selecting = false;\r\n    const canvas = document.createElement('canvas');\r\n    const ctx = canvas.getContext('2d', {\r\n        willReadFrequently: true\r\n    })\r\n\r\n    canvas.style.position = 'absolute';\r\n    canvas.style.left = '0';\r\n    canvas.style.top = '0';\r\n    canvas.style.width = '100%';\r\n    canvas.style.height = '100%';\r\n    canvas.style.pointerEvents = 'none';\r\n    _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopEl.appendChild(canvas);\r\n\r\n    function selectionStart(e) {\r\n        if (e.button == 2) {\r\n            // Right click\r\n            return;\r\n        }\r\n        let pageX = e.pageX;\r\n        let pageY = e.pageY;\r\n        if (e.type.startsWith('touch')) {\r\n            var touch = e.touches[0] || e.changedTouches[0];\r\n            pageX = touch.pageX;\r\n            pageY = touch.pageY;\r\n        }\r\n        selecting = true;\r\n\r\n        // For items\r\n        startX = pageX + _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft;\r\n        startY = pageY;\r\n        pointerX = pageX + _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft;\r\n        pointerY = pageY;\r\n\r\n        // For canvas\r\n        startXInCanvas = pageX + _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft;\r\n        startYInCanvas = pageY;\r\n        pointerXInCanvas = pageX + _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft;\r\n        pointerYInCanvas = pageY;\r\n\r\n        selected = [];\r\n        createdItems.forEach(item => {\r\n            item.item.classList.remove('active');\r\n        })\r\n    }\r\n\r\n    function selectionMove(e) {\r\n        if (selecting == false) return;\r\n        let pageX = e.pageX;\r\n        let pageY = e.pageY;\r\n        if (e.type.startsWith('touch')) {\r\n            var touch = e.touches[0] || e.changedTouches[0];\r\n            pageX = touch.pageX;\r\n            pageY = touch.pageY;\r\n        }\r\n        pointerX = pageX + _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft;\r\n        pointerY = pageY;\r\n        pointerXInCanvas = pageX;\r\n        pointerYInCanvas = pageY;\r\n\r\n        render();\r\n\r\n        var rectX = startX;\r\n        var rectY = startY;\r\n        var rectWidth = Math.abs(pointerX - startX);\r\n        var rectHeight = Math.abs(pointerY - startY);\r\n\r\n        if (pointerX < startX) {\r\n            rectX = pointerX;\r\n        }\r\n        if (pointerY < startY) {\r\n            rectY = pointerY;\r\n        }\r\n\r\n        selected = [];\r\n        createdItems.forEach(item => {\r\n            var position = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(item.item);\r\n            var itemWidth = item.item.offsetWidth;\r\n            var itemHeight = item.item.offsetHeight;\r\n\r\n            position.x += _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft;\r\n\r\n            if (position.x <= rectX && rectX <= position.x + itemWidth && position.y <= rectY && rectY <= position.y + itemHeight) {\r\n                // Start point in item\r\n                item.item.classList.add('active');\r\n                selected.push({\r\n                    path: item.getPath(),\r\n                    command: item.getCommand(),\r\n                    action: item.getAction(),\r\n                    remove: item.remove\r\n                });\r\n            } else if (position.x >= rectX && position.y >= rectY && position.x + itemWidth <= pointerX && position.y + itemHeight <= pointerY) {\r\n                // Rect in Selection\r\n                item.item.classList.add('active');\r\n                selected.push({\r\n                    path: item.getPath(),\r\n                    command: item.getCommand(),\r\n                    action: item.getAction(),\r\n                    remove: item.remove\r\n                });\r\n            } else if (!(position.x + itemWidth < rectX ||\r\n                position.x > rectX + rectWidth ||\r\n                position.y + itemHeight < rectY ||\r\n                position.y > rectY + rectHeight)) {\r\n                // Overlap\r\n                item.item.classList.add('active');\r\n                selected.push({\r\n                    path: item.getPath(),\r\n                    command: item.getCommand(),\r\n                    action: item.getAction(),\r\n                    remove: item.remove\r\n                });\r\n            } else {\r\n                item.item.classList.remove('active');\r\n            }\r\n        })\r\n    }\r\n\r\n    function selectionEnd(e) {\r\n        selecting = false;\r\n        _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.canvasClarifier(canvas, ctx);\r\n    }\r\n\r\n    function render() {\r\n        _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.canvasClarifier(canvas, ctx);\r\n\r\n        if (selecting == false) return;\r\n\r\n        ctx.save();\r\n        ctx.beginPath();\r\n        ctx.fillStyle = '#298de547';\r\n        ctx.strokeStyle = '#298de5';\r\n        ctx.lineWidth = .75;\r\n        ctx.fillRect(startXInCanvas - _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft, startYInCanvas, pointerXInCanvas + _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft - startXInCanvas, pointerYInCanvas - startYInCanvas);\r\n        ctx.strokeRect(startXInCanvas - _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft, startYInCanvas, pointerXInCanvas + _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft - startXInCanvas, pointerYInCanvas - startYInCanvas);\r\n        ctx.closePath();\r\n        ctx.restore();\r\n    }\r\n\r\n    const events = {\r\n        \"start\": [\"mousedown\", \"touchstart\", \"pointerdown\"],\r\n        \"move\": [\"mousemove\", \"touchmove\", \"pointermove\"],\r\n        \"end\": [\"mouseup\", \"touchend\", \"pointerup\", \"blur\"]\r\n    }\r\n\r\n    events.start.forEach(event => {\r\n        _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopEl.addEventListener(event, e => selectionStart(e))\r\n    })\r\n    events.move.forEach(event => {\r\n        window.addEventListener(event, e => selectionMove(e))\r\n    })\r\n    events.end.forEach(event => {\r\n        window.addEventListener(event, e => selectionEnd(e))\r\n    })\r\n    _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.addEventListener('scroll', render);\r\n\r\n    function generateItem() {\r\n        var item = document.createElement('div');\r\n        var itemIcon = document.createElement('div');\r\n        var itemName = document.createElement('div');\r\n        var action = function () { };\r\n        var name = '';\r\n        var icon = '';\r\n        var file = new Blob([]);\r\n        var command = '';\r\n        var type = 'unknown';\r\n        var path = '';\r\n        var id = [...Array(18)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');\r\n\r\n        var properties = {\r\n            id, item,\r\n            action, name, icon, file, command, type, path,\r\n            setAction, setName, setIcon, setCommand, setFile, setType, setPath,\r\n            getPath, getCommand, getAction,\r\n            update, remove\r\n        };\r\n\r\n        item.className = 'desktop-item';\r\n        itemIcon.className = 'desktop-item-icon';\r\n        itemName.className = 'desktop-item-name';\r\n\r\n        _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.appendChild(item);\r\n        item.appendChild(itemIcon);\r\n        item.appendChild(itemName);\r\n\r\n        createdItems.push(properties);\r\n\r\n        function isFunction(functionToCheck) {\r\n            return functionToCheck && {}.toString.call(functionToCheck) === '[object Function]';\r\n        }\r\n\r\n        function getPath() {\r\n            return path;\r\n        }\r\n        function getCommand() {\r\n            return command;\r\n        }\r\n        function getAction() {\r\n            return action;\r\n        }\r\n\r\n        function setName(value) {\r\n            if (name == value) return true;\r\n            itemName.textContent = value;\r\n            name = value;\r\n            return false;\r\n        }\r\n        function setIcon(value) {\r\n            if (icon == value) return true;\r\n            itemIcon.style.backgroundImage = `url('${value}')`;\r\n            icon = value;\r\n            return false;\r\n        }\r\n        function setAction(value) {\r\n            if (action == value || !isFunction(value)) return true;\r\n            action = value;\r\n            return false;\r\n        }\r\n        function setCommand(value) {\r\n            if (command == value) return true;\r\n            command = value;\r\n            return false;\r\n        }\r\n        function setType(value) {\r\n            if (type == value) return true;\r\n            type = value;\r\n            return false;\r\n        }\r\n        function setPath(value) {\r\n            if (path == value) return true;\r\n            path = value;\r\n            return false;\r\n        }\r\n        function setFile(value) {\r\n            if (path == value) return true;\r\n            file = value;\r\n            return false;\r\n        }\r\n\r\n        function update(item) {\r\n            itemIcon.style.removeProperty('--item-icon');\r\n\r\n            const updateType = item.type;\r\n            const updateIcon = item.icon;\r\n            const updateFile = item.file;\r\n            const updatePath = item.path;\r\n            const updateName = item.name;\r\n            const updateAction = item.action;\r\n            const updateCommand = item.command;\r\n\r\n            var sameName = setName(updateName);\r\n            var sameIcon = setIcon(updateIcon);\r\n            var sameAction = setAction(updateAction);\r\n            var sameType = setType(updateType);\r\n            var sameCommand = setCommand(updateCommand);\r\n            var samePath = setPath(updatePath);\r\n            var sameFile = setFile(updateFile);\r\n\r\n            if (type == 'shortcut') {\r\n                fs.getFileURL('C:/Winbows/icons/emblems/shortcut.ico').then(url => {\r\n                    itemIcon.style.setProperty('--item-icon', `url(${url})`);\r\n                })\r\n            } else if (type == 'directory') {\r\n                fs.getFileURL('C:/Winbows/icons/folders/folder.ico').then(url => {\r\n                    setIcon(url);\r\n                })\r\n            } else {\r\n                var isImage = file.type.startsWith('image/');\r\n                fs.getFileURL(System.fileIcons.getIcon(path)).then(url => {\r\n                    setIcon(url);\r\n                    if (isImage) {\r\n                        try {\r\n                            fs.getFileURL(path).then(url => {\r\n                                setIcon(url);\r\n                            })\r\n                        } catch (e) { console.log('Failed to load image.'); }\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        function remove() {\r\n            item.remove();\r\n            createdItems = createdItems.filter(item => item.id != id);\r\n        }\r\n\r\n        item.addEventListener('click', (e) => {\r\n            if (command) {\r\n                System.shell.execCommand(command).catch(e => {\r\n                    console.error(e);\r\n                })\r\n            } else if (action) {\r\n                action();\r\n            }\r\n        })\r\n\r\n        item.addEventListener('contextmenu', (e) => {\r\n            var items = [\r\n                {\r\n                    className: \"refresh\",\r\n                    icon: \"refresh\",\r\n                    text: \"Refresh\",\r\n                    action: () => {\r\n                        desktop.update();\r\n                    }\r\n                }, {\r\n                    className: 'sort',\r\n                    icon: \"sort\",\r\n                    text: \"Sort by\",\r\n                    submenu: [{\r\n                        className: \"name\",\r\n                        /*icon: \"sort_by_name\",*/\r\n                        text: \"Name\",\r\n                        action: () => {\r\n                            desktop.update(true, 'name');\r\n                        }\r\n                    },/* {\r\n                            className: \"size\",\r\n                            icon: \"sort_by_size\",\r\n                            text: \"Size\",\r\n                            action: () => { }\r\n                        }, {\r\n                            className: \"type\",\r\n                            icon: \"sort_by_type\",\r\n                            text: \"Type\",\r\n                            action: () => { }\r\n                        }*/]\r\n                }, {\r\n                    type: 'separator'\r\n                }\r\n            ];\r\n            if (selected.length <= 1) {\r\n                items.push({\r\n                    className: \"open\",\r\n                    text: \"Open\",\r\n                    action: () => {\r\n                        if (command) {\r\n                            System.shell.execCommand(command).catch(e => {\r\n                                console.error(e);\r\n                            })\r\n                        } else if (action) {\r\n                            action();\r\n                        }\r\n                    }\r\n                })\r\n                if (type == 'file') {\r\n                    items.push({\r\n                        className: \"open-with\",\r\n                        icon: 'open-with',\r\n                        text: \"Open with...\",\r\n                        action: () => {\r\n                            System.shell.execCommand('C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/chooseViewer.wrt')//.start(`const FILE_PATH=\"${path}\";`);\r\n                        }\r\n                    });\r\n                }\r\n                if (type != 'directory') {\r\n                    items.push({\r\n                        text: 'Open file location',\r\n                        icon: 'folder-open',\r\n                        action: () => {\r\n                            System.shell.execCommand('explorer --path=\\\"C:/User/Desktop\\\"').catch(e => {\r\n                                console.error(e);\r\n                            })\r\n                        }\r\n                    })\r\n                }\r\n                items.push({\r\n                    className: 'delete',\r\n                    icon: \"delete\",\r\n                    text: \"Delete\",\r\n                    action: () => {\r\n                        fs.rm(path, { recursive: true }).then(res => {\r\n                            desktop.update();\r\n                        });\r\n                    }\r\n                })\r\n            } else {\r\n                items = items.concat([{\r\n                    lassName: \"open\",\r\n                    text: \"Open\",\r\n                    action: () => {\r\n                        selected.forEach(item => {\r\n                            if (item.command) {\r\n                                System.shell.execCommand(item.command).catch(e => {\r\n                                    console.error(e);\r\n                                })\r\n                            } else if (item.action) {\r\n                                item.action();\r\n                            }\r\n                        })\r\n                        selected = [];\r\n                        createdItems.forEach(item => {\r\n                            item.item.classList.remove('active');\r\n                        })\r\n                    }\r\n                }, {\r\n                    className: 'delete',\r\n                    icon: \"delete\",\r\n                    text: \"Delete\",\r\n                    action: async () => {\r\n                        var temp = selected;\r\n                        for (let i = 0; i < temp.length; i++) {\r\n                            var item = temp[i];\r\n                            await fs.rm(item.path, { recursive: true }).then(res => {\r\n                                item.remove();\r\n                            });\r\n                        }\r\n                        desktop.update();\r\n                        selected = [];\r\n                        createdItems.forEach(item => {\r\n                            item.item.classList.remove('active');\r\n                        })\r\n                    }\r\n                }])\r\n            }\r\n\r\n            if (file instanceof Blob && selected.length <= 1) {\r\n                if (file.type.startsWith('image/')) {\r\n                    // Alternative : item.splice(<position>,0,<item>)\r\n                    items.push({\r\n                        type: 'separator'\r\n                    })\r\n                    items.push({\r\n                        className: \"set-as-bacckground\",\r\n                        text: \"Set as background\",\r\n                        action: async () => {\r\n                            await window.setBackgroundImage(path);\r\n                        }\r\n                    })\r\n                } else if (file.type.search('javascript') > -1) {\r\n                    items.push({\r\n                        type: 'separator'\r\n                    })\r\n                    items.push({\r\n                        className: \"run-as-an-app\",\r\n                        icon: 'window-snipping',\r\n                        text: \"Run as an application\",\r\n                        action: async () => {\r\n                            new WRT().runFile(path);\r\n                        }\r\n                    })\r\n                } else if (_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.fsUtils.extname(path) == '.wbsf') {\r\n                    items.push({\r\n                        icon: 'window-snipping',\r\n                        text: 'Run file',\r\n                        action: async () => {\r\n                            const file = await fs.readFile(path);\r\n                            const script = await file.text();\r\n                            const commands = script.split('\\n').filter(t => t.trim().length > 0);\r\n                            try {\r\n                                for (const command of commands) {\r\n                                    await System.shell.execCommand(command.trim());\r\n                                }\r\n                            } catch (e) { };\r\n                        }\r\n                    })\r\n                } else if (['.ttf', '.otf', '.woff', '.woff2', '.eot'].includes(_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.fsUtils.extname(path))) {\r\n                    items.push({\r\n                        type: 'separator'\r\n                    })\r\n                    items.push({\r\n                        className: \"set-as-default-font\",\r\n                        icon: 'font',\r\n                        text: \"Set as default font\",\r\n                        action: async () => {\r\n                            try {\r\n                                const fontName = 'WINBOWS_FONT_' + [...Array(12)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');\r\n                                const fontURL = await fs.getFileURL(path);\r\n                                const myFont = new FontFace(fontName, `url(${fontURL})`);\r\n                                await myFont.load();\r\n\r\n                                window.document.fonts.add(myFont);\r\n                                _core_viewport_js__WEBPACK_IMPORTED_MODULE_6__.viewport.root.style.setProperty('--winbows-font-default', fontName);\r\n\r\n                            } catch (error) {\r\n                                console.error('Failed to load font', error);\r\n                            }\r\n                            return;\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            const menu = _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].contextMenu(items, {\r\n                // showIcon: false\r\n            })\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n            let pageX = e.pageX;\r\n            let pageY = e.pageY;\r\n            if (e.type.startsWith('touch')) {\r\n                var touch = e.touches[0] || e.changedTouches[0];\r\n                pageX = touch.pageX;\r\n                pageY = touch.pageY;\r\n            }\r\n            menu.container.style.setProperty('--contextmenu-bg', 'var(--winbows-taskbar-bg)');\r\n            menu.container.style.setProperty('--contextmenu-backdrop-filter', 'saturate(3) blur(20px)');\r\n            menu.open(pageX, pageY, 'left-top');\r\n            if (_shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(menu.container).x + menu.container.offsetWidth > window.innerWidth) {\r\n                menu.container.style.left = 'unset';\r\n                menu.container.style.right = '4px';\r\n            }\r\n            if (_shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(menu.container).y + menu.container.offsetHeight > window.innerHeight - 48) {\r\n                menu.container.style.top = 'unset';\r\n                menu.container.style.bottom = 'calc(var(--taskbar-height) + 4px)';\r\n            }\r\n            new Array(\"mousedown\", \"touchstart\", \"pointerdown\").forEach(event => {\r\n                window.addEventListener(event, (e) => {\r\n                    if (menu.container.contains(e.target)) return;\r\n                    menu.close();\r\n                })\r\n            })\r\n        }, false);\r\n\r\n        return;\r\n    }\r\n\r\n    async function updateDesktop(force = true, sort = 'default') {\r\n        if (window.modes.debug == true) {\r\n            console.log('Updating Desktop', '\\nForce : ' + force);\r\n        }\r\n        fs.readdir('C:/User/Desktop').then(async items => {\r\n            if (items == originalContent && force == false || updating == true) return;\r\n            originalContent = items;\r\n            updating = true;\r\n            var results = [];\r\n            var count = Math.abs(items.length - createdItems.length);\r\n            if (createdItems.length < items.length) {\r\n                for (let i = 0; i < count; i++) {\r\n                    generateItem();\r\n                }\r\n            } else if (createdItems.length > items.length) {\r\n                for (let i = 0; i < count; i++) {\r\n                    if (createdItems[i]) {\r\n                        createdItems[i].remove();\r\n                    }\r\n                }\r\n            }\r\n            for (let i = 0; i < items.length; i++) {\r\n                const stat = fs.stat(items[i]);\r\n                results.push({\r\n                    stat,\r\n                    path: items[i],\r\n                    name: _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.fsUtils.basename(items[i]),\r\n                    content: stat.isFile() ? await fs.readFile(items[i]).catch(err => console.error(err)) : new Blob([])\r\n                });\r\n            }\r\n            if (sort == 'name') {\r\n                // TODO\r\n            }\r\n            for (let i = 0; i < results.length; i++) {\r\n                ; await (async (i) => {\r\n                    var { stat, path, name, content } = results[i];\r\n                    var type = _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.fsUtils.extname(path) == '.link' ? 'shortcut' : stat.isFile() ? 'file' : 'directory';\r\n                    var detail = {};\r\n                    try {\r\n                        if (type == 'shortcut') {\r\n                            detail = JSON.parse(await content.text());\r\n                        } else if (type == 'directory') {\r\n                            detail = {\r\n                                name: name,\r\n                                command: `explorer --path=\\\"${path}\\\"`\r\n                            };\r\n                        } else {\r\n                            detail = {\r\n                                name: name,\r\n                                action: () => {\r\n                                    var defaultViewer = System.fileViewers.getDefaultViewer(path);\r\n                                    if (defaultViewer != null) {\r\n                                        System.shell.execCommand(defaultViewer.script)//.start(`const FILE_PATH=\"${path}\";`);\r\n                                    } else {\r\n                                        System.shell.execCommand(`C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/chooseViewer.wrt --path=\\\"${path}\\\"`);\r\n                                    }\r\n                                }\r\n                            };\r\n                        }\r\n                    } catch (e) { console.error(e) };\r\n                    detail.path = path;\r\n                    detail.type = type;\r\n                    detail.file = content;\r\n                    function update() {\r\n                        createdItems[i].update(detail);\r\n                        clearTimeout(update);\r\n                    }\r\n                    setTimeout(update, i);\r\n                    return;\r\n                })(i);\r\n            }\r\n            updating = false;\r\n        })\r\n    }\r\n\r\n    const target = 'C:/User/Desktop/';\r\n    const dropZone = _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopEl;\r\n\r\n    var checked = false;\r\n    var allowed = false;\r\n\r\n    function checkType(event) {\r\n        const items = event.dataTransfer.items;\r\n        let isFileOrFolder = false;\r\n        allowed = false;\r\n\r\n        for (let i = 0; i < items.length; i++) {\r\n            if (items[i].kind === 'file') {\r\n                isFileOrFolder = true;\r\n                allowed = true;\r\n            }\r\n        }\r\n\r\n        if (isFileOrFolder) {\r\n            dropZone.classList.add('dragover');\r\n        } else {\r\n            dropZone.classList.remove('dragover');\r\n        }\r\n    }\r\n\r\n    dropZone.addEventListener('dragover', (event) => {\r\n        event.preventDefault();\r\n\r\n        if (checked == false) {\r\n            checkType(event);\r\n            checked = true;\r\n        }\r\n    });\r\n\r\n    dropZone.addEventListener('dragenter', (event) => {\r\n        event.preventDefault();\r\n\r\n        if (checked == false) {\r\n            checkType(event);\r\n            checked = true;\r\n        }\r\n    });\r\n\r\n    dropZone.addEventListener('dragleave', (event) => {\r\n        event.preventDefault();\r\n        checked = false;\r\n        dropZone.classList.remove('dragover');\r\n    });\r\n\r\n    dropZone.addEventListener('drop', async (e) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        checked = false;\r\n        dropZone.classList.remove('dragover');\r\n\r\n        if (allowed == false) return;\r\n        allowed == false;\r\n\r\n        async function hashURL(url) {\r\n            return crypto.subtle.digest('SHA-256', new TextEncoder().encode(url)).then(buf =>\r\n                Array.from(new Uint8Array(buf)).map(b => b.toString(16).padStart(2, '0')).join('')\r\n            );\r\n        }\r\n\r\n        const items = e.dataTransfer.items;\r\n        var processed = 0;\r\n        var current = 'Unknown';\r\n        var title = 'Uploading File to Desktop...';\r\n        var worker;\r\n        var promises = [];\r\n\r\n        for (const item of items) {\r\n            const entry = item.webkitGetAsEntry?.();\r\n            if (entry) {\r\n                promises.push(readEntryRecursively(entry, ''));\r\n            } else if (item.kind === 'string' && item.type === 'text/uri-list') {\r\n                // URL\r\n                promises.push(new Promise((resolve, reject) => {\r\n                    item.getAsString(async url => {\r\n                        try {\r\n                            const res = await fetch(url);\r\n                            // Try to get the file name from the header\r\n                            const disposition = res.headers.get('Content-Disposition');\r\n                            let filename = null;\r\n\r\n                            if (disposition && disposition.includes('filename=')) {\r\n                                const matches = disposition.match(/filename\\*=UTF-8''(.+)$|filename=\"?([^\"]+)\"?/);\r\n                                if (matches) {\r\n                                    filename = decodeURIComponent(matches[1] || matches[2]);\r\n                                }\r\n                            }\r\n\r\n                            // Get it from url\r\n                            if (!filename) {\r\n                                filename = await hashURL(url);\r\n                            }\r\n\r\n                            const blob = await res.blob();\r\n\r\n                            return resolve({\r\n                                path: '',\r\n                                file: new File([blob], filename, {\r\n                                    type: blob.type,\r\n                                    lastModified: Date.now()\r\n                                })\r\n                            });\r\n                        } catch (e) {\r\n                            return reject(e);\r\n                        }\r\n                    })\r\n                }));\r\n            } else {\r\n                // Not a file, directory, or URL\r\n            }\r\n        }\r\n\r\n        const results = (await Promise.all(promises)).flat();\r\n        const total = results.length;\r\n        console.log(results, total);\r\n\r\n\r\n        async function readEntryRecursively(entry, path = '') {\r\n            return new Promise(async (resolve, reject) => {\r\n                if (entry.isFile) {\r\n                    entry.file(file => {\r\n                        resolve({ path: path, file });\r\n                    });\r\n                } else if (entry.isDirectory) {\r\n                    const reader = entry.createReader();\r\n                    reader.readEntries(async entries => {\r\n                        const promises = entries.map(e =>\r\n                            readEntryRecursively(e, path + entry.name + '/')\r\n                        );\r\n                        const results = await Promise.all(promises);\r\n                        resolve(results.flat());\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        if (window.modes.debug == true) {\r\n            console.log('run', total, results);\r\n        }\r\n        new WRT().runFile('C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/fileTransfer.js')/*.start()*/.then(async process => {\r\n            fileTransfer++;\r\n            worker = process.worker;\r\n\r\n            if (window.modes.debug == true) {\r\n                console.log(results)\r\n            }\r\n\r\n            worker.postMessage({\r\n                type: 'init',\r\n                token: process.token\r\n            })\r\n\r\n            worker.postMessage({\r\n                type: 'transfer',\r\n                token: process.token,\r\n                files: results, title,\r\n                target: 'C:/User/Desktop/'\r\n            })\r\n\r\n            worker.addEventListener('message', async (e) => {\r\n                if (!e.data.token == process.token) return;\r\n                // console.log('MAIN', e.data.type)\r\n                if (e.data.type == 'start') {\r\n                    worker.postMessage({\r\n                        type: 'init',\r\n                        token: process.token\r\n                    })\r\n                }\r\n                if (e.data.type == 'init') {\r\n                    // console.log('init')\r\n                    worker.postMessage({\r\n                        type: 'transfer',\r\n                        token: process.token,\r\n                        files: results, title,\r\n                        target: 'C:/User/Desktop/'\r\n                    })\r\n                }\r\n                if (e.data.type == 'completed') {\r\n                    fileTransfer--;\r\n                    updateDesktop();\r\n                }\r\n            });\r\n\r\n            // process.exit();\r\n        });\r\n    });\r\n\r\n    _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopEl.addEventListener('contextmenu', (e) => {\r\n        const menu = _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].contextMenu([\r\n            {\r\n                className: \"refresh\",\r\n                icon: \"refresh\",\r\n                text: \"Refresh\",\r\n                action: () => {\r\n                    desktop.update();\r\n                }\r\n            }, {\r\n                className: 'sort',\r\n                icon: \"sort\",\r\n                text: \"Sort by\",\r\n                submenu: [{\r\n                    className: \"name\",\r\n                    /*icon: \"sort_by_name\",*/\r\n                    text: \"Name\",\r\n                    action: () => {\r\n                        desktop.update(true, 'name');\r\n                    }\r\n                }]\r\n            }\r\n        ])\r\n        e.preventDefault();\r\n        let pageX = e.pageX;\r\n        let pageY = e.pageY;\r\n        if (e.type.startsWith('touch')) {\r\n            var touch = e.touches[0] || e.changedTouches[0];\r\n            pageX = touch.pageX;\r\n            pageY = touch.pageY;\r\n        }\r\n        menu.container.style.setProperty('--contextmenu-bg', 'var(--winbows-taskbar-bg)');\r\n        menu.container.style.setProperty('--contextmenu-backdrop-filter', 'saturate(3) blur(20px)');\r\n        menu.open(pageX, pageY, 'left-top');\r\n        if (_shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(menu.container).x + menu.container.offsetWidth > window.innerWidth) {\r\n            menu.container.style.left = 'unset';\r\n            menu.container.style.right = '4px';\r\n        }\r\n        if (_shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(menu.container).y + menu.container.offsetHeight > window.innerHeight - 48) {\r\n            menu.container.style.top = 'unset';\r\n            menu.container.style.bottom = 'calc(var(--taskbar-height) + 4px)';\r\n        }\r\n        new Array(\"mousedown\", \"touchstart\", \"pointerdown\").forEach(event => {\r\n            window.addEventListener(event, (e) => {\r\n                if (menu.container.contains(e.target)) return;\r\n                menu.close();\r\n            })\r\n        })\r\n    })\r\n\r\n    const defaultShortcuts = [{\r\n        path: 'C:/User/Desktop/desktop.link',\r\n        content: {\r\n            icon: 'C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/icons/desktop.ico',\r\n            name: 'Desktop',\r\n            command: 'explorer --path=C:/User/Desktop'\r\n        }\r\n    }, {\r\n        path: 'C:/User/Desktop/github.link',\r\n        content: {\r\n            icon: 'C:/Winbows/icons/github.png',\r\n            name: 'Github',\r\n            command: 'start \"https://github.com/Siyu1017/winbows11/\" --new-window'\r\n        }\r\n    }, {\r\n        path: 'C:/User/Desktop/code.link',\r\n        content: {\r\n            icon: 'C:/Winbows/icons/applications/office/code.ico',\r\n            name: 'VSCode',\r\n            command: 'code'\r\n        }\r\n    }, {\r\n        path: 'C:/User/Desktop/author.link',\r\n        content: {\r\n            icon: 'C:/Winbows/icons/author.ico',\r\n            name: 'Siyu',\r\n            command: 'start \"https://siyu1017.github.io/\" --new-window'\r\n        }\r\n    }]\r\n\r\n    for (let i = 0; i < defaultShortcuts.length; i++) {\r\n        let content = defaultShortcuts[i].content;\r\n        try {\r\n            content.icon = await fs.getFileURL(content.icon);\r\n        } catch (e) {\r\n            content.icon = _core_fallback_js__WEBPACK_IMPORTED_MODULE_2__.fallbackImage;\r\n            console.error(e);\r\n        }\r\n        try {\r\n            fs.writeFile(defaultShortcuts[i].path, new Blob([JSON.stringify(content)], {\r\n                type: 'application/winbows-link'\r\n            }));\r\n        } catch (e) {\r\n            console.error('Failed to create shortcut', e);\r\n        }\r\n    }\r\n\r\n    var lastTime = Date.now();\r\n\r\n    fs.on('change', (e) => {\r\n        if (e.path.search('C:/User/Desktop') > -1 && fileTransfer == 0) {\r\n            var timeout = () => {\r\n                var now = Date.now();\r\n                if (lastTime - now > 1000) {\r\n                    lastTime = now;\r\n                    updateDesktop(false);\r\n                }\r\n                clearTimeout(timeout);\r\n            };\r\n            setTimeout(timeout, 1000);\r\n        }\r\n    });\r\n\r\n    _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.addEventListener('wheel', function (event) {\r\n        var delta = event.deltaY || event.detail || event.wheelDelta;\r\n        if (delta < 0) {\r\n            _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollTo({\r\n                behavior: \"smooth\",\r\n                left: _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft - 300\r\n            })\r\n        } else {\r\n            _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollTo({\r\n                behavior: \"smooth\",\r\n                left: _init_js__WEBPACK_IMPORTED_MODULE_0__.desktopItemsEl.scrollLeft + 300\r\n            })\r\n        }\r\n        event.preventDefault();\r\n    });\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (desktop);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/desktop/desktop.js?\n}")},"./src/os/explorer/desktop/init.js":
/*!*****************************************!*\
  !*** ./src/os/explorer/desktop/init.js ***!
  \*****************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   desktopEl: () => (/* binding */ desktopEl),\n/* harmony export */   desktopItemsEl: () => (/* binding */ desktopItemsEl)\n/* harmony export */ });\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n\r\n\r\nconst { appWrapper } = _core_viewport_js__WEBPACK_IMPORTED_MODULE_0__.viewport;\r\n\r\n// Desktop \r\nconst desktop = document.createElement('div');\r\nconst desktopItems = document.createElement('div');\r\ndesktop.className = 'desktop winui-no-background';\r\ndesktopItems.className = 'desktop-items';\r\nappWrapper.appendChild(desktop);\r\ndesktop.appendChild(desktopItems);\r\n\r\nconst desktopEl = desktop;\r\nconst desktopItemsEl = desktopItems;\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/desktop/init.js?\n}")},"./src/os/explorer/explorer.wrt":
/*!**************************************!*\
  !*** ./src/os/explorer/explorer.wrt ***!
  \**************************************/(module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ init)\n/* harmony export */ });\n/* harmony import */ var _desktop_backgroundImage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./desktop/backgroundImage.js */ \"./src/os/explorer/desktop/backgroundImage.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _taskbar_taskbar_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./taskbar/taskbar.js */ \"./src/os/explorer/taskbar/taskbar.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/lockScreen.js */ \"./src/os/core/lockScreen.js\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/log.js */ \"./src/os/core/log.js\");\n/* harmony import */ var _desktop_init_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./desktop/init.js */ \"./src/os/explorer/desktop/init.js\");\n/* harmony import */ var _core_timer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/timer.js */ \"./src/os/core/timer.js\");\n/* harmony import */ var _desktop_desktop_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./desktop/desktop.js */ \"./src/os/explorer/desktop/desktop.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../core/sysInfo.js */ \"./src/os/core/sysInfo.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_desktop_backgroundImage_js__WEBPACK_IMPORTED_MODULE_0__, _shared_fs_js__WEBPACK_IMPORTED_MODULE_2__, _taskbar_taskbar_js__WEBPACK_IMPORTED_MODULE_3__, _desktop_desktop_js__WEBPACK_IMPORTED_MODULE_9__]);\n([_desktop_backgroundImage_js__WEBPACK_IMPORTED_MODULE_0__, _shared_fs_js__WEBPACK_IMPORTED_MODULE_2__, _taskbar_taskbar_js__WEBPACK_IMPORTED_MODULE_3__, _desktop_desktop_js__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import Copilot from \"./copilot/chat.js\";\r\n\r\nasync function init() {\r\n    const logger = new _core_log_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\r\n        module: 'Explorer'\r\n    })\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].groupEnd();\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].group('Explorer');\r\n\r\n    const fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_2__.IDBFS)('~EXPLORER');\r\n    const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('WRT');\r\n    const pseudoProcess = new WRT({\r\n        code: '//! Explorer pseudo-process',\r\n        __filename: 'C:/Winbows/System/explorer.wrt',\r\n        options: {\r\n            keepAlive: true\r\n        },\r\n        icon: _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.winbowsIcon\r\n    });\r\n    pseudoProcess.process.title = 'Explorer';\r\n    pseudoProcess.main();\r\n    logger.info('Explorer pseudo-process created');\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].mark('Explorer process');\r\n\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.loading.textWithProgress('Initializing Taskbar...', 30);\r\n    const taskbar = await (0,_taskbar_taskbar_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\r\n\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.loading.textWithProgress('Initializing Desktop...', 36);\r\n    await _desktop_desktop_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].init();\r\n    _desktop_desktop_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].update();\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].mark('Desktop');\r\n\r\n    const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('System');\r\n    const Explorer = {\r\n        backgroundImage: _desktop_backgroundImage_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"],\r\n        taskbar,\r\n        FilePicker: function (wrt) {\r\n            const contextWrt = wrt;\r\n            const wrts = [];\r\n            contextWrt.process.on('exit', () => {\r\n                wrts.forEach(wrt => {\r\n                    wrt.kill();\r\n                })\r\n            })\r\n\r\n            return async function ({\r\n                accept = ['*'],\r\n                multiple = false\r\n            } = {}) {\r\n                if (!wrt.apis.WApplication) throw new Error('The WApplication API is not available in the current environment.');\r\n\r\n                const WApplication = contextWrt.apis.WApplication;\r\n                const { app, BrowserWindow } = WApplication;\r\n                const id = 'system://explorer-file-picker/' + (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_10__.randomID)(256);\r\n                const channel = System.processAPIs.IPC.listen(id);\r\n\r\n                const win = new BrowserWindow({\r\n                    x: 0,\r\n                    y: 0,\r\n                    width: 640,\r\n                    height: 450,\r\n                    fullscreenable: false,\r\n                    maximizable: false,\r\n                    minimizable: false,\r\n                    snappable: false,\r\n                    mica: false,\r\n                    title: 'File Picker'\r\n                }, {\r\n                    env: {\r\n                        pipe: id\r\n                    }\r\n                });\r\n                win.load('C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/filePicker.js');\r\n\r\n\r\n                // const explorerWrt = new WRT({\r\n                //     __filename: 'C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/filePicker.wrt',\r\n                //     code: await fs.readFileAsText('C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/filePicker.wrt'),\r\n                // })\r\n                // explorerWrt.process.env.pipe = id;\r\n                // explorerWrt.main();\r\n                // wrts.push(explorerWrt);\r\n\r\n                return new Promise((res, rej) => {\r\n                    channel.on('data', (e) => {\r\n                        const dt = e.data;\r\n                        if (dt.type === 'cancel') {\r\n                            res([]);\r\n                            channel.close();\r\n                        }\r\n                        if (dt.type === 'confirm') {\r\n                            res(dt.items);\r\n                            channel.close();\r\n                        }\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        FileSaver: function () {\r\n            // ...\r\n        }\r\n    }\r\n    logger.info('Explorer APIs registered');\r\n    _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].register('Explorer', Explorer, 'original');\r\n    _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].update('WRT', class extends WRT {\r\n        constructor(options) {\r\n            super(options);\r\n\r\n            this.mountAPI({\r\n                name: 'Explorer',\r\n                api: {\r\n                    backgroundImage: Explorer.backgroundImage,\r\n                    taskbar: Explorer.taskbar,\r\n                    FilePicker: Explorer.FilePicker(this),\r\n                    FileSaver: Explorer.FileSaver(this)\r\n                }\r\n            });\r\n        }\r\n    }, 'explorer');\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].mark('API registration');\r\n\r\n    // Copilot\r\n    //loading.textWithProgress('Loading Copilot...', 42);\r\n    //timer.group('Copilot');\r\n    //const copilot = await Copilot();\r\n    //window.copilot = copilot;\r\n    //timer.groupEnd();\r\n\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.loading.textWithProgress('Loading Fonts...', 48);\r\n\r\n    await (async () => {\r\n        try {\r\n            const fontName = 'WINBOWS_FONT_' + [...Array(12)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');\r\n            const fontURL = await fs.getFileURL('C:/Winbows/fonts/Segoe Fluent Icons.ttf');\r\n            const myFont = new FontFace(fontName, `url(${fontURL})`);\r\n            await myFont.load();\r\n\r\n            document.fonts.add(myFont);\r\n            document.querySelector(':root').style.setProperty('--winbows-font-icon', fontName);\r\n            logger.info(\"Icon font loaded\");\r\n        } catch (error) {\r\n            logger.error('Failed to load font', error);\r\n        }\r\n        _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].mark('Loading fonts');\r\n        return;\r\n    })();\r\n\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.loading.textWithProgress('Loading Background Image...', 60);\r\n\r\n    try {\r\n        const d = Date.now() - _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"].startTime;\r\n        const r = 500;\r\n        if (d < r) {\r\n            await (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_10__.delay)(r - d);\r\n        }\r\n        await _desktop_backgroundImage_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].set(localStorage.getItem('WINBOWS_BACKGROUND_IMAGE') || 'C:/Winbows/bg/img0.jpg');\r\n        await (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_10__.delay)(200);\r\n        logger.info(\"Background image has been set successfully\");\r\n    } catch (e) {\r\n        logger.error('Failed to set background image\\n', e);\r\n    }\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].mark('Background image');\r\n\r\n    // Initialize Lock Screen\r\n    logger.info('Initializing lock screen...');\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.viewport.root.appendChild(_core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].container);\r\n\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.loading.textWithProgress('Almost done!', 88);\r\n\r\n    try {\r\n        await fs.getFileURL('C:/Winbows/icons/user.png').then(url => {\r\n            _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].avatar.style.backgroundImage = `url(${url})`;\r\n        })\r\n        await fs.getFileURL('C:/Winbows/bg/img100.jpg').then(url => {\r\n            if (!url) {\r\n                _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].background.style.backgroundImage = 'linear-gradient(to right, #000)';\r\n            } else {\r\n                _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].background.style.backgroundImage = `url(${url})`;\r\n            }\r\n        }).catch(err => {\r\n            _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].background.style.backgroundImage = 'linear-gradient(to right, #000)';\r\n            logger.error(err);\r\n        })\r\n    } catch (e) {\r\n        logger.error('An error occurred while loading image:', e);\r\n    }\r\n\r\n    _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].setInitFn(async () => {\r\n        await taskbar.init();\r\n\r\n        // Tests\r\n        const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('WRT');\r\n        const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('System');\r\n\r\n        /*\r\n        new WRT({\r\n            code: `console.log('WRT context (wrapped sequentially by the kernel and the System)', this)`\r\n        }).main();\r\n\r\n        new WRT({\r\n            code: await fs.readFileAsText('C:/User/Documents/sdk-v1/examples/wrt-module-demo/app.wrt'),\r\n            __filename: 'C:/User/Documents/sdk-v1/examples/wrt-module-demo/app.wrt'\r\n        }).main();\r\n\r\n        new WRT({\r\n            code: await fs.readFileAsText('C:/User/Documents/sdk-v1/examples/wrt-shell-demo/app.wrt'),\r\n            __filename: 'C:/User/Documents/sdk-v1/examples/wrt-shell-demo/app.wrt'\r\n        }).main();*/\r\n\r\n        const shell = new System.ShellInstance(pseudoProcess.process);\r\n        shell.execCommand('info');\r\n        //shell.execCommand('cmd');\r\n        //shell.execCommand('debuglog-parser');\r\n        //shell.execCommand('explorer --path=C:/');\r\n\r\n        const params = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_10__.getJsonFromURL)();\r\n        if (params.command) {\r\n            const warning = document.createElement('div');\r\n            const warningWindow = document.createElement('div');\r\n            const warningHeader = document.createElement('div');\r\n            const warningContent = document.createElement('div');\r\n            const warningFooter = document.createElement('div');\r\n            const warningContinueButton = document.createElement('button');\r\n            const warningCancelButton = document.createElement('button');\r\n\r\n            warningHeader.innerHTML = `Are you sure you want to execute the command \"${(0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_10__.safeEscape)(params.command)}\" parsed from the URL?`;\r\n            warningContent.innerHTML = `Executing a command from an unknown source may pose a serious risk to your system or data security. Please carefully verify the trustworthiness of the source and make sure you fully understand the possible consequences before proceeding.`;\r\n            warningCancelButton.innerHTML = 'Cancel';\r\n            warningContinueButton.innerHTML = 'Continue';\r\n\r\n            warning.className = 'execute-command-warning';\r\n            warningWindow.className = 'execute-command-warning-window';\r\n            warningHeader.className = 'execute-command-warning-header';\r\n            warningContent.className = 'execute-command-warning-content';\r\n            warningFooter.className = 'execute-command-warning-footer';\r\n            warningContinueButton.className = 'execute-command-warning-button outline';\r\n            warningCancelButton.className = 'execute-command-warning-button';\r\n\r\n            /*\r\n            warning.style = 'position: fixed;top: 0px;left: 0px;width: 100vw;height: var(--winbows-screen-height);display: flex;align-items: center;justify-content: center;background-color: rgba(0, 0, 0, 0.5);z-index: 99999;font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen-Sans, Ubuntu, Cantarell, &quot;Helvetica Neue&quot;, sans-serif;color:#000;';\r\n            warningWindow.style = 'display: flex;flex-direction: column;align-items: center;justify-content: center;background-color: rgb(255, 255, 255);padding: 2rem 4rem;border-radius: 1.5rem;box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 1rem;max-width: min(600px, -2rem + 100vw);width: 100%;max-height: min(calc(var(--winbows-screen-height) * 80%), calc(var(--winbows-screen-height) - 2rem));overflow: auto;';\r\n            warningHeader.style = 'font-size: 175%;font-weight: 600;margin: .5rem 0 1.5rem;';\r\n            warningFooter.style = 'display: flex;gap: .5rem;';\r\n            warningCancelButton.style = 'color: rgb(0, 103, 192);margin-bottom: 0.5rem;padding: 0.625rem 1.25rem;border-radius: 0.5rem;font-size: 1rem;text-decoration: none;cursor: pointer;user-select: none;-webkit-user-drag: none;outline: 0px;border: 1px solid rgb(0, 103, 192);margin-top: 1.5rem;font-family: inherit;font-weight: 600;min-width: 8rem;background: #fff;'\r\n            warningContinueButton.style = 'color: rgb(255, 255, 255);margin-bottom: 0.5rem;padding: 0.625rem 1.25rem;background: rgb(0, 103, 192);border-radius: 0.5rem;font-size: 1rem;text-decoration: none;cursor: pointer;user-select: none;-webkit-user-drag: none;outline: 0px;border: 1px solid rgb(0, 103, 192);margin-top: 1.5rem;font-family: inherit;font-weight: 600;min-width: 8rem;';*/\r\n\r\n            warning.appendChild(warningWindow);\r\n            warningWindow.appendChild(warningHeader);\r\n            warningWindow.appendChild(warningContent);\r\n            warningWindow.appendChild(warningFooter);\r\n            warningFooter.appendChild(warningCancelButton);\r\n            warningFooter.appendChild(warningContinueButton);\r\n            _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.viewport.root.appendChild(warning);\r\n\r\n            warningCancelButton.addEventListener('click', () => {\r\n                warning.remove();\r\n            })\r\n            warningContinueButton.addEventListener('click', () => {\r\n                warning.remove();\r\n                shell.execCommand(params.command);\r\n            })\r\n        }\r\n\r\n        // shell.execCommand('node C:/User/Documents/sdk-v1/examples/downloadfile.wrt');\r\n        // shell.execCommand('C:/User/Documents/sdk-v1/examples/downloadfile.wrt');\r\n        // shell.execCommand('C:/User/Documents/sdk-v1/examples/calculator.wrt');\r\n        // shell.execCommand('C:/User/Documents/sdk-v1/examples/copilot.wrt');\r\n        // shell.execCommand('C:/User/Documents/sdk-v1/examples/cheapwordle.wrt');\r\n\r\n        await shell.execCommand('\"C:/User/Documents/sdk-v1/examples/setup-beta-env.wrt\"');\r\n        shell.execCommand('explorer --path=C:/User/Documents/sdk-v1/examples/');\r\n\r\n        fs.downloadFile('C:/User/Documents/sdk-v1/examples/calculator.wrt');\r\n\r\n        // WinbowsDebugLog.export();\r\n    })\r\n\r\n    pseudoProcess.process.on('exit', () => {\r\n        logger.warn('Explorer process exited');\r\n        taskbar.taskbar.remove();\r\n        taskbar.controlPanel.panel.remove();\r\n        taskbar.controlPanel.sidebar.remove();\r\n        _desktop_init_js__WEBPACK_IMPORTED_MODULE_7__.desktopEl.remove();\r\n        _desktop_backgroundImage_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].backgroundEl.remove();\r\n    })\r\n\r\n    logger.info('Lock screen initialized');\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].mark('Lock screen');\r\n    logger.info('Explorer initialized');\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].groupEnd();\r\n\r\n    return new Promise(res => {\r\n        setTimeout(() => {\r\n            res();\r\n            _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.loading.hide();\r\n        }, 500);\r\n    })\r\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/explorer.wrt?\n}")},"./src/os/explorer/taskbar/controlPanel.js":
/*!*************************************************!*\
  !*** ./src/os/explorer/taskbar/controlPanel.js ***!
  \*************************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ControlPanel: () => (/* binding */ ControlPanel)\n/* harmony export */ });\n/* harmony import */ var _core_timer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/timer.js */ \"./src/os/core/timer.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n\r\n\r\n\r\n\r\nfunction ControlPanel(taskbarControls) {\r\n    const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get('System');\r\n    const downEvts = [\"mousedown\", \"touchstart\", \"pointerdown\"];\r\n\r\n    const controlPanelContainer = document.createElement('div');\r\n    const controlSidebarContainer = document.createElement('div');\r\n    const controlPanel = document.createElement('div');\r\n    const controlSidebar = document.createElement('div');\r\n    const controlPanelSummary = document.createElement('div');\r\n    const controlSidebarSummary = document.createElement('div');\r\n    const controlToggleDesktop = document.createElement('div');\r\n\r\n    controlPanelContainer.className = 'control-panel-container';\r\n    controlSidebarContainer.className = 'control-sidebar-container';\r\n    controlPanel.className = 'control-panel';\r\n    controlSidebar.className = 'control-sidebar';\r\n    controlPanelSummary.className = 'control-panel-summary';\r\n    controlSidebarSummary.className = 'control-sidebar-summary';\r\n    controlToggleDesktop.className = 'control-toggle-desktop';\r\n\r\n    taskbarControls.appendChild(controlPanelSummary);\r\n    taskbarControls.appendChild(controlSidebarSummary);\r\n    taskbarControls.appendChild(controlToggleDesktop);\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.screenElement.appendChild(controlPanelContainer);\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.screenElement.appendChild(controlSidebarContainer);\r\n    controlPanelContainer.appendChild(controlPanel);\r\n    controlSidebarContainer.appendChild(controlSidebar);\r\n\r\n    // Overlays \r\n    const brightnessOverlay = document.createElement('div');\r\n    const nightLightOverlay = document.createElement('div');\r\n    brightnessOverlay.className = 'overlay brightness';\r\n    nightLightOverlay.className = 'overlay nightlight';\r\n    document.body.appendChild(nightLightOverlay);\r\n    document.body.appendChild(brightnessOverlay);\r\n\r\n    // Controls - Panel Summary\r\n    const controlPanelSummaryWifi = document.createElement('div');\r\n    const controlPanelSummaryVolume = document.createElement('div');\r\n    const controlPanelSummaryBattery = document.createElement('div');\r\n\r\n    controlPanelSummaryWifi.className = 'control-panel-summary-item wifi';\r\n    controlPanelSummaryVolume.className = 'control-panel-summary-item volume';\r\n    controlPanelSummaryBattery.className = 'control-panel-summary-item battery';\r\n\r\n    controlPanelSummary.appendChild(controlPanelSummaryWifi);\r\n    controlPanelSummary.appendChild(controlPanelSummaryVolume);\r\n    controlPanelSummary.appendChild(controlPanelSummaryBattery);\r\n\r\n    // Controls - Sidebar Summary\r\n    const controlSidebarSummaryMain = document.createElement('div');\r\n    const controlSidebarSummaryTime = document.createElement('div');\r\n    const controlSidebarSummaryDate = document.createElement('div');\r\n    const controlSidebarSummaryNotify = document.createElement('div');\r\n\r\n    controlSidebarSummaryMain.className = 'control-sidebar-summary-main';\r\n    controlSidebarSummaryTime.className = 'control-sidebar-summary-time';\r\n    controlSidebarSummaryDate.className = 'control-sidebar-summary-date';\r\n    controlSidebarSummaryNotify.className = 'control-sidebar-summary-notify';\r\n\r\n    controlSidebarSummary.appendChild(controlSidebarSummaryMain);\r\n    controlSidebarSummaryMain.appendChild(controlSidebarSummaryTime);\r\n    controlSidebarSummaryMain.appendChild(controlSidebarSummaryDate);\r\n    controlSidebarSummary.appendChild(controlSidebarSummaryNotify);\r\n\r\n    // Controls - Panel\r\n    const quickSettingGroup = document.createElement('div');\r\n    const quickSettingContent = document.createElement('div');\r\n    const quickSettingBlocks = document.createElement('div');\r\n    const quickSettingSliders = document.createElement('div');\r\n    const quickSettingFooter = document.createElement('div');\r\n    quickSettingGroup.className = 'control-panel-group';\r\n    quickSettingContent.className = 'control-panel-content';\r\n    quickSettingBlocks.className = 'control-panel-blocks';\r\n    quickSettingSliders.className = 'control-panel-sliders';\r\n    quickSettingFooter.className = 'control-panel-footer';\r\n    controlPanel.appendChild(quickSettingGroup);\r\n    quickSettingGroup.appendChild(quickSettingContent);\r\n    quickSettingContent.appendChild(quickSettingBlocks);\r\n    quickSettingContent.appendChild(quickSettingSliders);\r\n    quickSettingGroup.appendChild(quickSettingFooter);\r\n\r\n    let quickSettingItems = [{\r\n        label: 'WiFi',\r\n        status: 'enabled',\r\n        name: 'wifi',\r\n        change: (status) => {\r\n            if (status == 'enabled') {\r\n                window.HMGR.enable('NIC');\r\n            } else {\r\n                window.HMGR.disable('NIC');\r\n            }\r\n        }\r\n    }, {\r\n        label: 'Bluetooth',\r\n        status: 'disabled',\r\n        name: 'bluetooth',\r\n        change: () => {\r\n\r\n        }\r\n    }, {\r\n        label: 'Flight Mode',\r\n        status: 'disabled',\r\n        name: 'flight-mode',\r\n        change: () => {\r\n\r\n        }\r\n    }, {\r\n        label: 'Dark Theme',\r\n        status: System.theme.get() != 'light' ? 'enabled' : 'disabled',\r\n        name: 'dark-theme',\r\n        change: (status) => {\r\n            if (status == 'enabled') {\r\n                System.theme.set('dark');\r\n            } else {\r\n                System.theme.set('light');\r\n            }\r\n        }\r\n    }, {\r\n        label: 'Night Light',\r\n        status: 'disabled',\r\n        name: 'night-light',\r\n        change: (status) => {\r\n            if (status == 'enabled') {\r\n                _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.root.style.filter = 'sepia(.67) hue-rotate(345deg)'\r\n            } else {\r\n                _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.root.style.filter = 'unset';\r\n            }\r\n        }\r\n    }, {\r\n        label: 'Battery Saver',\r\n        status: 'disabled',\r\n        name: 'battery-saver',\r\n        change: () => {\r\n\r\n        }\r\n    }];\r\n\r\n    let quickSettingSliderBars = [{\r\n        name: 'brightness',\r\n        value: 100,\r\n        disabled: false,\r\n        change: (e) => {\r\n            var value = e.value;\r\n            brightnessOverlay.style.opacity = 0.9 * (100 - value) / 100;\r\n        }\r\n    }, {\r\n        name: 'volume',\r\n        value: 0,\r\n        disabled: false,\r\n        change: (e) => {\r\n            var value = e.value;\r\n            var classes = ['mute', 'volume0', 'volume1', 'volume2', 'volume3'];\r\n            classes.forEach(className => {\r\n                e.icon.classList.remove(className);\r\n                controlPanelSummaryVolume.classList.remove(className);\r\n            })\r\n            if (value == 0) {\r\n                e.icon.classList.add('mute');\r\n                controlPanelSummaryVolume.classList.add('mute');\r\n                return;\r\n            } else if (value > 0 && value <= 10) {\r\n                e.icon.classList.add('volume0');\r\n                controlPanelSummaryVolume.classList.add('volume0');\r\n                return;\r\n            } else if (value > 10 && value <= 30) {\r\n                e.icon.classList.add('volume1');\r\n                controlPanelSummaryVolume.classList.add('volume1');\r\n                return;\r\n            } else if (value > 30 && value <= 60) {\r\n                e.icon.classList.add('volume2');\r\n                controlPanelSummaryVolume.classList.add('volume2');\r\n                return;\r\n            } else {\r\n                e.icon.classList.add('volume3');\r\n                controlPanelSummaryVolume.classList.add('volume3');\r\n                return;\r\n            }\r\n        }\r\n    }];\r\n\r\n    quickSettingItems.forEach((item, i) => {\r\n        const quickSettingBlock = document.createElement('div');\r\n        const quickSettingButton = document.createElement('div');\r\n        const quickSettingIcon = document.createElement('div');\r\n        const quickSettingLabel = document.createElement('div');\r\n        let status = item.status == 'enabled' ? 'enabled' : 'disabled';\r\n        quickSettingBlock.className = 'control-panel-block';\r\n        quickSettingButton.className = 'control-panel-block-button';\r\n        quickSettingIcon.className = 'control-panel-block-icon';\r\n        quickSettingLabel.className = 'control-panel-block-label';\r\n        quickSettingIcon.classList.add(item.name);\r\n        quickSettingLabel.innerHTML = item.label;\r\n        if (item.status == 'disabled') {\r\n            quickSettingBlock.disabled = true;\r\n        } else {\r\n            quickSettingButton.classList.add('active');\r\n        }\r\n        quickSettingButton.addEventListener('click', () => {\r\n            if (status == 'enabled') {\r\n                quickSettingButton.classList.remove('active');\r\n            } else {\r\n                quickSettingButton.classList.add('active');\r\n            }\r\n            status = status == 'enabled' ? 'disabled' : 'enabled';\r\n            item.change(status);\r\n        })\r\n        quickSettingBlocks.appendChild(quickSettingBlock);\r\n        quickSettingBlock.appendChild(quickSettingButton);\r\n        quickSettingButton.appendChild(quickSettingIcon);\r\n        quickSettingBlock.appendChild(quickSettingLabel);\r\n        quickSettingItems[i].setStatus = function (value) {\r\n            status = value == 'disabled' ? 'disabled' : 'enabled';\r\n            if (status == 'enabled') {\r\n                quickSettingButton.classList.add('active');\r\n            } else {\r\n                quickSettingButton.classList.remove('active');\r\n            }\r\n        }\r\n    })\r\n    System.theme.onChange(theme => {\r\n        quickSettingItems.filter(item => item.name == 'dark-theme')[0].setStatus(theme == 'dark' ? 'enabled' : 'disabled')\r\n    })\r\n    quickSettingSliderBars.forEach(item => {\r\n        const box = document.createElement('div');\r\n        const icon = document.createElement('div');\r\n        const slider = document.createElement('input');\r\n        let disabled = item.disabled == true;\r\n        let value = item.value;\r\n        box.className = 'control-panel-slider';\r\n        icon.className = 'control-panel-slider-icon';\r\n        icon.classList.add(item.name);\r\n        slider.className = 'control-panel-slider-bar';\r\n        if (disabled == true) {\r\n            box.classList.add('disabled');\r\n            slider.disabled = disabled;\r\n        }\r\n\r\n        // Initialize\r\n        slider.type = 'range';\r\n        slider.min = 0;\r\n        slider.max = 100;\r\n        slider.value = item.value;\r\n        slider.style.setProperty('--track-color', `linear-gradient(90deg, var(--winbows-primary-color) ${slider.value}%, #888888 ${slider.value}%)`);\r\n        item.change({ slider, box, icon, value });\r\n\r\n        // Input listener\r\n        slider.addEventListener('input', (e) => {\r\n            if (disabled == true) {\r\n                if (slider.value != value) {\r\n                    slider.value = value;\r\n                }\r\n                return;\r\n            }\r\n            slider.style.setProperty('--track-color', `linear-gradient(90deg, var(--winbows-primary-color) ${slider.value}%, #888888 ${slider.value}%)`);\r\n            value = slider.value;\r\n            item.change({ slider, box, icon, value });\r\n        })\r\n        box.appendChild(icon);\r\n        box.appendChild(slider);\r\n        quickSettingSliders.appendChild(box);\r\n    })\r\n\r\n    controlPanelSummary.addEventListener('click', (e) => {\r\n        controlPanelContainer.classList.toggle('active');\r\n    })\r\n\r\n    downEvts.forEach(event => {\r\n        window.addEventListener(event, (e) => {\r\n            if (controlPanelContainer.contains(e.target) || controlPanelSummary.contains(e.target)) return;\r\n            controlPanelContainer.classList.remove('active');\r\n        })\r\n    })\r\n\r\n    // Controls - Calendar and Notifications ( In sidebar )\r\n    const notifyGroup = document.createElement('div');\r\n    const calendarGroup = document.createElement('div');\r\n    notifyGroup.className = 'control-sidebar-group';\r\n    calendarGroup.className = 'control-sidebar-group';\r\n    controlSidebar.appendChild(notifyGroup);\r\n    controlSidebar.appendChild(calendarGroup);\r\n\r\n    const notifyHeader = document.createElement('div');\r\n    const notifyList = document.createElement('div');\r\n    notifyHeader.className = 'control-sidebar-notify-header';\r\n    notifyList.className = 'control-sidebar-notify-list';\r\n    notifyGroup.appendChild(notifyHeader);\r\n    notifyGroup.appendChild(notifyList);\r\n    notifyHeader.innerHTML = 'Notifications';\r\n\r\n    const calendarOverview = document.createElement('div');\r\n    const calendarOverviewDate = document.createElement('div');\r\n    const calendarMain = document.createElement('div');\r\n    calendarOverview.className = 'control-sidebar-calendar-overview';\r\n    calendarOverviewDate.className = 'control-sidebar-calendar-overview-date';\r\n    calendarMain.className = 'control-sidebar-calendar-main';\r\n    calendarGroup.appendChild(calendarOverview);\r\n    calendarOverview.appendChild(calendarOverviewDate);\r\n    calendarGroup.appendChild(calendarMain);\r\n    calendarMain.innerHTML = 'Calendar will soon be available.';\r\n    calendarMain.style = style = \"display: flex;align-items: center;justify-content: center;\";\r\n\r\n    controlSidebarSummary.addEventListener('click', (e) => {\r\n        controlSidebarContainer.classList.toggle('active');\r\n    })\r\n\r\n    downEvts.forEach(event => {\r\n        window.addEventListener(event, (e) => {\r\n            if (controlSidebarContainer.contains(e.target) || controlSidebarSummary.contains(e.target)) return;\r\n            controlSidebarContainer.classList.remove('active');\r\n        })\r\n    })\r\n\r\n    // Update date & time\r\n    !(() => {\r\n        const pattern = [\" AM\", \" PM\"];\r\n\r\n        function updateTime() {\r\n            const now = new Date();\r\n            const leftToUpdateTime = (60 - now.getSeconds()) * 1000;\r\n            controlSidebarSummaryTime.innerHTML = (now.format(\"hh\") < 13 ? now.format(\"hh:mm\") : new Date(Date.now() - 12 * 1000 * 60 * 60).format(\"hh:mm\")) + (now.format(\"hh\") < 12 ? pattern[0] : pattern[1]);\r\n            setTimeout(updateTime, leftToUpdateTime);\r\n        }\r\n        function updateDate() {\r\n            const now = new Date();\r\n            const leftToUpdateDate = (((24 - now.getHours()) * 60 * 60) - ((60 - now.getMinutes()) * 60) - now.getSeconds()) * 1000;\r\n            controlSidebarSummaryDate.innerHTML = now.format(\"yyyy/MM/dd\");\r\n            calendarOverviewDate.innerHTML = now.toLocaleDateString(void 0, {\r\n                weekday: \"long\",\r\n                month: \"long\",\r\n                day: \"numeric\"\r\n            })\r\n            setTimeout(updateDate, leftToUpdateDate);\r\n        }\r\n\r\n        updateTime();\r\n        updateDate();\r\n    })();\r\n\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].mark('Control Panel')\r\n\r\n    return { panel: controlPanelContainer, sidebar: controlSidebarContainer }\r\n}\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/taskbar/controlPanel.js?\n}")},"./src/os/explorer/taskbar/iconManager.js":
/*!************************************************!*\
  !*** ./src/os/explorer/taskbar/iconManager.js ***!
  \************************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ IconManager)\n/* harmony export */ });\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _core_fallback_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/fallback.js */ \"./src/os/core/fallback.js\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/log.js */ \"./src/os/core/log.js\");\n/* harmony import */ var _core_timer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/timer.js */ \"./src/os/core/timer.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _system_WApplication_browserWindow_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../system/WApplication/browserWindow.js */ \"./src/os/system/WApplication/browserWindow.js\");\n/* harmony import */ var _startMenu_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./startMenu.js */ \"./src/os/explorer/taskbar/startMenu.js\");\n/* harmony import */ var _taskview_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./taskview.js */ \"./src/os/explorer/taskbar/taskview.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__, _system_WApplication_browserWindow_js__WEBPACK_IMPORTED_MODULE_7__, _startMenu_js__WEBPACK_IMPORTED_MODULE_8__, _taskview_js__WEBPACK_IMPORTED_MODULE_9__]);\n([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__, _system_WApplication_browserWindow_js__WEBPACK_IMPORTED_MODULE_7__, _startMenu_js__WEBPACK_IMPORTED_MODULE_8__, _taskview_js__WEBPACK_IMPORTED_MODULE_9__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function IconManager({ taskbarIconsApps, taskbarIconsItems, taskbarIcons }) {\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].group('Icon Manager');\r\n\r\n    const fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.IDBFS)('~EXPLORER');\r\n    const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get('System');\r\n    const WindowManager = _moduleManager_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].get('WindowManager');\r\n    const appRegistry = System.appRegistry;\r\n    const systemItemOptions = {\r\n        start: {\r\n            display: true,\r\n            icon: {\r\n                light: 'C:/Winbows/icons/applications/tools/start.ico',\r\n                dark: 'C:/Winbows/icons/applications/tools/start2.ico'\r\n            },\r\n            handler: _startMenu_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"]\r\n        },\r\n        search: {\r\n            display: false,\r\n            icon: {\r\n                light: 'C:/Winbows/icons/applications/tools/search.ico',\r\n                dark: 'C:/Winbows/icons/applications/tools/search2.ico'\r\n            }\r\n        },\r\n        taskview: {\r\n            display: true,\r\n            icon: {\r\n                light: 'C:/Winbows/icons/applications/tools/taskview.ico',\r\n                dark: 'C:/Winbows/icons/applications/tools/taskview2.ico'\r\n            },\r\n            handler: _taskview_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]\r\n        },\r\n        widgets: {\r\n            display: false,\r\n            icon: 'C:/Winbows/icons/applications/tools/widgets.ico'\r\n        }\r\n    }\r\n    const pinnedIcons = [\r\n        'explorer', 'edge', 'store', 'cmd'\r\n    ]\r\n\r\n    const downEvts = [\"mousedown\", \"touchstart\", \"pointerdown\"];\r\n    const thumbnailContainer = document.createElement(\"div\");\r\n    const thumbnailSetting = {\r\n        maxWidth: 192,\r\n        maxHeight: 108,\r\n        padding: {\r\n            top: 8,\r\n            bottom: 8,\r\n            left: 8,\r\n            right: 8\r\n        }\r\n    }\r\n    let currentThumbnail = {};\r\n    let overThumbnailWindow = false;\r\n    let autoHideThumbnail = true;\r\n\r\n    thumbnailContainer.className = \"thumbnail-container\";\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_5__.viewport.screenElement.appendChild(thumbnailContainer);\r\n\r\n    function createThumbnailWindow(app, id) {\r\n        const thumbnailWindow = document.createElement(\"div\");\r\n        const thumbnailBar = document.createElement(\"div\");\r\n        const thumbnailIcon = document.createElement(\"div\");\r\n        const thumbnailTitle = document.createElement(\"div\");\r\n        const thumbnailView = document.createElement(\"div\");\r\n        const thumbnailCloseButton = document.createElement(\"div\");\r\n\r\n        thumbnailWindow.className = \"thumbnail-window\";\r\n        thumbnailView.className = \"thumbnail-window-view\";\r\n        thumbnailBar.className = \"thumbnail-window-bar\";\r\n        thumbnailIcon.className = \"thumbnail-window-icon\";\r\n        thumbnailTitle.className = \"thumbnail-window-title\";\r\n        thumbnailCloseButton.className = \"thumbnail-window-close-button\";\r\n        thumbnailCloseButton.innerHTML = `<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.3\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M6 18L18 6M6 6l12 12\"></path></svg>`;\r\n\r\n        thumbnailContainer.appendChild(thumbnailWindow);\r\n        thumbnailWindow.appendChild(thumbnailBar);\r\n        thumbnailWindow.appendChild(thumbnailView);\r\n        thumbnailBar.appendChild(thumbnailIcon);\r\n        thumbnailBar.appendChild(thumbnailTitle);\r\n        thumbnailBar.appendChild(thumbnailCloseButton);\r\n\r\n        // Thumbnail info\r\n        if (app.icon.startsWith('blob:')) {\r\n            thumbnailIcon.style.backgroundImage = `url(${app.icon})`;\r\n        } else {\r\n            fs.getFileURL(app.icon).then(url => {\r\n                thumbnailIcon.style.backgroundImage = `url(${url})`;\r\n            })\r\n        }\r\n        thumbnailTitle.innerHTML = app.title;\r\n\r\n        // Thumbnail styles\r\n        thumbnailWindow.style.padding = `${thumbnailSetting.padding.top}px ${thumbnailSetting.padding.right}px ${thumbnailSetting.padding.bottom}px ${thumbnailSetting.padding.left}px`;\r\n        thumbnailWindow.style.maxWidth = `${thumbnailSetting.padding.right + thumbnailSetting.padding.left + thumbnailSetting.maxWidth}px`\r\n        thumbnailView.style.maxWidth = thumbnailSetting.maxWidth + \"px\";\r\n        thumbnailView.style.maxHeight = thumbnailSetting.maxHeight + \"px\";\r\n        thumbnailView.style.width = '999px';\r\n        thumbnailView.style.height = '999px';\r\n\r\n        thumbnailWindow.addEventListener(\"pointerover\", () => {\r\n            overThumbnailWindow = true;\r\n        })\r\n\r\n        thumbnailWindow.addEventListener(\"pointerleave\", () => {\r\n            if (autoHideThumbnail == true) {\r\n                overThumbnailWindow = false;\r\n                setTimeout(() => {\r\n                    hideThumbnailWindow();\r\n                }, 200);\r\n            }\r\n        })\r\n\r\n        thumbnailCloseButton.addEventListener(\"click\", () => {\r\n            currentThumbnail.close(id);\r\n            thumbnailWindow.remove();\r\n            updateThumbnailPosition();\r\n            if (Object.values(currentThumbnail.windows).length == 0) {\r\n                overThumbnailWindow = false;\r\n                hideThumbnailWindow();\r\n            }\r\n        });\r\n\r\n        thumbnailWindow.addEventListener(\"click\", (e) => {\r\n            if (e.target == thumbnailCloseButton || thumbnailCloseButton.contains(e.target)) return;\r\n            currentThumbnail.show(id);\r\n            hideThumbnailWindow(true);\r\n        })\r\n    }\r\n\r\n    function updateThumbnailPosition() {\r\n        if (!currentThumbnail) return;\r\n        let el = currentThumbnail.iconEl;\r\n        let left = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition)(el).x + el.offsetWidth / 2 - thumbnailContainer.offsetWidth / 2;\r\n        if (left < 8) {\r\n            left = 8;\r\n        } else if (left + thumbnailContainer.offsetWidth > _core_viewport_js__WEBPACK_IMPORTED_MODULE_5__.viewport.width - 8) {\r\n            left = _core_viewport_js__WEBPACK_IMPORTED_MODULE_5__.viewport.height - thumbnailContainer.offsetWidth - 8;\r\n        }\r\n        thumbnailContainer.style.left = left + \"px\";\r\n    }\r\n\r\n    function showThumbnailWindow(app) {\r\n        /*\r\n        var ratio = getThumbnailWindowRatio(app.elements.window, true);\r\n        var scale = getThumbnailWindowRatio(app.elements.window).x;\r\n        if (ratio.x < ratio.y) {\r\n            scale = getThumbnailWindowRatio(app.elements.window).y;\r\n        }\r\n        var cloneNode = app.elements.window.cloneNode(true);\r\n        cloneNode.style.position = \"static\";\r\n        cloneNode.style.transform = `scale(${scale})`;\r\n        cloneNode.style.opacity = \"1\";\r\n        thumbnailView.appendChild(cloneNode);\r\n    \r\n        thumbnailView.style.maxWidth = thumbnailSetting.maxWidth + \"px\";\r\n        thumbnailView.style.maxHeight = thumbnailSetting.maxHeight + \"px\";\r\n        thumbnailView.style.width = cloneNode.offsetWidth * scale + \"px\";\r\n        thumbnailView.style.height = cloneNode.offsetHeight * scale + \"px\";\r\n        thumbnailWindow.style.maxWidth = cloneNode.offsetWidth * scale + thumbnailSetting.padding.left + thumbnailSetting.padding.right + \"px\";\r\n        */\r\n        if (!app) return;\r\n\r\n        currentThumbnail = app;\r\n        thumbnailContainer.innerHTML = '';\r\n\r\n        Object.keys(app.windows).forEach(id => {\r\n            createThumbnailWindow(app.windows[id], id);\r\n        })\r\n        updateThumbnailPosition();\r\n\r\n        thumbnailContainer.classList.add('active');\r\n    }\r\n\r\n    function hideThumbnailWindow(force = false) {\r\n        if (overThumbnailWindow == true && force == false) return;\r\n        overThumbnailWindow = false;\r\n        autoHideThumbnail = true;\r\n        thumbnailContainer.classList.remove('active');\r\n        thumbnailContainer.innerHTML = '';\r\n    }\r\n\r\n    downEvts.forEach(event => {\r\n        window.addEventListener(event, (e) => {\r\n            if (!thumbnailContainer.contains(e.target)) {\r\n                hideThumbnailWindow(true);\r\n            }\r\n        })\r\n    })\r\n\r\n    let lastClickedIconId = null;   // For app icons and system icons\r\n    let focusedIconIds = [];        // App icons only\r\n    let activeWindows = [];         // App icons only\r\n    let iconRepository = {};        // AppID => Icon\r\n    let systemIcons = [];\r\n\r\n    class Icon extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.EventEmitter {\r\n        constructor(iconData) {\r\n            super();\r\n\r\n            this.type = iconData.type == 'system' ? 'system' : 'app';\r\n            this.owner = iconData.owner;\r\n            this.windows = {};\r\n            this.status = {\r\n                enabled: iconData.status?.enabled || false, // Indicates that the application corresponding to the icon is running\r\n                active: iconData.status?.active || false,   // Show window once status.active is true\r\n                focused: iconData.status?.focused || false  // Show window on the top once status.focused is true\r\n            }\r\n            this.target = this.type === 'app' ? iconData.target : null;\r\n\r\n            // data-show -> status.active\r\n            // data-focused -> status.focused\r\n            // data-opened -> status.enabled\r\n            // data-openable -> type !== 'system'\r\n\r\n            this.iconEl = document.createElement('div');\r\n            this.iconImageEl = document.createElement('div');\r\n            this.iconEl.className = 'taskbar-icon';\r\n            this.iconImageEl.className = 'taskbar-icon-image';\r\n            this.iconEl.appendChild(this.iconImageEl);\r\n\r\n            if (typeof iconData.icon === 'string') {\r\n                this.iconImageEl.style.backgroundImage = `url(${iconData.icon})`;\r\n            } else {\r\n                this.iconImageEl.style.backgroundImage = `url(${iconData.icon[System.theme.get()]})`;\r\n                System.theme.onChange(theme => {\r\n                    this.iconImageEl.style.backgroundImage = `url(${iconData.icon[theme]})`;\r\n                })\r\n            }\r\n\r\n            if (this.type === 'system') {\r\n                this.iconEl.setAttribute('data-openable', false);\r\n                this.iconEl.addEventListener('click', (e) => {\r\n                    if (this.status.enabled == false) {\r\n                        this.open();\r\n                        lastClickedIconId = null;\r\n                        return;\r\n                    }\r\n                    this.close();\r\n                    lastClickedIconId = null;\r\n                    return;\r\n                })\r\n                taskbarIconsItems.appendChild(this.iconEl);\r\n                systemIcons.push(this);\r\n                return;\r\n            } else {\r\n                this.iconEl.setAttribute('data-openable', true);\r\n                this.iconEl.addEventListener('click', (e) => {\r\n                    if (this.status.enabled == false) {\r\n                        System.shell.execCommand(`\"${this.target}\"`);\r\n                        return;\r\n                    }\r\n\r\n                    if (Object.keys(this.windows).length > 1) {\r\n                        overThumbnailWindow = true;\r\n                        autoHideThumbnail = false;\r\n                        showThumbnailWindow(this);\r\n                        return;\r\n                    }\r\n\r\n                    if (lastClickedIconId == this.owner) {\r\n                        this.iconEl.setAttribute('data-toggle', 'self');\r\n                        if (this.status.active == true) {\r\n                            this.hide(Object.keys(this.windows)[0]);\r\n                        } else {\r\n                            this.show(Object.keys(this.windows)[0]);\r\n                        }\r\n                    } else {\r\n                        this.iconEl.removeAttribute('data-toggle');\r\n                        this.show(Object.keys(this.windows)[0]);\r\n                    }\r\n                    lastClickedIconId = this.owner;\r\n                })\r\n                taskbarIconsApps.appendChild(this.iconEl);\r\n            }\r\n\r\n            this.iconEl.addEventListener(\"pointerover\", () => {\r\n                if (Object.values(this.windows).length == 0) return;\r\n                if (autoHideThumbnail == false) return;\r\n                overThumbnailWindow = true;\r\n                showThumbnailWindow(this);\r\n            })\r\n\r\n            this.iconEl.addEventListener(\"pointerout\", () => {\r\n                if (autoHideThumbnail == false) return;\r\n                overThumbnailWindow = false;\r\n                setTimeout(() => {\r\n                    hideThumbnailWindow();\r\n                }, 200)\r\n            })\r\n\r\n            iconRepository[this.owner] = this;\r\n        }\r\n\r\n        /**\r\n         * @param {BrowserWindow} win \r\n         * @returns \r\n         */\r\n        open(win) {\r\n            if (this.type === 'system') {\r\n                this.status.enabled = true;\r\n                this.focus();\r\n                this.update();\r\n                this._emit('open');\r\n                return;\r\n            }\r\n\r\n            const id = win?.id;\r\n            if (this.windows[id] || win.type === 'sub-window') return;\r\n            this.windows[id] = {\r\n                ...win,\r\n                active: true,\r\n                focused: true,\r\n                owner: this.owner\r\n            }\r\n\r\n            focusedIconIds.push({\r\n                id: id,\r\n                icon: this\r\n            })\r\n\r\n            win.on('focus', () => {\r\n                this.focus(id, true);\r\n            });\r\n            win.on('minimize', () => {\r\n                this.hide(id, true);\r\n            })\r\n            win.on('change:title', e => {\r\n                this.windows[id].title = e.value;\r\n            })\r\n            win.on('change:icon', e => {\r\n                this.windows[id].icon = e.value;\r\n            })\r\n\r\n            win.taskbarIconElement = this.iconEl;\r\n            this.focus(id);\r\n            this.status.active = true;\r\n            this.status.enabled = true;\r\n            this.update();\r\n        }\r\n        close(winId, passive = false) {\r\n            if (!this.status.enabled) return;\r\n            if (this.type === 'system') {\r\n                this.status.active = false;\r\n                this.status.focused = false;\r\n                this.status.enabled = false;\r\n                this.update();\r\n                this._emit('close');\r\n\r\n                if (focusedIconIds.length > 0 && passive == false) {\r\n                    const obj = focusedIconIds[focusedIconIds.length - 1];\r\n                    obj.icon.focus(obj.id);\r\n                }\r\n                return;\r\n            }\r\n\r\n            const win = this.windows[winId];\r\n            if (win) {\r\n                delete this.windows[winId];\r\n                win.close();\r\n                focusedIconIds = focusedIconIds.filter(o => o.id != winId);\r\n            }\r\n\r\n            if (Object.keys(this.windows) == 0) {\r\n                lastClickedIconId = null;\r\n                this.iconEl.removeAttribute('data-toggle');\r\n\r\n                this.status.active = false;\r\n                this.status.focused = false;\r\n                this.status.enabled = false;\r\n                this.update();\r\n                if (!pinnedIcons.find(icon => icon.appId == this.owner)) {\r\n                    this.destroy();\r\n                }\r\n            }\r\n\r\n            if (focusedIconIds.length > 0) {\r\n                const obj = focusedIconIds[focusedIconIds.length - 1];\r\n                obj.icon.focus(obj.id);\r\n            }\r\n        }\r\n        show(winId) {\r\n            const win = this.windows[winId];\r\n            if (win) {\r\n                win.unminimize();\r\n            }\r\n\r\n            Object.values(iconRepository).forEach(icon => {\r\n                if (icon.owner === this.owner) return;\r\n                icon.blur();\r\n            })\r\n\r\n            this.status.active = true;\r\n            this.status.focused = true;\r\n            this.update();\r\n\r\n            this.focus(winId, true);\r\n        }\r\n        hide(winId, passive = false) {\r\n            const win = this.windows[winId];\r\n            if (win && passive == false) {\r\n                win.minimize();\r\n            }\r\n\r\n            this.status.active = false;\r\n            this.status.focused = false;\r\n            this.update();\r\n\r\n            focusedIconIds = focusedIconIds.filter(o => o.id != winId);\r\n            if (focusedIconIds.length > 0) {\r\n                const obj = focusedIconIds[focusedIconIds.length - 1];\r\n                obj.icon.focus(obj.id);\r\n            }\r\n        }\r\n        focus(winId, force = false) {\r\n            const win = this.windows[winId];\r\n            if (win && (force == false ? focusedIconIds.findIndex(o => o.id == winId) !== focusedIconIds.length - 1 : true)) {\r\n                win.focus();\r\n                focusedIconIds = focusedIconIds.filter(o => o.id != winId);\r\n                focusedIconIds.push({\r\n                    id: winId,\r\n                    icon: this\r\n                })\r\n            }\r\n\r\n            Object.values(iconRepository).forEach(icon => {\r\n                if (icon.owner === this.owner) return;\r\n                icon.blur();\r\n            })\r\n\r\n            if (this.type !== 'system') {\r\n                lastClickedIconId = this.owner;\r\n                systemIcons.forEach(icon => {\r\n                    icon.close(null, true);\r\n                })\r\n            }\r\n            this.status.focused = true;\r\n            this.update();\r\n            this._emit('focus');\r\n        }\r\n        blur() {\r\n            this.status.focused = false;\r\n            this.update();\r\n            this._emit('blur');\r\n        }\r\n        update() {\r\n            this.iconEl.setAttribute('data-focused', this.status.focused);\r\n            this.iconEl.setAttribute('data-show', this.status.active);\r\n            this.iconEl.setAttribute('data-opened', this.status.enabled);\r\n        }\r\n        destroy() {\r\n            if (\r\n                this.type !== 'app' ||\r\n                pinnedIcons.find(icon => icon.appId == this.owner)\r\n            ) return;\r\n\r\n            lastClickedIconId = null;\r\n            delete iconRepository[this.owner];\r\n            this.iconEl.classList.add('hide');\r\n        }\r\n    }\r\n\r\n    for (const key of Object.keys(systemItemOptions)) {\r\n        try {\r\n            const icon = systemItemOptions[key].icon;\r\n            if (typeof icon === 'string') {\r\n                systemItemOptions[key].icon = await fs.getFileURL(icon);\r\n            } else {\r\n                for (const theme of Object.keys(icon)) {\r\n                    systemItemOptions[key].icon[theme] = await fs.getFileURL(icon[theme]);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            systemItemOptions[key].icon = _core_fallback_js__WEBPACK_IMPORTED_MODULE_2__.fallbackImage;\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < pinnedIcons.length; i++) {\r\n        const appData = appRegistry.getInfoByName(pinnedIcons[i]);\r\n        pinnedIcons[i] = appRegistry.generateProfile(appData.appName, appData.basePath, appData.entryScript);\r\n        pinnedIcons[i].preloadedIcon = await fs.getFileURL(pinnedIcons[i].icon);\r\n    }\r\n\r\n    async function init() {\r\n        function delay(ms) {\r\n            return new Promise(r => setTimeout(r, ms));\r\n        }\r\n\r\n        const appCount = Object.values(systemItemOptions).filter(item => item.display == true).concat(pinnedIcons).length;\r\n        taskbarIcons.style.width = appCount * 40 + (appCount - 1) * 4 + 'px';\r\n\r\n        // System icons\r\n        for (const key of Object.keys(systemItemOptions)) {\r\n            const config = systemItemOptions[key];\r\n            if (config.display === true) {\r\n                const icon = new Icon({\r\n                    type: 'system',\r\n                    owner: '__EXPLORER__.__TASKBAR__.' + key.toUpperCase(),\r\n                    icon: config.icon\r\n                })\r\n                if (config.handler) {\r\n                    const { open, close } = await config.handler(icon);\r\n                    icon.on('open', open);\r\n                    icon.on('close', close);\r\n                }\r\n                await delay(40);\r\n            }\r\n        }\r\n\r\n        // Pinned app icons\r\n        for (let i = 0; i < pinnedIcons.length; i++) {\r\n            new Icon({\r\n                type: 'app',\r\n                owner: pinnedIcons[i].appId,\r\n                icon: pinnedIcons[i].preloadedIcon,\r\n                target: pinnedIcons[i].entryScript\r\n            });\r\n            await delay(50);\r\n        }\r\n\r\n        taskbarIcons.style.width = 'revert-layer';\r\n    }\r\n\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].groupEnd();\r\n\r\n    return {\r\n        init,\r\n        async getIcon(appData) {\r\n            const appId = appData.appId;\r\n            if (!iconRepository[appId]) {\r\n                iconRepository[appId] = new Icon({\r\n                    type: appData.type,\r\n                    owner: appId,\r\n                    icon: await fs.getFileURL(appData.icon),\r\n                });\r\n            }\r\n            return iconRepository[appId];\r\n        },\r\n        getIconByWinID(winId) {\r\n            const icons = Object.values(iconRepository);\r\n            for (let i = 0; i < icons.length; i++) {\r\n                if (icons[i].windows[winId]) {\r\n                    return icons[i];\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/taskbar/iconManager.js?\n}")},"./src/os/explorer/taskbar/startMenu.js":
/*!**********************************************!*\
  !*** ./src/os/explorer/taskbar/startMenu.js ***!
  \**********************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ StartMenu)\n/* harmony export */ });\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/winui/winui.js */ \"./src/lib/winui/winui.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/lockScreen.js */ \"./src/os/core/lockScreen.js\");\n/* harmony import */ var _core_timer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/timer.js */ \"./src/os/core/timer.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__]);\n_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import i18n from \"../../i18n/i18n.js\";\r\n\r\nfunction StartMenu(icon) {\r\n    const fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.IDBFS)('~EXPLORER');\r\n    const downEvts = [\"mousedown\", \"touchstart\", \"pointerdown\"];\r\n\r\n    const startMenuContainer = document.createElement('div');\r\n    const startMenu = document.createElement('div');\r\n    const startMenuInner = document.createElement('div');\r\n    const startMenuSearch = document.createElement('div');\r\n    const startMenuSearchIcon = document.createElement('div');\r\n    const startMenuSearchInput = document.createElement('input');\r\n    const startMenuApps = document.createElement('div');\r\n    const startMenuPinned = document.createElement('div');\r\n    const startMenuRecommended = document.createElement('div');\r\n    const startMenuFooter = document.createElement('div');\r\n\r\n    startMenuContainer.className = 'start-menu-container';\r\n    startMenu.className = 'start-menu';\r\n    startMenuInner.className = 'start-menu-inner';\r\n    startMenuSearch.className = 'start-menu-search';\r\n    startMenuSearchIcon.className = 'start-menu-search-icon';\r\n    startMenuSearchInput.className = 'start-menu-search-input';\r\n    startMenuApps.className = 'start-menu-apps';\r\n    startMenuPinned.className = 'start-menu-pinned';\r\n    startMenuRecommended.className = 'start-menu-recommended';\r\n    startMenuFooter.className = 'start-menu-footer';\r\n\r\n    startMenuSearchInput.placeholder = 'Search for apps, settings and documents';\r\n\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.viewport.screenElement.appendChild(startMenuContainer);\r\n    startMenuContainer.appendChild(startMenu);\r\n    startMenu.appendChild(startMenuInner);\r\n    startMenuInner.appendChild(startMenuSearch);\r\n    startMenuSearch.appendChild(startMenuSearchIcon);\r\n    startMenuSearch.appendChild(startMenuSearchInput);\r\n    startMenuInner.appendChild(startMenuApps)\r\n    startMenuApps.appendChild(startMenuPinned);\r\n    startMenuApps.appendChild(startMenuRecommended);\r\n    startMenu.appendChild(startMenuFooter);\r\n\r\n    // Pinned\r\n    const pinnedHeader = document.createElement('div');\r\n    const pinnedTitle = document.createElement('div');\r\n    const pinnedExpand = document.createElement('div');\r\n    const pinnedAppsContainer = document.createElement('div');\r\n    const pinnedApps = document.createElement('div');\r\n\r\n    pinnedHeader.className = 'start-menu-pinned-header';\r\n    pinnedTitle.className = 'start-menu-pinned-title';\r\n    pinnedExpand.className = 'start-menu-pinned-expand';\r\n    pinnedAppsContainer.className = 'start-menu-pinned-apps-container';\r\n    pinnedApps.className = 'start-menu-pinned-apps';\r\n\r\n    pinnedTitle.innerHTML = 'Pinned';\r\n    pinnedExpand.innerHTML = 'All apps'\r\n\r\n    startMenuPinned.appendChild(pinnedHeader);\r\n    startMenuPinned.appendChild(pinnedAppsContainer)\r\n    pinnedAppsContainer.appendChild(pinnedApps);\r\n    pinnedHeader.appendChild(pinnedTitle);\r\n    pinnedHeader.appendChild(pinnedExpand);\r\n\r\n    // Footer\r\n    const footerProfile = document.createElement('div');\r\n    const footerPower = document.createElement('div');\r\n    const footerProfileAvatar = document.createElement('div');\r\n    const footerProfileUsername = document.createElement('div');\r\n    const footerPowerButton = document.createElement('div');\r\n\r\n    footerProfile.className = 'start-menu-footer-profile';\r\n    footerPower.className = 'start-menu-footer-power';\r\n    footerProfileAvatar.className = 'start-menu-footer-profile-avatar';\r\n    footerProfileUsername.className = 'start-menu-footer-profile-username';\r\n    footerPowerButton.className = 'start-menu-footer-power-button';\r\n\r\n    fs.getFileURL('C:/Winbows/icons/user.png').then(url => {\r\n        footerProfileAvatar.style.backgroundImage = `url(${url})`;\r\n    })\r\n    footerProfileUsername.innerHTML = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.replaceHTMLTags('Admin');\r\n\r\n    startMenuFooter.appendChild(footerProfile);\r\n    startMenuFooter.appendChild(footerPower);\r\n    footerProfile.appendChild(footerProfileAvatar);\r\n    footerProfile.appendChild(footerProfileUsername);\r\n    footerPower.appendChild(footerPowerButton);\r\n\r\n    const powerMenu = _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].contextMenu([]);\r\n    footerPowerButton.addEventListener('click', (e) => {\r\n        powerMenu.setItems([\r\n            {\r\n                icon: \"lock\",\r\n                text: \"Lock\", //i18n.t('startmenu.menu.lock'),\r\n                action: () => {\r\n                    _core_lockScreen_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].container.classList.add('active');\r\n                }\r\n            }, {\r\n                icon: \"quiet-hours\",\r\n                text: \"Sleep\", //i18n.t('startmenu.menu.sleep'),\r\n                action: () => {\r\n\r\n                },\r\n                disabled: true\r\n            }, {\r\n                icon: \"power-button\",\r\n                text: \"Shut down\", //i18n.t('startmenu.menu.shutdown'),\r\n                action: () => {\r\n\r\n                },\r\n                disabled: true\r\n            }, {\r\n                icon: \"update-restore\",\r\n                text: \"Restart\", //i18n.t('startmenu.menu.restart'),\r\n                action: () => {\r\n                    location.reload();\r\n                }\r\n            }\r\n        ])\r\n        const position = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.getPosition(footerPowerButton);\r\n        powerMenu.container.style.setProperty('--contextmenu-bg', 'var(--winbows-taskbar-bg)');\r\n        powerMenu.container.style.setProperty('--contextmenu-backdrop-filter', 'saturate(3) blur(20px)');\r\n        powerMenu.open(position.x, window.innerHeight - position.y, 'left-bottom');\r\n    })\r\n\r\n    downEvts.forEach(event => {\r\n        window.addEventListener(event, (e) => {\r\n            if (!powerMenu.container.contains(e.target)) {\r\n                powerMenu.close();\r\n            }\r\n        })\r\n    })\r\n\r\n    let show = false;\r\n\r\n    function showStart() {\r\n        startMenuContainer.classList.add('active');\r\n        show = true;\r\n    }\r\n\r\n    function hideStart() {\r\n        if (show == false) return;\r\n        startMenuContainer.classList.remove('active');\r\n        show = false;\r\n    }\r\n\r\n    icon.on('blur', () => {\r\n        icon.close();\r\n    });\r\n\r\n    downEvts.forEach(event => {\r\n        _core_viewport_js__WEBPACK_IMPORTED_MODULE_4__.viewport.root.addEventListener(event, (e) => {\r\n            if (\r\n                startMenuContainer.contains(e.target) ||    // Start menu\r\n                powerMenu.container.contains(e.target) ||   // Contextmenu\r\n                icon.iconEl.contains(e.target)              // Taskbar icon\r\n            ) return;\r\n\r\n            icon.close(null, true);\r\n        })\r\n    })\r\n\r\n    return (async () => {\r\n        // Start Menu\r\n        const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].get('System');\r\n        const appRegistry = System.appRegistry;\r\n        /*\r\n        const pinnedList = [\r\n            {\r\n                name: 'File Explorer',\r\n                app: 'explorer'\r\n            }, {\r\n                name: 'Edge',\r\n                app: 'edge'\r\n            }, {\r\n                name: 'VSCode',\r\n                app: 'code'\r\n            }, {\r\n                name: 'Command',\r\n                app: 'cmd'\r\n            }, {\r\n                name: 'Info',\r\n                app: 'info'\r\n            }, {\r\n                name: 'Task Manager',\r\n                app: 'taskmgr'\r\n            }, {\r\n                name: 'Settings',\r\n                app: 'settings'\r\n            }\r\n        ];*/\r\n\r\n        const pinnedList = [\r\n            {\r\n                name: 'File Explorer',\r\n                app: 'explorer'\r\n            }, {\r\n                name: 'Edge',\r\n                app: 'edge'\r\n            }, {\r\n                name: 'VSCode',\r\n                app: 'code'\r\n            }, {\r\n                name: 'Command',\r\n                app: 'cmd'\r\n            }, {\r\n                name: 'Paint',\r\n                app: 'paint'\r\n            }, {\r\n                name: 'Info',\r\n                app: 'info'\r\n            }, {\r\n                name: 'Task Manager',\r\n                app: 'taskmgr'\r\n            }, {\r\n                name: 'FPS Meter',\r\n                app: 'fpsmeter'\r\n            }, {\r\n                name: 'Photos',\r\n                app: 'photos'\r\n            }, /*{\r\n                name: 'Edge BETA',\r\n                app: 'edgebeta'\r\n            }, */{\r\n                name: 'Network Listener',\r\n                app: 'network-listener'\r\n            }, {\r\n                name: 'JSON Viewer',\r\n                app: 'json-viewer'\r\n            }, {\r\n                name: 'Notepad',\r\n                app: 'notepad'\r\n            }, {\r\n                name: 'Settings',\r\n                app: 'settings'\r\n            }, {\r\n                name: 'Node.js',\r\n                app: 'node'\r\n            }\r\n        ];\r\n\r\n        pinnedList.forEach(pinned => {\r\n            const info = appRegistry.getInfo(pinned.app);\r\n            const item = document.createElement('div');\r\n            const itemIcon = document.createElement('div');\r\n            const itemName = document.createElement('div');\r\n\r\n            item.className = 'start-menu-pinned-app';\r\n            itemIcon.className = 'start-menu-pinned-app-icon';\r\n            itemName.className = 'start-menu-pinned-app-name';\r\n\r\n            itemName.innerHTML = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.replaceHTMLTags(pinned.name);\r\n            fs.getFileURL(info.icon).then(url => {\r\n                itemIcon.style.backgroundImage = `url(${url})`;\r\n            })\r\n            item.addEventListener('click', (e) => {\r\n                icon.close();\r\n                System.shell.execCommand(`${pinned.app}`);\r\n            })\r\n\r\n            pinnedApps.appendChild(item);\r\n            item.appendChild(itemIcon);\r\n            item.appendChild(itemName);\r\n        })\r\n\r\n        _core_timer_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].mark('Start Menu');\r\n\r\n        return {\r\n            open: showStart,\r\n            close: hideStart\r\n        }\r\n    })();\r\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/taskbar/startMenu.js?\n}")},"./src/os/explorer/taskbar/taskbar.js":
/*!********************************************!*\
  !*** ./src/os/explorer/taskbar/taskbar.js ***!
  \********************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/winui/winui.js */ \"./src/lib/winui/winui.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _controlPanel_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./controlPanel.js */ \"./src/os/explorer/taskbar/controlPanel.js\");\n/* harmony import */ var _core_timer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/timer.js */ \"./src/os/core/timer.js\");\n/* harmony import */ var _iconManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./iconManager.js */ \"./src/os/explorer/taskbar/iconManager.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_iconManager_js__WEBPACK_IMPORTED_MODULE_6__]);\n_iconManager_js__WEBPACK_IMPORTED_MODULE_6__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function Taskbar() {\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].group('Taskbar');\r\n\r\n    const { screenElement } = _core_viewport_js__WEBPACK_IMPORTED_MODULE_0__.viewport;\r\n    const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('System');\r\n\r\n    const taskbar = document.createElement('div');\r\n    const taskbarIcons = document.createElement('div');\r\n    const taskbarIconsItems = document.createElement('div');\r\n    const taskbarIconsApps = document.createElement('div');\r\n    const taskbarControls = document.createElement('div');\r\n    const taskbarMenu = _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].contextMenu([\r\n        {\r\n            className: \"taskmgr\",\r\n            icon: \"diagnostic\",\r\n            text: \"Task Manager\",\r\n            action: () => {\r\n                System.shell.execCommand('taskmgr').catch(e => {\r\n                    console.error(e);\r\n                })\r\n            }\r\n        }, {\r\n            type: \"separator\"\r\n        }, {\r\n            className: \"settings\",\r\n            icon: \"settings\",\r\n            text: \"Taskbar Settings\",\r\n            action: () => {\r\n                System.shell.execCommand('settings --path=/personalization/taskbar').catch(e => {\r\n                    console.error(e);\r\n                })\r\n            },\r\n        },\r\n    ])\r\n\r\n    taskbar.className = 'taskbar';\r\n    taskbarIcons.className = 'taskbar-group icons';\r\n    taskbarIconsItems.className = 'taskbar-icons-items';\r\n    taskbarIconsApps.className = 'taskbar-icons-apps';\r\n    taskbarControls.className = 'taskbar-group controls';\r\n\r\n    screenElement.appendChild(taskbar);\r\n    taskbar.appendChild(taskbarIcons);\r\n    taskbarIcons.appendChild(taskbarIconsItems);\r\n    taskbarIcons.appendChild(taskbarIconsApps);\r\n    taskbar.appendChild(taskbarControls);\r\n\r\n    [\"mousedown\", \"touchstart\", \"pointerdown\"].forEach(event => {\r\n        window.addEventListener(event, (e) => {\r\n            if (!taskbarMenu.container.contains(e.target)) {\r\n                taskbarMenu.close();\r\n                taskbarMenu.container.style.right = 'unset';\r\n            }\r\n        })\r\n    })\r\n\r\n    taskbar.appendChild(taskbarIcons);\r\n    taskbar.appendChild(taskbarControls);\r\n    taskbar.addEventListener('contextmenu', (e) => {\r\n        e.preventDefault();\r\n        let x = e.pageX;\r\n        let y = e.pageY;\r\n        if (e.type.startsWith('touch')) {\r\n            const touch = e.touches[0] || e.changedTouches[0];\r\n            x = touch.pageX;\r\n            y = touch.pageY;\r\n        }\r\n        taskbarMenu.container.style.setProperty('--contextmenu-bg', 'var(--winbows-taskbar-bg)');\r\n        taskbarMenu.container.style.setProperty('--contextmenu-backdrop-filter', 'saturate(3) blur(20px)');\r\n        taskbarMenu.open(x, taskbar.offsetHeight + 4, 'left-bottom');\r\n        if ((0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_3__.getPosition)(taskbarMenu.container).x + taskbarMenu.container.offsetWidth > _core_viewport_js__WEBPACK_IMPORTED_MODULE_0__.viewport.width) {\r\n            taskbarMenu.container.style.left = 'unset';\r\n            taskbarMenu.container.style.right = '4px';\r\n        }\r\n    })\r\n\r\n    const controlPanel = (0,_controlPanel_js__WEBPACK_IMPORTED_MODULE_4__.ControlPanel)(taskbarControls);\r\n    const iconManager = await (0,_iconManager_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])({ taskbarIconsApps, taskbarIconsItems, taskbarIcons });\r\n    _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].register('IconManager', iconManager, 'original');\r\n\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].groupEnd();\r\n\r\n    return {\r\n        taskbar, taskbarIcons, taskbarIconsApps, taskbarIconsItems, taskbarControls, controlPanel, iconManager,\r\n        init: iconManager.init\r\n    }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Taskbar);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/taskbar/taskbar.js?\n}")},"./src/os/explorer/taskbar/taskview.js":
/*!*********************************************!*\
  !*** ./src/os/explorer/taskbar/taskview.js ***!
  \*********************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Taskview)\n/* harmony export */ });\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _desktop_init_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../desktop/init.js */ \"./src/os/explorer/desktop/init.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__]);\n_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\n\r\n\r\n\r\nconst controlbarHeight = 32;\r\n\r\nfunction computeTaskLayout(containerWidth, containerHeight, windows) {\r\n    const padding = 20;\r\n    const targetHeight = 300;\r\n    const layouts = [];\r\n    const rows = ~~Math.sqrt(windows.length);\r\n    const cols = Math.ceil(windows.length / rows);\r\n    const maxRowWidth = containerWidth - padding * 2;\r\n    const maxRowHeight = targetHeight;\r\n    const totalHeight = (rows * (maxRowHeight + controlbarHeight) - (rows - 1) * padding);\r\n\r\n    let ySum = containerHeight / 2 - totalHeight / 2;\r\n    if (ySum < padding + controlbarHeight) {\r\n        ySum = padding + controlbarHeight;\r\n    }\r\n\r\n    for (let i = 0; i < rows; i++) {\r\n        const rowLayouts = [];\r\n        for (let j = 0; j < cols; j++) {\r\n            const index = i * cols + j;\r\n            const win = windows[index];\r\n            if (!win) break;\r\n\r\n            let w = win.realWidth;\r\n            let h = win.realHeight;\r\n\r\n            if (h < maxRowHeight) {\r\n                const ratio = maxRowHeight / h;\r\n                w *= ratio;\r\n                h *= ratio;\r\n            }\r\n\r\n            rowLayouts.push({\r\n                w, h, k: w * h\r\n            })\r\n        }\r\n\r\n        let rowWidth = rowLayouts.map(b => b.w).reduce((a, b) => a + b, 0) + (rowLayouts.length - 1) * padding;\r\n        let rowHeight = rowLayouts.reduce((max, o) => Math.max(max, o.h), -Infinity);\r\n\r\n        while (rowWidth > maxRowWidth || rowHeight > maxRowHeight) {\r\n            if (rowHeight > maxRowHeight) {\r\n                const max = rowLayouts.reduce((max, o) => o.h > max.h ? o : max);\r\n                const ratio = maxRowHeight / max.h;\r\n                max.w *= ratio;\r\n                max.h = maxRowHeight;\r\n                max.k *= ratio\r\n            } else if (rowWidth > maxRowWidth) {\r\n                const max = rowLayouts.reduce((max, o) => o.k > max.k ? o : max);\r\n                let ratio = (max.w - (rowWidth - maxRowWidth)) / max.w;\r\n                if (ratio < 0.99) ratio = 0.99;\r\n                max.w *= ratio;\r\n                max.h *= ratio;\r\n                max.k *= Math.pow(ratio, 2);\r\n            }\r\n\r\n            rowWidth = rowLayouts.map(b => b.w).reduce((a, b) => a + b, 0) + (rowLayouts.length - 1) * padding;\r\n            rowHeight = rowLayouts.reduce((max, o) => Math.max(max, o.h), -Infinity);\r\n        }\r\n\r\n        let xSum = containerWidth / 2 - rowWidth / 2;\r\n        for (let j = 0; j < rowLayouts.length; j++) {\r\n            rowLayouts[j].x = xSum;\r\n            rowLayouts[j].y = ySum;\r\n            layouts.push(rowLayouts[j]);\r\n            xSum += rowLayouts[j].w + padding;\r\n        }\r\n        ySum += rowHeight + controlbarHeight + padding;\r\n    }\r\n\r\n    return layouts;\r\n}\r\n\r\nfunction Taskview(icon) {\r\n    const fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.IDBFS)('~EXPLORER');\r\n    const downEvts = [\"mousedown\", \"touchstart\", \"pointerdown\"];\r\n    const windowManager = _moduleManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get('WindowManager');\r\n    const taskviewContainer = document.createElement('div');\r\n    taskviewContainer.className = 'taskview-container';\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.appWrapper.appendChild(taskviewContainer);\r\n\r\n    let show = false;\r\n    let masks = [];\r\n\r\n    function open() {\r\n        show = true;\r\n        taskviewContainer.classList.add('active');\r\n        _desktop_init_js__WEBPACK_IMPORTED_MODULE_3__.desktopEl.style.pointerEvents = 'none';\r\n\r\n        const windows = windowManager.all();\r\n        const mainWindows = windows.filter(w => w.type !== 'sub-window');\r\n        const subWindows = windows.filter(w => w.type === 'sub-window');\r\n\r\n        const layout = computeTaskLayout(_core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.width, _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.height - 48, mainWindows);\r\n        mainWindows.forEach((win, i) => {\r\n            const w = layout[i].w;\r\n            const h = layout[i].h;\r\n            const scale = w / win.realWidth;\r\n            const x = layout[i].x - win.realWidth / 2 + w / 2;\r\n            const y = layout[i].y - win.realHeight / 2 + h / 2;\r\n            const borderRadius = 8 / scale;\r\n\r\n            const mask = document.createElement('div');\r\n            const maskControlbar = document.createElement('div');\r\n            const maskControlbarInfo = document.createElement('div');\r\n            const maskControlbarInfoIcon = document.createElement('div');\r\n            const maskControlbarInfoTitle = document.createElement('div');\r\n            const maskControlbarClose = document.createElement('div');\r\n\r\n            mask.className = 'taskview-mask';\r\n            maskControlbar.className = 'taskview-mask-controlbar';\r\n            maskControlbarInfo.className = 'taskview-mask-controlbar-info';\r\n            maskControlbarInfoIcon.className = 'taskview-mask-controlbar-info-icon';\r\n            maskControlbarInfoTitle.className = 'taskview-mask-controlbar-info-title';\r\n            maskControlbarClose.className = 'taskview-mask-controlbar-close';\r\n\r\n            mask.style.transform = `translate(${layout[i].x}px, ${layout[i].y - controlbarHeight}px)`;\r\n            mask.style.width = w + 'px';\r\n            mask.style.height = h + controlbarHeight + 'px';\r\n            maskControlbar.style.height = controlbarHeight + 'px';\r\n            maskControlbarInfoTitle.innerHTML = win.title;\r\n            maskControlbarInfoIcon.style.backgroundImage = `url(${win.icon})`;\r\n            mask.addEventListener('click', (e) => {\r\n                const IconManager = _moduleManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get('IconManager');\r\n                const icon = IconManager.getIconByWinID(win.id);\r\n                icon?.show?.(win.id);\r\n            })\r\n            maskControlbarClose.addEventListener('click', (e) => {\r\n                const IconManager = _moduleManager_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get('IconManager');\r\n                IconManager.getIconByWinID(win.id)?.close(win.id);\r\n            })\r\n\r\n            mask.appendChild(maskControlbar);\r\n            maskControlbar.appendChild(maskControlbarInfo);\r\n            maskControlbarInfo.appendChild(maskControlbarInfoIcon);\r\n            maskControlbarInfo.appendChild(maskControlbarInfoTitle);\r\n            maskControlbar.appendChild(maskControlbarClose);\r\n            _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.screenElement.appendChild(mask);\r\n            masks.push(mask);\r\n\r\n            mask.classList.add('active');\r\n\r\n            win.browserWindow.window.style.borderRadius = `0px 0px ${borderRadius}px ${borderRadius}px`;\r\n            win.micaContainer.style.borderRadius = `0px 0px ${borderRadius}px ${borderRadius}px`;\r\n            win.container.style.transition = 'none';\r\n            win.animate({\r\n                to: {\r\n                    x,\r\n                    y,\r\n                    scaleX: scale,\r\n                    scaleY: scale,\r\n                    opacity: 1\r\n                },\r\n                profile: 'taskview-in'\r\n            })\r\n            win.focus();\r\n        })\r\n        subWindows.forEach((win) => {\r\n            win.container.style.display = 'none';\r\n        })\r\n    }\r\n\r\n    function close() {\r\n        if (show == false) return;\r\n        show = false;\r\n        taskviewContainer.classList.remove('active');\r\n        _desktop_init_js__WEBPACK_IMPORTED_MODULE_3__.desktopEl.style.pointerEvents = 'auto';\r\n\r\n        const windows = windowManager.all();\r\n        const mainWindows = windows.filter(w => w.type !== 'sub-window');\r\n        const subWindows = windows.filter(w => w.type === 'sub-window');\r\n        while (masks.length) {\r\n            const mask = masks.shift();\r\n            mask.remove();\r\n        }\r\n        mainWindows.forEach((win, i) => {\r\n            win.browserWindow.window.style.borderRadius = win.originalSnapSide ? '0px' : 'revert-layer';\r\n            win.micaContainer.style.borderRadius = win.originalSnapSide ? '0px' : 'revert-layer';\r\n\r\n            win.container.style.transition = 'none';\r\n            if (win.isMinimized) {\r\n                win.minimize(() => {\r\n                    return show == false;\r\n                });\r\n            } else {\r\n                win.animate({\r\n                    to: {\r\n                        x: win.realX,\r\n                        y: win.realY,\r\n                        scaleX: 1,\r\n                        scaleY: 1,\r\n                        opacity: 1\r\n                    },\r\n                    profile: 'taskview-out'\r\n                })\r\n            }\r\n        })\r\n        subWindows.forEach((win) => {\r\n            win.container.style.display = 'revert-layer';\r\n        })\r\n    }\r\n\r\n    icon.on('blur', () => {\r\n        icon.close();\r\n    });\r\n\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.root.addEventListener('click', (e) => {\r\n        if (icon.iconEl.contains(e.target)) return;\r\n\r\n        icon.close(null, true);\r\n    })\r\n\r\n    return {\r\n        open, close\r\n    }\r\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/explorer/taskbar/taskview.js?\n}")},"./src/os/kernel/kernel.js":
/*!*********************************!*\
  !*** ./src/os/kernel/kernel.js ***!
  \*********************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/sysInfo.js */ \"./src/os/core/sysInfo.js\");\n/* harmony import */ var _wrt_core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./wrt/core.js */ \"./src/os/kernel/wrt/core.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _system_system_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../system/system.js */ \"./src/os/system/system.js\");\n/* harmony import */ var _core_crashHandler_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/crashHandler.js */ \"./src/os/core/crashHandler.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/log.js */ \"./src/os/core/log.js\");\n/* harmony import */ var _core_timer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/timer.js */ \"./src/os/core/timer.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/viewport.js */ \"./src/os/core/viewport.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_wrt_core_js__WEBPACK_IMPORTED_MODULE_1__, _system_system_js__WEBPACK_IMPORTED_MODULE_3__]);\n([_wrt_core_js__WEBPACK_IMPORTED_MODULE_1__, _system_system_js__WEBPACK_IMPORTED_MODULE_3__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function main() {\r\n    // TODO: i18n\r\n\r\n    const logger = new _core_log_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"]({\r\n        module: 'Kernel'\r\n    })\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mark('Boot');\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].group('Kernel');\r\n\r\n    // nd => no devtool flag\r\n    const params = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.getJsonFromURL)()\r\n    if (\r\n        !!!params['no-stretch'] &&\r\n        !!!params['no-devtool'] &&\r\n        (_core_sysInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].mode == 'development' || params['dev'])\r\n    ) {\r\n        const Devtool = (await __webpack_require__.e(/*! import() */ \"src_os_devtool_devtool_js\").then(__webpack_require__.bind(__webpack_require__, /*! ../devtool/devtool.js */ \"./src/os/devtool/devtool.js\"))).default;\r\n        const { devtool } = Devtool();\r\n\r\n        // Welcome message\r\n        devtool.console.log(`%cWelcome to Winbows11\\n%cGithub: Siyu1017/winbows11`, 'font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;background-image: linear-gradient(to right, rgba(71, 202, 250, 255), rgba(3, 124, 213, 255));-webkit-text-fill-color: #0000;background-clip: text;-webkit-background-clip: text;font-weight: 500;font-size: 4rem;', 'background:rgb(24,24,24);color:#fff;border-radius:.5rem;padding: .5rem 1rem;font-size: 1rem;display: inline-block;font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;');\r\n    }\r\n\r\n    logger.info('Initializing kernel...');\r\n    logger.debug(`System Information:\\nBuild ID: ${_core_sysInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].buildId}\\nLocal Build ID: ${_core_sysInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].localBuildId}\\nWinbows Version: ${_core_sysInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].version}\\nMode: ${_core_sysInfo_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].mode}`);\r\n\r\n    const IPCManager = new ((() => {\r\n        const pipes = new Map();        // PipeName -> Pipe Server ( Pipe )\r\n        const runtimeIDs = new Map();   // RuntimeID -> IPC Object\r\n\r\n        /**\r\n         * @typedef {Object} PipeData\r\n         * @property {string} type\r\n         * @property {\"server\"|\"client\"|\"unknown\"} from\r\n         * @property {*} data\r\n         * @property {string|null} clientId\r\n         */\r\n\r\n        class PipeClient extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.EventEmitter {\r\n            constructor(server, owner) {\r\n                super();\r\n\r\n                if (!owner) return;\r\n\r\n                this.server = server;\r\n                this.clientId = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.randomID)(12);\r\n                this.closed = false;\r\n                this.owner = owner;\r\n\r\n                // Connect to server\r\n                this.server.connect(this);\r\n            }\r\n\r\n            // ------------ User Methods ------------ //\r\n            /**\r\n             * @param {\"data\"|\"connect\"|\"disconnect\"|\"close\"|\"error\"} evt \r\n             * @param {Function} cb \r\n             */\r\n            on(evt, cb) {\r\n                if (['data', 'connect', 'disconnect', 'close', 'error'].includes(evt)) {\r\n                    super.on(evt, cb);\r\n                } else {\r\n                    throw new Error(`Event name must be one of: data, connect, disconnect, close, or error. Received: ${evt}`);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @param {*} message \r\n             */\r\n            send(message) {\r\n                if (this.closed) throw new Error('Client is closed.');\r\n                this.server._emit('data', {\r\n                    type: 'data',\r\n                    from: 'client',\r\n                    data: message,\r\n                    clientId: this.clientId,\r\n                    owner: this.owner\r\n                })\r\n            }\r\n\r\n            disconnect() {\r\n                this.server._emit('disconnect', {\r\n                    type: 'disconnect',\r\n                    from: 'client',\r\n                    data: this.clientId,\r\n                    clientId: this.clientId,\r\n                    owner: this.owner\r\n                })\r\n            }\r\n\r\n            // ------------ Server Methods ------------ //\r\n            close() {\r\n                this.disconnect();\r\n                this.closed = true;\r\n                this.clientId = null;\r\n                this._emit('close', {\r\n                    type: 'close',\r\n                    from: 'client',\r\n                    data: this.clientId,\r\n                    clientId: this.clientId,\r\n                    owner: this.owner\r\n                })\r\n            }\r\n\r\n            /**\r\n             * @param {PipeData} data \r\n             */\r\n            receive(data) {\r\n                if (!{}.toString.call(data) === '[object Object]') throw new Error('Data must be an object');\r\n\r\n                this._emit('data', {\r\n                    type: 'data',\r\n                    from: data.from === 'server' ? 'server' : data.from === 'client' ? 'client' : 'unknown',\r\n                    data: data.data,\r\n                    clientId: data.clientId ?? null,\r\n                    owner: this.owner\r\n                });\r\n            }\r\n        }\r\n\r\n        // Pipe ( Server side )\r\n        class Pipe extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.EventEmitter {\r\n            constructor(pipeName, owner) {\r\n                super();\r\n\r\n                if (!owner) return;\r\n\r\n                if (pipes.has(pipeName)) {\r\n                    throw new Error(`Pipe ${pipeName} already exists`);\r\n                }\r\n\r\n                this.pipeName = pipeName;\r\n                this.clients = new Map();\r\n                this.owner = owner;\r\n\r\n                pipes.set(pipeName, this);\r\n            }\r\n\r\n            // ------------ Client Methods ------------ //\r\n            /**\r\n             * Note: Use super._emit inside the Pipe class to prevent data filtering\r\n             * @param {string} evt \r\n             * @param {PipeData} dt \r\n             */\r\n            _emit(evt, dt) {\r\n                if (evt === 'data') {\r\n                    if (!dt.clientId || !this.clients.has(dt.clientId)) throw new Error(`Client ${dt.clientId} does not exist.`);\r\n                    super._emit(evt, {\r\n                        type: evt,\r\n                        from: dt.from,\r\n                        data: dt.data,\r\n                        clientId: dt.clientId,\r\n                        owner: dt.owner\r\n                    })\r\n                } else if (evt === 'disconnect') {\r\n                    if (!dt.clientId || !this.clients.has(dt.clientId)) throw new Error(`Client ${dt.clientId} does not exist.`);\r\n                    this.clients.delete(dt.clientId);\r\n                    super._emit(evt, {\r\n                        type: evt,\r\n                        from: dt.from,\r\n                        data: dt.clientId,\r\n                        clientId: dt.clientId,\r\n                        owner: dt.owner\r\n                    })\r\n                } else {\r\n                    super._emit(evt, dt);\r\n                }\r\n            }\r\n\r\n            // ------------ Server Methods ------------ //\r\n            /**\r\n             * Send a message to the specified client. If clientId is not specified, the message is broadcast.\r\n             * @param {*} message \r\n             * @param {string} [targetClientId]\r\n             */\r\n            send(message, targetClientId) {\r\n                if (targetClientId) {\r\n                    const client = this.clients.get(targetClientId);\r\n                    if (!client) throw new Error(`Client ${targetClientId} not found`);\r\n\r\n                    client.receive({\r\n                        type: 'data',\r\n                        from: 'server',\r\n                        data: message,\r\n                        clientId: null,\r\n                        owner: this.owner\r\n                    });\r\n                } else {\r\n                    this.broadcast(message);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Broadcast a message to all connected clients.\r\n             * @param {*} message \r\n             */\r\n            broadcast(message) {\r\n                this.clients.values().forEach(client => {\r\n                    client.receive({\r\n                        type: 'data',\r\n                        from: 'server',\r\n                        data: message,\r\n                        clientId: null,\r\n                        owner: this.owner\r\n                    });\r\n                })\r\n            }\r\n            disconnect(clientId) {\r\n                const client = this.clients.get(clientId);\r\n                if (!client) throw new Error(`Client ${clientId} not found`);\r\n\r\n                client.close();\r\n\r\n                this.clients.delete(clientId);\r\n                super._emit('disconnect', {\r\n                    type: 'disconnect',\r\n                    from: 'server',\r\n                    data: clientId,\r\n                    clientId: null,\r\n                    owner: this.owner\r\n                })\r\n            }\r\n            close() {\r\n                this.clients.values().forEach((client) => {\r\n                    client.close();\r\n                });\r\n                pipes.delete(this.pipeName);\r\n                super._emit('close', {\r\n                    type: 'close',\r\n                    from: 'server',\r\n                    data: null,\r\n                    clientId: null,\r\n                    owner: this.owner\r\n                });\r\n            }\r\n\r\n            // ------------ IPC ------------ //\r\n            connect(client) {\r\n                const clientId = client.clientId;\r\n                this.clients.set(clientId, client);\r\n\r\n                super._emit('connect', {\r\n                    type: 'connect',\r\n                    from: 'server',\r\n                    data: clientId,\r\n                    clientId: null,\r\n                    owner: this.owner\r\n                })\r\n\r\n                return client;\r\n            }\r\n        }\r\n\r\n        // IPC API for WRT\r\n        class IPC {\r\n            constructor(runtimeID) {\r\n                if (runtimeIDs.has(runtimeID)) {\r\n                    const err = new Error(`Runtime ${runtimeID} already exists`);\r\n                    logger.error(err);\r\n                    return (0,_core_crashHandler_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(err);\r\n                }\r\n\r\n                this.runtimeID = runtimeID;\r\n                this.servers = [];\r\n                this.clients = [];\r\n                runtimeIDs.set(runtimeID, this);\r\n            }\r\n\r\n            // Server side\r\n            listen(pipeName) {\r\n                const pipe = new Pipe(pipeName, this.runtimeID);\r\n\r\n                this.servers.push(pipe);\r\n                pipe.on('close', () => {\r\n                    this.servers = this.servers.filter(p => p !== pipe);\r\n                })\r\n\r\n                return pipe;\r\n            }\r\n\r\n            // Client side\r\n            connect(pipeName) {\r\n                const server = pipes.get(pipeName);\r\n                if (!server) throw new Error(`Pipe ${pipeName} not found`);\r\n\r\n                const client = new PipeClient(server, this.runtimeID);\r\n                this.clients.push(client);\r\n                client.on('close', () => {\r\n                    this.clients = this.clients.filter(c => c !== client);\r\n                })\r\n\r\n                return {\r\n                    on: client.on.bind(client),\r\n                    off: client.off.bind(client),\r\n                    send: client.send.bind(client),\r\n                    disconnect: client.disconnect.bind(client)\r\n                }\r\n            }\r\n\r\n            close() {\r\n                this.clients.forEach((client) => {\r\n                    client.close();\r\n                });\r\n                this.servers.forEach((server) => {\r\n                    server.close();\r\n                });\r\n                runtimeIDs.delete(this.runtimeID);\r\n            }\r\n        }\r\n\r\n        // IPC Manager\r\n        return class extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.EventEmitter {\r\n            constructor() {\r\n                super();\r\n            }\r\n\r\n            request(runtimeID) {\r\n                return new IPC(runtimeID)\r\n            }\r\n\r\n            pipes() {\r\n                return pipes.keys();\r\n            }\r\n\r\n            pipe(pipeName) {\r\n                return pipes.get(pipeName);\r\n            }\r\n\r\n            close(runtimeID) {\r\n                runtimeIDs.get(runtimeID)?.close();\r\n            }\r\n        }\r\n    })());\r\n    logger.info(\"IPC Manager loaded\");\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mark('IPC Manager');\r\n\r\n    _moduleManager_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].update('WRT', class extends _wrt_core_js__WEBPACK_IMPORTED_MODULE_1__.WRT {\r\n        constructor(options) {\r\n            super(options);\r\n\r\n            this.mountAPI({\r\n                name: 'IPC',\r\n                api: IPCManager.request(this.runtimeID)\r\n            });\r\n            /*\r\n            this.mountAPI({\r\n                name: 'WRT',\r\n                api: _WRT\r\n            });*/\r\n\r\n            this.process.on('exit', () => {\r\n                IPCManager.close(this.runtimeID);\r\n            })\r\n        }\r\n    }, 'kernel');\r\n\r\n    const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get('WRT');\r\n    const pseudoProcess = new WRT({\r\n        __filename: \"C:/Winbows/System/kernel/kernel.js\",\r\n        code: `//! Kernel pseudo-process\r\n`,\r\n        options: {\r\n            keepAlive: true\r\n        },\r\n        icon: _core_viewport_js__WEBPACK_IMPORTED_MODULE_8__.winbowsIcon\r\n    });\r\n    pseudoProcess.process.title = 'Winbows NT Kernel';\r\n    pseudoProcess.process.on('exit', (code) => {\r\n        (0,_core_crashHandler_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(new Error(`Kernel process exited with code ${code}`));\r\n    })\r\n    pseudoProcess.main();\r\n\r\n    logger.debug(\"WRT context\", pseudoProcess);\r\n    logger.info(\"Kernel pseudo-process created\");\r\n    logger.info(\"Kernel initialized\");\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].mark('Kernel process');\r\n\r\n    (0,_system_system_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (main);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/kernel/kernel.js?\n}")},"./src/os/kernel/wrt/child_process.ts":
/*!********************************************!*\
  !*** ./src/os/kernel/wrt/child_process.ts ***!
  \********************************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   child_process: () => (/* binding */ child_process)\n/* harmony export */ });\n/* harmony import */ var _shared_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/utils */ "./src/shared/utils.ts");\n\nclass ChildProcess extends _shared_utils__WEBPACK_IMPORTED_MODULE_0__.EventEmitter {\n    command;\n    options;\n    constructor(command, options) {\n        super();\n        this.command = command;\n        this.options = options;\n    }\n}\nfunction exec(command, options, callback) {\n    return new ChildProcess(command, options);\n}\nfunction execFile(file, args, options, callback) {\n    return new ChildProcess(file, options);\n}\nfunction fork(modulePath, args, options) {\n    return new ChildProcess(modulePath, options);\n}\nfunction spawn(command, args, options) {\n    return new ChildProcess(command, options);\n}\nconst child_process = { exec, execFile, fork, spawn };\n\n\n//# sourceURL=webpack://winbows11/./src/os/kernel/wrt/child_process.ts?\n}')},"./src/os/kernel/wrt/core.js":
/*!***********************************!*\
  !*** ./src/os/kernel/wrt/core.js ***!
  \***********************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   WRT: () => (/* binding */ WinbowsNodejsRuntime),\n/* harmony export */   tasklist: () => (/* binding */ tasklist)\n/* harmony export */ });\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _process_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./process.js */ \"./src/os/kernel/wrt/process.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _lib_winbows_devtool_dist_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/winbows-devtool/dist/index.js */ \"./src/lib/winbows-devtool/dist/index.js\");\n/* harmony import */ var _core_crashHandler_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/crashHandler.js */ \"./src/os/core/crashHandler.js\");\n/* harmony import */ var _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/sysInfo.js */ \"./src/os/core/sysInfo.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _lib_minimist_js_index_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../lib/minimist.js/index.js */ \"./src/lib/minimist.js/index.js\");\n/* harmony import */ var _core_stat_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/stat.js */ \"./src/os/core/stat.js\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/log.js */ \"./src/os/core/log.js\");\n/* harmony import */ var _child_process_ts__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./child_process.ts */ \"./src/os/kernel/wrt/child_process.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__, _process_js__WEBPACK_IMPORTED_MODULE_1__]);\n([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__, _process_js__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst logger = new _core_log_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\r\n    module: 'WRT'\r\n})\r\nconst fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.IDBFS)(\"~KERNEL\");\r\nconst consoleStyle = 'color:#fff;background:#0067c0;padding:2px 4px;border-radius:4px; font-weight: normal;';\r\nconst tasklist = new ((() => {\r\n    const tasks = new Map();\r\n    return class TaskList extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.EventEmitter {\r\n        constructor() {\r\n            super();\r\n        }\r\n        add(id, task) {\r\n            tasks.set(id, task);\r\n            this._emit('add', { id, task });\r\n        }\r\n        remove(id) {\r\n            tasks.delete(id);\r\n            this._emit('remove', { id });\r\n        }\r\n        update(id, key, value) {\r\n            const task = tasks.get(id);\r\n            if (!task) return;\r\n            task[key] = value;\r\n            this._emit('update', { id, key, value });\r\n        }\r\n        get(id) {\r\n            return tasks.get(id);\r\n        }\r\n        list() {\r\n            return tasks.keys();\r\n        }\r\n    }\r\n})())();\r\n\r\n_core_stat_js__WEBPACK_IMPORTED_MODULE_8__.stat.set('Kernel.WRT.available', true);\r\n\r\nconst WRTEvtEmitter = new _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.EventEmitter();\r\n// const _token = Symbol('token');\r\n\r\nclass WinbowsNodejsRuntime extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.EventEmitter {\r\n    static on(evt, cb) {\r\n        WRTEvtEmitter.on(evt, cb);\r\n    }\r\n    static off(evt, cb) {\r\n        WRTEvtEmitter.off(evt, cb);\r\n    }\r\n\r\n    timeouts = new Map();\r\n    intervals = new Map();\r\n    proxyTimeout = {\r\n        set: (fn, t, ...args) => {\r\n            const id = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.randomID(12);\r\n            const timeoutId = setTimeout(() => {\r\n                this.timeouts.delete(id);\r\n                if (this.alive) {\r\n                    fn(...args);\r\n                }\r\n            }, t);\r\n            this.timeouts.set(id, timeoutId);\r\n            return id;\r\n        },\r\n        clear: (id) => {\r\n            if (this.timeouts.has(id)) {\r\n                clearTimeout(this.timeouts.get(id));\r\n                this.timeouts.delete(id);\r\n            }\r\n        },\r\n        clearAll: () => {\r\n            for (const id of this.timeouts.keys()) {\r\n                this.proxyTimeout.clear(id);\r\n            }\r\n        }\r\n    };\r\n    proxyInterval = {\r\n        set: (fn, t, ...args) => {\r\n            const id = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.randomID(12);\r\n            const intervalId = setInterval(() => {\r\n                if (this.alive) {\r\n                    fn(...args);\r\n                } else {\r\n                    this.proxyInterval.clear(id);\r\n                }\r\n            }, t);\r\n            this.intervals.set(id, intervalId);\r\n            return id;\r\n        },\r\n        clear: (id) => {\r\n            if (this.intervals.has(id)) {\r\n                clearInterval(this.intervals.get(id));\r\n                this.intervals.delete(id);\r\n            }\r\n        },\r\n        clearAll: () => {\r\n            for (const id of this.intervals.keys()) {\r\n                this.proxyInterval.clear(id);\r\n            }\r\n        }\r\n    };\r\n    fsManager = {\r\n        objs: new Map(),\r\n        add: (caller, obj) => {\r\n            if (!this.fsManager.objs.has(caller)) {\r\n                this.fsManager.objs.set(caller, obj);\r\n            }\r\n        },\r\n        remove: (caller) => {\r\n            const fs = this.fsManager.objs.get(caller);\r\n            if (fs) {\r\n                try {\r\n                    fs.quit?.();\r\n                    this.fsManager.objs.delete(caller);\r\n                } catch (e) {\r\n                    (0,_core_crashHandler_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(e);\r\n                }\r\n            }\r\n        },\r\n        removeAll: () => {\r\n            for (const fs of this.fsManager.objs.values()) {\r\n                try {\r\n                    fs.quit?.();\r\n                } catch (e) {\r\n                    (0,_core_crashHandler_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(e);\r\n                }\r\n            }\r\n            this.fsManager.objs.clear();\r\n        },\r\n    }\r\n\r\n    constructor({\r\n        code = '', __filename, __dirname, options = {}, argv = [], type, runInBackground, icon, // token\r\n    }) {\r\n        super();\r\n\r\n        if (_core_stat_js__WEBPACK_IMPORTED_MODULE_8__.stat.get('Kernel.WRT.available') !== true) return false;\r\n\r\n        this.runtimeID = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.randomID(12);\r\n\r\n        if (__filename && typeof __filename === 'string') {\r\n            this.__filename = __filename;\r\n            if (__dirname && fs.exists(_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.toDirFormat(__dirname))) {\r\n                this.__dirname = __dirname;\r\n            } else {\r\n                this.__dirname = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.dirname(__filename);\r\n            }\r\n        } else {\r\n            this.__filename = 'wrt://snippets/anonymous_' + this.runtimeID;\r\n            this.__dirname = 'C:/';\r\n        }\r\n\r\n        if (icon) {\r\n            this.icon = icon;\r\n        }\r\n\r\n        // if (token) {\r\n        //     this[_token] = token;\r\n        // }\r\n\r\n        // Object.defineProperty(this, 'isTrusted', {\r\n        //     get: function () {\r\n        //         return !!this[_token];\r\n        //     }\r\n        // });\r\n\r\n        // Status\r\n        this.alive = true;\r\n\r\n        // External APIs\r\n        this.apis = {};\r\n\r\n        // Options\r\n        this.options = {};\r\n        this.options.allowedConsoleOutput = options?.allowedConsoleOutput ?? _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].mode == 'development' ? true : false;\r\n        this.options.keepAlive = options?.keepAlive ?? false;\r\n\r\n        // Runtime type\r\n        this.type = 'cli';\r\n        this.runInBackground = true;\r\n        const firstLine = code?.split('\\n')?.[0] || '';\r\n        if (firstLine.startsWith('//!')) {\r\n            const headerString = firstLine.slice(3).trim();\r\n            const headers = {};\r\n            headerString.split('&').forEach(header => {\r\n                const i = header.indexOf('=');\r\n                if (i === -1) {\r\n                    headers[header.toUpperCase()] = undefined;\r\n                } else {\r\n                    headers[header.slice(0, i).toUpperCase()] = header.slice(i + 1);\r\n                }\r\n            })\r\n\r\n            if (headers['$RTH']) {\r\n                try {\r\n                    const RTH = JSON.parse(headers['$RTH']);\r\n                    if (RTH.type) {\r\n                        this.type = RTH.type === 'gui' ? 'gui' : 'cli';\r\n                    }\r\n                    if (RTH.runInBackground !== undefined) {\r\n                        this.runInBackground = !RTH.runInBackground == false;\r\n                    }\r\n                } catch (e) {\r\n                    throw new Error(e);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (type && ['cli', 'gui'].includes(type)) {\r\n            this.type = type;\r\n        }\r\n        if (this.type === 'gui') {\r\n            this.runInBackground = false;\r\n        } else if (runInBackground) {\r\n            this.runInBackground = runInBackground != false;\r\n        }\r\n\r\n        this.modules = {};\r\n        this.modules['child_process'] = {\r\n            exports: _child_process_ts__WEBPACK_IMPORTED_MODULE_10__.child_process\r\n        }\r\n\r\n        this.debugConsole = new _lib_winbows_devtool_dist_index_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\r\n        this.proxyConsole = this.options.allowedConsoleOutput == true ? new Proxy(this.debugConsole.console, {\r\n            get: (obj, prop) => {\r\n                if (prop in obj) {\r\n                    return (...args) => {\r\n                        console[prop].apply(console, args);\r\n                        return obj[prop].apply(obj, args);\r\n                    };\r\n                } else if (Object.keys(console).includes(prop)) {\r\n                    console.trace();\r\n                    console.log(console[prop], prop);\r\n                    logger.warn(`console.${String(prop)} is not supported in WRT Environment.`);\r\n                    return () => { };\r\n                };\r\n            },\r\n            set: () => { return false; }\r\n        }) : new Proxy({}, {\r\n            get: (obj, prop) => {\r\n                return () => { }\r\n            }\r\n        });\r\n\r\n        // Shared APIs\r\n        const process = new _process_js__WEBPACK_IMPORTED_MODULE_1__.Process(this.__dirname, this.type);\r\n        process.on('change:title', (e) => {\r\n            tasklist.update(this.runtimeID, 'title', e.value);\r\n            this._emit('change:process.title', { value: e.value, runtimeID: this.runtimeID });\r\n        })\r\n        if (this.type === 'cli') {\r\n            process.title = this.__filename;\r\n        }\r\n\r\n        this.process = new Proxy(process, {\r\n            set: (target, prop, value) => {\r\n                if (prop === 'title') {\r\n                    if (this.title != value) {\r\n                        this.title = value;\r\n                        process.title = value;\r\n                        tasklist.update(this.runtimeID, 'title', value);\r\n                        this._emit('change:process.title', { value, runtimeID: this.runtimeID });\r\n                    }\r\n                } else {\r\n                    target[prop] = value;\r\n                }\r\n                return true;\r\n            }\r\n        });\r\n\r\n        // Title\r\n        this.title = process.title;\r\n\r\n        // argv string[]\r\n        process.argv.push(this.__filename);\r\n        if (argv && Array.isArray(argv)) {\r\n            process.argv = process.argv.concat(argv);\r\n        }\r\n\r\n        // args {key->value}\r\n        process.args = (0,_lib_minimist_js_index_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(process.argv);\r\n        for (const [k, v] of Object.entries(process.args)) {\r\n            if (typeof v === 'string' && /(^\".*\"$)|(^'.*'$)/.test(v)) {\r\n                process.args[k] = v.slice(1, -1);\r\n            }\r\n        }\r\n\r\n        process.on('exit', () => {\r\n            if (this.alive == false) return;\r\n            this.alive = false;\r\n            tasklist.remove(this.runtimeID);\r\n            this.proxyTimeout.clearAll();\r\n            this.proxyInterval.clearAll();\r\n            this.fsManager.removeAll();\r\n            WRTEvtEmitter._emit('close', {\r\n                runtimeID: this.runtimeID,\r\n                __filename: this.__filename,\r\n                __dirname: this.__dirname\r\n            });\r\n            /*\r\n            this[fss].forEach(mfs => {\r\n                mfs.quit?.();\r\n            })\r\n            this[fss].clear();\r\n            this.windows.forEach(window => {\r\n                try {\r\n                    window.close();\r\n                } catch { };\r\n            })\r\n            setTimeout(() => {\r\n                Reflect.ownKeys(this).forEach(key => {\r\n                    this[key] = null;\r\n                })\r\n            }, 1000);*/\r\n        })\r\n\r\n        tasklist.add(this.runtimeID, this);\r\n        WRTEvtEmitter._emit('create', {\r\n            runtimeID: this.runtimeID,\r\n            __filename: this.__filename,\r\n            __dirname: this.__dirname\r\n        });\r\n\r\n        /**\r\n         * @param {*} opts \r\n         * @param {*} argv \r\n         * @returns \r\n         */\r\n        this.main = async () => {\r\n            try {\r\n                /*\r\n                let mC = code;\r\n                if (opts && {}.toString.call(opts) === '[object Object]') {\r\n                    if (opts.__filename && typeof opts.__filename === 'string') {\r\n                        this.__filename = opts.__filename;\r\n                        if (opts.__dirname && fs.exists(fsUtils.toDirFormat(opts.__dirname))) {\r\n                            this.__dirname = opts.__dirname;\r\n                        } else {\r\n                            this.__dirname = fsUtils.dirname(this.__filename);\r\n                        }\r\n                    }\r\n                    if (opts.code) {\r\n                        mC = opts.code;\r\n                    }\r\n                }*/\r\n\r\n                const { evaluation } = await this._run({\r\n                    __dirname: this.__dirname,\r\n                    __filename: this.__filename,\r\n                    code\r\n                });\r\n                if (this.options.keepAlive) {\r\n                    return new Promise(resolve => {\r\n                        this.process.on('exit', (code) => {\r\n                            resolve({\r\n                                exitCode: code || 0,\r\n                                evaluation: evaluation ?? null\r\n                            });\r\n                        });\r\n                    })\r\n                } else {\r\n                    this.process.exit(0);\r\n                    return {\r\n                        exitCode: 0,\r\n                        evaluation: evaluation ?? null\r\n                    };\r\n                }\r\n            } catch (e) {\r\n                console.error(e);\r\n                this.process.exit(1);\r\n                return {\r\n                    exitCode: 1,\r\n                    evaluation: null,\r\n                    error: e instanceof Error ? e.message : String(e)\r\n                };\r\n            }\r\n        };\r\n    }\r\n    mountAPI({ name, api }) {\r\n        if (this.apis[name]) {\r\n            throw new Error(`API ${name} already exists`);\r\n        }\r\n        this.apis[name] = api;\r\n    }\r\n    unmountAPI(name) {\r\n        delete this.apis[name];\r\n    }\r\n\r\n    /**\r\n     * @typedef {Object} requireAsyncIOptions\r\n     * @property {string} modulePath\r\n     * @property {string} [dirname]\r\n     */\r\n\r\n    /**\r\n     * @param {requireAsyncIOptions} param0 \r\n     * @returns \r\n     */\r\n    async requireAsync({ modulePath, dirname = '' }) {\r\n        if (this.modules[modulePath]) return this.modules[modulePath].exports;\r\n\r\n        const resolved = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolve(dirname, modulePath);\r\n        if (this.modules[resolved]) return this.modules[resolved].exports;\r\n\r\n        const __dirname = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.dirname(resolved);\r\n        const code = await fs.readFileAsText(resolved);\r\n        const res = await this._run({\r\n            __dirname: __dirname,\r\n            __filename: resolved,\r\n            code\r\n        });\r\n        this.modules[resolved] = res.ctx.module;\r\n        return this.modules[resolved].exports;\r\n    }\r\n    kill() {\r\n        this.process.kill();\r\n    };\r\n    async _run({\r\n        __dirname, __filename, code\r\n    }) {\r\n        // const token = this[_token];\r\n        // const tokenIsTrusted = this.isTrusted;\r\n        const module = { exports: {} };\r\n        const fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.IDBFS)(__filename, __dirname);\r\n        const ctx = {\r\n            // Private APIs\r\n            fs: fs,\r\n            __filename: __filename,\r\n            __dirname: __dirname,\r\n            process: this.process,\r\n            requireAsync: (modulePath) => this.requireAsync({ modulePath, dirname: __dirname }),\r\n            module: module,\r\n            exports: module.exports,\r\n\r\n            // Shared APIs\r\n            path: _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils,\r\n            runtimeID: this.runtimeID,\r\n            console: this.proxyConsole,\r\n            setTimeout: this.proxyTimeout.set,\r\n            clearTimeout: this.proxyTimeout.clear,\r\n            setInterval: this.proxyInterval.set,\r\n            clearInterval: this.proxyInterval.clear,\r\n\r\n            // token: {\r\n            //     get isTrusted() {\r\n            //         return tokenIsTrusted;\r\n            //     },\r\n            //     get value() {\r\n            //         return token;\r\n            //     }\r\n            // }\r\n        }\r\n\r\n        // System APIs ( e.g. appRegistry, commandRegistry, etc. )\r\n        Object.assign(ctx, this.apis);\r\n\r\n        this.fsManager.add(__filename, fs);\r\n\r\n        const fn = new Function(`return (async function() {\\nconst {${Object.keys(ctx).join(',')}}=this;\\n${code}\\n});\\n//# sourceURL=${__filename}`)();\r\n\r\n        return {\r\n            evaluation: await fn.call(ctx),\r\n            ctx\r\n        }\r\n    }\r\n}\r\n\r\n_moduleManager_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].register('WRT', WinbowsNodejsRuntime, 'original');\r\n\r\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/kernel/wrt/core.js?\n}")},"./src/os/kernel/wrt/process.js":
/*!**************************************!*\
  !*** ./src/os/kernel/wrt/process.js ***!
  \**************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Process: () => (/* binding */ Process),\n/* harmony export */   generateEnv: () => (/* binding */ generateEnv),\n/* harmony export */   processes: () => (/* binding */ processes)\n/* harmony export */ });\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _lib_stdio_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/stdio.js */ \"./src/os/lib/stdio.js\");\n/* harmony import */ var _core_crashHandler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/crashHandler.js */ \"./src/os/core/crashHandler.js\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/log.js */ \"./src/os/core/log.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__]);\n_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\n\r\n\r\n\r\n\r\nconst fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.IDBFS)('~KERNEL');\r\nconst logger = new _core_log_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\r\n    module: 'Process'\r\n})\r\n\r\nfunction createNextTick() {\r\n    const queue = [];\r\n    const textNode = document.createTextNode('');\r\n    const observer = new MutationObserver(() => {\r\n        const toRun = queue.splice(0);\r\n        for (const fn of toRun) fn();\r\n    });\r\n\r\n    observer.observe(textNode, { characterData: true });\r\n\r\n    let toggle = 0;\r\n\r\n    return (cb) => {\r\n        queue.push(cb);\r\n        toggle = 1 - toggle;\r\n        textNode.data = toggle;\r\n    };\r\n}\r\nconst fallbackNextTick = createNextTick();\r\n\r\nfunction generateEnv() {\r\n    return {\r\n        APPDATA: 'C:/User/AppData/Local',\r\n        COMPUTERNAME: 'SUPERCOMPUTER',\r\n        LOCALAPPDATA: 'C:/User/AppData/Local',\r\n        NUMBER_OF_PROCESSORS: `${navigator.hardwareConcurrency}`,\r\n        OS: 'Winbows_NT',\r\n        ProgramFiles: 'C:/Program Files',\r\n        SystemDrive: 'C:',\r\n        SystemRoot: 'C:/Winbows',\r\n        TEMP: 'C:/User/AppData/Local/Temp',\r\n        TMP: 'C:/User/AppData/Local/Temp',\r\n        USERDOMAIN: 'SUPERCOMPUTER',\r\n        USERDOMAIN_ROAMINGPROFILE: 'SUPERCOMPUTER',\r\n        USERNAME: 'ADMIN',\r\n        USERPROFILE: 'C:/User',\r\n        windir: 'C:/Winbows',\r\n    };\r\n}\r\n\r\nconst processes = new ((() => {\r\n    const processes = new Array(8192).fill(null);\r\n    return class TaskList extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.EventEmitter {\r\n        constructor() {\r\n            super();\r\n        }\r\n        add(pid, process) {\r\n            if (processes[pid]) {\r\n                const err = new Error(`Process ${pid} already exists`);\r\n                logger.error(err);\r\n                return (0,_core_crashHandler_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(err);\r\n            }\r\n            processes[pid] = process;\r\n            this._emit('add', { pid, process });\r\n        }\r\n        remove(pid) {\r\n            if (processes[pid]) {\r\n                processes[pid] = null;\r\n                this._emit('remove', { pid });\r\n            }\r\n        }\r\n        update(pid, key, value) {\r\n            const process = processes[pid];\r\n            if (!process) return;\r\n            process[key] = value;\r\n            this._emit('update', { pid, key, value });\r\n        }\r\n        get(pid) {\r\n            return processes[pid];\r\n        }\r\n        list() {\r\n            return [...processes];\r\n        }\r\n        findVacant() {\r\n            return processes.findIndex(p => p == null);\r\n        }\r\n    }\r\n})())();\r\n\r\n/**\r\n * @class \r\n * @param {string} cwd \r\n * @returns \r\n */\r\nfunction Process(cwd, type) {\r\n    const eventEmitter = new _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\r\n    this.on = eventEmitter.on.bind(eventEmitter);\r\n    this.off = eventEmitter.off.bind(eventEmitter);\r\n\r\n    // Process id\r\n    const pid = processes.findVacant();\r\n    if (pid == -1) {\r\n        logger.error(new Error('The maximum number of processes has been reached'));\r\n        throw new Error('The maximum number of processes has been reached');\r\n    }\r\n\r\n    // Initialize\r\n    this.env = new Proxy(generateEnv(), {\r\n        set: (obj, prop, value) => {\r\n            if (typeof prop !== 'string') return false;\r\n            obj[prop] = value === undefined ? undefined : String(value);\r\n            return true;\r\n        }\r\n    });\r\n    this.argv0 = '~wrt';\r\n    this.argv = [this.argv0];\r\n    this.platform = 'win32';\r\n    this.title = \"Winbows Node.js Runtime\";\r\n\r\n    // Internal variables\r\n    let _cwd = cwd || 'C:/';\r\n    let alive = true;\r\n    if (!fs.exists(_cwd)) {\r\n        logger.warn(`The specified working directory ${_cwd} could not be found.`);\r\n        _cwd = () => 'C:/';\r\n    }\r\n\r\n    // Readonly variables\r\n    Object.defineProperty(this, 'pid', {\r\n        value: pid,\r\n        configurable: false,\r\n        writable: false\r\n    })\r\n    Object.defineProperty(this, 'alive', {\r\n        get: () => alive,\r\n        configurable: false,\r\n        enumerable: false\r\n    })\r\n\r\n    // Standard IO\r\n    if (type === 'gui') {\r\n        this.stderr = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].OutputStream();\r\n        this.stdin = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].InputStream();\r\n        this.stdout = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].OutputStream();\r\n    } else if (type === 'cli') {\r\n        this.stderr = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].tty.OutputStream();\r\n        this.stdin = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].tty.InputStream();\r\n        this.stdout = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].tty.OutputStream();\r\n    }\r\n\r\n    /**\r\n     * @param {Function} cb \r\n     * @returns {any}\r\n     */\r\n    this.nextTick = (cb) => {\r\n        return 'queueMicrotask' in window ? queueMicrotask(cb) : fallbackNextTick(cb)\r\n    }\r\n\r\n    /**\r\n     * @returns {any}\r\n     */\r\n    this.kill = () => {\r\n        alive = false;\r\n        processes.remove(pid);\r\n        eventEmitter._emit('exit', 0);\r\n    }\r\n\r\n    /**\r\n     * @param {number} [code]\r\n     * @returns {any}\r\n     */\r\n    this.exit = async (code) => {\r\n        if (eventEmitter._list('beforeExit').length > 0) {\r\n            const pms = [];\r\n            const evt = {\r\n                waitUntil(pm) {\r\n                    if (!pm || typeof pm.then !== 'function') return;\r\n                    pms.push(pm);\r\n                }\r\n            }\r\n            eventEmitter._emit('beforeExit', evt);\r\n            const aPD = Promise.all(pms.map(pm => pm.catch(e => {\r\n                console.error(e);\r\n            })))\r\n            const tP = new Promise(rs => setTimeout(rs, 10000));\r\n\r\n            await Promise.race([aPD.then(), tP]);\r\n        }\r\n        alive = false;\r\n        processes.remove(pid);\r\n        eventEmitter._emit('exit', code || 0);\r\n    }\r\n\r\n    /**\r\n     * @returns {any}\r\n     */\r\n    this.abort = () => {\r\n        alive = false;\r\n        processes.remove(pid);\r\n    }\r\n\r\n    /**\r\n     * @param {string} dir \r\n     * @returns {Error|any}\r\n     */\r\n    this.chdir = (dir) => {\r\n        dir = _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.fsUtils.toDirFormat(dir);\r\n        if (!fs.exists(dir)) {\r\n            throw new Error(`Directory not found : ${dir}`);\r\n        } else {\r\n            _cwd = dir;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @returns {string} Current working directory\r\n     */\r\n    this.cwd = () => {\r\n        return _cwd;\r\n    }\r\n\r\n    processes.add(pid, this);\r\n\r\n    return new Proxy(this, {\r\n        set: (target, prop, value) => {\r\n            if (prop === 'title') {\r\n                if (this.title != value) {\r\n                    this.title = value;\r\n                    eventEmitter._emit('change:title', { value });\r\n                }\r\n            } else {\r\n                target[prop] = value;\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n}\r\n\r\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/kernel/wrt/process.js?\n}")},"./src/os/lib/stdio.js":
/*!*****************************!*\
  !*** ./src/os/lib/stdio.js ***!
  \*****************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/utils.ts */ \"./src/shared/utils.ts\");\n\r\n\r\nconst _flowing = Symbol('flowing');\r\nconst _columns = Symbol('columns');\r\nconst _rows = Symbol('rows');\r\nconst _isRaw = Symbol('isRaw');\r\nconst _closed = Symbol('closed');\r\nconst _paused = Symbol('paused');\r\n\r\nconst tty = {};\r\n\r\n// Input stream\r\nclass InputStream extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.buffer = [];\r\n        this[_closed] = false;\r\n        this[_paused] = true;\r\n    }\r\n\r\n    isPaused() {\r\n        return this[_paused];\r\n    }\r\n\r\n    pause() {\r\n        this[_paused] = true;\r\n    }\r\n\r\n    resume() {\r\n        this[_paused] = false;\r\n    }\r\n\r\n    write(data) {\r\n        if (this[_closed]) return;\r\n        this.buffer.push(data);\r\n\r\n        if (!this[_paused]) {\r\n            this._emit('data', data);\r\n        }\r\n    }\r\n\r\n    read(size) {\r\n        if (this.buffer.length === 0) return null;\r\n        if (size) return this.buffer.splice(0, size).join('');\r\n        return this.buffer.shift();\r\n    }\r\n\r\n    destroy() {\r\n        if (this[_closed]) return;\r\n        this[_closed] = true;\r\n\r\n        this._emit('close');\r\n    }\r\n}\r\n\r\n// Output stream\r\nclass OutputStream extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.EventEmitter {\r\n    constructor() {\r\n        super();\r\n        this.buffer = [];\r\n    }\r\n\r\n    write(data) {\r\n        this.buffer.push(data);\r\n        this._emit('data', data);\r\n    }\r\n\r\n    toString() {\r\n        return this.buffer.join('');\r\n    }\r\n\r\n    read() {\r\n        return this.buffer.shift();\r\n    }\r\n\r\n    clear() {\r\n        this.buffer = [];\r\n        this._emit('clear');\r\n    }\r\n}\r\n\r\ntty.InputStream = class extends InputStream {\r\n    constructor() {\r\n        super();\r\n\r\n        this[_isRaw] = false;\r\n    }\r\n\r\n    get isTTY() {\r\n        return true;\r\n    }\r\n\r\n    get isRaw() {\r\n        return this[_isRaw];\r\n    }\r\n\r\n    setRawMode(mode) {\r\n        this[_isRaw] = !!mode;\r\n    }\r\n}\r\n\r\ntty.OutputStream = class extends OutputStream {\r\n    constructor(columns, rows) {\r\n        super();\r\n\r\n        this[_columns] = columns || Infinity;\r\n        this[_rows] = rows || Infinity;\r\n    }\r\n\r\n    get isTTY() {\r\n        return true;\r\n    }\r\n\r\n    get columns() {\r\n        return this[_columns];\r\n    }\r\n    set columns(value) {\r\n        this[_columns] = value;\r\n        this._emit('resize');\r\n    }\r\n\r\n    get rows() {\r\n        return this[_rows];\r\n    }\r\n    set rows(value) {\r\n        this[_rows] = value;\r\n        this._emit('resize');\r\n    }\r\n\r\n\r\n    clearLine(dir = 0, callback = function () { }) {\r\n        this.write(`\\x1b[${dir == -1 ? '1' : dir == 1 ? '0' : '2'}K`);\r\n        callback();\r\n    }\r\n\r\n    clearScreenDown() {\r\n        this.write('\\x1b[J');\r\n    }\r\n\r\n    cursorTo(x, y) {\r\n        if (y === undefined) {\r\n            this.write(`\\x1b[${x + 1}G`);\r\n        } else {\r\n            this.write(`\\x1b[${y + 1};${x + 1}H`);\r\n        }\r\n    }\r\n\r\n\r\n    moveCursor(dx, dy) {\r\n        if (dx < 0) this.write(`\\x1b[${-dx}D`);\r\n        if (dx > 0) this.write(`\\x1b[${dx}C`);\r\n        if (dy < 0) this.write(`\\x1b[${-dy}A`);\r\n        if (dy > 0) this.write(`\\x1b[${dy}B`);\r\n    }\r\n\r\n    hasColors() {\r\n        return true;\r\n    }\r\n\r\n    getWindowSize() {\r\n        return [this.columns, this.rows];\r\n    }\r\n}\r\n\r\n\r\n// TODO: Readable ( stdin ) and Writable ( stdout, stderr ) Stream, TTY\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    InputStream,\r\n    OutputStream,\r\n    tty: tty\r\n});\n\n//# sourceURL=webpack://winbows11/./src/os/lib/stdio.js?\n}")},"./src/os/moduleManager.js":
/*!*********************************!*\
  !*** ./src/os/moduleManager.js ***!
  \*********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core/log.js */ \"./src/os/core/log.js\");\n\r\n\r\n\r\nconst modules = new Map();\r\nconst logger = new _core_log_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\r\n    module: 'ModuleManager'\r\n})\r\nconst eventEmitter = new _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.EventEmitter();\r\n\r\n// For OS level modules\r\nconst ModuleManager = {\r\n    /**\r\n     * @param {string} name \r\n     * @param {*} module \r\n     * @param {string} tag\r\n     */\r\n    register(name, module, tag) {\r\n        if (!name) {\r\n            const error = new Error(`Failed to register module '${name}': Module name is required`);\r\n            logger.fatal(error);\r\n            throw error;\r\n        }\r\n        if (modules.has(name)) {\r\n            const error = new Error(`Failed to register module '${name}': Module already exists`);\r\n            logger.fatal(error);\r\n            throw error;\r\n        }\r\n        if (!tag || typeof tag != 'string') {\r\n            logger.warn(`Invalid tag '${tag}' provided for module '${name}', using default tag 'original'`);\r\n            tag = 'original';\r\n        }\r\n        modules.set(name, {\r\n            tags: new Map([[tag, module]]),\r\n            order: new Set([tag])\r\n        });\r\n        eventEmitter._emit('register', { name, module, tag });\r\n    },\r\n    /**\r\n     * @param {string} name \r\n     * @param {string} [tag] \r\n     */\r\n    deregister(name, tag) {\r\n        const mod = modules.get(name);\r\n        if (!mod) {\r\n            throw new Error(`Module ${name} not found`);\r\n        }\r\n\r\n        if (tag) {\r\n            mod.tags.delete(tag);\r\n            mod.order.delete(tag);\r\n\r\n            if (mod.size === 0) {\r\n                modules.delete(name);\r\n            }\r\n        } else {\r\n            tag = mod.tags.list();\r\n            modules.delete(name);\r\n        }\r\n        eventEmitter._emit('deregister', { name, tag });\r\n    },\r\n    /**\r\n     * @param {string} name \r\n     * @param {*} module \r\n     * @param {string} tag \r\n     */\r\n    update(name, module, tag) {\r\n        const mod = modules.get(name);\r\n        if (!mod) {\r\n            const error = new Error(`Failed to update module '${name}': Module not found`)\r\n            logger.fatal(error);\r\n            throw error;\r\n        }\r\n\r\n        if (mod.tags.has(tag)) {\r\n            const error = new Error(`Failed to update module '${name}': Module tag '${tag}' already exists`);\r\n            logger.fatal(error);\r\n            throw error;\r\n        } else {\r\n            mod.tags.set(tag, module);\r\n            mod.order.add(tag);\r\n        }\r\n        eventEmitter._emit('update', { name, module, tag });\r\n    },\r\n    list() {\r\n        return modules.keys();\r\n    },\r\n    /**\r\n     * @param {string} name \r\n     * @param {string} [tag]\r\n     * @returns \r\n     */\r\n    get(name, tag) {\r\n        const mod = modules.get(name);\r\n        if (!mod) {\r\n            logger.warn(`Module ${name} not found`);\r\n            return null;\r\n        }\r\n\r\n        if (!tag) {\r\n            const order = [...mod.order.values()];\r\n            return mod.tags.get(order[order.length - 1]);\r\n        } else {\r\n            return mod.tags.get(tag);\r\n        }\r\n    },\r\n    on(evt, cb) {\r\n        eventEmitter.on(evt, cb);\r\n    },\r\n    off(evt, cb) {\r\n        eventEmitter.off(evt, cb);\r\n    }\r\n}\r\n\r\nModuleManager.on('register', (e) => {\r\n    logger.info(`Module '${e.name}' (Tag: ${e.tag}) registered`);\r\n})\r\nModuleManager.on('deregister', (e) => {\r\n    logger.info(`Module '${e.name}' (Tag: ${e.tag}) deregistered`);\r\n})\r\nModuleManager.on('update', (e) => {\r\n    logger.info(`Module '${e.name}' (Tag: ${e.tag}) updated`);\r\n})\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ModuleManager);\n\n//# sourceURL=webpack://winbows11/./src/os/moduleManager.js?\n}")},"./src/os/system/WApplication/WApplication.js":
/*!****************************************************!*\
  !*** ./src/os/system/WApplication/WApplication.js ***!
  \****************************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _browserWindow_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./browserWindow.js */ \"./src/os/system/WApplication/browserWindow.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../appRegistry.js */ \"./src/os/system/appRegistry.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_browserWindow_js__WEBPACK_IMPORTED_MODULE_1__, _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__]);\n([_browserWindow_js__WEBPACK_IMPORTED_MODULE_1__, _shared_fs_js__WEBPACK_IMPORTED_MODULE_3__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\nconst fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_3__.IDBFS)('~SYSTEM');\r\nconst IS_BROWSER_WINDOW = 'SM.WAPPLICATION.IS_BROWSER_WINDOW';\r\nconst _WINDOW_CONFIG = Symbol(\"WINDOW_CONFIG\");\r\nconst _OPTIONS = Symbol('OPTIONS');\r\nconst _TYPE_SELECTED = Symbol(\"TYPE_SELECTED\");\r\nconst _BROWSER_WINDOW_OBJ = Symbol(\"BROWSER_WINDOW_OBJ\");\r\n\r\n/**\r\n * @param {WRT} ctx \r\n * @returns \r\n */\r\nfunction register(ctx) {\r\n    let resolve, reject, mainWindow = null;\r\n\r\n    ctx.__Module_WApplication_Windows__ = [];\r\n    ctx.process.on('exit', () => {\r\n        ctx.__Module_WApplication_Windows__.forEach(win => {\r\n            win.close();\r\n        })\r\n    })\r\n\r\n    const processData = _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInfoByPath(ctx.__filename);\r\n\r\n    const app = {\r\n        _cbs: {},\r\n        on: (evt, cb) => {\r\n            if (!app._cbs[evt]) app._cbs[evt] = [];\r\n            app._cbs[evt].push(cb);\r\n        },\r\n        executeAsync: async () => {\r\n            app._cbs['ready']?.forEach((cb) => cb())\r\n            return new Promise((rs, rj) => {\r\n                resolve = rs;\r\n                reject = rj;\r\n                //browserWindow.setPromise(rs, rj);\r\n            });\r\n        }\r\n    }\r\n\r\n    class ProxyBrowserWindow extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_2__.EventEmitter {\r\n        constructor(windowConfig = {}, options = {}) {\r\n            super();\r\n\r\n            this[_WINDOW_CONFIG] = windowConfig;\r\n            this[_OPTIONS] = options;\r\n            this[_TYPE_SELECTED] = false;\r\n\r\n            this.wrt = null;\r\n            this.browserWindow = null;\r\n        }\r\n\r\n        async expose() {\r\n            if (this[_TYPE_SELECTED] !== false) return;\r\n            this[_TYPE_SELECTED] = true;\r\n\r\n            this[_WINDOW_CONFIG].type = 'sub-window';\r\n            this.browserWindow = new _browserWindow_js__WEBPACK_IMPORTED_MODULE_1__.BrowserWindow(this[_WINDOW_CONFIG]);\r\n            ctx.__Module_WApplication_Windows__.push(this.browserWindow);\r\n\r\n            return {\r\n                browserWindow: this.browserWindow,\r\n                document: new Proxy(document, {\r\n                    get: (target, prop) => {\r\n                        switch (prop) {\r\n                            case 'damn':\r\n                                return 'Damn!';\r\n                            case 'head':\r\n                                return this.browserWindow.shadowRoot;\r\n                            case 'documentElement':\r\n                                return this.browserWindow.window;\r\n                            case 'body':\r\n                                return this.browserWindow.content;\r\n                            case 'write':\r\n                                return () => {\r\n                                    console.error('Missing permissions to access %cdocument.write', 'background: rgb(30,30,30);color:#ededed;border-radius:8px;padding:6px 8px;')\r\n                                };\r\n                            case 'addEventListener':\r\n                                return (event, callback) => { this.browserWindow.shadowRoot.addEventListener(event, callback) };\r\n                            case 'removeEventListener':\r\n                                return (event, callback) => { this.browserWindow.shadowRoot.removeEventListener(event, callback) };\r\n                            case 'querySelector':\r\n                                return (selector) => { return this.browserWindow.shadowRoot.querySelector(selector) };\r\n                            case 'querySelectorAll':\r\n                                return (selector) => { return this.browserWindow.shadowRoot.querySelectorAll(selector) };\r\n                            default:\r\n                                if (target[prop]) {\r\n                                    const value = Reflect.get(target, prop);\r\n                                    return typeof value === 'function' ? value.bind(document) : value;\r\n                                } else {\r\n                                    return undefined;\r\n                                }\r\n                        }\r\n                    }\r\n                })\r\n            };\r\n        }\r\n\r\n        async load(path) {\r\n            if (this[_TYPE_SELECTED] !== false) return;\r\n            this[_TYPE_SELECTED] = true;\r\n\r\n            const filePath = fsUtils.resolve(ctx.__dirname, path);\r\n            const code = await fs.readFileAsText(filePath);\r\n            const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get('WRT');\r\n            const WindowManager = _moduleManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get('WindowManager');\r\n            const IconManager = _moduleManager_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get('IconManager');\r\n            const appName = this[_WINDOW_CONFIG].appName || _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getInfoByPath(ctx.__filename)?.appName;\r\n            const appData = _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].generateProfile(appName || '', ctx.__dirname, ctx.__filename);\r\n            const icon = await IconManager.getIcon(appData);\r\n\r\n            this[_WINDOW_CONFIG].__filename = ctx.__filename;\r\n            if (mainWindow !== null || ctx.process.env[IS_BROWSER_WINDOW] === 'true') {\r\n                this[_WINDOW_CONFIG].type = 'sub-window';\r\n            }\r\n\r\n            // Browser Window\r\n            this.browserWindow = new _browserWindow_js__WEBPACK_IMPORTED_MODULE_1__.BrowserWindow(this[_WINDOW_CONFIG]);\r\n            icon.open(WindowManager.get(this.browserWindow.id));\r\n\r\n            // Runtime\r\n            this.wrt = new WRT({\r\n                code,\r\n                __filename: filePath,\r\n                options: {\r\n                    keepAlive: true,\r\n                    subProcess: true\r\n                },\r\n                type: 'gui',\r\n                argv: ctx.process.argv.slice(2) || [],\r\n                caller: ctx.runtimeID\r\n            })\r\n\r\n            try {\r\n                if (Object.keys(this[_OPTIONS]?.env || {}).length > 0) {\r\n                    this.wrt.process.env = {\r\n                        ...this[_OPTIONS].env,\r\n                        ...this.wrt.process.env\r\n                    }\r\n                }\r\n            } catch (e) { }\r\n\r\n            this.wrt.process.env[IS_BROWSER_WINDOW] = 'true';\r\n\r\n            let self = false;\r\n            this.wrt.on('change:process.title', (e) => {\r\n                if (self == true) return self = false;\r\n                this.browserWindow.changeTitle(e.value);\r\n                self = true;\r\n            })\r\n            this.browserWindow.on('change:title', (e) => {\r\n                this.wrt.process.title = e.value;\r\n                self = true;\r\n            })\r\n\r\n            if (processData?.icon) {\r\n                fs.getFileURL(processData.icon).then(url => {\r\n                    this.browserWindow.changeIcon(url);\r\n                })\r\n            }\r\n\r\n            // Add the window object to the parent WRT\r\n            ctx.__Module_WApplication_Windows__.push(this.browserWindow);\r\n\r\n            //this.browserWindow.taskbarIconElement = taskbar.getIcon(appRegistry.generateProfile('', ctx.__dirname, ctx.__filename));\r\n\r\n            if (mainWindow == null && this[_WINDOW_CONFIG].type !== 'sub-window') {\r\n                mainWindow = this.browserWindow;\r\n            }\r\n\r\n            this.wrt.process.on('exit', () => {\r\n                this.browserWindow.close();\r\n                resolve?.();\r\n            })\r\n\r\n            this.browserWindow.on('close', () => {\r\n                icon.close(this.browserWindow.id);\r\n                if (this.wrt.alive) {\r\n                    this.wrt.process.exit();\r\n                }\r\n            })\r\n\r\n            // Proxy document\r\n            this.wrt.mountAPI({\r\n                name: 'document',\r\n                api: new Proxy(document, {\r\n                    get: (target, prop) => {\r\n                        switch (prop) {\r\n                            case 'damn':\r\n                                return 'Damn!';\r\n                            case 'head':\r\n                                return this.browserWindow.shadowRoot;\r\n                            case 'documentElement':\r\n                                return this.browserWindow.window;\r\n                            case 'body':\r\n                                return this.browserWindow.content;\r\n                            case 'write':\r\n                                return () => {\r\n                                    console.error('Missing permissions to access %cdocument.write', 'background: rgb(30,30,30);color:#ededed;border-radius:8px;padding:6px 8px;')\r\n                                };\r\n                            case 'addEventListener':\r\n                                return (event, callback) => { this.browserWindow.shadowRoot.addEventListener(event, callback) };\r\n                            case 'removeEventListener':\r\n                                return (event, callback) => { this.browserWindow.shadowRoot.removeEventListener(event, callback) };\r\n                            case 'querySelector':\r\n                                return (selector) => { return this.browserWindow.shadowRoot.querySelector(selector) };\r\n                            case 'querySelectorAll':\r\n                                return (selector) => { return this.browserWindow.shadowRoot.querySelectorAll(selector) };\r\n                            default:\r\n                                if (target[prop]) {\r\n                                    const value = Reflect.get(target, prop);\r\n                                    return typeof value === 'function' ? value.bind(document) : value;\r\n                                } else {\r\n                                    return undefined;\r\n                                }\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n\r\n            // browserWindow obj\r\n            this.wrt.mountAPI({\r\n                name: 'browserWindow',\r\n                api: this.browserWindow\r\n            })\r\n\r\n            this.wrt.main();\r\n        }\r\n    }\r\n\r\n    return { app, BrowserWindow: ProxyBrowserWindow };\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({ register });\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/system/WApplication/WApplication.js?\n}")},"./src/os/system/WApplication/browserWindow.js":
/*!*****************************************************!*\
  !*** ./src/os/system/WApplication/browserWindow.js ***!
  \*****************************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BrowserWindow: () => (/* binding */ BrowserWindow),\n/* harmony export */   maxZIndex: () => (/* binding */ maxZIndex)\n/* harmony export */ });\n/* harmony import */ var _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/winui/winui.js */ \"./src/lib/winui/winui.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../appRegistry.js */ \"./src/os/system/appRegistry.js\");\n/* harmony import */ var _core_fallback_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/fallback.js */ \"./src/os/core/fallback.js\");\n/* harmony import */ var _core_crashHandler_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/crashHandler.js */ \"./src/os/core/crashHandler.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _windowManager_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./windowManager.js */ \"./src/os/system/WApplication/windowManager.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_2__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__]);\n([_shared_fs_js__WEBPACK_IMPORTED_MODULE_2__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import i18n from \"../../i18n/i18n.js\";\r\n\r\nconst fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_2__.IDBFS)(\"~SYSTEM\");\r\nconst { appWrapper, screenElement } = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport;\r\nconst snapMargin = 12;\r\n\r\nlet browserWindowPosition = {};\r\nlet maxZIndex = 0;\r\n\r\nconst snapPreview = document.createElement('div');\r\nsnapPreview.className = 'browser-window-snap-preview';\r\nappWrapper.appendChild(snapPreview);\r\n\r\nfunction cubicBezier(p1x, p1y, p2x, p2y) {\r\n    return function (t) {\r\n        const cx = 3 * p1x;\r\n        const bx = 3 * (p2x - p1x) - cx;\r\n        const ax = 1 - cx - bx;\r\n\r\n        const cy = 3 * p1y;\r\n        const by = 3 * (p2y - p1y) - cy;\r\n        const ay = 1 - cy - by;\r\n\r\n        const x = ((ax * t + bx) * t + cx) * t;\r\n        const y = ((ay * t + by) * t + cy) * t;\r\n\r\n        return y;\r\n    };\r\n}\r\n\r\nfunction derivative(f, epsilon = 1e-5) {\r\n    return t => (f(t + epsilon) - f(t)) / epsilon;\r\n}\r\n\r\nfunction invertEasingNewton(easeFn, derivativeFn, value, guess = 0.5, iterations = 5) {\r\n    let t = guess;\r\n    if (!derivativeFn) {\r\n        derivativeFn = derivative(easeFn);\r\n    }\r\n    for (let i = 0; i < iterations; i++) {\r\n        const y = easeFn(t) - value;\r\n        const dy = derivativeFn(t);\r\n        t -= y / dy;\r\n        if (t < 0) t = 0;\r\n        if (t > 1) t = 1;\r\n    }\r\n    return t;\r\n}\r\n\r\nconst events = {\r\n    \"start\": [\"mousedown\", \"touchstart\", \"pointerdown\"],\r\n    \"move\": [\"mousemove\", \"touchmove\", \"pointermove\"],\r\n    \"end\": [\"mouseup\", \"touchend\", \"pointerup\", \"blur\"]\r\n}\r\nconst animateProfiles = {\r\n    'window-show': {\r\n        func: cubicBezier(.04, .73, .16, 1),\r\n        duration: 150\r\n    },\r\n    'window-hide': {\r\n        func: cubicBezier(.77, -0.02, .98, .59),\r\n        duration: 150\r\n    },\r\n    'window-open': {\r\n        func: cubicBezier(.42, 0, .58, 1),\r\n        duration: 100\r\n    },\r\n    'window-close': {\r\n        func: cubicBezier(.42, 0, .58, 1),\r\n        duration: 100\r\n    },\r\n    'taskview-in': {\r\n        func: cubicBezier(0, .87, .21, 1),\r\n        duration: 200\r\n    },\r\n    'taskview-out': {\r\n        func: cubicBezier(.37, 1.03, 1, 1),\r\n        duration: 150\r\n    }\r\n};\r\n\r\nconst icons = {\r\n    close: 'C:/Winbows/icons/controls/close.png',\r\n    minimize: 'C:/Winbows/icons/controls/minimize.png',\r\n    maxmin: 'C:/Winbows/icons/controls/maxmin.png',\r\n    maximize: 'C:/Winbows/icons/controls/maximize.png'\r\n};\r\n\r\nconst iconKeys = Object.keys(icons)\r\nfor (let i = 0; i < iconKeys.length; i++) {\r\n    const key = iconKeys[i];\r\n    try {\r\n        icons[key] = await fs.getFileURL(icons[key]);\r\n    } catch (e) {\r\n        icons[key] = _core_fallback_js__WEBPACK_IMPORTED_MODULE_5__.fallbackImage;\r\n        console.error(e);\r\n    }\r\n}\r\n\r\nconst defaultStyle = await (async () => {\r\n    try {\r\n        return await fs.getFileURL('C:/Winbows/System/styles/app.css');\r\n    } catch (e) {\r\n        (0,_core_crashHandler_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(e);\r\n    }\r\n})();\r\n\r\nconst resizerConfig = {\r\n    'browser-window-resizer-top': 'vertical',\r\n    'browser-window-resizer-bottom': 'vertical',\r\n    'browser-window-resizer-left': 'horizontal',\r\n    'browser-window-resizer-right': 'horizontal',\r\n    'browser-window-resizer-right-top': 'both',\r\n    'browser-window-resizer-right-bottom': 'both',\r\n    'browser-window-resizer-left-bottom': 'both',\r\n    'browser-window-resizer-left-top': 'both'\r\n}\r\n\r\nfunction decompose2DMatrix(matrixStr) {\r\n    const match = matrixStr.match(/matrix\\(([^)]+)\\)/);\r\n    if (!match) throw new Error(\"Not a valid 2D matrix\");\r\n\r\n    const [a, b, c, d, e, f] = match[1].split(',').map(parseFloat);\r\n\r\n    const scaleX = Math.sqrt(a * a + b * b);\r\n    const scaleY = Math.sqrt(c * c + d * d);\r\n\r\n    const rotation = Math.atan2(b, a) * (180 / Math.PI);\r\n\r\n    const skewX = Math.atan2(a * c + b * d, scaleX * scaleX) * (180 / Math.PI);\r\n\r\n    return {\r\n        translateX: e,\r\n        translateY: f,\r\n        scaleX,\r\n        scaleY,\r\n        rotation,\r\n        skewX\r\n    };\r\n}\r\n\r\nfunction getSnapSide(x, y) {\r\n    let side = '';\r\n    if (y >= appWrapper.offsetHeight - snapMargin) {\r\n        side += 'b';\r\n    } else if (y <= snapMargin) {\r\n        side += 't';\r\n    }\r\n    if (x >= appWrapper.offsetWidth - snapMargin) {\r\n        side += 'r';\r\n    } else if (x <= snapMargin) {\r\n        side += 'l';\r\n    }\r\n    if (side.length == 1) {\r\n        side += 'f';\r\n    }\r\n    if (side.includes('b') && side.includes('f')) {\r\n        return '';\r\n    }\r\n    return side;\r\n}\r\n\r\nfunction getSnapSize(side) {\r\n    var width = 'var(--viewport-width)';\r\n    var height = 'calc(var(--viewport-height) - var(--taskbar-height))';\r\n    if (side.includes('l') || side.includes('r')) {\r\n        width = 'calc(var(--viewport-width) / 2)';\r\n    }\r\n    if ((side.includes('t') && !side.includes('f')) || side.includes('b')) {\r\n        height = 'calc((var(--viewport-height) - var(--taskbar-height)) / 2)';\r\n    }\r\n    return {\r\n        width: width,\r\n        height: height\r\n    }\r\n}\r\n\r\nfunction getSnapSizeNumber(side) {\r\n    var width = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width;\r\n    var height = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - 48;\r\n    if (side.includes('l') || side.includes('r')) {\r\n        width /= 2;\r\n    }\r\n    if ((side.includes('t') && !side.includes('f')) || side.includes('b')) {\r\n        height /= 2;\r\n    }\r\n    return { width, height };\r\n}\r\n\r\nfunction getSnapPosition(side) {\r\n    var left = '0';\r\n    var top = '0';\r\n    if (side.includes('r')) {\r\n        left = 'calc(var(--viewport-width) / 2)';\r\n    }\r\n    if (side.includes('b')) {\r\n        top = 'calc((var(--viewport-height) - var(--taskbar-height)) / 2)';\r\n    }\r\n    return {\r\n        left: left,\r\n        top: top\r\n    }\r\n}\r\n\r\nfunction getSnapPositionNum(side) {\r\n    var left = 0;\r\n    var top = 0;\r\n    if (side.includes('r')) {\r\n        left = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width / 2;\r\n    }\r\n    if (side.includes('b')) {\r\n        top = (_core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - 48) / 2;\r\n    }\r\n    return {\r\n        left: left,\r\n        top: top\r\n    }\r\n}\r\n\r\nfunction getSnapPreviewSize(side) {\r\n    var width = appWrapper.offsetWidth - snapMargin * 2;\r\n    var height = appWrapper.offsetHeight - snapMargin * 2;\r\n    if (side.includes('l') || side.includes('r')) {\r\n        width = appWrapper.offsetWidth / 2 - snapMargin * 2;\r\n    }\r\n    if ((side.includes('t') && !side.includes('f')) || side.includes('b')) {\r\n        height = appWrapper.offsetHeight / 2 - snapMargin * 2;\r\n    }\r\n    return {\r\n        width: width,\r\n        height: height\r\n    }\r\n}\r\n\r\nfunction getSnapPreviewPosition(side) {\r\n    var left = snapMargin;\r\n    var top = snapMargin;\r\n    if (side.includes('r')) {\r\n        left = appWrapper.offsetWidth / 2 + snapMargin;\r\n    }\r\n    if (side.includes('b')) {\r\n        top = appWrapper.offsetHeight / 2 + snapMargin;\r\n    }\r\n    return {\r\n        left: left,\r\n        top: top\r\n    }\r\n}\r\n\r\nclass BrowserWindow extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.EventEmitter {\r\n    constructor(options = {}) {\r\n        super();\r\n\r\n        this.id = 'window_' + _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.randomID(24);\r\n\r\n        // Status\r\n        this.isMaximized = false;\r\n        this.isMinimized = false;\r\n        this.immovableElements = [];\r\n        this.originalSnapSide = '';\r\n        this.originalPosition = {};\r\n        this.pointerDown = false;\r\n        this.pointerMoved = false;\r\n        this.pointerPosition = [];\r\n        this.snapSide = '';\r\n        this.showSnapPreview = false;\r\n\r\n        // Elements\r\n        this.container = document.createElement('div');\r\n        this.micaContainer = document.createElement('div');\r\n        this.micaElement = document.createElement('div');\r\n        this.windowElement = document.createElement('div');\r\n        this.resizerContainer = document.createElement('div');\r\n        this.windowContent = document.createElement('div');\r\n        this.shadowRoot = this.windowContent.attachShadow({ mode: 'open' });\r\n\r\n        // Toolbar\r\n        this.toolbarInfo = document.createElement('div');\r\n        this.toolbarIcon = document.createElement('div');\r\n        this.toolbarTitle = document.createElement('div');\r\n        this.toolbarButtons = document.createElement('div');\r\n        this.minimizeButton = document.createElement('div');\r\n        this.minimizeImage = document.createElement('div');\r\n        this.maximizeButton = document.createElement('div');\r\n        this.maximizeImage = document.createElement('div');\r\n        this.closeButton = document.createElement('div');\r\n        this.closeImage = document.createElement('div');\r\n\r\n        // Browser Window\r\n        this.browserWindow = {\r\n            window: document.createElement('div'),\r\n            toolbar: document.createElement('div'),\r\n            content: document.createElement('div')\r\n        }\r\n        this.taskbarIconElement = document.createElement('div');\r\n\r\n        // Options\r\n        this.resizable = options.resizable ?? true;\r\n        this.minimizable = options.minimizable ?? true;\r\n        this.maximizable = options.maximizable ?? true;\r\n        this.closable = options.closable ?? true;\r\n        this.snappable = options.snappable ?? true;\r\n        this.fullscreenable = options.fullscreenable ?? true;\r\n        this.mica = options.mica ?? false;\r\n        this.showOnTop = options.showOnTop ?? false;\r\n        this.theme = options.theme ?? 'light';\r\n\r\n        this.minWidth = options.minWidth ?? 300;\r\n        this.minHeight = options.minHeight ?? 180;\r\n        this.width = options.width ?? 800;\r\n        this.height = options.height ?? 600;\r\n        this.realWidth = this.width;\r\n        this.realHeight = this.height;\r\n\r\n        if (this.realWidth < this.minWidth) {\r\n            this.realWidth = this.minWidth;\r\n        }\r\n        if (this.realHeight < this.minHeight) {\r\n            this.realHeight = this.minHeight;\r\n        }\r\n\r\n        this.x = (options.x == 'center' || !options.x) ? _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width / 2 - this.realWidth / 2 : options.x;\r\n        this.y = (options.y == 'center' || !options.y) ? _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height / 2 - this.realHeight / 2 : options.y;\r\n        this.realX = this.x;\r\n        this.realY = this.y;\r\n\r\n        this.icon = options.icon ?? _appRegistry_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].getIcon('');\r\n        this.title = options.title ?? 'App';\r\n        this.type = options.type === 'sub-window' ? options.type : 'main-window';\r\n\r\n        if (this.type === 'sub-window') {\r\n            this.fullscreenable = false;\r\n            this.maximizable = false;\r\n            this.minimizable = false;\r\n            this.snappable = false;\r\n        }\r\n\r\n        if (!options.x && !options.y && options.__filename) {\r\n            if (!browserWindowPosition[options.__filename]) {\r\n                browserWindowPosition[options.__filename] = [this.x, this.y];\r\n            } else {\r\n                browserWindowPosition[options.__filename][0] += 8;\r\n                browserWindowPosition[options.__filename][1] += 8;\r\n            }\r\n\r\n            if (browserWindowPosition[options.__filename][0] > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width) {\r\n                browserWindowPosition[options.__filename][0] -= _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width;\r\n            }\r\n            if (browserWindowPosition[options.__filename][1] > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - 48) {\r\n                browserWindowPosition[options.__filename][1] -= _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height + 48;\r\n            }\r\n\r\n            // Restore previous position\r\n            this.x = browserWindowPosition[options.__filename][0];\r\n            this.y = browserWindowPosition[options.__filename][1];\r\n            this.realX = this.x;\r\n            this.realY = this.y;\r\n        }\r\n\r\n        // Container\r\n        this.container.className = 'browser-window-container';\r\n        this.micaContainer.className = 'browser-window-mica-container';\r\n        this.micaElement.className = 'browser-window-mica';\r\n        this.windowElement.className = 'broser-window';\r\n        this.resizerContainer.className = 'browser-window-resizers';\r\n        this.windowContent.className = 'browser-window-content';\r\n\r\n        maxZIndex++;\r\n        this.container.style.zIndex = maxZIndex;\r\n        this.container.style.transition = 'none';\r\n        this.container.style.transform = `translate(${this.realX}px,${this.realY}px)`;\r\n\r\n        this.container.appendChild(this.micaContainer);\r\n        this.micaContainer.appendChild(this.micaElement);\r\n        this.container.appendChild(this.windowElement);\r\n        this.windowElement.appendChild(this.resizerContainer);\r\n        this.windowElement.appendChild(this.windowContent);\r\n\r\n        // Inside Shadow Root\r\n        this.browserWindow.window.className = 'window';\r\n        this.browserWindow.toolbar.className = 'window-toolbar';\r\n        this.browserWindow.content.className = 'window-content';\r\n\r\n        this.shadowRoot.appendChild(this.browserWindow.window);\r\n        this.browserWindow.window.appendChild(this.browserWindow.toolbar);\r\n        this.browserWindow.window.appendChild(this.browserWindow.content);\r\n\r\n        if (this.showOnTop == true) {\r\n            screenElement.appendChild(this.container);\r\n        } else {\r\n            appWrapper.appendChild(this.container);\r\n        }\r\n\r\n        // Animation Data\r\n        this.animationData = {\r\n            from: {\r\n                x: this.x,\r\n                y: this.y,\r\n                scaleX: .9,\r\n                scaleY: .9,\r\n                opacity: 0,\r\n                ts: Date.now()\r\n            },\r\n            to: {\r\n                x: this.x,\r\n                y: this.y,\r\n                scaleX: 1,\r\n                scaleY: 1,\r\n                opacity: 1,\r\n                ts: Date.now() + 100\r\n            },\r\n            isRunning: false,\r\n            stat: {\r\n                t: 0,\r\n                x: 0\r\n            },\r\n            profile: {\r\n                func: cubicBezier(.42, 0, .58, 1),\r\n                duration: 100\r\n            }\r\n        };\r\n\r\n        // Load style \r\n        const style = document.createElement('link');\r\n        style.rel = 'stylesheet';\r\n        style.type = 'text/css';\r\n        style.href = defaultStyle;\r\n        this.shadowRoot.appendChild(style);\r\n\r\n        // Mica Effect\r\n        if (this.mica == true) {\r\n            const observer = new ResizeObserver(this.updateMica);\r\n            observer.observe(this.container);\r\n            window.addEventListener('resize', this.updateMica);\r\n\r\n            this.container.classList.add('mica');\r\n        }\r\n\r\n        // Resizers\r\n        if (this.resizable == true) {\r\n            // Resizers\r\n            Object.keys(resizerConfig).forEach(key => {\r\n                const allowed = resizerConfig[key];\r\n                const resizer = document.createElement('div');\r\n                resizer.className = key;\r\n\r\n                let pointerDown = false;\r\n                let pointerPosition = {};\r\n                let originalPosition = {};\r\n                let originalSize = {};\r\n\r\n                const updateSizeAndData = (e) => {\r\n                    const width = originalSize.width;\r\n                    const height = originalSize.height;\r\n                    const boundary = 6;\r\n                    let position = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPointerPosition(e);\r\n\r\n                    if (position.x + boundary > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width) position.x = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width - boundary;\r\n                    if (position.x < boundary) position.x = boundary;\r\n                    if (position.y + boundary > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height) position.y = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - boundary;\r\n                    if (position.y < boundary) position.y = boundary;\r\n\r\n                    let diffX = position.x - pointerPosition.x;\r\n                    let diffY = position.y - pointerPosition.y;\r\n\r\n                    if (allowed == 'vertical') {\r\n                        diffX = 0;\r\n                    } else if (allowed == 'horizontal') {\r\n                        diffY = 0;\r\n                    }\r\n\r\n                    let translateX = originalPosition.x;\r\n                    let translateY = originalPosition.y;\r\n\r\n                    if (key.search('top') > -1) {\r\n                        this.height = height - diffY;\r\n                    } else if (key.search('bottom') > -1) {\r\n                        this.height = height + diffY;\r\n                    }\r\n\r\n                    if (key.search('left') > -1) {\r\n                        this.width = width - diffX;\r\n                    } else if (key.search('right') > -1) {\r\n                        this.width = width + diffX;\r\n                    }\r\n\r\n                    this.realWidth = this.width;\r\n                    this.realHeight = this.height;\r\n                    if (this.realWidth < this.minWidth) {\r\n                        diffX = originalPosition.x + (width - this.minWidth);\r\n                        this.realWidth = this.minWidth;\r\n                    }\r\n                    if (this.realHeight < this.minHeight) {\r\n                        diffY = originalPosition.y + (height - this.minHeight);\r\n                        this.realHeight = this.minHeight;\r\n                    }\r\n                    this.browserWindow.window.style.width = this.realWidth + 'px';\r\n                    this.browserWindow.window.style.height = this.realHeight + 'px';\r\n\r\n                    if (key.search('top') > -1) {\r\n                        if (this.height >= this.minHeight) {\r\n                            translateY += diffY;\r\n                        } else {\r\n                            translateY = diffY;\r\n                        }\r\n                    }\r\n                    if (key.search('left') > -1) {\r\n                        if (this.width >= this.minWidth) {\r\n                            translateX += diffX;\r\n                        } else {\r\n                            translateX = diffX;\r\n                        }\r\n                    }\r\n\r\n                    /*\r\n                    // For vertical resize\r\n                    if (key.search('top') > -1) {\r\n                        // Fixate bottom\r\n                        translateY += diffY;\r\n                        this.browserWindow.window.style.height = height - diffY + 'px';\r\n                        this.height = height - diffY;\r\n                    } else if (key.search('bottom') > -1) {\r\n                        // Fixate top\r\n                        this.browserWindow.window.style.height = height + diffY + 'px';\r\n                        this.height = height + diffY;\r\n                    }\r\n\r\n                    // For horizontal resize\r\n                    if (key.search('left') > -1) {\r\n                        // Fixate right\r\n                        translateX += diffX;\r\n                        this.browserWindow.window.style.width = width - diffX + 'px';\r\n                        this.width = width - diffX;\r\n                    } else {\r\n                        // Fixate left\r\n                        this.browserWindow.window.style.width = width + diffX + 'px';\r\n                        this.width = width + diffX;\r\n                    }*/\r\n\r\n                    this.x = translateX;\r\n                    this.y = translateY;\r\n                    this.realX = this.x;\r\n                    this.realY = this.y;\r\n\r\n                    this.container.style.transition = 'none';\r\n                    this.container.style.transform = `translate(${this.realX}px,${this.realY}px)`;\r\n                }\r\n\r\n                const handleStartResizing = (e) => {\r\n                    if (this.isMaximized == true) return;\r\n                    pointerPosition = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPointerPosition(e);\r\n                    originalPosition = {\r\n                        x: this.realX,\r\n                        y: this.realY\r\n                    }\r\n                    originalSize = {\r\n                        width: this.realWidth,\r\n                        height: this.realHeight\r\n                    }\r\n                    appWrapper.classList.add('moving');\r\n                    pointerDown = true;\r\n                    if (this.mica == true) {\r\n                        this.updateMica();\r\n                    }\r\n                }\r\n\r\n                const handleMoveResizing = (e) => {\r\n                    if (pointerDown == true) {\r\n                        try {\r\n                            document.getSelection().removeAllRanges();\r\n                        } catch (e) { };\r\n                        updateSizeAndData(e);\r\n                        if (this.mica == true) {\r\n                            this.updateMica();\r\n                        }\r\n                    }\r\n                }\r\n\r\n                const handleEndResizing = (e) => {\r\n                    if (pointerDown == false) return;\r\n                    updateSizeAndData(e);\r\n                    pointerDown = false;\r\n                    appWrapper.classList.remove('moving');\r\n                    if (this.mica == true) {\r\n                        this.updateMica();\r\n                    }\r\n                }\r\n\r\n                events.start.forEach(event => {\r\n                    resizer.addEventListener(event, handleStartResizing);\r\n                })\r\n                events.move.forEach(event => {\r\n                    window.addEventListener(event, handleMoveResizing);\r\n                })\r\n                events.end.forEach(event => {\r\n                    window.addEventListener(event, handleEndResizing);\r\n                })\r\n\r\n                this.resizerContainer.appendChild(resizer);\r\n            })\r\n        } else {\r\n            this.resizerContainer.remove();\r\n        }\r\n\r\n        // Open window with animation\r\n        this.container.style.transition = 'none';\r\n        this.animate({\r\n            from: {\r\n                scaleX: .9,\r\n                scaleY: .9,\r\n                opacity: 0\r\n            },\r\n            to: {\r\n                x: this.x,\r\n                y: this.y,\r\n                scaleX: 1,\r\n                scaleY: 1,\r\n                opacity: 1,\r\n            },\r\n            profile: 'window-open'\r\n        });\r\n        this.updateMica();\r\n\r\n        // Default toolbar\r\n        this.toolbarInfo.className = 'window-toolbar-info';\r\n        this.toolbarIcon.className = 'window-toolbar-icon';\r\n        this.toolbarTitle.className = 'window-toolbar-title';\r\n        this.toolbarButtons.className = 'window-toolbar-buttons';\r\n        this.minimizeButton.className = 'window-toolbar-button';\r\n        this.maximizeButton.className = 'window-toolbar-button';\r\n        this.closeButton.className = 'window-toolbar-button close';\r\n        this.minimizeImage.className = 'window-toolbar-button-icon';\r\n        this.maximizeImage.className = 'window-toolbar-button-icon';\r\n        this.closeImage.className = 'window-toolbar-button-icon';\r\n\r\n        // Load icon image\r\n        fs.getFileURL(this.icon)\r\n            .then(url => {\r\n                this.icon = url;\r\n                this.toolbarIcon.style.backgroundImage = `url(${url})`;\r\n            });\r\n\r\n        this.toolbarTitle.innerHTML = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.replaceHTMLTags(this.title);\r\n        this.minimizeImage.style.backgroundImage = `url(${icons.minimize})`;\r\n        this.maximizeImage.style.backgroundImage = `url(${icons.maxmin})`;\r\n        this.closeImage.style.backgroundImage = `url(${icons.close})`;\r\n\r\n        this.minimizeButton.addEventListener('click', () => {\r\n            this.minimize();\r\n        });\r\n        this.closeButton.addEventListener('click', () => {\r\n            this.close();\r\n        });\r\n        this.maximizeButton.addEventListener('click', () => {\r\n            if (this.isMaximized == false) {\r\n                this.maximizeWindow();\r\n            } else {\r\n                this.unmaximizeWindow();\r\n            }\r\n        });\r\n\r\n        this.minimizeButton.appendChild(this.minimizeImage);\r\n        this.maximizeButton.appendChild(this.maximizeImage);\r\n        this.closeButton.appendChild(this.closeImage);\r\n        this.toolbarButtons.appendChild(this.minimizeButton);\r\n        this.toolbarButtons.appendChild(this.maximizeButton);\r\n        this.toolbarButtons.appendChild(this.closeButton);\r\n        this.toolbarInfo.appendChild(this.toolbarIcon);\r\n        this.toolbarInfo.appendChild(this.toolbarTitle);\r\n        this.browserWindow.toolbar.appendChild(this.toolbarInfo);\r\n        this.browserWindow.toolbar.appendChild(this.toolbarButtons);\r\n\r\n        // Toolbar menu\r\n        const toolbarMenu = _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contextMenu([]);\r\n        toolbarMenu.container.style.setProperty('--contextmenu-icon-size', '.58rem');\r\n        toolbarMenu.container.style.setProperty('--contextmenu-expand-size', '.58rem');\r\n        this.browserWindow.toolbar.addEventListener('contextmenu', (e) => {\r\n            e.preventDefault();\r\n            const { x, y } = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPointerPosition(e);\r\n            toolbarMenu.setItems([\r\n                {\r\n                    className: \"restore\",\r\n                    icon: \"chrome-restore\",\r\n                    text: \"Restore\", //i18n.t('browserwindow.toolbarcontextmenu.restore'),\r\n                    disabled: !this.isMaximized == true,\r\n                    action: () => {\r\n                        this.unmaximizeWindow();\r\n                    }\r\n                }, {\r\n                    className: \"minimize\",\r\n                    icon: \"chrome-minimize\",\r\n                    text: \"Minimize\", //i18n.t('browserwindow.toolbarcontextmenu.minimize'),\r\n                    disabled: this.minimizable == false,\r\n                    action: () => {\r\n                        this.minimize();\r\n                        // update icon status\r\n                    },\r\n                }, {\r\n                    className: \"maximize\",\r\n                    icon: \"chrome-maximize\",\r\n                    text: \"Maximize\", //i18n.t('browserwindow.toolbarcontextmenu.maximize'),\r\n                    disabled: !(this.isMaximized == false && !this.maximizable == false),\r\n                    action: () => {\r\n                        this.maximizeWindow();\r\n                    },\r\n                }, {\r\n                    type: \"separator\"\r\n                }, {\r\n                    className: \"close\",\r\n                    icon: \"chrome-close\",\r\n                    text: \"Close\", //i18n.t('browserwindow.toolbarcontextmenu.close'),\r\n                    action: () => {\r\n                        this.close();\r\n                    },\r\n                }\r\n            ]);\r\n            toolbarMenu.open(x, y, 'left-top');\r\n        })\r\n        events.start.forEach(event => {\r\n            window.addEventListener(event, (e) => {\r\n                if (toolbarMenu.container.contains(e.target)) return;\r\n                toolbarMenu.close();\r\n            })\r\n        })\r\n\r\n        if (this.minimizable == false) {\r\n            this.minimizeButton.remove();\r\n        }\r\n        if (this.fullscreenable == false || this.maximizable == false) {\r\n            this.maximizeButton.remove();\r\n        }\r\n        if (this.closable == false) {\r\n            this.closeButton.remove();\r\n        }\r\n\r\n        const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get('System');\r\n        this.windowTheme = this.theme == 'system' ? System.theme.get() : this.theme == 'dark' ? 'dark' : 'light';\r\n        this.browserWindow.window.setAttribute('data-theme', this.windowTheme);\r\n\r\n        events.start.forEach(event => {\r\n            this.browserWindow.toolbar.addEventListener(event, this.handleStartMoving);\r\n        })\r\n        events.move.forEach(event => {\r\n            window.addEventListener(event, this.handleMoveMoving);\r\n        })\r\n        events.end.forEach(event => {\r\n            window.addEventListener(event, this.handleEndMoving);\r\n        })\r\n\r\n        this.container.addEventListener('pointerdown', (e) => {\r\n            this._emit('focus');\r\n        })\r\n\r\n        this.on('focus', this.focus);\r\n        this.on('blur', this.blur);\r\n        this.focus();\r\n\r\n        _windowManager_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].add(this.id, this);\r\n\r\n        // WindowManager.emit('create', this);\r\n\r\n        return {\r\n            id: this.id,\r\n            shadowRoot: this.shadowRoot,\r\n            container: this.container,\r\n            window: this.browserWindow.window,\r\n            toolbar: this.browserWindow.toolbar,\r\n            content: this.browserWindow.content,\r\n\r\n            // Methods\r\n            minimize: this.minimize.bind(this),\r\n            unminimize: this.unminimize.bind(this),\r\n            maximize: this.maximizeWindow.bind(this),\r\n            unmaximize: this.unmaximizeWindow.bind(this),\r\n            close: this.close.bind(this),\r\n            addEventListener: this.addEventListener.bind(this),\r\n            setTheme: this.setTheme.bind(this),\r\n            getTheme: this.getTheme.bind(this),\r\n            setMovable: this.setMovable.bind(this),\r\n            unsetMovable: this.unsetMovable.bind(this),\r\n            setImmovable: this.setImmovable.bind(this),\r\n            unsetImmovable: this.unsetImmovable.bind(this),\r\n            changeTitle: this.changeTitle.bind(this),\r\n            changeIcon: this.changeIcon.bind(this),\r\n            setSnappable: this.setSnappable.bind(this),\r\n            useTabview: this.useTabview.bind(this),\r\n            on: this.on.bind(this)\r\n        }\r\n    }\r\n\r\n    focus = () => {\r\n        maxZIndex++;\r\n        this.container.style.zIndex = maxZIndex;\r\n        this.container.style.pointerEvents = 'all';\r\n        this.container.style.visibility = 'visible';\r\n        this.windowContent.style.pointerEvents = 'unset';\r\n        this.container.classList.add('active');\r\n    }\r\n\r\n    blur = () => {\r\n        this.container.style.pointerEvents = 'none';\r\n        this.windowContent.style.pointerEvents = 'none';\r\n    }\r\n\r\n    animate = ({\r\n        from,\r\n        to,\r\n        profile\r\n    }) => {\r\n        if (profile) {\r\n            this.animationData.profile = animateProfiles[profile];\r\n        }\r\n\r\n        Object.keys(to).forEach(CSSKey => {\r\n            if (/[A-z]/gi.test(CSSKey[0])) {\r\n                this.animationData.to[CSSKey] = to[CSSKey];\r\n            }\r\n        })\r\n\r\n        const cT = getComputedStyle(this.container).transform;\r\n        const cO = getComputedStyle(this.container).opacity;\r\n        let opacity = Number(cO);\r\n        let x = 0, y = 0, scaleX = 1, scaleY = 1;\r\n\r\n        if (cT.startsWith(\"matrix(\")) {\r\n            const transform = decompose2DMatrix(cT);\r\n            x = transform.translateX;\r\n            y = transform.translateY;\r\n            scaleX = transform.scaleX;\r\n            scaleY = transform.scaleY;\r\n\r\n            // Handle interrupted animation\r\n            const originalT = this.animationData.stat.__t;\r\n            if (this.animationData.isRunning == true && originalT > 0 && originalT < 1) {\r\n                const originalX = this.animationData.stat.__x;\r\n                const currentFunc = this.animationData.profile.func;\r\n                const t = invertEasingNewton(currentFunc, derivative(currentFunc), originalX, originalT);\r\n                const duration = this.animationData.profile.duration;\r\n\r\n                this.animationData.stat.__t = t;\r\n                this.animationData.stat.__x = currentFunc(this.animationData.stat.__t);\r\n\r\n                // console.info('Animation interrupted, Original x:', originalX, ', Current x:', this.animationData.stat.__x, ', Original t:', originalT, ', Current t:', t);\r\n\r\n                this.animationData.from.x = this.animationData.stat.x;\r\n                this.animationData.from.y = this.animationData.stat.y;\r\n                this.animationData.from.scaleX = this.animationData.stat.scaleX;\r\n                this.animationData.from.scaleY = this.animationData.stat.scaleY;\r\n                this.animationData.from.opacity = this.animationData.stat.opacity;\r\n                this.animationData.from.ts = Date.now() - duration * this.animationData.stat.t;\r\n                this.animationData.to.ts = this.animationData.from.ts + duration;\r\n\r\n                if (this.animationData.isRunning == false) {\r\n                    this.animateRunner();\r\n                }\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (from) {\r\n            x = from.x || x;\r\n            y = from.y || y;\r\n            scaleX = from.scaleX || scaleX;\r\n            scaleY = from.scaleY || scaleY;\r\n            opacity = from.opacity || opacity;\r\n        }\r\n\r\n        const now = Date.now();\r\n\r\n        this.animationData.from.x = x;\r\n        this.animationData.from.y = y;\r\n        this.animationData.from.scaleX = scaleX;\r\n        this.animationData.from.scaleY = scaleY;\r\n        this.animationData.from.opacity = opacity;\r\n        this.animationData.from.ts = now;\r\n        this.animationData.to.ts = now + this.animationData.profile.duration;\r\n\r\n        if (this.animationData.isRunning == false) {\r\n            this.animateRunner();\r\n        }\r\n    }\r\n\r\n    animateRunner = () => {\r\n        this.animationData.isRunning = true;\r\n        const now = Date.now();\r\n        const d = now - this.animationData.from.ts;\r\n        const t = d / this.animationData.profile.duration;\r\n        const p = this.animationData.profile.func(t > 1 ? 1 : t < 0 ? 0 : t);\r\n\r\n        this.animationData.stat.__t = t;\r\n        this.animationData.stat.__x = p;\r\n        this.animationData.stat.x = this.animationData.from.x + (this.animationData.to.x - this.animationData.from.x) * p;\r\n        this.animationData.stat.y = this.animationData.from.y + (this.animationData.to.y - this.animationData.from.y) * p;\r\n        this.animationData.stat.scaleX = this.animationData.from.scaleX + (this.animationData.to.scaleX - this.animationData.from.scaleX) * p;\r\n        this.animationData.stat.scaleY = this.animationData.from.scaleY + (this.animationData.to.scaleY - this.animationData.from.scaleY) * p;\r\n        this.animationData.stat.opacity = this.animationData.from.opacity + (this.animationData.to.opacity - this.animationData.from.opacity) * p;\r\n\r\n        this.container.style.transform = `translate(\r\n${this.animationData.stat.x}px,\r\n${this.animationData.stat.y}px\r\n) scale(\r\n${this.animationData.stat.scaleX},\r\n${this.animationData.stat.scaleY}\r\n)`;\r\n        this.container.style.opacity = this.animationData.stat.opacity.toString();\r\n        //this.realX = this.animationData.stat.x;\r\n        //this.realY = this.animationData.stat.y;\r\n\r\n        if (now < this.animationData.to.ts) {\r\n            requestAnimationFrame(this.animateRunner);\r\n        } else {\r\n            this.animationData.isRunning = false;\r\n        }\r\n    }\r\n\r\n    handleStartMoving = (e) => {\r\n        if (this.toolbarButtons.contains(e.target)) return;\r\n        for (const element of this.immovableElements) {\r\n            if (element == e.target || element.contains(e.target)) {\r\n                return;\r\n            }\r\n        }\r\n        const pointer = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPointerPosition(e);\r\n        var pageX = pointer.x, pageY = pointer.y;\r\n        if (pageX < 0) {\r\n            pageX = 0;\r\n        } else if (pageX > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width) {\r\n            pageX = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width;\r\n        }\r\n        if (pageY < 0) {\r\n            pageY = 0;\r\n        } else if (pageY > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height) {\r\n            pageY = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height;\r\n        }\r\n        this.pointerDown = true;\r\n        this.pointerMoved = false;\r\n\r\n        const position = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container);\r\n        this.pointerPosition = [pageX, pageY];\r\n        this.originalPosition = {\r\n            x: position.x,\r\n            y: position.y\r\n        }\r\n        this._emit('dragstart', {\r\n            preventDefault: () => {\r\n                this.handleEndMoving({}, 'preventDefault');\r\n            },\r\n            type: e.type,\r\n            target: e.target\r\n        })\r\n        this.updateMica()\r\n    }\r\n\r\n    handleMoveMoving = (e) => {\r\n        if (this.pointerDown) {\r\n            try {\r\n                document.getSelection().removeAllRanges();\r\n            } catch (e) { };\r\n            if (this.originalSnapSide != '' || this.isMaximized == true || this.browserWindow.window.offsetWidth != this.realWidth) {\r\n                this.container.style.transition = 'transform 100ms ease-in-out, opacity 100ms ease-in-out';\r\n                this.browserWindow.window.style.transition = 'none';\r\n                this.container.removeAttribute('data-maximized');\r\n\r\n                this.browserWindow.window.style.width = this.width + 'px';\r\n                this.browserWindow.window.style.height = this.height + 'px';\r\n                this.realWidth = this.width;\r\n                this.realHeight = this.height;\r\n\r\n                this.browserWindow.window.style.borderRadius = 'revert-layer';\r\n                this.micaContainer.style.borderRadius = 'revert-layer';\r\n\r\n                this.maximizeImage.style.backgroundImage = `url(${icons.maxmin})`;\r\n                this.isMaximized = false;\r\n                this.originalSnapSide = '';\r\n            }\r\n            const pointer = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPointerPosition(e);\r\n            var pageX = pointer.x, pageY = pointer.y;\r\n            if (pageX != this.pointerPosition[0] || pageY != this.pointerPosition[1]) {\r\n                this.pointerMoved = true;\r\n            }\r\n            if (pageX < 0) {\r\n                pageX = 0;\r\n            } else if (pageX > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width) {\r\n                pageX = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width;\r\n            }\r\n            if (pageY < 0) {\r\n                pageY = 0;\r\n            } else if (pageY > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height) {\r\n                pageY = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height;\r\n            }\r\n            const side = getSnapSide(pageX, pageY);\r\n            appWrapper.classList.add('moving');\r\n\r\n            this.container.style.transition = 'none';\r\n            this.container.style.transform = `translate(${this.originalPosition.x + pageX - this.pointerPosition[0]}px,${this.originalPosition.y + pageY - this.pointerPosition[1]}px)`;\r\n            this.realX = this.originalPosition.x + pageX - this.pointerPosition[0];\r\n            this.realY = this.originalPosition.y + pageY - this.pointerPosition[1];\r\n\r\n            if (this.snappable == false) {\r\n                this.snapSide = '';\r\n            } else {\r\n                if (side != '') {\r\n                    snapPreview.style.position = 'fixed';\r\n                    if (!this.showSnapPreview == true) {\r\n                        snapPreview.style.width = this.container.offsetWidth + 'px';\r\n                        snapPreview.style.height = this.container.offsetHeight + 'px';\r\n                        snapPreview.style.left = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container).x + 'px';\r\n                        snapPreview.style.top = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container).y + 'px';\r\n                        snapPreview.classList.add('active');\r\n                    }\r\n                    const size = getSnapPreviewSize(side);\r\n                    const position = getSnapPreviewPosition(side);\r\n                    snapPreview.style.transition = 'all .15s ease-in-out';\r\n                    snapPreview.style.zIndex = this.container.style.zIndex || maxZIndex;\r\n                    snapPreview.style.left = position.left + 'px';\r\n                    snapPreview.style.top = position.top + 'px';\r\n                    snapPreview.style.width = size.width + 'px';\r\n                    snapPreview.style.height = size.height + 'px';\r\n                    this.showSnapPreview = true;\r\n                } else {\r\n                    if (this.showSnapPreview == true) {\r\n                        snapPreview.style.width = this.container.offsetWidth + 'px';\r\n                        snapPreview.style.height = this.container.offsetHeight + 'px';\r\n                        snapPreview.style.left = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container).x + 'px';\r\n                        snapPreview.style.top = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container).y + 'px';\r\n                        setTimeout(() => {\r\n                            if (this.showSnapPreview == true) return;\r\n                            snapPreview.style.transition = 'none';\r\n                            snapPreview.classList.remove('active');\r\n                        }, 150)\r\n                    }\r\n                    this.showSnapPreview = false;\r\n                }\r\n                this.snapSide = side;\r\n            }\r\n            this._emit('dragging', {\r\n                preventDefault: () => {\r\n                    this.handleEndMoving({}, 'preventDefault');\r\n                },\r\n                type: e.type,\r\n                target: e.target\r\n            })\r\n            this.updateMica()\r\n        }\r\n    }\r\n\r\n    handleEndMoving = (e, type = 'user') => {\r\n        if (this.pointerDown == false) return;\r\n        if (this.pointerMoved == false) {\r\n            return this.pointerDown = false;\r\n        }\r\n        this.pointerDown = false;\r\n        this.showSnapPreview = false;\r\n        snapPreview.style.width = this.container.offsetWidth + 'px';\r\n        snapPreview.style.height = this.container.offsetHeight + 'px';\r\n        snapPreview.style.left = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container).x + 'px';\r\n        snapPreview.style.top = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container).y + 'px';\r\n        setTimeout(() => {\r\n            snapPreview.style.transition = 'none';\r\n            snapPreview.classList.remove('active');\r\n        }, 150)\r\n        appWrapper.classList.remove('moving');\r\n        if (this.snapSide != '') {\r\n            if (this.snapSide.includes('t') && this.snapSide.includes('f')) {\r\n                this.maximizeWindow();\r\n            }\r\n            const position = getSnapPosition(this.snapSide);\r\n            const positionNum = getSnapPositionNum(this.snapSide);\r\n            const size = getSnapSize(this.snapSide);\r\n            const sizeNum = getSnapSizeNumber(this.snapSide);\r\n            this.realX = positionNum.left;\r\n            this.realY = positionNum.top;\r\n            this.realWidth = sizeNum.width;\r\n            this.realHeight = sizeNum.height;\r\n\r\n            this.container.style.transform = `translate(${position.left},${position.top})`;\r\n            this.container.style.transition = 'all 200ms cubic-bezier(.8,.01,.28,.99)';\r\n            this.browserWindow.window.style.transition = 'all 200ms cubic-bezier(.8,.01,.28,.99)';\r\n            setTimeout(() => {\r\n                this.container.style.transition = 'transform 100ms ease-in-out, opacity 100ms ease-in-out';\r\n                this.browserWindow.window.style.transition = 'none';\r\n            }, 200)\r\n\r\n            this.browserWindow.window.style.width = size.width;\r\n            this.browserWindow.window.style.height = size.height;\r\n            this.browserWindow.window.style.borderRadius = '0';\r\n            this.micaContainer.style.borderRadius = '0';\r\n        } else if (type == 'user') {\r\n            let pageX = e.pageX;\r\n            let pageY = e.pageY;\r\n            if (e.type.startsWith('touch')) {\r\n                var touch = e.touches[0] || e.changedTouches[0];\r\n                pageX = touch.pageX;\r\n                pageY = touch.pageY;\r\n            }\r\n            if (pageX < 0) {\r\n                pageX = 0;\r\n            } else if (pageX > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width) {\r\n                pageX = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width;\r\n            }\r\n            if (pageY < 0) {\r\n                pageY = 0;\r\n            } else if (pageY > _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height) {\r\n                pageY = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height;\r\n            }\r\n            this.x = this.originalPosition.x + pageX - this.pointerPosition[0];\r\n            this.y = this.originalPosition.y + pageY - this.pointerPosition[1];\r\n            this.realX = this.x;\r\n            this.realY = this.y;\r\n\r\n            this.container.style.transition = 'none';\r\n            this.container.style.transform = `translate(${this.realX}px,${this.realY}px)`;\r\n        }\r\n        this.originalSnapSide = this.snapSide;\r\n        this.snapSide = '';\r\n        this._emit('dragend', {\r\n            preventDefault: () => {\r\n\r\n            },\r\n            type: e.type,\r\n            target: e.target\r\n        })\r\n        this.updateMica();\r\n    }\r\n\r\n    updateData = () => {\r\n        if (!this.originalSnapSide) return;\r\n        const positionNum = getSnapPositionNum(this.originalSnapSide);\r\n        const sizeNum = getSnapSizeNumber(this.originalSnapSide);\r\n        this.realX = positionNum.left;\r\n        this.realY = positionNum.top;\r\n        this.realWidth = sizeNum.width;\r\n        this.realHeight = sizeNum.height;\r\n    }\r\n\r\n    updateMica = () => {\r\n        if (this.mica == true) {\r\n            requestAnimationFrame(() => {\r\n                const rect = this.container.getBoundingClientRect();\r\n                this.micaElement.style.clipPath = `inset(${rect.top + 1}px ${_core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width - rect.right + 1}px ${_core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - rect.bottom + 1}px ${rect.left + 1}px)`;\r\n                this.micaElement.style.transform = `translate(${-rect.left}px,${-rect.top}px)`;\r\n            });\r\n        }\r\n    }\r\n\r\n    minimize = (condition = () => true) => {\r\n        var position = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.taskbarIconElement);\r\n        var width = this.container.offsetWidth;\r\n        var height = this.container.offsetHeight;\r\n\r\n        this.container.style.transition = 'none';\r\n        this.container.classList.remove('active');\r\n        this.isMinimized = true;\r\n\r\n        this.blur();\r\n\r\n        var scaleX = 180 / width;\r\n        var scaleY = 120 / height;\r\n        var scale = scaleX;\r\n\r\n        if (scaleY < scaleX) {\r\n            scale = scaleY\r\n        }\r\n\r\n        var windowWidth = width * scale;\r\n        var windowHeight = height * scale;\r\n\r\n        this.animate({\r\n            to: {\r\n                x: position.x - width * (1 - scale) / 2 - windowWidth / 2 + this.taskbarIconElement.offsetWidth / 2,\r\n                y: _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - 48 - 8 - height * (1 - scale) / 2 - windowHeight,\r\n                scaleX: scale,\r\n                scaleY: scale,\r\n                opacity: 0\r\n            },\r\n            profile: 'window-hide'\r\n        });\r\n        this._emit('minimize');\r\n\r\n        setTimeout(() => {\r\n            if (this.isMinimized == true && condition?.() !== false) {\r\n                this.container.style.setProperty('z-index', '-1', 'important');\r\n                this.container.style.setProperty('visibility', 'hidden');\r\n            }\r\n        }, animateProfiles['window-hide'].duration);\r\n    }\r\n\r\n    unminimize = () => {\r\n        let x = this.realX,\r\n            y = this.realY;\r\n        if (this.originalSnapSide != '') {\r\n            x = 0; y = 0;\r\n            if (this.originalSnapSide.includes('r')) {\r\n                x = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width / 2;\r\n            }\r\n            if (this.originalSnapSide.includes('b')) {\r\n                y = (_core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - 48) / 2;\r\n            }\r\n        }\r\n        this.isMinimized = false;\r\n        this.container.style.transition = 'none';\r\n        this.focus();\r\n        this.animate({\r\n            to: {\r\n                x, y,\r\n                scaleX: 1,\r\n                scaleY: 1,\r\n                opacity: 1\r\n            },\r\n            profile: 'window-show'\r\n        });\r\n        this._emit('unminimize');\r\n\r\n        setTimeout(() => {\r\n            if (this.isMinimized == false) {\r\n                this.focus();\r\n            }\r\n        }, animateProfiles['window-show'].duration);\r\n    }\r\n\r\n    maximizeWindow = (animation = true) => {\r\n        this.originalSnapSide = 'f';\r\n        this.isMaximized = true;\r\n        this.container.setAttribute('data-maximized', 'true');\r\n        this.container.style.transform = `translate(0px,0px)`;\r\n        this.realX = 0;\r\n        this.realY = 0;\r\n        // hostElement.style.width = 'var(--viewport-width)';\r\n        // hostElement.style.height = 'calc(var(--viewport-height) - var(--taskbar-height))';\r\n\r\n        if (animation == true) {\r\n            this.container.style.transition = 'all 200ms cubic-bezier(.8,.01,.28,.99)';\r\n            this.browserWindow.window.style.transition = 'all 200ms cubic-bezier(.8,.01,.28,.99)';\r\n            setTimeout(() => {\r\n                this.container.style.transition = 'transform 100ms ease-in-out, opacity 100ms ease-in-out';\r\n                this.browserWindow.window.style.transition = 'none';\r\n            }, 200)\r\n        } else {\r\n            this.container.style.transition = 'transform 100ms ease-in-out, opacity 100ms ease-in-out';\r\n            this.browserWindow.window.style.transition = 'none';\r\n        }\r\n\r\n        this.browserWindow.window.style.width = 'var(--viewport-width)';\r\n        this.browserWindow.window.style.height = 'calc(var(--viewport-height) - var(--taskbar-height))';\r\n        this.realWidth = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.width;\r\n        this.realHeight = _core_viewport_js__WEBPACK_IMPORTED_MODULE_3__.viewport.height - 48;\r\n\r\n        this.browserWindow.window.style.borderRadius = '0';\r\n        this.micaContainer.style.borderRadius = '0';\r\n        this.maximizeImage.style.backgroundImage = `url(${icons.maximize})`;\r\n        this.updateMica();\r\n    }\r\n\r\n    unmaximizeWindow = (animation = true) => {\r\n        this.originalSnapSide = '';\r\n        this.isMaximized = false;\r\n        this.container.removeAttribute('data-maximized');\r\n        this.container.style.transform = `translate(${this.x}px,${this.y}px)`;\r\n        this.realX = this.x;\r\n        this.realY = this.y;\r\n\r\n        if (animation == true) {\r\n            this.container.style.transition = 'all 200ms cubic-bezier(.8,.01,.28,.99)';\r\n            this.browserWindow.window.style.transition = 'all 200ms cubic-bezier(.8,.01,.28,.99)';\r\n            setTimeout(() => {\r\n                this.container.style.transition = 'transform 100ms ease-in-out, opacity 100ms ease-in-out';\r\n                this.browserWindow.window.style.transition = 'none';\r\n            }, 200)\r\n        } else {\r\n            this.container.style.transition = 'transform 100ms ease-in-out, opacity 100ms ease-in-out';\r\n            this.browserWindow.window.style.transition = 'none';\r\n        }\r\n\r\n        this.browserWindow.window.style.width = this.width + 'px';\r\n        this.browserWindow.window.style.height = this.height + 'px';\r\n        this.realWidth = this.width;\r\n        this.realHeight = this.height;\r\n\r\n        this.browserWindow.window.style.borderRadius = 'revert-layer';\r\n        this.micaContainer.style.borderRadius = 'revert-layer';\r\n        this.maximizeImage.style.backgroundImage = `url(${icons.maxmin})`;\r\n        this.updateMica();\r\n    }\r\n\r\n    close = () => {\r\n        if (window.modes.debug == true) {\r\n\r\n        }\r\n        this.container.style.transition = 'none';\r\n        const position = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.getPosition(this.container);\r\n        this.animate({\r\n            to: {\r\n                x: position.x,\r\n                y: position.y,\r\n                scaleX: .9,\r\n                scaleY: .9,\r\n                opacity: 0\r\n            },\r\n            profile: 'window-close'\r\n        });\r\n        this._emit('close');\r\n        _windowManager_js__WEBPACK_IMPORTED_MODULE_8__[\"default\"].remove(this.id);\r\n\r\n        setTimeout(() => {\r\n            this.container.remove();\r\n        }, 200);\r\n    }\r\n\r\n    changeTitle = (title = 'App') => {\r\n        if (!title) return;\r\n        this.title = title;\r\n        this.toolbarTitle.innerHTML = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.replaceHTMLTags(title);\r\n        this._emit('change:title', {\r\n            value: title\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @param {string} url Blob URL\r\n     * @returns \r\n     */\r\n    changeIcon = (url = '') => {\r\n        if (!url) return;\r\n        this.icon = url;\r\n        this.toolbarIcon.style.backgroundImage = `url(${url})`;\r\n        this._emit('change:icon', {\r\n            value: url\r\n        });\r\n    }\r\n\r\n    setTheme = (theme) => {\r\n        this.windowTheme = theme == 'dark' ? 'dark' : 'light';\r\n        this.browserWindow.window.setAttribute('data-theme', this.windowTheme);\r\n    }\r\n\r\n    getTheme = () => {\r\n        return this.windowTheme;\r\n    }\r\n\r\n    setSnappable = (value) => {\r\n        this.snappable = value == true;\r\n    }\r\n\r\n    setMovable = (element) => {\r\n        events.start.forEach(event => {\r\n            element.addEventListener(event, this.handleStartMoving);\r\n        })\r\n    }\r\n\r\n    unsetMovable = (element) => {\r\n        events.start.forEach(event => {\r\n            element.removeEventListener(event, this.handleStartMoving);\r\n        })\r\n    }\r\n\r\n    setImmovable = (element) => {\r\n        if (!this.immovableElements.includes(element)) {\r\n            this.immovableElements.push(element);\r\n        }\r\n    }\r\n\r\n    unsetImmovable = (element) => {\r\n        if (this.immovableElements.includes(element)) {\r\n            this.immovableElements.splice(this.immovableElements.indexOf(element), 1);\r\n        }\r\n    }\r\n\r\n    addEventListener = (event, listener) => {\r\n        console.warn('%cBrowserWindow.addEventListener()%c has been deprecated.\\nPlease use %cBrowserWindow.on()%c instead', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '')\r\n        this.on(event, listener);\r\n    }\r\n\r\n    useTabview = (options = {\r\n        icon: true\r\n    }) => {\r\n        const tabview = document.createElement('div');\r\n        const tabStrip = document.createElement('div');\r\n        const tabStripTabs = document.createElement('div');\r\n        const tabStripCreate = document.createElement('div');\r\n        const tabStripCreateButton = document.createElement('button');\r\n\r\n        tabview.className = 'tabview';\r\n        tabStrip.className = 'tabview-tabstrip';\r\n        tabStripTabs.className = 'tabview-tabstrip-tabs';\r\n        tabStripCreate.className = 'tabview-tabstrip-create';\r\n        tabStripCreateButton.className = 'tabview-tabstrip-create-button';\r\n\r\n        this.browserWindow.content.appendChild(tabview);\r\n        if (options.icon == false) {\r\n            this.browserWindow.toolbar.replaceChild(tabStrip, this.toolbarInfo);\r\n        } else {\r\n            this.toolbarInfo.replaceChild(tabStrip, this.toolbarTitle);\r\n        }\r\n        tabStrip.appendChild(tabStripTabs);\r\n        tabStrip.appendChild(tabStripCreate);\r\n        tabStripCreate.appendChild(tabStripCreateButton);\r\n\r\n        tabStripCreateButton.addEventListener('click', async () => {\r\n            triggerEvent('requestCreateTab', {\r\n                active: true,\r\n                target: tabStripCreateButton\r\n            })\r\n        })\r\n\r\n        this.on('dragstart', (e) => {\r\n            if (e.target == tabStripCreateButton || tabStripTabs.contains(e.target)) {\r\n                e.preventDefault();\r\n            }\r\n        })\r\n\r\n        var order = [];\r\n        var tabs = {};\r\n        var listeners = {};\r\n\r\n        function randomID() {\r\n            var patterns = '0123456789abcdef';\r\n            var id = '_';\r\n            for (var i = 0; i < 6; i++) {\r\n                id += patterns.charAt(Math.floor(Math.random() * patterns.length));\r\n            }\r\n            if (tabs[id]) {\r\n                return randomID();\r\n            }\r\n            return id;\r\n        }\r\n\r\n        function on(event, listener) {\r\n            if (!listeners[event]) {\r\n                listeners[event] = []\r\n            }\r\n            listeners[event].push(listener);\r\n        }\r\n\r\n        function triggerEvent(event, detail) {\r\n            if (listeners[event]) {\r\n                listeners[event].forEach((listener) => listener(detail));\r\n            }\r\n        }\r\n\r\n        const closeBrowserWindow = () => {\r\n            this.close();\r\n        }\r\n\r\n        const setBrowserWindowIcon = (icon) => {\r\n            if (icon?.startsWith?.('blob:')) {\r\n                this.changeIcon(icon);\r\n            } else {\r\n                fs.getFileURL(icon).then(url => {\r\n                    this.changeIcon(url);\r\n                })\r\n            }\r\n        }\r\n\r\n        const setBrowserWindowTitle = (title) => {\r\n            this.changeTitle(title)\r\n        }\r\n\r\n        class Tab extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.EventEmitter {\r\n            tab = document.createElement('div');\r\n            tabInfo = document.createElement('div');\r\n            tabIcon = document.createElement('div');\r\n            tabHeader = document.createElement('div');\r\n            tabClose = document.createElement('div');\r\n            tabviewItem = document.createElement('div');\r\n            id = randomID();\r\n\r\n            constructor(options = {\r\n                active: true,\r\n                icon: true,\r\n                tabAnimation: true,\r\n                syncTitle: true,\r\n                syncIcon: true\r\n            }) {\r\n                super();\r\n\r\n                // Initialize tab\r\n                order.push(this.id);\r\n\r\n                this.options = {\r\n                    syncTitle: options.syncTitle == false ? false : true,\r\n                    syncIcon: options.syncIcon == false ? false : true\r\n                }\r\n\r\n                this.icon = '';\r\n                this.title = '';\r\n                this.tab.className = 'tabview-tabstrip-tab';\r\n                this.tabInfo.className = 'tabview-tabstrip-tab-info';\r\n                this.tabIcon.className = 'tabview-tabstrip-tab-icon';\r\n                this.tabHeader.className = 'tabview-tabstrip-tab-header';\r\n                this.tabClose.className = 'tabview-tabstrip-tab-close';\r\n                this.tabviewItem.className = 'tabview-item';\r\n\r\n                var originalPosition = order.indexOf(this.id);\r\n                var currentPosition = order.indexOf(this.id);\r\n                var startX = 0;\r\n                var dragging = false;\r\n                var events = {\r\n                    \"start\": [\"mousedown\", \"touchstart\", \"pointerdown\"],\r\n                    \"move\": [\"mousemove\", \"touchmove\", \"pointermove\"],\r\n                    \"end\": [\"mouseup\", \"touchend\", \"pointerup\", \"blur\"]\r\n                }\r\n\r\n                tabs[this.id] = this;\r\n\r\n                function moveNodeToIndex(nodeIndex, targetIndex, container) {\r\n                    const children = Array.from(container.children);\r\n                    if (nodeIndex < 0 || nodeIndex >= children.length || targetIndex < 0 || targetIndex >= children.length) {\r\n                        // console.error('over range');\r\n                        return;\r\n                    }\r\n                    const nodeToMove = children[nodeIndex];\r\n                    if (targetIndex === children.length - 1) {\r\n                        container.appendChild(nodeToMove);\r\n                    } else if (targetIndex < nodeIndex) {\r\n                        container.insertBefore(nodeToMove, children[targetIndex]);\r\n                    } else {\r\n                        container.insertBefore(nodeToMove, children[targetIndex + 1]);\r\n                    }\r\n                }\r\n\r\n                function moveArrayItem(arr, fromIndex, toIndex) {\r\n                    if (fromIndex < 0 || fromIndex >= arr.length || toIndex < 0 || toIndex >= arr.length) {\r\n                        // console.error('over range');\r\n                        return;\r\n                    }\r\n                    const item = arr.splice(fromIndex, 1)[0];\r\n                    arr.splice(toIndex, 0, item);\r\n                    // console.log(arr, item)\r\n                    return arr;\r\n                }\r\n\r\n                const dragStart = (e) => {\r\n                    if (this.tabClose.contains(e.target)) return;\r\n                    this.focus();\r\n                    let pageX = e.pageX;\r\n                    if (e.type.startsWith('touch')) {\r\n                        const touch = e.touches[0] || e.changedTouches[0];\r\n                        pageX = touch.pageX;\r\n                    }\r\n                    originalPosition = order.indexOf(this.id);\r\n                    currentPosition = order.indexOf(this.id);\r\n                    this.tab.style.transition = 'none';\r\n                    dragging = true;\r\n                    startX = pageX;\r\n                }\r\n\r\n                const dragMove = (e) => {\r\n                    if (!dragging) return;\r\n                    try {\r\n                        document.getSelection().removeAllRanges();\r\n                    } catch (e) { };\r\n                    let pageX = e.pageX;\r\n                    if (e.type.startsWith('touch')) {\r\n                        const touch = e.touches[0] || e.changedTouches[0];\r\n                        pageX = touch.pageX;\r\n                    }\r\n                    var x = pageX - startX;\r\n                    var unit = this.tab.offsetWidth + 8;\r\n                    var count = Math.round(x / unit);\r\n\r\n                    if (options.tabAnimation != false) {\r\n                        this.tab.style.transform = `translateX(${x}px)`;\r\n                    }\r\n\r\n                    currentPosition = originalPosition + count;\r\n                    if (currentPosition > order.length - 1) {\r\n                        currentPosition = order.length - 1;\r\n                    } else if (currentPosition < 0) {\r\n                        currentPosition = 0;\r\n                    }\r\n                    count = currentPosition - originalPosition;\r\n\r\n                    if (x > 0) {\r\n                        Object.values(tabs).filter(tab => tab.id != this.id).forEach(tab => {\r\n                            if (options.tabAnimation != false) {\r\n                                tab.tab.style.transition = 'revert-layer';\r\n                            }\r\n                            var index = order.indexOf(tab.id);\r\n                            if (index <= originalPosition + count && index > originalPosition) {\r\n                                tab.tab.style.transform = 'translateX(calc(-100% - 8px))';\r\n                            } else {\r\n                                tab.tab.style.transform = '';\r\n                            }\r\n                        })\r\n                    } else if (x < 0) {\r\n                        Object.values(tabs).filter(tab => tab.id != this.id).forEach(tab => {\r\n                            if (options.tabAnimation != false) {\r\n                                tab.tab.style.transition = 'revert-layer';\r\n                            }\r\n                            var index = order.indexOf(tab.id);\r\n                            if (index >= originalPosition + count && index < originalPosition) {\r\n                                tab.tab.style.transform = 'translateX(calc(100% + 8px))';\r\n                            } else {\r\n                                tab.tab.style.transform = '';\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n\r\n                const dragEnd = () => {\r\n                    if (dragging == false) return;\r\n                    dragging = false;\r\n                    if (currentPosition != originalPosition) {\r\n                        moveNodeToIndex(originalPosition, currentPosition, tabStripTabs);\r\n                        moveArrayItem(order, originalPosition, currentPosition);\r\n                        originalPosition = currentPosition;\r\n                        Object.values(tabs).forEach(tab => {\r\n                            tab.tab.style.transition = 'none';\r\n                            tab.tab.style.transform = 'translateX(0)';\r\n                            tab.tab.style['-webkit-transform']\r\n                            setTimeout(() => {\r\n                                tab.tab.style.transition = 'revert-layer';\r\n                            }, 200)\r\n                        })\r\n                    } else {\r\n                        this.tab.style.transition = 'revert-layer';\r\n                        this.tab.style.transform = '';\r\n                    }\r\n                }\r\n\r\n                events.start.forEach(event => {\r\n                    this.tab.addEventListener(event, dragStart);\r\n                })\r\n                events.move.forEach(event => {\r\n                    window.addEventListener(event, dragMove);\r\n                })\r\n                events.end.forEach(event => {\r\n                    window.addEventListener(event, dragEnd);\r\n                })\r\n\r\n                this.tab.addEventListener('click', (e) => {\r\n                    if (this.tabClose.contains(e.target)) return;\r\n                    this.focus();\r\n                });\r\n\r\n                this.tabClose.addEventListener('click', () => {\r\n                    this.close()\r\n                });\r\n\r\n                this.tab.appendChild(this.tabInfo);\r\n                this.tab.appendChild(this.tabClose);\r\n                this.tabInfo.appendChild(this.tabIcon);\r\n                this.tabInfo.appendChild(this.tabHeader);\r\n                tabStripTabs.appendChild(this.tab);\r\n                tabview.appendChild(this.tabviewItem);\r\n\r\n                if (options.active != false) {\r\n                    this.focus();\r\n                }\r\n                if (options.icon == false) {\r\n                    this.tabIcon.remove();\r\n                }\r\n            }\r\n            getContainer() {\r\n                return this.tabviewItem;\r\n            }\r\n            focus() {\r\n                Object.values(tabs).forEach(tab => {\r\n                    if (tab.id == this.id) return;\r\n                    tab.blur();\r\n                })\r\n\r\n                this.tab.classList.add('active');\r\n                this.tabviewItem.classList.add('active');\r\n                this._emit('focus');\r\n\r\n                if (this.options.syncIcon) {\r\n                    setBrowserWindowIcon(this.icon);\r\n                }\r\n                if (this.options.syncTitle) {\r\n                    setBrowserWindowTitle(this.title);\r\n                }\r\n            }\r\n            changeTitle(header) {\r\n                this.title = header;\r\n                this.tabHeader.innerHTML = _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.replaceHTMLTags(header);\r\n                if (this.options.syncTitle) {\r\n                    setBrowserWindowTitle(this.title);\r\n                }\r\n            }\r\n            changeIcon(icon) {\r\n                this.icon = icon;\r\n                this.tabIcon.style.backgroundImage = `url(${icon})`;\r\n                if (this.options.syncIcon) {\r\n                    setBrowserWindowIcon(this.icon);\r\n                }\r\n            }\r\n            close() {\r\n                this.tab.remove();\r\n                this.tabviewItem.remove();\r\n                var index = order.indexOf(this.id);\r\n                delete tabs[this.id];\r\n                order.splice(index, 1);\r\n                if (Object.keys(tabs).length == 0) {\r\n                    return closeBrowserWindow();\r\n                } else if (order[index]) {\r\n                    return tabs[order[index]].focus();\r\n                } else if (order[index - 1]) {\r\n                    return tabs[order[index - 1]].focus();\r\n                } else {\r\n                    return tabs[order[0]].focus();\r\n                }\r\n            }\r\n            blur() {\r\n                this.tab.classList.remove('active');\r\n                this.tabviewItem.classList.remove('active');\r\n                this._emit('blur');\r\n            }\r\n        }\r\n\r\n        return { Tab, on };\r\n    }\r\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } }, 1);\n\n//# sourceURL=webpack://winbows11/./src/os/system/WApplication/browserWindow.js?\n}")},"./src/os/system/WApplication/windowManager.js":
/*!*****************************************************!*\
  !*** ./src/os/system/WApplication/windowManager.js ***!
  \*****************************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/utils.ts */ "./src/shared/utils.ts");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/viewport.js */ "./src/os/core/viewport.js");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../moduleManager.js */ "./src/os/moduleManager.js");\n\r\n\r\n\r\n\r\nconst WindowManager = (() => {\r\n    const windows = new Map();\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_1__.viewport.onResize(e => {\r\n        windows.forEach(win => {\r\n            win.updateData();\r\n            win.updateMica();\r\n        })\r\n    })\r\n\r\n    return new (class extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_0__.EventEmitter {\r\n        constructor() {\r\n            super();\r\n        }\r\n        add(id, win) {\r\n            if (windows.has(id)) throw new Error(`Window ${id} already exists`);\r\n            windows.set(id, win);\r\n            this._emit(\'add\', { id, win });\r\n        }\r\n        remove(id) {\r\n            if (windows.has(id)) {\r\n                windows.delete(id);\r\n                this._emit(\'remove\', { id });\r\n            }\r\n        }\r\n        get(id) {\r\n            return windows.get(id);\r\n        }\r\n        all() {\r\n            return [...windows.values()];\r\n        }\r\n        list() {\r\n            return windows.keys();\r\n        }\r\n    })();\r\n})();\r\n_moduleManager_js__WEBPACK_IMPORTED_MODULE_2__["default"].register(\'WindowManager\', WindowManager, \'original\');\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WindowManager);\n\n//# sourceURL=webpack://winbows11/./src/os/system/WApplication/windowManager.js?\n}')},"./src/os/system/appRegistry.js":
/*!**************************************!*\
  !*** ./src/os/system/appRegistry.js ***!
  \**************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shell_shellUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shell/shellUtils.js */ \"./src/os/system/shell/shellUtils.js\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/log.js */ \"./src/os/core/log.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_1__]);\n_shared_fs_js__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\n\r\n\r\nconst logger = new _core_log_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\r\n    module: 'AppRegistry'\r\n});\r\n\r\nfunction generateAppSeed({ appName, basePath, contentPath }) {\r\n    let seed = null;\r\n\r\n    const nAppName = (0,_shell_shellUtils_js__WEBPACK_IMPORTED_MODULE_0__.getScheme)(appName);\r\n    const nBasePath = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.normalize(basePath || '');\r\n    const nContentPath = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.normalize(contentPath || '');\r\n\r\n    if (nAppName) {\r\n        seed = nAppName;\r\n        if (nBasePath) seed += '|' + nBasePath;\r\n    } else if (nBasePath) {\r\n        seed = nBasePath;\r\n    } else if (nContentPath) {\r\n        seed = nContentPath;\r\n    } else {\r\n        seed = 'tmp-' + Math.random().toString(36).slice(2, 10);\r\n    }\r\n\r\n    return seed;\r\n}\r\n\r\nfunction simpleHash(str) {\r\n    let hash = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        hash = (hash << 5) - hash + str.charCodeAt(i);\r\n        hash |= 0;\r\n    }\r\n    return 'app-' + Math.abs(hash).toString(36);\r\n}\r\n\r\nfunction generateAppId({ appName, basePath, contentPath }) {\r\n    const seed = generateAppSeed({ appName, basePath, contentPath });\r\n    return simpleHash(seed);\r\n}\r\n\r\nconst defaultData = {\r\n\r\n}\r\nconst appRegistry = {};\r\nconst apps = {\r\n    'explorer': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/',\r\n        icon: 'C:/Winbows/icons/folders/explorer.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/app.wrt',\r\n        configScript: 'C:/Winbows/SystemApps/Microhard.Winbows.FileExplorer/configurable.wrt'\r\n    },\r\n    'edge': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.Edge/',\r\n        icon: 'C:/Winbows/icons/applications/tools/edge.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.Edge/app.wrt'\r\n    },\r\n    'edgebeta': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.Edge.BETA/',\r\n        icon: 'C:/Winbows/icons/applications/tools/edgebeta.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.Edge.BETA/app.wrt'\r\n    },\r\n    'store': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.MicrohardStore/',\r\n        icon: 'C:/Winbows/icons/applications/novelty/store2.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.MicrohardStore/app.wrt'\r\n    },\r\n    'cmd': {\r\n        basePath: 'C:/Winbows/System32/cmd/',\r\n        icon: 'C:/Winbows/icons/applications/novelty/terminal.ico',\r\n        entryScript: 'C:/Winbows/System32/cmd/cmd.wrt'\r\n    },\r\n    'notepad': {\r\n        basePath: 'C:/Program Files/Notepad/',\r\n        icon: 'C:/Winbows/icons/applications/novelty/notepad.ico',\r\n        entryScript: 'C:/Program Files/Notepad/app.wrt'\r\n    },\r\n    'calculator': {\r\n        basePath: 'C:/Program Files/Calculator/',\r\n        icon: 'C:/Winbows/icons/applications/novelty/calculator.ico',\r\n        entryScript: 'C:/Program Files/Calculator/app.wrt'\r\n    },\r\n    'paint': {\r\n        basePath: 'C:/Program Files/Paint/',\r\n        icon: 'C:/Winbows/icons/applications/novelty/paint.ico',\r\n        entryScript: 'C:/Program Files/Paint/app.wrt'\r\n    },\r\n    'info': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.Info/',\r\n        icon: 'C:/Winbows/icons/emblems/info.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.Info/app.wrt',\r\n        autoExecute: true\r\n    },\r\n    'code': {\r\n        basePath: 'C:/Program Files/VSCode/',\r\n        icon: 'C:/Winbows/icons/applications/office/code.ico',\r\n        entryScript: 'C:/Program Files/VSCode/app.wrt'\r\n    },\r\n    'taskmgr': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.Taskmgr',\r\n        icon: 'C:/Winbows/icons/applications/tools/taskmanager.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.Taskmgr/app.wrt'\r\n    },\r\n    'settings': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.Settings',\r\n        icon: 'C:/Winbows/icons/applications/tools/settings.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.Settings/app.wrt'\r\n    },\r\n    'fpsmeter': {\r\n        basePath: 'C:/Program Files/FPS Meter/',\r\n        icon: 'C:/Program Files/FPS Meter/favicon.ico',\r\n        entryScript: 'C:/Program Files/FPS Meter/app.wrt'\r\n    },\r\n    'photos': {\r\n        basePath: 'C:/Winbows/SystemApps/Microhard.Winbows.Photos',\r\n        icon: 'C:/Winbows/icons/applications/novelty/photos.ico',\r\n        entryScript: 'C:/Winbows/SystemApps/Microhard.Winbows.Photos/app.wrt'\r\n    },\r\n    'network-listener': {\r\n        basePath: 'C:/Program Files/Network Listener/',\r\n        icon: 'C:/Winbows/icons/files/program.ico',\r\n        entryScript: 'C:/Program Files/Network Listener/app.wrt'\r\n    },\r\n    'json-viewer': {\r\n        basePath: 'C:/Program Files/JSON Viewer/',\r\n        icon: 'C:/Program Files/JSON Viewer/json-viewer.svg',\r\n        entryScript: 'C:/Program Files/JSON Viewer/app.wrt'\r\n    },\r\n    'debuglog-parser': {\r\n        basePath: 'C:/User/Documents/sdk-v1/examples/winbows-debuglog-parser-demo/',\r\n        icon: 'C:/Winbows/icons/files/program.ico',\r\n        entryScript: 'C:/User/Documents/sdk-v1/examples/winbows-debuglog-parser-demo/app.wrt'\r\n    },\r\n    'node': {\r\n        basePath: 'C:/Program Files/nodejs/',\r\n        icon: 'C:/Program Files/nodejs/node.ico',\r\n        entryScript: 'C:/Program Files/nodejs/node.wrt'\r\n    }\r\n};\r\n\r\n// Initialize\r\nObject.keys(apps).forEach(appName => {\r\n    const app = apps[appName];\r\n    if (!app.appId) app.appId = generateAppId(appName, app.basePath, app.entryScript);\r\n    if (!app.appName) app.appName = appName;\r\n})\r\n\r\nappRegistry.install = () => { };\r\nappRegistry.uninstall = () => { };\r\nappRegistry.update = () => { };\r\n\r\nappRegistry.getInfo = (name) => {\r\n    logger.warn('appRegistry.getInfo has been deprecated. Please use appRegistry.getInfoByName instead.');\r\n    if (!apps[name]) {\r\n        return {};\r\n    }\r\n    return apps[name];\r\n}\r\n\r\nappRegistry.getIcon = (path) => {\r\n    const app = Object.values(apps).find(a => path.startsWith(a.basePath));\r\n    return app?.icon || 'C:/Winbows/icons/files/program.ico';\r\n}\r\n\r\nappRegistry.getApp = (path) => {\r\n    if (!path || typeof path !== 'string') return {};\r\n    const keys = Object.keys(apps);\r\n    const app = Object.values(apps).find(a => path.startsWith(a.basePath));\r\n    if (!app) return {};\r\n    return { ...app, name: keys.find(k => apps[k] === app) };\r\n}\r\n\r\n/**\r\n * @typedef {Object} TaskbarIconData\r\n * @property {string} appId\r\n * @property {'system'|'app'} type\r\n */\r\n/**\r\n * @param {string} appName \r\n * @param {string} basePath \r\n * @param {string} entryScript \r\n * @returns {TaskbarIconData}\r\n */\r\nappRegistry.generateProfile = (appName, basePath, entryScript) => {\r\n    const app = appRegistry.getApp(entryScript)\r\n    return {\r\n        appId: app.appId ?? generateAppId(appName, basePath, entryScript),\r\n        type: 'app',\r\n        icon: app.icon ?? 'C:/Winbows/icons/files/program.ico',\r\n        basePath, entryScript, appName\r\n    }\r\n}\r\n\r\nappRegistry.getData = (appId) => {\r\n    logger.warn('appRegistry.getData has been deprecated. Please use appRegistry.getInfoByAppId instead.');\r\n    return Object.values(apps).find(app => app.appId == appId);\r\n}\r\n\r\nappRegistry.exists = (name) => !!apps[name] || Object.keys(apps).some(k => apps[k].path === name);\r\n\r\nappRegistry.getInfoByName = (name) => {\r\n    return apps[name] || {};\r\n}\r\nappRegistry.getInfoByPath = (path) => {\r\n    return Object.values(apps).find(a => path.startsWith(a.basePath)) || {};\r\n}\r\nappRegistry.getInfoByAppId = (appId) => {\r\n    return Object.values(apps).find(app => app.appId == appId) || {};\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (appRegistry);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/system/appRegistry.js?\n}")},"./src/os/system/fileIcon.js":
/*!***********************************!*\
  !*** ./src/os/system/fileIcon.js ***!
  \***********************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst fileIcons = {\r\n    getIcon: (path = '') => {\r\n        const ext = fsUtils.extname(path);\r\n        if (fileIcons.registeredIcons[ext]) {\r\n            return fileIcons.registeredIcons[ext];\r\n        } else {\r\n            return fileIcons.registeredIcons['*'];\r\n        }\r\n    },\r\n    registeredIcons: {\r\n        // Default\r\n        '*': 'C:/Winbows/icons/files/generic.ico',\r\n        '.jpg': 'C:/Winbows/icons/files/image.ico',\r\n        '.png': 'C:/Winbows/icons/files/image.ico',\r\n        '.gif': 'C:/Winbows/icons/files/image.ico',\r\n        '.svg': 'C:/Winbows/icons/files/image.ico',\r\n        '.webp': 'C:/Winbows/icons/files/image.ico',\r\n        '.jpeg': 'C:/Winbows/icons/files/image.ico',\r\n        '.ico': 'C:/Winbows/icons/files/image.ico',\r\n        '.bmp': 'C:/Winbows/icons/files/image.ico',\r\n        '.mp3': 'C:/Winbows/icons/files/audio.ico',\r\n        '.wav': 'C:/Winbows/icons/files/audio.ico',\r\n        '.ogg': 'C:/Winbows/icons/files/audio.ico',\r\n        '.mp4': 'C:/Winbows/icons/files/video.ico',\r\n        '.webm': 'C:/Winbows/icons/files/video.ico',\r\n        '.avi': 'C:/Winbows/icons/files/video.ico',\r\n        '.mov': 'C:/Winbows/icons/files/video.ico',\r\n        '.txt': 'C:/Winbows/icons/files/text.ico',\r\n        '.exe': 'C:/Winbows/icons/files/program.ico',\r\n        '.zip': 'C:/Winbows/icons/folders/zip.ico',\r\n        '.ttf': 'C:/Winbows/icons/files/font.ico',\r\n        '.otf': 'C:/Winbows/icons/files/font.ico',\r\n        '.woff': 'C:/Winbows/icons/files/font.ico',\r\n        '.woff2': 'C:/Winbows/icons/files/font.ico',\r\n        '.eot': 'C:/Winbows/icons/files/font.ico',\r\n        '.doc': 'C:/Winbows/icons/files/office/worddocument.ico',\r\n        '.docx': 'C:/Winbows/icons/files/office/worddocument.ico',\r\n        '.xls': 'C:/Winbows/icons/files/office/excelsheet.ico',\r\n        '.xlsx': 'C:/Winbows/icons/files/office/excelsheet.ico',\r\n        '.ppt': 'C:/Winbows/icons/files/office/powerpointopen.ico',\r\n        '.pptx': 'C:/Winbows/icons/files/office/powerpointopen.ico',\r\n        // Edge\r\n        '.html': 'C:/Winbows/icons/applications/tools/edge.ico',\r\n        // VSCode\r\n        '.css': 'C:/Program Files/VSCode/File Icons/css.ico',\r\n        '.js': 'C:/Program Files/VSCode/File Icons/javascript.ico',\r\n        '.json': 'C:/Program Files/VSCode/File Icons/json.ico',\r\n        // Winbows script files\r\n        '.wbsf': 'C:/Winbows/icons/files/executable.ico',\r\n        '.wrt': 'C:/Winbows/icons/files/program.ico',\r\n        '.wrt': 'C:/Winbows/icons/files/program.ico',\r\n    },\r\n    register: (ext, icon) => {\r\n        if (ext == '*') return;\r\n        fileIcons.registeredIcons[ext] = icon;\r\n    }\r\n}\r\n\r\nconst mimeTypes = {\r\n    '.jpg': 'image/jpeg',\r\n    '.jpeg': 'image/jpeg',\r\n    '.png': 'image/png',\r\n    '.gif': 'image/gif',\r\n    '.webp': 'image/webp',\r\n    '.bmp': 'image/bmp',\r\n    '.svg': 'image/svg+xml',\r\n    '.ico': 'image/x-icon',\r\n    '.pdf': 'application/pdf',\r\n    '.txt': 'text/plain',\r\n    '.html': 'text/html',\r\n    '.css': 'text/css',\r\n    '.js': 'application/javascript',\r\n    '.json': 'application/json',\r\n    '.xml': 'application/xml',\r\n    '.zip': 'application/zip',\r\n    '.tar': 'application/x-tar',\r\n    '.gz': 'application/gzip',\r\n    '.mp3': 'audio/mpeg',\r\n    '.wav': 'audio/wav',\r\n    '.ogg': 'audio/ogg',\r\n    '.mp4': 'video/mp4',\r\n    '.webm': 'video/webm',\r\n    '.avi': 'video/x-msvideo',\r\n    '.mov': 'video/quicktime'\r\n};\r\nfunction getMimeType(extension) {\r\n    return mimeTypes[extension.toLowerCase()] || 'application/octet-stream';\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fileIcons);\n\n//# sourceURL=webpack://winbows11/./src/os/system/fileIcon.js?\n}")},"./src/os/system/fileViewer.js":
/*!*************************************!*\
  !*** ./src/os/system/fileViewer.js ***!
  \*************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../shared/fs.js */ \"./src/shared/fs.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__]);\n_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\r\n\r\nconst fileViewers = {\r\n    // Deprecated Method : fileViewers.viewers\r\n    viewers: {\r\n        '*': '',\r\n        '.css': ['code'],\r\n        '.js': ['code'],\r\n        '.html': ['code', 'edge'],\r\n        '.txt': ['code'],\r\n        '.jpg': ['mediaplayer', 'edge', 'photos'],\r\n        '.jpeg': ['mediaplayer', 'edge', 'photos'],\r\n        '.png': ['mediaplayer', 'edge', 'photos'],\r\n        '.gif': ['mediaplayer', 'edge', 'photos'],\r\n        '.webp': ['mediaplayer', 'edge', 'photos'],\r\n        '.bmp': ['mediaplayer', 'edge', 'photos'],\r\n        '.svg': ['mediaplayer', 'edge', 'photos'],\r\n        '.ico': ['mediaplayer', 'edge', 'photos'],\r\n        '.pdf': [],\r\n        '.json': ['code'],\r\n        '.xml': ['code'],\r\n        '.zip': [],\r\n        '.tar': [],\r\n        '.gz': [],\r\n        '.mp3': ['mediaplayer'],\r\n        '.wav': ['mediaplayer'],\r\n        '.ogg': ['mediaplayer'],\r\n        '.mp4': ['mediaplayer'],\r\n        '.webm': ['mediaplayer'],\r\n        '.avi': ['mediaplayer'],\r\n        '.mov': ['mediaplayer'],\r\n        '.link': ['edge']\r\n    },\r\n    defaultViewers: {\r\n        '.css': 'code',\r\n        '.js': 'code',\r\n        '.html': 'edge',\r\n        '.link': 'edge',\r\n        '.json': 'json-viewewr'\r\n    },\r\n    registeredViewers: {\r\n        'code': {\r\n            name: 'Visual Studio Code',\r\n            script: 'C:/Program Files/VSCode/app.wrt',\r\n            accepts: [/*'css', 'js', 'jsx', 'ts', 'ejs', 'html', 'txt', 'json', 'xml', 'py', 'java', 'c', 'h', */'*']\r\n        },\r\n        'edge': {\r\n            name: 'Microhard Edge',\r\n            script: 'C:/Winbows/SystemApps/Microhard.Winbows.Edge/app.wrt',\r\n            accepts: ['.html', '.pdf', '.txt', '.js', '.css', '.png', '.jpg', '.jpeg', '.svg', '.bmp', '.ico', '.webp', '.gif']\r\n        },\r\n        'edgebeta': {\r\n            name: 'Microhard Edge BETA',\r\n            script: 'C:/Winbows/SystemApps/Microhard.Winbows.Edge.BETA/app.wrt',\r\n            accepts: ['.html', '.pdf', '.txt', '.js', '.css', '.png', '.jpg', '.jpeg', '.svg', '.bmp', '.ico', '.webp', '.gif']\r\n        },\r\n        'photos': {\r\n            name: 'Photos',\r\n            script: 'C:/Winbows/SystemApps/Microhard.Winbows.Photos/app.wrt',\r\n            accepts: ['*']\r\n        },\r\n        'mediaplayer': {\r\n            name: 'MediaPlayer',\r\n            script: 'C:/Winbows/SystemApps/Microhard.Winbows.MediaPlayer/app.wrt',\r\n            accepts: ['.mp3', '.wav', '.ogg', '.mp4', '.webm', '.avi', '.mov']\r\n        },\r\n        'json-viewer': {\r\n            name: 'JSON Viewer',\r\n            script: 'C:/Program Files/JSON Viewer/app.wrt',\r\n            accepts: ['.json']\r\n        },\r\n        'notepad': {\r\n            name: 'Notepad',\r\n            script: 'C:/Program Files/Notepad/app.wrt',\r\n            accepts: ['*']\r\n        }\r\n    },\r\n    isRegisterd: (name) => {\r\n        return fileViewers.registeredViewers.hasOwnProperty(name);\r\n    },\r\n    updateViewer: (viewer, prop, value) => {\r\n        if (fileViewers.isRegisterd(viewer)) {\r\n            fileViewers.registeredViewers[viewer][prop] = value;\r\n            localStorage.setItem('WINBOWS_SYSTEM_FV_REGISTERED_VIEWERS', JSON.stringify(fileViewers.registeredViewers));\r\n        }\r\n    },\r\n    registerViewer: (viewer, name, script, accepts) => {\r\n        if (!fileViewers.isRegisterd(viewer)) {\r\n            fileViewers.registeredViewers[viewer] = {\r\n                name: name,\r\n                script: script,\r\n                accepts: accepts\r\n            };\r\n        }\r\n        localStorage.setItem('WINBOWS_SYSTEM_FV_REGISTERED_VIEWERS', JSON.stringify(fileViewers.registeredViewers));\r\n    },\r\n    deregisterViewer: (viewer) => {\r\n        if (fileViewers.isRegisterd(viewer)) {\r\n            delete fileViewers.registeredViewers[viewer];\r\n        }\r\n        localStorage.setItem('WINBOWS_SYSTEM_FV_REGISTERED_VIEWERS', JSON.stringify(fileViewers.registeredViewers));\r\n    },\r\n    // Deprecated Method\r\n    setViewer: (extension, app) => {\r\n        if (!fileViewers.viewers[extension]) {\r\n            fileViewers.viewers[extension] = [];\r\n        }\r\n        fileViewers.viewers[extension].push(app);\r\n        localStorage.setItem('WINBOWS_SYSTEM_FV_VIEWERS', JSON.stringify(fileViewers.viewers));\r\n        console.warn('%cfileViewers.setViewer()%c has been deprecated.\\nPlease use %cfileViewers.updateViewer()%c instead', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '')\r\n    },\r\n    // Deprecated Method\r\n    unsetViewer: (extension, app) => {\r\n        var index = fileViewers.viewers[extension].indexOf(app);\r\n        if (index != -1) {\r\n            fileViewers.viewers[extension].splice(index, 1);\r\n        }\r\n        localStorage.setItem('WINBOWS_SYSTEM_FV_VIEWERS', JSON.stringify(fileViewers.viewers));\r\n        console.warn('%cfileViewers.unsetViewer()%c has been deprecated.\\nPlease use %cfileViewers.updateViewer()%c instead', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '')\r\n    },\r\n    setDefaultViewer: (extension, app) => {\r\n        var exists = false;\r\n        Object.keys(fileViewers.registeredViewers).forEach(viewer => {\r\n            if (viewer == app || fileViewers.registeredViewers[viewer] == app) {\r\n                exists = viewer;\r\n            }\r\n        })\r\n        if (exists != false) {\r\n            fileViewers.defaultViewers[extension] = exists;\r\n        }\r\n        localStorage.setItem('WINBOWS_SYSTEM_FV_DEFAULT_VIEWERS', JSON.stringify(fileViewers.defaultViewers));\r\n    },\r\n    unsetDefaultViewer: (extension, app) => {\r\n        if (fileViewers.defaultViewers[extension]) {\r\n            fileViewers.defaultViewers.splice(fileViewers.defaultViewers.indexOf(app), 1)\r\n        }\r\n        localStorage.setItem('WINBOWS_SYSTEM_FV_DEFAULT_VIEWERS', JSON.stringify(fileViewers.defaultViewers));\r\n    },\r\n    getDefaultViewer: (file = '') => {\r\n        var extension = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.extname(file).toLowerCase();\r\n        var viewer = fileViewers.defaultViewers[extension];\r\n        if (!viewer) {\r\n            return null;\r\n        } else {\r\n            return fileViewers.registeredViewers[viewer];\r\n        }\r\n    },\r\n    getViewers: (file = '') => {\r\n        var extension = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.extname(file).toLowerCase();\r\n        var accepted = ['*', extension];\r\n        if (extension == '') {\r\n            accepted = ['*'];\r\n        }\r\n        var viewers = {};\r\n        Object.keys(fileViewers.registeredViewers).forEach(viewer => {\r\n            if (window.modes.debug == true) {\r\n                console.log(fileViewers.registeredViewers[viewer])\r\n            }\r\n            if (fileViewers.registeredViewers[viewer].accepts.some(ext => accepted.includes(ext))) {\r\n                viewers[viewer] = fileViewers.registeredViewers[viewer];\r\n            }\r\n        })\r\n        if (window.modes.debug == true) {\r\n            console.log(file, extension, viewers)\r\n        }\r\n        return viewers;\r\n    }\r\n}\r\n\r\nif (localStorage.getItem('WINBOWS_SYSTEM_FV_VIEWERS') && window.modes.dev == false) {\r\n    fileViewers.viewers = JSON.parse(localStorage.getItem('WINBOWS_SYSTEM_FV_VIEWERS'));\r\n} else {\r\n    localStorage.setItem('WINBOWS_SYSTEM_FV_VIEWERS', JSON.stringify(fileViewers.viewers));\r\n}\r\nif (localStorage.getItem('WINBOWS_SYSTEM_FV_DEFAULT_VIEWERS') && window.modes.dev == false) {\r\n    fileViewers.defaultViewers = JSON.parse(localStorage.getItem('WINBOWS_SYSTEM_FV_DEFAULT_VIEWERS'));\r\n} else {\r\n    localStorage.setItem('WINBOWS_SYSTEM_FV_DEFAULT_VIEWERS', JSON.stringify(fileViewers.defaultViewers));\r\n}\r\nif (localStorage.getItem('WINBOWS_SYSTEM_FV_REGISTERED_VIEWERS') && window.modes.dev == false) {\r\n    fileViewers.registeredViewers = JSON.parse(localStorage.getItem('WINBOWS_SYSTEM_FV_REGISTERED_VIEWERS'));\r\n} else {\r\n    localStorage.setItem('WINBOWS_SYSTEM_FV_REGISTERED_VIEWERS', JSON.stringify(fileViewers.registeredViewers));\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fileViewers);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/system/fileViewer.js?\n}")},"./src/os/system/shell/commandRegistry.js":
/*!************************************************!*\
  !*** ./src/os/system/shell/commandRegistry.js ***!
  \************************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   commandRegistry: () => (/* binding */ commandRegistry)\n/* harmony export */ });\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _shellUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shellUtils.js */ \"./src/os/system/shell/shellUtils.js\");\n/* harmony import */ var _appRegistry_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../appRegistry.js */ \"./src/os/system/appRegistry.js\");\n/* harmony import */ var _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/sysInfo.js */ \"./src/os/core/sysInfo.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../kernel/wrt/core.js */ \"./src/os/kernel/wrt/core.js\");\n/* harmony import */ var _kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../kernel/wrt/process.js */ \"./src/os/kernel/wrt/process.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/viewport.js */ \"./src/os/core/viewport.js\");\n/* harmony import */ var _core_stat_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/stat.js */ \"./src/os/core/stat.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_3__, _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_6__, _kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_7__]);\n([_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_3__, _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_6__, _kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_7__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @callback CommandHandler\r\n * @param {{ args: any[], flags: any }} param0\r\n * @param {ShellInstance} shell\r\n * @returns {void}\r\n */\r\n\r\n/**\r\n * @typedef {Object} CommandConfig\r\n * @property {string} description\r\n * @property {string} usage\r\n * @property {Object} options\r\n * @property {string} category\r\n * @property {CommandHandler} handler\r\n */\r\n\r\nclass CommandRegistry {\r\n    constructor() {\r\n        this.commands = new Map();\r\n        this.categories = new Map([\r\n            ['general', {\r\n                title: 'General commands'\r\n            }]\r\n        ]);\r\n    }\r\n\r\n    /**\r\n     * Register command\r\n     * @param {string|string[]} name \r\n     * @param {CommandConfig} config\r\n     */\r\n    register(name, config = {}) {\r\n        if (Array.isArray(name)) {\r\n            name.forEach(n => {\r\n                this.commands.set(n, {\r\n                    description: config.description ?? '',\r\n                    usage: config.usage ?? n,\r\n                    options: config.options ?? {},\r\n                    category: config.category ?? 'general',\r\n                    handler: config.handler ?? (() => true)\r\n                });\r\n            })\r\n        } else {\r\n            this.commands.set(name, {\r\n                description: config.description ?? '',\r\n                usage: config.usage ?? name,\r\n                options: config.options ?? {},\r\n                category: config.category ?? 'general',\r\n                handler: config.handler ?? (() => true)\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @param {string} category \r\n     * @param {Object} config \r\n     */\r\n    addCategory(category, config = {}) {\r\n        if (this.categories.has(category)) {\r\n            throw new Error(`Category ${category} already exists.`);\r\n        }\r\n        this.categories.set(category, {\r\n            title: (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.capitalizeFirstLetter)(config.title ?? category)\r\n        });\r\n    }\r\n\r\n    deregister(name) {\r\n        this.commands.delete(name);\r\n    }\r\n\r\n    list() {\r\n        return this.commands.keys();\r\n    }\r\n\r\n    get(name) {\r\n        return this.commands.get(name);\r\n    }\r\n\r\n    has(name) {\r\n        return this.commands.has(name);\r\n    }\r\n}\r\n\r\nconst commandRegistry = new CommandRegistry();\r\n\r\ncommandRegistry.addCategory('built-in', {\r\n    title: 'Built-in commands'\r\n})\r\n\r\n//=========== File and directory operations ===========//\r\n\r\n// Change directory\r\ncommandRegistry.register(['cd', 'chdir'], {\r\n    description: 'Displays the name of the current directory or changes the current directory.',\r\n    usage: 'cd|chdir [..]',\r\n    options: {\r\n        '[..]': 'Specifies that you want to change to the parent folder.'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args }, shell) => {\r\n        let target = args[0];\r\n        if (!target) return true;\r\n\r\n        target = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolveEnvPath(target);\r\n        const resolvedDir = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolve(_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.normalize(shell.root + shell.pwd), target);\r\n        const dir = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.toDirFormat(resolvedDir);\r\n\r\n        if (!_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.isValidAbsolutePath(dir)) {\r\n            shell.stderr.write(`Invalid directory: ${target}\\n`);\r\n            return false;\r\n        }\r\n        if (!shell.fs.exists(dir)) {\r\n            shell.stderr.write(`Directory not found: ${target}\\n`);\r\n            return false;\r\n        }\r\n        if (!dir?.toUpperCase().startsWith(shell.root)) {\r\n            shell.stderr.write(`Access denied: ${target}\\n`);\r\n            return false;\r\n        }\r\n\r\n        const pwd = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolve(shell.pwd, dir);\r\n        shell.pwd = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.parsePath(pwd).path;\r\n        return true;\r\n    }\r\n});\r\n\r\n// List directory\r\ncommandRegistry.register('dir', {\r\n    description: 'Displays a list of a directory\\'s files and subdirectories.',\r\n    usage: 'dir [/a] [/s] [/b]',\r\n    options: {\r\n        '/a': '',\r\n        '/s': 'Lists every occurrence of the specified file name within the specified directory and all subdirectories.',\r\n        '/b': 'Displays a bare list of directories and files, with no additional information.'\r\n    },\r\n    category: 'built-in',\r\n    handler: async ({ args }, shell) => {\r\n        let displayAll = false;\r\n        let displaySubdir = false;\r\n        let displayMinimally = false;\r\n        let argString = args.join(' ');\r\n\r\n        // Display all types\r\n        if (/\\/[aA]/i.test(argString)) displayAll = true;\r\n\r\n        // Display subdirectory\r\n        if (/\\/[sS]/i.test(argString)) displaySubdir = true;\r\n\r\n        // No header\r\n        if (/\\/[bB]/i.test(argString)) displayMinimally = true;\r\n\r\n        const contents = await shell.fs.readdir(_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.normalize(shell.root + shell.pwd), {\r\n            recursive: displaySubdir\r\n        });\r\n        for (const path of contents) {\r\n            const name = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.basename(path);\r\n            if (displayMinimally) {\r\n                shell.stdout.write(name + '\\n');\r\n            } else {\r\n                const stat = shell.fs.stat(path);\r\n                const date = new Date(stat.lastModifiedTime);\r\n                let dateString = '';\r\n                if (isNaN(date)) {\r\n                    dateString = 'Invalid date';\r\n                } else {\r\n                    const day = date.format(\"yyyy/MM/dd\");\r\n                    const time = (date.format(\"hh\") < 13 ? date.format(\"hh:mm\") : new Date(date.getTime() - 12 * 1000 * 60 * 60).format(\"hh:mm\")) + (date.format(\"hh\") < 12 ? ' AM' : ' PM');\r\n                    dateString = day + ' ' + time;\r\n                }\r\n                shell.stdout.write(dateString + '\\t' + (stat.type == 'directory' ? '<DIR>\\t\\t' : '\\t' + stat.length + '\\t') + name + '\\n');\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n})\r\n\r\n// Make directory\r\ncommandRegistry.register(['md', 'mkdir'], {\r\n    description: 'Creates a directory or subdirectory.',\r\n    usage: 'md|mkdir <path>',\r\n    options: {\r\n        '<path>': 'Specifies the name and location of the new directory. The maximum length of any single path is determined by the file system. This is a required parameter.'\r\n    },\r\n    category: 'built-in',\r\n    handler: async ({ args }, shell) => {\r\n        let dirname = args[0];\r\n        if (!dirname) {\r\n            shell.stderr.write('Usage: md|mkdir <path>\\n');\r\n            return false;\r\n        }\r\n\r\n        dirname = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolveEnvPath(dirname);\r\n        const resolvedDir = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolve(_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.normalize(shell.root + shell.pwd), dirname);\r\n        const dir = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.toDirFormat(resolvedDir);\r\n\r\n        if (!_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.isValidAbsolutePath(dir)) {\r\n            shell.stderr.write(`Invalid directory: ${dirname}\\n`);\r\n            return false;\r\n        }\r\n        if (shell.fs.exists(dir)) {\r\n            shell.stderr.write(`Directory already exists: ${dirname}\\n`);\r\n            return false;\r\n        }\r\n        if (!dir?.toUpperCase().startsWith(shell.root)) {\r\n            shell.stderr.write(`Access denied: ${dirname}\\n`);\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            await shell.fs.mkdir(dir);\r\n            return true;\r\n        } catch (e) {\r\n            shell.stderr.write('Error: ' + e.name + ', Message: ' + e.message + '\\n');\r\n            return false;\r\n        }\r\n    }\r\n})\r\n\r\n// Remove directory\r\ncommandRegistry.register(['rd', 'rmdir'], {\r\n    description: 'Deletes a directory.',\r\n    usage: 'rd|rmdir <path> [/s [/q]]',\r\n    options: {\r\n        '<path>': 'Specifies the location and the name of the directory that you want to delete.',\r\n        '/s': 'Deletes a directory tree (the specified directory and all its subdirectories, including all files).',\r\n        '/q': 'Specifies quiet mode. Does not prompt for confirmation when deleting a directory tree. The /q parameter works only if /s is also specified. CAUTION: When you run in quiet mode, the entire directory tree is deleted without confirmation. Make sure that important files are moved or backed up before using the /q command-line option.'\r\n    },\r\n    category: 'built-in',\r\n    handler: async ({ args }, shell) => {\r\n        let dirname = args[0];\r\n        if (!dirname) {\r\n            shell.stderr.write('Usage: rd|rmdir <path> [/s [/q]]\\n');\r\n            return false;\r\n        }\r\n\r\n        dirname = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolveEnvPath(dirname);\r\n        const resolvedDir = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolve(_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.normalize(shell.root + shell.pwd), dirname);\r\n        const dir = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.toDirFormat(resolvedDir);\r\n\r\n        if (!_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.isValidAbsolutePath(dir)) {\r\n            shell.stderr.write(`Invalid directory: ${dirname}\\n`);\r\n            return false;\r\n        }\r\n        if (!shell.fs.exists(dir)) {\r\n            shell.stderr.write(`Directory not found: ${dirname}\\n`);\r\n            return false;\r\n        }\r\n        if (!dir?.toUpperCase().startsWith(shell.root)) {\r\n            shell.stderr.write(`Access denied: ${dirname}\\n`);\r\n            return false;\r\n        }\r\n\r\n        let argString = args.slice(1).join(' ');\r\n        let recursive = false;\r\n        let quietMode = false;\r\n\r\n        // Subitems\r\n        if (/\\/[sS]/i.test(argString)) recursive = true;\r\n\r\n        // Quiet mode\r\n        if (/\\/[qQ]/i.test(argString)) quietMode = true;\r\n\r\n        // Show prompt\r\n        if (quietMode == false) {\r\n            const confirm = await shell.input(`Confirm to remove the directory ${dir} (y/n)?`, 'normal');\r\n            if (confirm.search(/[yY]/i) == -1) return true;\r\n        }\r\n\r\n        try {\r\n            await shell.fs.rm(dir, {\r\n                recursive,\r\n                force: quietMode\r\n            });\r\n            shell.stdout.write('Directory removed successfully\\n');\r\n            return true;\r\n        } catch (e) {\r\n            shell.stderr.write('Error: ' + e.name + ', Message: ' + e.message + '\\n');\r\n            return false;\r\n        }\r\n    }\r\n})\r\n\r\n// Remove file\r\ncommandRegistry.register(['del', 'erase'], {\r\n    description: 'Deletes one or more files.',\r\n    usage: 'del|erase <path> [/p] [/s] [/q]',\r\n    options: {\r\n        '<path>': 'Specifies the file or the directory that you want to delete',\r\n        '/p': 'Prompts for confirmation before deleting the specified file.',\r\n        '/s': 'Deletes specified files from the current directory and all subdirectories. Displays the names of the files as they are being deleted. ( Unavailable )',\r\n        '/q': 'Specifies quiet mode. You are not prompted for delete confirmation.'\r\n    },\r\n    category: 'built-in',\r\n    handler: async ({ args }, shell) => {\r\n        let path = args[0];\r\n        if (!path) {\r\n            shell.stderr.write('Usage: del|erase <path> [/p] [/s] [/q]\\n');\r\n            return false;\r\n        }\r\n\r\n        path = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolveEnvPath(path);\r\n        const resolvedPath = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.resolve(_shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.normalize(shell.root + shell.pwd), path);\r\n\r\n        if (!resolvedPath?.toUpperCase().startsWith(shell.root)) {\r\n            shell.stderr.write(`Access denied: ${path}\\n`);\r\n            return false;\r\n        }\r\n\r\n        let argString = args.slice(1).join(' ');\r\n        let recursive = false;\r\n        let quietMode = false;\r\n\r\n        // Show prompt\r\n        if (/\\/[pP]/i.test(argString)) quietMode = false;\r\n\r\n        // Subitems\r\n        if (/\\/[sS]/i.test(argString)) recursive = true;\r\n\r\n        // Quiet mode\r\n        if (/\\/[qQ]/i.test(argString)) quietMode = true;\r\n\r\n        // Show prompt\r\n        if (quietMode == false) {\r\n            const confirm = await shell.input(`Are you sure (y/n)?`, 'normal');\r\n            if (confirm.search(/[yY]/i) == -1) return true;\r\n        }\r\n\r\n        try {\r\n            await shell.fs.rm(resolvedPath, {\r\n                force: quietMode\r\n            });\r\n            shell.stdout.write('Removed successfully\\n');\r\n        } catch (e) {\r\n            shell.stderr.write(`Could not delete ${resolvedPath}: ${e.message}\\n`);\r\n        }\r\n\r\n        return true;\r\n    }\r\n})\r\n\r\n//=========== System info and management ===========//\r\n\r\ncommandRegistry.register('tasklist', {\r\n    description: 'Displays a list of currently running processes on the local computer.',\r\n    usage: 'tasklist',\r\n    category: 'built-in',\r\n    handler: (_, shell) => {\r\n        const table = (0,_shellUtils_js__WEBPACK_IMPORTED_MODULE_2__.terminalTable)(shell.stdout, [{\r\n            size: 16,\r\n            text: 'Name'\r\n        }, {\r\n            size: 8,\r\n            text: 'PID',\r\n            align: 'right'\r\n        }, {\r\n            size: 24,\r\n            text: 'Title'\r\n        }, {\r\n            size: 16,\r\n            text: 'Runtime ID'\r\n        }]);\r\n\r\n        _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_6__.tasklist.list().forEach(k => {\r\n            try {\r\n                const task = _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_6__.tasklist.get(k);\r\n                table.row([{ text: _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.basename(task.__filename || '') }, { text: String(task.process.pid) }, { text: task.process.title }, { text: k }]);\r\n            } catch (e) {\r\n                console.error(e);\r\n            }\r\n        })\r\n\r\n        shell.stdout.write('\\r\\n');\r\n\r\n        return true;\r\n    }\r\n})\r\n\r\ncommandRegistry.register('shutdown', {\r\n    description: 'Enables you to shut down or restart local or remote computers, one at a time.',\r\n    usage: 'shutdown [/r]',\r\n    options: {\r\n        '/r': 'Restarts the computer after shutdown.'\r\n    },\r\n    category: 'built-in',\r\n    handler: async ({ args }, shell) => {\r\n        if (args.includes('/r')) {\r\n            location.reload();\r\n            return;\r\n        }\r\n\r\n        setTimeout(() => {\r\n            _core_stat_js__WEBPACK_IMPORTED_MODULE_9__.stat.set('Kernel.WRT.available', false);\r\n            _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_6__.tasklist.list().forEach(k => {\r\n                _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_6__.tasklist.get(k)?.kill();\r\n            })\r\n            _core_viewport_js__WEBPACK_IMPORTED_MODULE_8__.viewport.root.innerHTML = '';\r\n        })\r\n    }\r\n})\r\n\r\ncommandRegistry.register('taskkill', {\r\n    description: 'Ends one or more tasks or processes. Processes can be ended by process ID or image name. You can use the tasklist command command to determine the process ID (PID) for the process to be ended.',\r\n    usage: 'taskkill [/pid <processID> | /im <imagename>]',\r\n    options: {\r\n        '/pid <processID>': 'Specifies the process ID of the process to be terminated.',\r\n        // '/im <imagename>': 'Specifies the image name of the process to be terminated. Use the wildcard character (*) to specify all image names. ( Unavailable )'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args }, shell) => {\r\n        const _args = args.slice(1);\r\n        const argString = args.join(' ');\r\n\r\n        if (/\\/pid/i.test(argString)) {\r\n            for (const arg of _args) {\r\n                try {\r\n                    const p = _kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_7__.processes.get(Number(arg));\r\n                    console.log(p)\r\n                    if (p) {\r\n                        p.kill();\r\n                        shell.stdout.write(`Process with pid ${arg} has been terminated.\\n`);\r\n                    }\r\n                } catch (e) {\r\n                    shell.stderr.write(e.message);\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n})\r\n\r\ncommandRegistry.register('start', {\r\n    description: 'Starts a separate Command Prompt window to run a specified program.',\r\n    usage: 'start <program>',\r\n    options: {\r\n        '<program>': 'Specifies the program to start.'\r\n    },\r\n    category: 'built-in',\r\n    handler: async ({ flags, args }, shell) => {\r\n        const uri = (0,_shellUtils_js__WEBPACK_IMPORTED_MODULE_2__.parseURI)(args[0]);\r\n        if (!uri.scheme) {\r\n            shell.stderr.write(`Invalid URI: ${args[0]}\\n`);\r\n            return false;\r\n        }\r\n\r\n        if (uri.scheme.startsWith('http') && flags['new-window']) {\r\n            window.open(args[0], '_blank');\r\n            return true;\r\n        }\r\n\r\n        const app = _appRegistry_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getInfo(uri.scheme);\r\n        if (!app || !app.entryScript) {\r\n            shell.stderr.write(`Can not found file ${uri.scheme}.\\n`);\r\n            return false;\r\n        }\r\n\r\n        try {\r\n            const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_5__[\"default\"].get('WRT')\r\n            const wrt = new WRT();\r\n            wrt.runFile(app.entryScript, {\r\n                uri\r\n            });\r\n            return true;\r\n        } catch (e) {\r\n            shell.stderr.write(e.message + '\\n');\r\n            return false;\r\n        }\r\n    }\r\n})\r\n\r\n// Set env variable\r\ncommandRegistry.register('set', {\r\n    description: 'Set an env variable.',\r\n    usage: 'set <name>=<value>',\r\n    options: {\r\n        '<name>': 'Specifies the env variable name to set.',\r\n        '<value>': 'Specifies the value to set.'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args }, shell) => {\r\n        const kv = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_1__.parseKeyValueArgs)(args);\r\n        if (Object.keys(kv).length === 0) {\r\n            shell.stderr.write('Usage: set <name>=<value>\\n');\r\n            return false;\r\n        }\r\n        try {\r\n            for (const [key, val] of Object.entries(kv)) {\r\n                shell.setEnv(key, val);\r\n            }\r\n            return true;\r\n        } catch (e) {\r\n            shell.stderr.write(e.message + '\\n');\r\n            return false;\r\n        }\r\n    }\r\n});\r\n\r\n// Unset env variable\r\ncommandRegistry.register('unset', {\r\n    description: 'Unset an env variable.',\r\n    usage: 'unset <name>',\r\n    options: {\r\n        '<name>': 'Specifies the env variable name to unset.'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args, flag }, shell) => {\r\n        if (args.length !== 1) {\r\n            shell.stderr.write('Usage: unset <name>\\n');\r\n            return false;\r\n        }\r\n        try {\r\n            shell.unsetEnv(args[0]);\r\n            return true;\r\n        } catch (e) {\r\n            shell.stderr.write(e.message + '\\n');\r\n            return false;\r\n        }\r\n    }\r\n})\r\n\r\n// List env keys\r\ncommandRegistry.register('env', {\r\n    description: 'List all environtment variables.',\r\n    usage: 'env',\r\n    category: 'built-in',\r\n    handler: (_, shell) => {\r\n        const env = shell.getAllEnv();\r\n        for (const [key, val] of Object.entries(env)) {\r\n            shell.stdout.write(`${key}=${val}\\n`);\r\n        }\r\n        return true;\r\n    }\r\n});\r\n\r\n// Clear screen\r\ncommandRegistry.register('cls', {\r\n    description: 'Clears the screen.',\r\n    usage: 'cls',\r\n    category: 'built-in',\r\n    handler: (_, shell) => {\r\n        shell.stdout.clear?.();\r\n        return true;\r\n    }\r\n})\r\n\r\n// Print Working Directory\r\ncommandRegistry.register('pwd', {\r\n    description: 'Print the working directory.',\r\n    usage: 'pwd',\r\n    category: 'built-in',\r\n    handler: (_, shell) => {\r\n        let pwd = _shared_fs_js__WEBPACK_IMPORTED_MODULE_0__.fsUtils.normalize(shell.root + shell.pwd);\r\n        if (/^[a-zA-Z]:$/i.test(pwd)) {\r\n            pwd += '/';\r\n        }\r\n        shell.stdout.write(pwd + '\\n');\r\n        return true;\r\n    }\r\n})\r\n\r\n// Print Winbows Version\r\ncommandRegistry.register('ver', {\r\n    description: 'Print Winbows version.',\r\n    usage: 'version',\r\n    category: 'built-in',\r\n    handler: (_, shell) => {\r\n        shell.stdout.write(`Winbows11 [Version ${_core_sysInfo_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"].version}]\\n`);\r\n        return true;\r\n    }\r\n})\r\n\r\n// Exit shell\r\ncommandRegistry.register('exit', {\r\n    description: 'Exit the shell.',\r\n    usage: 'exit [code]',\r\n    options: {\r\n        '[code]': 'Specifies the exit code.'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args }, shell) => {\r\n        const exitCode = args[0] || 0;\r\n        shell.dispose(exitCode);\r\n        return true;\r\n    }\r\n})\r\n\r\n//==== Text processing and file operation assistance ====//\r\n\r\n// Set title\r\ncommandRegistry.register('title', {\r\n    description: 'Creates a title for the Command Prompt window.',\r\n    usage: 'title [<string>]',\r\n    options: {\r\n        '<string>': 'Specifies the text to appear as the title of the Command Prompt window.'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args }, shell) => {\r\n        shell.process.title = args.join(' ');\r\n        return true;\r\n    }\r\n})\r\n\r\n// Echo\r\ncommandRegistry.register('echo', {\r\n    description: 'Displays messages or turns on or off the command echoing feature.',\r\n    usage: 'echo [<message>]',\r\n    options: {\r\n        '<message>': 'Specifies the message to display.'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args, flag }, shell) => {\r\n        shell.stdout.write(args.join(' ') + '\\n');\r\n        return true;\r\n    }\r\n})\r\n\r\n// Help\r\ncommandRegistry.register('help', {\r\n    description: 'Displays a list of the available commands or detailed help information on a specified command. If used without parameters, help lists and briefly describes every system command.',\r\n    usage: 'help [<command>]',\r\n    options: {\r\n        '<command>': 'Specifies the command for which to display detailed help information.'\r\n    },\r\n    category: 'built-in',\r\n    handler: ({ args, flag }, shell) => {\r\n        if (args.length !== 0) {\r\n            const cmd = commandRegistry.commands.get(args[0]);\r\n            if (cmd) {\r\n                shell.stdout.write(cmd.description + '\\n\\n');\r\n                shell.stdout.write(cmd.usage + '\\n');\r\n                if (cmd.options && Object.keys(cmd.options).length > 0) {\r\n                    shell.stdout.write('\\n');\r\n                    for (const [key, val] of Object.entries(cmd.options)) {\r\n                        shell.stdout.write('  ' + (0,_shellUtils_js__WEBPACK_IMPORTED_MODULE_2__.formatTwoColumns)(key, val, 12) + '\\n');\r\n                    }\r\n                }\r\n                return true;\r\n            } else {\r\n                shell.stderr.write(`Command not found: ${args[0]}\\n`);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        shell.stdout.write('For more information on a specific command, type HELP command-name');\r\n\r\n        const categories = commandRegistry.categories.keys();\r\n        for (const category of categories) {\r\n            shell.stdout.write(`\\n\\n${commandRegistry.categories.get(category).title}`);\r\n            for (const cmd of commandRegistry.commands.keys()) {\r\n                if (commandRegistry.commands.get(cmd).category === category) {\r\n                    shell.stdout.write('\\n' + (0,_shellUtils_js__WEBPACK_IMPORTED_MODULE_2__.formatTwoColumns)(cmd, commandRegistry.commands.get(cmd).description));\r\n                }\r\n            }\r\n        }\r\n\r\n        shell.stdout.write('\\n');\r\n\r\n        return true;\r\n    }\r\n})\r\n\r\n//==================== Easter Egg =======================//\r\ncommandRegistry.addCategory('easter-egg', {\r\n    title: 'Easter eggs'\r\n})\r\n\r\ncommandRegistry.register('nothing', {\r\n    description: 'Nothing beats a jet2 holiday!',\r\n    usage: 'nothing',\r\n    category: 'easter-egg',\r\n    handler: async (_, shell) => {\r\n        const parts = [\r\n            { text: 'Nothing ', duration: 100 },\r\n            { text: 'Beats ', duration: 100 },\r\n            { text: 'A ', duration: 100 },\r\n            { text: 'Jet2 ', duration: 100 },\r\n            { text: 'Holiday!\\n', duration: 100 },\r\n            { text: 'And ', duration: 100 },\r\n            { text: 'Right ', duration: 100 },\r\n            { text: 'Now ', duration: 100 },\r\n            { text: 'You ', duration: 100 },\r\n            { text: 'Can ', duration: 100 },\r\n            { text: 'Save ', duration: 100 },\r\n            { text: 'Â£50 ', duration: 100 },\r\n            { text: 'Per ', duration: 100 },\r\n            { text: 'Person!\\n', duration: 100 },\r\n            { text: 'Thatâs ', duration: 100 },\r\n            { text: 'Â£200 ', duration: 100 },\r\n            { text: 'Off ', duration: 100 },\r\n            { text: 'For ', duration: 100 },\r\n            { text: 'A ', duration: 100 },\r\n            { text: 'Family ', duration: 100 },\r\n            { text: 'Of ', duration: 100 },\r\n            { text: '4!\\n', duration: 100 }\r\n        ];\r\n\r\n        for (let i = 0; i < parts.length; i++) {\r\n            shell.stdout.write(parts[i].text);\r\n            await (function () {\r\n                return new Promise(r => setTimeout(r, parts[i].duration));\r\n            })();\r\n        }\r\n\r\n        return true;\r\n    }\r\n})\r\n\r\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/system/shell/commandRegistry.js?\n}")},"./src/os/system/shell/shell.js":
/*!**************************************!*\
  !*** ./src/os/system/shell/shell.js ***!
  \**************************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ShellInstance: () => (/* binding */ ShellInstance)\n/* harmony export */ });\n/* harmony import */ var _lib_minimist_js_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/minimist.js/index.js */ \"./src/lib/minimist.js/index.js\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _commandRegistry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./commandRegistry.js */ \"./src/os/system/shell/commandRegistry.js\");\n/* harmony import */ var _lib_stdio_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../lib/stdio.js */ \"./src/os/lib/stdio.js\");\n/* harmony import */ var _shared_utils_ts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/utils.ts */ \"./src/shared/utils.ts\");\n/* harmony import */ var _kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../kernel/wrt/process.js */ \"./src/os/kernel/wrt/process.js\");\n/* harmony import */ var _appRegistry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../appRegistry.js */ \"./src/os/system/appRegistry.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var string_argv__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! string-argv */ \"./node_modules/string-argv/index.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_shared_fs_js__WEBPACK_IMPORTED_MODULE_1__, _commandRegistry_js__WEBPACK_IMPORTED_MODULE_2__, _kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_5__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_6__]);\n([_shared_fs_js__WEBPACK_IMPORTED_MODULE_1__, _commandRegistry_js__WEBPACK_IMPORTED_MODULE_2__, _kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_5__, _appRegistry_js__WEBPACK_IMPORTED_MODULE_6__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst reservedEnvKeys = Object.keys((0,_kernel_wrt_process_js__WEBPACK_IMPORTED_MODULE_5__.generateEnv)());\r\nconst _queue = new WeakMap();\r\nconst _queueRunning = new WeakMap();\r\nconst _handleCLI = Symbol('handleCLI')\r\n\r\nclass ShellInstance extends _shared_utils_ts__WEBPACK_IMPORTED_MODULE_4__.EventEmitter {\r\n    constructor(process, {\r\n        isTTY = false\r\n    } = {}) {\r\n        super();\r\n\r\n        // Initialize queue\r\n        _queue.set(this, []);\r\n        _queueRunning.set(this, false);\r\n\r\n        const { disk, path } = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.parsePath(process.cwd());\r\n\r\n        this.process = process;\r\n        this.root = (disk || 'C').toUpperCase() + ':/';\r\n        this.pwd = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.toDirFormat(path);\r\n        this.env = {\r\n            ...process.env\r\n        };\r\n        this.isTTY = isTTY != false;\r\n        this.stdin = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].InputStream();\r\n        this.stdout = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].OutputStream();\r\n        this.stderr = new _lib_stdio_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].OutputStream();\r\n        this.stdinBuffer = '';\r\n        this.active = true;\r\n        this._pendingDispose = false;\r\n        this._exitCode = 0;\r\n        this.fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.IDBFS)();\r\n        this.id = (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_4__.randomID)(24);\r\n\r\n        this.process.on('exit', (code) => {\r\n            this.dispose(code);\r\n        })\r\n\r\n        // Define pwd\r\n        Object.defineProperty(this.env, 'pwd', {\r\n            get: () => _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.resolve(this.root, this.pwd),\r\n            set: (fullPath) => {\r\n                const { disk, path } = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.parsePath(fullPath);\r\n\r\n                this.root = disk.toUpperCase() + ':/';\r\n                this.pwd = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.toDirFormat(path);\r\n            },\r\n            enumerable: true,\r\n            configurable: true\r\n        });\r\n\r\n        this.stdout.onClear = () => {\r\n            this._emit('clear');\r\n        }\r\n    }\r\n\r\n    async [_handleCLI](wrt) {\r\n        if (wrt.type !== 'cli') return;\r\n        if (!wrt.runInBackground && !this.isTTY) {\r\n            const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get('System');\r\n            const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get('WRT');\r\n            const pipeName = `system://shell-service/` + (0,_shared_utils_ts__WEBPACK_IMPORTED_MODULE_4__.randomID)(64);\r\n            const ipc = System.processAPIs.IPC.listen(pipeName);\r\n            const data = _appRegistry_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getInfo('cmd');\r\n            const cmdWRT = new WRT({\r\n                code: await this.fs.readFileAsText(data.entryScript),\r\n                __filename: data.entryScript\r\n                // token: token\r\n            });\r\n            cmdWRT.process.env.pipe = pipeName;\r\n            cmdWRT.main();\r\n\r\n            ipc.on('data', (e) => {\r\n                // if (e.data.type === 'check') {\r\n                //     ipc.send({\r\n                //         type: 'check',\r\n                //         data: token\r\n                //     })\r\n                // }\r\n                if (e.data.type === 'ready') {\r\n                    ipc.send({\r\n                        type: 'data',\r\n                        data: wrt\r\n                    })\r\n                    setTimeout(() => {\r\n                        ipc.close();\r\n                    })\r\n                }\r\n            })\r\n\r\n            if (this.getEnv(\"SHOW_EXEC_TIME\") == \"1\" && this.active != false) {\r\n                const end = performance.now();\r\n                this.stdout.write(`Execution completed, took ${(end - start).toFixed(2)}ms\\n`);\r\n            }\r\n\r\n            return null;\r\n        } else {\r\n            wrt.main();\r\n\r\n            return wrt;\r\n        }\r\n    }\r\n\r\n    input(promptText, type = 'normal') {\r\n        this.stdout.write(promptText);\r\n        this.stdin.resume();\r\n        this._emit('input', {\r\n            promptText,\r\n            type\r\n        });\r\n\r\n        return new Promise(resolve => {\r\n            this.stdin.once('data', dt => {\r\n                this.stdin.pause();\r\n                resolve(dt);\r\n            });\r\n        })\r\n    }\r\n\r\n    write(input) {\r\n        this.stdinBuffer += input;\r\n        if (input.includes('\\n')) {\r\n            const lines = this.stdinBuffer.split('\\n');\r\n            this.stdinBuffer = lines.pop();\r\n            for (const line of lines) {\r\n                this.execCommand(line.trim());\r\n            }\r\n        }\r\n    }\r\n\r\n    getPwd() {\r\n        return _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.normalize(this.root + this.pwd);\r\n    }\r\n\r\n    async execCommand(command) {\r\n        if (!this.active) return Promise.reject(new Error('Shell is not active'));\r\n        if (command.trim() === '') return;\r\n        return new Promise(async (resolve, reject) => {\r\n            _queue.get(this).push({ command, resolve, reject });\r\n            this.processQueue();\r\n        });\r\n    }\r\n\r\n    async processQueue() {\r\n        if (_queueRunning.get(this)) return;\r\n        _queueRunning.set(this, true);\r\n\r\n        while (_queue.get(this).length > 0) {\r\n            const { command, resolve, reject } = _queue.get(this).shift();\r\n            try {\r\n                const start = performance.now();\r\n                const argsArr = (0,string_argv__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(command.trim()) || [];\r\n                const argv = (0,_lib_minimist_js_index_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(argsArr);\r\n\r\n                for (const [k, v] of Object.entries(argv)) {\r\n                    if (typeof v === 'string' && /(^\".*\"$)|(^'.*'$)/.test(v)) {\r\n                        argv[k] = v.slice(1, -1);\r\n                    }\r\n                }\r\n\r\n                const cmdName = argv._[0];\r\n                const args = argv._.slice(1);\r\n                const handler = _commandRegistry_js__WEBPACK_IMPORTED_MODULE_2__.commandRegistry.get(String(cmdName).toLowerCase())?.handler;\r\n                const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get('WRT');\r\n                const System = _moduleManager_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"].get('System');\r\n\r\n                if (!handler) {\r\n                    // argv without cmdName\r\n                    const argv = [...argsArr].filter(Boolean).slice(1);\r\n\r\n                    // Check if it's an operable program\r\n                    if (/.+\\.wrt$/.test(cmdName)) {\r\n                        let path = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.resolveEnvPath(cmdName);\r\n                        path = _shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.resolve(_shared_fs_js__WEBPACK_IMPORTED_MODULE_1__.fsUtils.normalize(this.root + this.pwd), path);\r\n\r\n                        try {\r\n                            const fileContent = await this.fs.readFileAsText(path);\r\n                            if (fileContent) {\r\n                                const wrt = new WRT({\r\n                                    code: fileContent,\r\n                                    __filename: path,\r\n                                    argv: argv\r\n                                });\r\n\r\n                                if (wrt.type === 'cli') {\r\n                                    resolve({\r\n                                        type: 'cli',\r\n                                        data: await this[_handleCLI](wrt)\r\n                                    });\r\n                                    continue;\r\n                                }\r\n\r\n                                try {\r\n                                    wrt.main();\r\n\r\n                                    if (this.getEnv(\"SHOW_EXEC_TIME\") == \"1\" && this.active != false) {\r\n                                        const end = performance.now();\r\n                                        this.stdout.write(`Execution completed, took ${(end - start).toFixed(2)}ms\\n`);\r\n                                    }\r\n                                    resolve({\r\n                                        type: 'gui',\r\n                                        data: wrt\r\n                                    });\r\n                                } catch (err) {\r\n                                    this.stderr.write(`An error occurred while executing file : ${path}\\nMessage : ${err.message}\\n`);\r\n                                    reject(err);\r\n                                }\r\n                                continue;\r\n                            }\r\n                        } catch (e) {\r\n                            console.error(e);\r\n                        }\r\n                    }\r\n\r\n                    // Check app rergistry\r\n                    const app = _appRegistry_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"].getInfo(cmdName);\r\n                    if (app && app.entryScript) {\r\n                        const wrt = new WRT({\r\n                            code: await this.fs.readFileAsText(app.entryScript),\r\n                            __filename: app.entryScript,\r\n                            argv: argv\r\n                        });\r\n\r\n                        if (wrt.type === 'cli') {\r\n                            resolve({\r\n                                type: 'cli',\r\n                                data: await this[_handleCLI](wrt)\r\n                            });\r\n                            continue;\r\n                        }\r\n\r\n                        try {\r\n                            wrt.main();\r\n\r\n                            if (this.getEnv(\"SHOW_EXEC_TIME\") == \"1\" && this.active != false) {\r\n                                const end = performance.now();\r\n                                this.stdout.write(`Execution completed, took ${(end - start).toFixed(2)}ms\\n`);\r\n                            }\r\n                            resolve({\r\n                                type: 'gui'\r\n                            });\r\n                        } catch (err) {\r\n                            this.stderr.write(`An error occurred while executing file : ${path}\\nMessage : ${err.message}\\n`);\r\n                            reject(err);\r\n                        }\r\n                        continue;\r\n                    }\r\n\r\n                    const err = `'${cmdName}' is not recognized as an internal or external command, operable program or batch file.\\n`;\r\n                    this.stderr.write(err);\r\n                    reject(err);\r\n                    continue;\r\n                }\r\n\r\n                const result = await handler({ args, flags: argv }, this);\r\n\r\n                // Use \"set SHOW_EXEC_TIME=1\" command to display the command execution time\r\n                if (this.getEnv(\"SHOW_EXEC_TIME\") == \"1\" && this.active != false) {\r\n                    const end = performance.now();\r\n                    this.stdout.write(`Command executed in ${(end - start).toFixed(2)}ms\\n`);\r\n                }\r\n                resolve(result);\r\n            } catch (err) {\r\n                this.stderr.write(`An error occurred while executing the command : ${command}\\nMessage : ${err.message}\\n`);\r\n                reject(err);\r\n            }\r\n        }\r\n\r\n        _queueRunning.set(this, false);\r\n    }\r\n\r\n    setEnv(key, value) {\r\n        if (reservedEnvKeys.includes(key) || ['pwd'].includes(key)) {\r\n            throw new Error(`Cannot modify reserved variable: ${key}`);\r\n        }\r\n        this.env[key] = value;\r\n    }\r\n\r\n    unsetEnv(key) {\r\n        if (reservedEnvKeys.includes(key) || ['pwd'].includes(key)) {\r\n            throw new Error(`Cannot delete reserved variable: ${key}`);\r\n        }\r\n        delete this.env[key];\r\n    }\r\n\r\n    /**\r\n     * Get the environment variable by key\r\n     * @param {string} key \r\n     * @returns {string|undefined}\r\n     */\r\n    getEnv(key) {\r\n        const value = this.env[key];\r\n        return value != null ? String(value) : undefined;\r\n    }\r\n\r\n    getAllEnv() {\r\n        return { ...this.env };\r\n    }\r\n\r\n    async dispose(exitCode) {\r\n        if (!this.active) return;\r\n        exitCode = exitCode || 0;\r\n        this.active = false;\r\n        this.fs.quit?.();\r\n        this.stdout.write?.(`ShellInstance exited with code ${exitCode}\\n`);\r\n        this._emit('dispose', exitCode);\r\n    }\r\n} \n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/system/shell/shell.js?\n}")},"./src/os/system/shell/shellUtils.js":
/*!*******************************************!*\
  !*** ./src/os/system/shell/shellUtils.js ***!
  \*******************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatTwoColumns: () => (/* binding */ formatTwoColumns),\n/* harmony export */   getScheme: () => (/* binding */ getScheme),\n/* harmony export */   parseURI: () => (/* binding */ parseURI),\n/* harmony export */   terminalTable: () => (/* binding */ terminalTable)\n/* harmony export */ });\n/* harmony import */ var uri_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uri-js */ \"./node_modules/uri-js/dist/es5/uri.all.js\");\n\r\n\r\nfunction terminalTable(term, head = [], config = {\r\n    gap: 1,\r\n    separator: '='\r\n}) {\r\n    const cols = head.length;\r\n    const sizes = head.map(h => h.size);\r\n    const aligns = head.map(h => h.align || 'left');\r\n\r\n    term.write('\\r\\n');\r\n    for (let i = 0; i < cols; i++) {\r\n        const cell = head[i];\r\n        const cellSize = sizes[i];\r\n        const text = cell.text;\r\n        if (text.length > cellSize) {\r\n            term.write(`${text.slice(0, cellSize - 1)}â¦`);\r\n        } else if (cell.align == 'right') {\r\n            term.write(`${text.padStart(cellSize)}`);\r\n        } else {\r\n            term.write(text);\r\n            term.write(' '.repeat(cellSize - text.length));\r\n        }\r\n        term.write(' '.repeat(config?.gap || 1))\r\n    }\r\n\r\n    term.write('\\r\\n');\r\n    for (let i = 0; i < cols; i++) {\r\n        const cellSize = sizes[i];\r\n        term.write((config?.separator || '=').repeat(cellSize));\r\n        term.write(' '.repeat(config?.gap || 1));\r\n    }\r\n\r\n    return {\r\n        row: (cells = []) => {\r\n            // Start in new line\r\n            term.write('\\r\\n');\r\n\r\n            for (let i = 0; i < Math.min(cells.length, cols); i++) {\r\n                const cell = cells[i];\r\n                const cellSize = sizes[i];\r\n                const align = cell.align || aligns[i];\r\n                if (cell && cell.text) {\r\n                    const text = String(cell.text);\r\n                    if (text.length > cellSize) {\r\n                        term.write(`${text.slice(0, cellSize - 1)}â¦`);\r\n                    } else if (align == 'right') {\r\n                        term.write(`${text.padStart(cellSize)}`);\r\n                    } else {\r\n                        term.write(text);\r\n                        term.write(' '.repeat(cellSize - text.length));\r\n                    }\r\n                    term.write(' '.repeat(config?.gap || 1))\r\n                } else {\r\n                    term.write(' '.repeat(cellSize + (config?.gap || 1)));\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction formatTwoColumns(left, right, tabSize = 16) {\r\n    const padding = Math.max(1, tabSize - left.length);\r\n    return left + \" \".repeat(padding) + right;\r\n}\r\n\r\nconst parseURI = uri_js__WEBPACK_IMPORTED_MODULE_0__.parse;\r\n\r\nfunction getScheme(uri) {\r\n    if (typeof uri !== 'string') return null;\r\n    const idx = uri.indexOf(':');\r\n    if (idx === -1) return null;\r\n\r\n    const scheme = uri.slice(0, idx);\r\n    if (/^[A-Za-z]([A-Za-z0-9+\\-.]*[A-Za-z0-9])?$/.test(scheme)) {\r\n        return scheme;\r\n    }\r\n    return null;\r\n}\n\n//# sourceURL=webpack://winbows11/./src/os/system/shell/shellUtils.js?\n}")},"./src/os/system/system.js":
/*!*********************************!*\
  !*** ./src/os/system/system.js ***!
  \*********************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/winui/winui.js */ \"./src/lib/winui/winui.js\");\n/* harmony import */ var _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../moduleManager.js */ \"./src/os/moduleManager.js\");\n/* harmony import */ var _appRegistry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./appRegistry.js */ \"./src/os/system/appRegistry.js\");\n/* harmony import */ var _shell_commandRegistry_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shell/commandRegistry.js */ \"./src/os/system/shell/commandRegistry.js\");\n/* harmony import */ var _shell_shell_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shell/shell.js */ \"./src/os/system/shell/shell.js\");\n/* harmony import */ var _shared_fs_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../shared/fs.js */ \"./src/shared/fs.js\");\n/* harmony import */ var _themeManager_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./themeManager.js */ \"./src/os/system/themeManager.js\");\n/* harmony import */ var _core_rom_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/rom.js */ \"./src/os/core/rom.js\");\n/* harmony import */ var _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../kernel/wrt/core.js */ \"./src/os/kernel/wrt/core.js\");\n/* harmony import */ var _WApplication_WApplication_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./WApplication/WApplication.js */ \"./src/os/system/WApplication/WApplication.js\");\n/* harmony import */ var _explorer_explorer_wrt__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../explorer/explorer.wrt */ \"./src/os/explorer/explorer.wrt\");\n/* harmony import */ var _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../core/sysInfo.js */ \"./src/os/core/sysInfo.js\");\n/* harmony import */ var _core_log_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../core/log.js */ \"./src/os/core/log.js\");\n/* harmony import */ var _core_timer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../core/timer.js */ \"./src/os/core/timer.js\");\n/* harmony import */ var _fileViewer_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./fileViewer.js */ \"./src/os/system/fileViewer.js\");\n/* harmony import */ var _fileIcon_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./fileIcon.js */ \"./src/os/system/fileIcon.js\");\n/* harmony import */ var _core_viewport_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../core/viewport.js */ \"./src/os/core/viewport.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_appRegistry_js__WEBPACK_IMPORTED_MODULE_2__, _shell_commandRegistry_js__WEBPACK_IMPORTED_MODULE_3__, _shell_shell_js__WEBPACK_IMPORTED_MODULE_4__, _shared_fs_js__WEBPACK_IMPORTED_MODULE_5__, _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_8__, _WApplication_WApplication_js__WEBPACK_IMPORTED_MODULE_9__, _explorer_explorer_wrt__WEBPACK_IMPORTED_MODULE_10__, _fileViewer_js__WEBPACK_IMPORTED_MODULE_14__]);\n([_appRegistry_js__WEBPACK_IMPORTED_MODULE_2__, _shell_commandRegistry_js__WEBPACK_IMPORTED_MODULE_3__, _shell_shell_js__WEBPACK_IMPORTED_MODULE_4__, _shared_fs_js__WEBPACK_IMPORTED_MODULE_5__, _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_8__, _WApplication_WApplication_js__WEBPACK_IMPORTED_MODULE_9__, _explorer_explorer_wrt__WEBPACK_IMPORTED_MODULE_10__, _fileViewer_js__WEBPACK_IMPORTED_MODULE_14__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nasync function init() {\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_16__.loading.textWithProgress('Initializing System...', 12);\r\n\r\n    const logger = new _core_log_js__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({\r\n        module: 'System'\r\n    })\r\n    logger.info('Initializing system...');\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].groupEnd();\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].group('System');\r\n\r\n    const fs = (0,_shared_fs_js__WEBPACK_IMPORTED_MODULE_5__.IDBFS)('~SYSTEM');\r\n    const System = {};\r\n    System.appRegistry = _appRegistry_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\r\n    System.commandRegistry = _shell_commandRegistry_js__WEBPACK_IMPORTED_MODULE_3__.commandRegistry;\r\n    System.WinUI = _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\r\n    System.WApplication = '';\r\n    System.theme = _themeManager_js__WEBPACK_IMPORTED_MODULE_6__[\"default\"];\r\n    System.rom = _core_rom_js__WEBPACK_IMPORTED_MODULE_7__[\"default\"];\r\n    System.tasklist = _kernel_wrt_core_js__WEBPACK_IMPORTED_MODULE_8__.tasklist;\r\n    System.ShellInstance = _shell_shell_js__WEBPACK_IMPORTED_MODULE_4__.ShellInstance;\r\n    System.information = _core_sysInfo_js__WEBPACK_IMPORTED_MODULE_11__[\"default\"];\r\n    System.fileViewers = _fileViewer_js__WEBPACK_IMPORTED_MODULE_14__[\"default\"];\r\n    System.fileIcons = _fileIcon_js__WEBPACK_IMPORTED_MODULE_15__[\"default\"];\r\n\r\n    const _WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('WRT');\r\n    _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].update('WRT', class extends _WRT {\r\n        constructor(options) {\r\n            super(options);\r\n\r\n            this.mountAPI({\r\n                name: 'appRegistry',\r\n                api: _appRegistry_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]\r\n            });\r\n            this.mountAPI({\r\n                name: 'ShellInstance',\r\n                api: _shell_shell_js__WEBPACK_IMPORTED_MODULE_4__.ShellInstance\r\n            });\r\n            this.mountAPI({\r\n                name: 'WinUI',\r\n                api: _lib_winui_winui_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]\r\n            });\r\n            this.mountAPI({\r\n                name: 'tasklist',\r\n                api: System.tasklist\r\n            })\r\n            this.mountAPI({\r\n                name: 'WApplication',\r\n                api: _WApplication_WApplication_js__WEBPACK_IMPORTED_MODULE_9__[\"default\"].register(this)\r\n            })\r\n            this.mountAPI({\r\n                name: 'System',\r\n                api: System\r\n            });\r\n        }\r\n    }, 'system');\r\n    const WRT = _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('WRT');\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].mark('API registration');\r\n\r\n    const pseudoProcess = new WRT({\r\n        code: '//! System pseudo-process',\r\n        __filename: 'C:/Winbows/System/system.js',\r\n        options: {\r\n            keepAlive: true\r\n        },\r\n        icon: _core_viewport_js__WEBPACK_IMPORTED_MODULE_16__.winbowsIcon\r\n    })\r\n    pseudoProcess.process.title = 'System';\r\n    pseudoProcess.main();\r\n    pseudoProcess.process.on('exit', () => {\r\n        logger.fatal('System process exited');\r\n    })\r\n    System.processAPIs = pseudoProcess.apis;\r\n    // System.systemProcess = pseudoProcess;\r\n    logger.info('System pseudo-process created');\r\n\r\n    function setupShell() {\r\n        if (pseudoProcess.alive == false) return;\r\n        System.shell = new _shell_shell_js__WEBPACK_IMPORTED_MODULE_4__.ShellInstance(pseudoProcess.process);\r\n        System.shell.on('dispose', setupShell);\r\n    }\r\n    setupShell();\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].mark('System process');\r\n\r\n    _moduleManager_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].register('System', System, 'original');\r\n\r\n    try {\r\n        if (!fs.exists('C:/User/')) {\r\n            await fs.mkdir('C:/User/');\r\n        }\r\n        if (!fs.exists('C:/User/Desktop/')) {\r\n            await fs.mkdir('C:/User/Desktop/');\r\n        }\r\n        if (!fs.exists('C:/User/Documents/')) {\r\n            await fs.mkdir('C:/User/Documents/');\r\n        }\r\n        if (!fs.exists('C:/User/Downloads/')) {\r\n            await fs.mkdir('C:/User/Downloads/');\r\n        }\r\n        if (!fs.exists('C:/User/Music/')) {\r\n            await fs.mkdir('C:/User/Music/');\r\n        }\r\n        if (!fs.exists('C:/User/Pictures/')) {\r\n            await fs.mkdir('C:/User/Pictures/');\r\n        }\r\n        if (!fs.exists('C:/User/Videos/')) {\r\n            await fs.mkdir('C:/User/Videos/');\r\n        }\r\n        if (!fs.exists('C:/User/AppData/')) {\r\n            await fs.mkdir('C:/User/AppData/');\r\n        }\r\n        if (!fs.exists('C:/User/AppData/Local/')) {\r\n            await fs.mkdir('C:/User/AppData/Local/');\r\n        }\r\n        if (!fs.exists('C:/User/AppData/Local/Temp/')) {\r\n            await fs.mkdir('C:/User/AppData/Local/Temp/');\r\n        }\r\n    } catch (e) {\r\n        logger.error(e);\r\n    }\r\n\r\n    _core_timer_js__WEBPACK_IMPORTED_MODULE_13__[\"default\"].mark('Setting up directory');\r\n    logger.info('System initialized');\r\n    await (0,_explorer_explorer_wrt__WEBPACK_IMPORTED_MODULE_10__[\"default\"])();\r\n    clearInterval(_core_viewport_js__WEBPACK_IMPORTED_MODULE_16__.loading.updateProgressId);\r\n    _core_viewport_js__WEBPACK_IMPORTED_MODULE_16__.loading.setProgress(100);\r\n\r\n    let output = [];\r\n    let levels = [];\r\n    let total = (0,_core_timer_js__WEBPACK_IMPORTED_MODULE_13__.getDuration)();\r\n    function traversal(marks) {\r\n        marks.forEach((mark, i) => {\r\n            const isLast = i === marks.length - 1;\r\n            const before = isLast ? 'â' : 'â';\r\n            const sum = mark.sum;\r\n            // const percent = `${(sum / total * 100).toFixed(2)}%`;\r\n            if (mark.marks) {\r\n                // Group\r\n                output.push(levels.concat(['']).join(' ') + `${before} ${mark.name} (${sum}ms)`);\r\n                levels.push(isLast ? ' ' : 'â');\r\n                traversal(mark.marks);\r\n                levels.pop();\r\n            } else {\r\n                output.push(levels.concat(['']).join(' ') + `${before} ${mark.label} (${sum}ms)`);\r\n            }\r\n        })\r\n    }\r\n    traversal(_core_timer_js__WEBPACK_IMPORTED_MODULE_13__.marks);\r\n    logger.info(`\\nWinbows initialized (${total}ms)\\n${output.join('\\n')}`);\r\n\r\n    //logger.info('[Copilot Test]');\r\n\r\n    async function conversation(msg) {\r\n        const start = Date.now();\r\n        logger.info('> ' + msg);\r\n        logger.info('< ' + await window.copilot.generateText(msg));\r\n        const now = Date.now();\r\n        logger.info(`Response generated in ${((now - start) / 1000).toFixed(2)}s`);\r\n    }\r\n\r\n    //await conversation('How are you?');\r\n    //await conversation('What is your name?');\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (init);\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });\n\n//# sourceURL=webpack://winbows11/./src/os/system/system.js?\n}")},"./src/os/system/themeManager.js":
/*!***************************************!*\
  !*** ./src/os/system/themeManager.js ***!
  \***************************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Theme \r\nlet theme = localStorage.getItem('WINBOWS_THEME') || 'light';\r\n\r\nconst listeners = [];\r\nconst ThemeManager = {\r\n    set: (value) => {\r\n        theme = value != 'dark' ? 'light' : 'dark';\r\n        localStorage.setItem('WINBOWS_THEME', theme);\r\n        if (theme == 'dark') {\r\n            document.body.setAttribute('data-theme', 'dark');\r\n        } else {\r\n            document.body.removeAttribute('data-theme');\r\n        }\r\n        listeners.forEach(fn => fn(theme));\r\n    },\r\n    get: () => {\r\n        return theme;\r\n    },\r\n    onChange: (listener) => {\r\n        listeners.push(listener);\r\n    }\r\n}\r\n\r\nif (theme == 'dark') {\r\n    document.body.setAttribute('data-theme', 'dark');\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ThemeManager);\n\n//# sourceURL=webpack://winbows11/./src/os/system/themeManager.js?\n}")},"./src/shared/events.js":
/*!******************************!*\
  !*** ./src/shared/events.js ***!
  \******************************/(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   codes: () => (/* binding */ codes)\n/* harmony export */ });\nconst codes = {\r\n    'CORRUPTED_INSTALLATION': 0\r\n}\r\n\r\nconst eventManager = (function () {\r\n    const evtLSName = \"WINBOWS_EVENTS\";\r\n    let evts = [];\r\n    try {\r\n        JSON.parse(localStorage.getItem(evtLSName) || '[]') || [];\r\n        if (typeof evts !== 'array') {\r\n            localStorage.removeItem(evtLSName);\r\n            evts = [];\r\n        }\r\n    } catch (e) {\r\n        console.error(e);\r\n        evts = [];\r\n    }\r\n\r\n    /**\r\n     * @typedef {Object} EventParam\r\n     * @property {string} evt\r\n     * @property {string} code\r\n     * @property {string} msg\r\n     * @property {string} [level]\r\n     */\r\n\r\n    /**\r\n     * @param {EventParam} param0\r\n     */\r\n    function add({\r\n        evt, code, msg, level\r\n    }) {\r\n        if (typeof evt !== 'string') return;\r\n        if (typeof code !== 'string') return;\r\n        if (typeof msg !== 'string') return;\r\n        if (level) {\r\n            if (typeof level !== 'string' || !['INFO', 'WARN', 'ERROR', 'FATAL'].includes(level.toUpperCase())) {\r\n                level = 'INFO'\r\n            }\r\n        } else {\r\n            level = 'INFO'\r\n        }\r\n\r\n        evts.push({ evt, code, msg, ts: Date.now(), level });\r\n        localStorage.setItem(evtLSName, JSON.stringify(evts));\r\n    }\r\n\r\n    function list() {\r\n        return evts.map(getEvt);\r\n    }\r\n\r\n    function last() {\r\n        return getEvt(evts[evts.length - 1]);\r\n    }\r\n\r\n    function getEvt(evt) {\r\n        return {\r\n            mark: function (k, v) {\r\n                evt[k] = v;\r\n            },\r\n            ...evt\r\n        }\r\n    }\r\n\r\n    function clear() {\r\n        evts = [];\r\n        localStorage.removeItem(evtLSName);\r\n    }\r\n\r\n    return { add, list, last, clear };\r\n})();\r\n\r\n\n\n//# sourceURL=webpack://winbows11/./src/shared/events.js?\n}")},"./src/shared/fs.js":
/*!**************************!*\
  !*** ./src/shared/fs.js ***!
  \**************************/(__webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.a(__webpack_module__, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IDBFS: () => (/* binding */ IDBFS),\n/* harmony export */   fsUtils: () => (/* binding */ fsUtils)\n/* harmony export */ });\nconst debugMode = false;\r\nconst defaultEnv = {\r\n    APPDATA: 'C:/User/AppData/Roaming',\r\n    LOCALAPPDATA: 'C:/User/AppData/Local',\r\n    PROGRAMFILES: 'C:/Program Files',\r\n    SYSTEMDRIVE: 'C:',\r\n    SYSTEMROOT: 'C:/Winbows',\r\n    TEMP: 'C:/User/AppData/Local/Temp',\r\n    TMP: 'C:/User/AppData/Local/Temp',\r\n    USERPROFILE: 'C:/User',\r\n    WINDIR: 'C:/Winbows',\r\n};\r\n\r\n// --------------------------- Utils --------------------------- //\r\nfunction getStackTrace() {\r\n    var stack;\r\n    try {\r\n        throw new Error('');\r\n    } catch (error) {\r\n        stack = error.stack || '';\r\n    }\r\n    stack = stack.split('\\n').map(function (line) { return line.trim(); });\r\n    return stack.splice(stack[0] == 'Error' ? 2 : 1);\r\n}\r\nfunction getJsonFromURL(url) {\r\n    if (!url) url = location.search;\r\n    var query = url.substr(1), result = {};\r\n    query.split(\"&\").forEach(function (part) {\r\n        var item = part.split(\"=\");\r\n        result[item[0]] = decodeURIComponent(item[1]);\r\n    });\r\n    return result;\r\n};\r\nfunction computePath(path, currentPath) {\r\n    const currentPathDirs = currentPath.split('/').filter(dir => dir !== ''),\r\n        pathDirs = path.split('/').filter(dir => dir !== ''),\r\n        resultPath = [...currentPathDirs];\r\n    for (const dir of pathDirs) {\r\n        if (dir === '..') {\r\n            if (resultPath.length > 0) { resultPath.pop(); }\r\n        } else if (dir !== '.') { resultPath.push(dir); }\r\n    }\r\n    return resultPath.join('/');\r\n};\r\nfunction removeStringInRange(str, start, end) {\r\n    return str.substring(0, start) + str.substring(end);\r\n};\r\nfunction randomID(count, chars) {\r\n    var chars = chars || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',\r\n        result = '',\r\n        length = chars.length;\r\n    for (let i = 0; i < count; i++) {\r\n        result += chars.charAt(Math.floor(Math.random() * length));\r\n    }\r\n    return result;\r\n};\r\nfunction isBlob(obj) {\r\n    return Object.prototype.toString.call(obj) === \"[object Blob]\"\r\n};\r\nfunction visualizeInvisible(str) {\r\n    return [...str].map(ch => {\r\n        const code = ch.codePointAt(0);\r\n        return (code < 0x20 || code > 0x7E)\r\n            ? '\\\\u' + code.toString(16).toUpperCase().padStart(4, '0')\r\n            : ch;\r\n    }).join('');\r\n}\r\nconst fsUtils = {\r\n    sep: '/',\r\n    normalize(p = '') {\r\n        const parts = p.split(/[/\\\\]+/);\r\n        const stack = [];\r\n\r\n        for (let part of parts) {\r\n            if (part === '' || part === '.') continue;\r\n            if (part === '..') stack.pop();\r\n            else stack.push(part);\r\n        }\r\n\r\n        return (p.startsWith('/') ? '/' : '') + stack.join('/');\r\n    },\r\n    join(...args) {\r\n        return fsUtils.normalize(args.join('/'));\r\n    },\r\n    resolve(...paths) {\r\n        let resolved = '';\r\n        for (let i = paths.length - 1; i >= 0; i--) {\r\n            const p = paths[i];\r\n            if (!p) continue;\r\n            resolved = p + '/' + resolved;\r\n            if (fsUtils.isAbsolute(p)) break;\r\n        }\r\n        return fsUtils.normalize(resolved);\r\n    },\r\n    dirname(p = '') {\r\n        const normalized = fsUtils.normalize(p);\r\n        const parts = normalized.split('/');\r\n        parts.pop();\r\n        return fsUtils.toDirFormat(parts.length > 1 ? parts.join('/') : '/');\r\n    },\r\n    basename(p = '') {\r\n        return fsUtils.normalize(p).split('/').pop();\r\n    },\r\n    extname(p = '') {\r\n        const base = fsUtils.basename(p);\r\n        const dotIndex = base.lastIndexOf('.');\r\n        return dotIndex > 0 ? base.slice(dotIndex) : '';\r\n    },\r\n    isAbsolute(p = '') {\r\n        return p.startsWith('/') || /^[A-Za-z]:[\\\\/]/.test(p);\r\n    },\r\n    relative(from, to) {\r\n        const fromParts = fsUtils.resolve(from).split('/');\r\n        const toParts = fsUtils.resolve(to).split('/');\r\n\r\n        while (fromParts.length && toParts.length && fromParts[0] === toParts[0]) {\r\n            fromParts.shift();\r\n            toParts.shift();\r\n        }\r\n\r\n        return '../'.repeat(fromParts.length) + toParts.join('/');\r\n    },\r\n    parsePath(v) {\r\n        v = v.replaceAll(/\\\\/g, '/');\r\n        const match = /^([a-zA-Z]):\\//.exec(v);\r\n        const disk = match ? match[1].toUpperCase() : 'C';\r\n        let path = v.replace(/^([a-zA-Z]):/, '');\r\n        path = fsUtils.normalize(path);\r\n        path = !path.endsWith('/') && v.endsWith('/') ? path + '/' : path;;\r\n        return { disk, path };\r\n    },\r\n    toDirFormat(path = '') {\r\n        return path.endsWith('/') ? path : path + '/';\r\n    },\r\n    isValidAbsolutePath(path) {\r\n        const p = path.replace(/\\\\/g, '/');\r\n\r\n        if (!/^[a-zA-Z]{1}:\\//.test(p)) return false;\r\n\r\n        const parts = p.split('/');\r\n        let depth = 0;\r\n        for (const part of parts.slice(1)) {    // Ignore disk\r\n            if (part === '' || part === '.') continue;\r\n            else if (part === '..') {\r\n                depth--;\r\n                if (depth < 0) return false;\r\n            } else {\r\n                depth++;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    },\r\n    resolveEnvPath(path) {\r\n        return path.replace(/^%([^%]+)%[\\\\/]?/, (_, key) => {\r\n            const value = defaultEnv[key.toUpperCase()];\r\n            return value ? value + '/' : `%${key}%/`;\r\n        });\r\n    }\r\n};\r\n// --------------------------- Utils --------------------------- //\r\n\r\n// UUID\r\nconst UUIDManager = (function () {\r\n    const uuids = new Map();\r\n    const priorities = {\r\n        \"~BOOT\": 10,\r\n        \"~KERNEL\": 9,\r\n        \"~SYSTEM\": 9,\r\n        \"~EXPLORER\": 8\r\n    }\r\n\r\n    function UUID() {\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n            var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n            return v.toString(16);\r\n        });\r\n    }\r\n\r\n    function setupUUIDPriority(uuid, caller) {\r\n        if (typeof caller === \"string\") {\r\n            const priority = priorities[caller]\r\n            uuids.set(uuid, priority !== undefined ? priority : 0);\r\n        } else {\r\n            uuids.set(uuid, 0);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {String} uuid \r\n     * @returns {Number|null} if uuid doesn't exist returns null\r\n     */\r\n    function getPriority(uuid) {\r\n        const priority = uuids.get(uuid);\r\n        return (priority != undefined && priority >= 0) ? priority : null;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {String} caller \r\n     * @returns \r\n     */\r\n    function register(caller) {\r\n        const uuid = UUID();\r\n        setupUUIDPriority(uuid, caller);\r\n        return uuid;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {String} uuid \r\n     */\r\n    function deregister(uuid) {\r\n        if (uuids.has(uuid)) {\r\n            uuids.delete(uuid);\r\n        } else {\r\n            console.error(new Error(\"Invalid uuid.\"));\r\n        }\r\n    }\r\n\r\n    return { register, getPriority, deregister };\r\n})();\r\n\r\nclass TransactionQueue {\r\n    constructor(maxConcurrent = 1) {\r\n        this.maxConcurrent = maxConcurrent;\r\n        this.currentCount = 0;\r\n        this.queue = [];\r\n    }\r\n\r\n    enqueue(task, uuid) {\r\n        return new Promise((resolve, reject) => {\r\n            const job = { priority: UUIDManager.getPriority(uuid), task, resolve, reject, uuid };\r\n            this.queue.push(job);\r\n            this.queue.sort((a, b) => b.priority - a.priority);\r\n            this.tryNext();\r\n        });\r\n    }\r\n    tryNext() {\r\n        if (this.currentCount >= this.maxConcurrent) return;\r\n        if (this.queue.length === 0) return;\r\n\r\n        const job = this.queue.shift();\r\n        this.currentCount++;\r\n\r\n        if (UUIDManager.getPriority(job.uuid) == null) {\r\n            this.currentCount--;\r\n            job.reject(new Error(\"The specified file system uuid cannot be found.\"));\r\n            this.tryNext();\r\n        }\r\n\r\n        Promise.resolve()\r\n            .then(() => job.task())\r\n            .then(result => {\r\n                this.currentCount--;\r\n                job.resolve(result);\r\n                this.tryNext();\r\n            })\r\n            .catch(err => {\r\n                this.currentCount--;\r\n                job.reject(err);\r\n                this.tryNext();\r\n            });\r\n    }\r\n}\r\n\r\nconst types = {\r\n    dir: 0,\r\n    file: 1\r\n};\r\nconst dbName = 'WINBOWS_STORAGE';\r\nconst storeName = 'MAIN';\r\nconst fileTablePrefix = '$_FILETABLE_';\r\nconst localStoragePrefix = dbName + '_' + fileTablePrefix;\r\nconst idLength = 24;\r\nconst allowedDiskName = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\nconst schemaVersion = 1;\r\nconst schemaVersionName = dbName + '_' + 'SCHEMA_VERSION';\r\n\r\nconst txQueue = new TransactionQueue(5);\r\nlet runningTasks = 0;\r\nlet tasks = [];\r\nlet updateTimer = null;\r\nconst maxConcurrent = 10;\r\nconst updateDelay = 100;\r\n\r\nlet listeners = {};\r\nlet blobURLCaches = {};\r\n\r\nvar version = 1;\r\nvar isInitializing = false;\r\nvar repairing = false;\r\nvar now = Date.now();\r\nvar fileTables = {\r\n    'C': {\r\n        '/': {\r\n            type: types.dir,\r\n            changeTime: now,\r\n            createdTime: now,\r\n            lastModifiedTime: now,\r\n            length: 0,\r\n            id: null,\r\n            mimeType: null\r\n        }\r\n    }\r\n};\r\nvar db;\r\n\r\n// Read from localStorage\r\nfor (let i = 0; i < localStorage.length; i++) {\r\n    const key = localStorage.key(i);\r\n    // localStorage item name : \"<localStoragePrefix><DiskName>:\"\r\n    if (key.startsWith(localStoragePrefix) && key.length === localStoragePrefix.length + 2) {\r\n        const disk = key.replace(localStoragePrefix, '').replace(':', '');\r\n        if (allowedDiskName.indexOf(disk) > -1 && disk.length === 1) {\r\n            try {\r\n                fileTables[disk] = JSON.parse(localStorage.getItem(key));\r\n            } catch (e) {\r\n                localStorage.removeItem(key);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Save the schema version in localStorage\r\nlocalStorage.setItem(schemaVersionName, schemaVersion);\r\n\r\n// ========================== Output ========================== //\r\nfunction print(...obj) {\r\n    if (debugMode == true) {\r\n        console.log.apply(arguments, ['%cIDBFS', 'color:#ff00ff;'].concat(obj))\r\n    }\r\n}\r\n\r\n// ========================== Event ========================== //\r\nfunction on(event, listener) {\r\n    if (!listeners[event]) {\r\n        listeners[event] = [];\r\n    }\r\n    listeners[event].push(listener);\r\n}\r\n\r\nfunction emit(event, detail) {\r\n    if (listeners[event]) {\r\n        listeners[event].forEach(listener => listener(detail));\r\n    }\r\n}\r\n\r\n// ======================== Validators ======================== //\r\nasync function ensureParentFolders(disk, path) {\r\n    const parts = path.split('/').filter(i => i.trim().length > 0);\r\n    parts.pop();\r\n\r\n    let currentPath = '/';\r\n    for (const part of parts) {\r\n        currentPath += part + '/';\r\n        if (!fileTables[disk][currentPath]) {\r\n            const now = Date.now();\r\n            fileTables[disk][currentPath] = {\r\n                type: types.dir,\r\n                changeTime: now,\r\n                createdTime: now,\r\n                lastModifiedTime: now,\r\n                length: 0,\r\n                id: null,\r\n                mimeType: null\r\n            };\r\n        }\r\n    }\r\n}\r\n\r\n// =========================== Store =========================== //\r\nasync function getStore(permission, uuid) {\r\n    return new Promise((resolve, reject) => {\r\n        tasks.push({ permission, resolve, reject, uuid, priority: UUIDManager.getPriority(uuid) });\r\n        tasks.sort((a, b) => b.priority - a.priority);\r\n        doTask();\r\n    })\r\n}\r\n\r\nasync function doTask() {\r\n    if (runningTasks >= maxConcurrent) return;\r\n    if (tasks.length === 0) {\r\n        if (runningTasks === 0) repairing = false;\r\n        return;\r\n    }\r\n\r\n    runningTasks++;\r\n    const task = tasks.shift();\r\n\r\n    if (UUIDManager.getPriority(task.uuid) == null) {\r\n        task.reject(`The specified file system uuid cannot be found.`);\r\n        runningTasks--;\r\n        doTask();\r\n        return;\r\n    }\r\n\r\n    try {\r\n        const tx = db.transaction(storeName, task.permission);\r\n        const store = tx.objectStore(storeName);\r\n        task.resolve(store);\r\n\r\n        tx.oncomplete = () => {\r\n            runningTasks--;\r\n            doTask();\r\n        };\r\n        tx.onerror = () => {\r\n            runningTasks--;\r\n            task.reject(tx.error);\r\n            doTask();\r\n        };\r\n\r\n        if (repairing == true) repairing = false;\r\n    } catch (e) {\r\n        runningTasks--;\r\n        if (repairing == false) {\r\n            repairing = true;\r\n            await init();\r\n            print('Trying to repair idbfs...');\r\n            tasks.unshift(task);\r\n            return doTask();\r\n        } else if (e.name === 'InvalidStateError' && repairing == true) {\r\n            print('Failed to repair idbfs.');\r\n        }\r\n    }\r\n}\r\n\r\nasync function createStore() {\r\n    if (!db) {\r\n        await init();\r\n    }\r\n    return new Promise((resolve) => {\r\n        const request = indexedDB.open(dbName, db.version + 1);\r\n        request.onupgradeneeded = (event) => {\r\n            print('Upgrading database to version', event.oldVersion, 'to', event.newVersion);\r\n            const db = event.target.result;\r\n            if (!db.objectStoreNames.contains(storeName)) {\r\n                const store = db.createObjectStore(storeName, { keyPath: 'k' });\r\n                store.createIndex('k', 'k', { unique: true });\r\n            }\r\n        };\r\n        request.onsuccess = (event) => {\r\n            db = event.target.result;\r\n            resolve(true);\r\n        };\r\n    });\r\n}\r\n\r\nfunction put(store, data) {\r\n    return new Promise((resolve, reject) => {\r\n        const req = store.put(data);\r\n        req.onsuccess = resolve;\r\n        req.onerror = () => reject(req.error);\r\n    });\r\n}\r\n\r\n// ========================= File table ========================= //\r\nasync function updateFileTable(disk) {\r\n    try {\r\n        scheduleUpdateFileTable(disk);\r\n        localStorage.setItem(localStoragePrefix + disk + ':', JSON.stringify(fileTables[disk]));\r\n    } catch (e) {\r\n        console.error('Failed to update fileTable in localStorage:', e);\r\n    }\r\n}\r\n\r\n// For idb\r\nfunction scheduleUpdateFileTable(disk) {\r\n    if (updateTimer) clearTimeout(updateTimer);\r\n    updateTimer = setTimeout(async () => {\r\n        updateTimer = null;\r\n        try {\r\n            const tx = db.transaction(storeName, 'readwrite');\r\n            const store = tx.objectStore(storeName);\r\n            store.put({\r\n                k: fileTablePrefix + disk + ':',\r\n                v: fileTables[disk]\r\n            })\r\n        } catch (e) {\r\n            console.warn('Failed to update fileTable in IndexedDB:', e);\r\n        }\r\n    }, updateDelay);\r\n}\r\n\r\nasync function deleteBlobsInBatches(disk, paths, uuid, batchSize = 100) {\r\n    for (let i = 0; i < paths.length; i += batchSize) {\r\n        const batch = paths.slice(i, i + batchSize);\r\n        const store = await getStore('readwrite', uuid);\r\n\r\n        await Promise.all(batch.map(path => {\r\n            return new Promise((res, rej) => {\r\n                const entry = fileTables[disk][path];\r\n                if (!entry || entry.type !== types.file) return res();\r\n\r\n                const req = store.delete(entry.id);\r\n                req.onsuccess = () => {\r\n                    // Remove cached url\r\n                    if (blobURLCaches[disk + ':' + path]) {\r\n                        delete blobURLCaches[disk + ':' + path];\r\n                    }\r\n                    delete fileTables[disk][path];\r\n                    res();\r\n                };\r\n                req.onerror = () => {\r\n                    console.warn(`Failed to delete blob for ${path}:`, req.error);\r\n                    res();\r\n                }\r\n            });\r\n        }));\r\n        await updateFileTable(disk);\r\n    }\r\n}\r\n\r\nasync function init() {\r\n    if (isInitializing) return;\r\n    isInitializing = true;\r\n    return new Promise((resolve, reject) => {\r\n        const request = indexedDB.open(dbName);\r\n        request.onupgradeneeded = (event) => {\r\n            print('Upgrading database to version', event.oldVersion, 'to', event.newVersion);\r\n            db = event.target.result;\r\n            const store = db.createObjectStore(storeName, { keyPath: 'k' });\r\n            store.createIndex('k', 'k', { unique: true });\r\n        };\r\n        request.onsuccess = async (event) => {\r\n            isInitializing = false;\r\n\r\n            db = event.target.result;\r\n            db.onversionchange = function () {\r\n                db.close();\r\n            };\r\n            if (!event.target.result.objectStoreNames.contains(storeName)) {\r\n                await createStore();\r\n            }\r\n\r\n            async function getOrSyncFileTable(disk) {\r\n                const key = fileTablePrefix + disk + ':';\r\n                const localStorageFT = localStorage.getItem(localStoragePrefix + disk + ':');\r\n                return new Promise((resolve, reject) => {\r\n                    const tx = db.transaction(storeName, 'readwrite')\r\n                    const store = tx.objectStore(storeName);\r\n                    const request = store.get(key);\r\n                    request.onsuccess = async (event) => {\r\n                        // NOTE: Use the file table in localStorage first\r\n                        const table = event.target.result;\r\n                        if (localStorageFT) {\r\n                            // Sync the file table in localStorage to the file table in idbfs\r\n                            try {\r\n                                await put(store, {\r\n                                    k: key,\r\n                                    v: JSON.parse(localStorageFT)\r\n                                });\r\n                            } catch (e) {\r\n                                print('Error : Failed to Sync the file table in localStorage to the file table in idbfs\\nDetails :', e);\r\n                                localStorage.removeItem(localStoragePrefix + disk + ':');\r\n                            }\r\n                        } else if (table && !localStorageFT) {\r\n                            // File table doesn't exist in localStorage\r\n                            fileTables[disk] = table.v;\r\n                            localStorage.setItem(localStoragePrefix + disk + ':', JSON.stringify(fileTables[disk]));\r\n                        } else if (!table && !localStorageFT) {\r\n                            // File table doesn't exist in localStorage or idbfs\r\n                            localStorage.setItem(localStoragePrefix + disk + ':', JSON.stringify(fileTables[disk]));\r\n                            await put(store, {\r\n                                k: key,\r\n                                v: fileTables[disk]\r\n                            });\r\n                        }\r\n                        resolve();\r\n                    }\r\n                    request.onerror = async (event) => {\r\n                        print(`Warning : Failed to get file table [${fileTablePrefix + disk + ':'}] from idbfs\\nDetails :`, event.target.error);\r\n                        const localStorageFT = localStorage.getItem(localStoragePrefix + disk + ':');\r\n                        try {\r\n                            await put(store, {\r\n                                k: fileTablePrefix + disk + ':',\r\n                                v: localStorageFT ? JSON.parse(localStorageFT) : fileTables[disk]\r\n                            });\r\n                        } catch (e) {\r\n                            print('Error : Failed to write file table to idbfs\\nDetails :', e);\r\n                        }\r\n                        resolve();\r\n                    }\r\n                })\r\n            }\r\n\r\n            // Try to read the file table\r\n            for (const disk of Object.keys(fileTables)) {\r\n                await getOrSyncFileTable(disk);\r\n            }\r\n            resolve();\r\n        };\r\n        request.onerror = (event) => {\r\n            isInitializing = false;\r\n            reject(event.target.error);\r\n        };\r\n    })\r\n}\r\n\r\nawait init();\r\n\r\nconst IDBFS = function (caller = \"<anonymous>\", __dirname = \"\") {\r\n    const uuid = UUIDManager.register(caller);\r\n\r\n    function parsePath(v) {\r\n        v = fsUtils.resolveEnvPath(v);\r\n        if (__dirname != \"\") {\r\n            var isdir = v.endsWith('/');\r\n            v = fsUtils.resolve(__dirname, v);\r\n            if (isdir) v += '/';\r\n        }\r\n        v = v.replaceAll('\\\\', '/');\r\n        const match = /^([a-zA-Z]):\\//.exec(v);\r\n        const disk = match ? match[1].toUpperCase() : 'C';\r\n        let path = v.replace(/^([a-zA-Z]):/, '');\r\n        path = fsUtils.normalize(path);\r\n        path = !path.endsWith('/') && v.endsWith('/') ? path + '/' : path;\r\n        return { disk, path };\r\n    };\r\n\r\n    // ================== Basic File System functions ================== //\r\n\r\n    /**\r\n     * @typedef {Object} CustomError\r\n     * @property {string} name \r\n     * @property {string} message\r\n     * @property {number} code\r\n     */\r\n\r\n    /**\r\n     * Check if the specified file / directory path exists\r\n     * @param {string} fullPath \r\n     * @returns {boolean}\r\n     */\r\n    function exists(fullPath) {\r\n        const { disk, path } = parsePath(fullPath);\r\n        if (!fileTables[disk]) {\r\n            return false;\r\n        }\r\n        return !!fileTables[disk][path];\r\n    }\r\n\r\n    /**\r\n     * Create a directory\r\n     * @param {string} fullPath \r\n     * @returns {Promise} If it failed, reject a {@link CustomError}\r\n     */\r\n    async function mkdir(fullPath) {\r\n        // RULE : directory path should end with '/'\r\n        const { disk, path: rawPath } = parsePath(fullPath);\r\n        let path = rawPath.endsWith('/') ? rawPath : rawPath + '/';\r\n\r\n        const invalidFolderNamePattern = /[\\\\\\/:\\*\\?\"<>\\|]|[\\. ]$/;\r\n        if (invalidFolderNamePattern.test(fsUtils.basename(fullPath)) && path != '/') {\r\n            // Check if the directory name contains invalid characters\r\n            throw {\r\n                name: 'InvalidName',\r\n                message: `Illegal directory name : ${fullPath}`\r\n            };\r\n        } else if (!fileTables[disk]) {\r\n            // Check if the target disk exists\r\n            throw {\r\n                name: 'NotFound',\r\n                message: `Invalid path : ${fullPath}`\r\n            };\r\n        } /*else if (!checkParentFoldersExist(disk, path)) {\r\n                // Check if the parent folder exists\r\n                throw {\r\n                    name: 'NotFound',\r\n                    message: `No such file or directory : ${fullPath}`\r\n                };\r\n            } */else if (fileTables[disk][path]) {\r\n            // Check if the directory already exists\r\n            throw {\r\n                name: 'AlreadyExists',\r\n                message: `Directory already exists : ${fullPath}`\r\n            };\r\n        } else {\r\n            ensureParentFolders(disk, path);\r\n            const now = Date.now();\r\n            fileTables[disk][path] = {\r\n                type: types.dir,\r\n                changeTime: now,\r\n                createdTime: now,\r\n                lastModifiedTime: now,\r\n                length: 0,\r\n                id: null,\r\n                mimeType: null\r\n            }\r\n            updateFileTable(disk);\r\n            emit('change', {\r\n                path: fullPath\r\n            })\r\n            return;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Move file or directory\r\n     * @param {string} srcFullPath \r\n     * @param {string} destFullPath \r\n     * @param {object} [options]\r\n     * @param {boolean} [options.overwrite=false]\r\n     */\r\n    async function mv(srcFullPath, destFullPath, options = {}) {\r\n        const { overwrite = false } = options;\r\n\r\n        const { disk: srcDisk, path: srcPath } = parsePath(srcFullPath);\r\n        const { disk: destDisk, path: destPath } = parsePath(destFullPath);\r\n\r\n        if (!fileTables[srcDisk] || !fileTables[srcDisk][srcPath]) {\r\n            throw { name: 'NotFound', message: `Source path not found: ${srcFullPath}` };\r\n        }\r\n        if (!fileTables[destDisk]) {\r\n            throw { name: 'NotFound', message: `Destination disk not found: ${destDisk}` };\r\n        }\r\n\r\n        const srcEntry = fileTables[srcDisk][srcPath];\r\n        const destExists = !!fileTables[destDisk][destPath];\r\n\r\n        if (destExists && !overwrite) {\r\n            throw { name: 'AlreadyExists', message: `Destination already exists: ${destFullPath}` };\r\n        }\r\n\r\n        await ensureParentFolders(destDisk, destPath);\r\n\r\n        if (srcEntry.type === types.file) {\r\n            const blob = await readFile(srcFullPath);\r\n            await writeFile(destFullPath, blob);\r\n            await rm(srcFullPath);\r\n        } else if (srcEntry.type === types.dir) {\r\n            const entries = await readdir(srcFullPath, { recursive: true });\r\n            entries.push(srcFullPath);\r\n\r\n            for (const entryPath of entries) {\r\n                const relativePath = entryPath.slice(srcFullPath.length);\r\n                const targetPath = destFullPath + relativePath;\r\n\r\n                const entry = fileTables[srcDisk][parsePath(entryPath).path];\r\n                if (entry.type === types.file) {\r\n                    const blob = await readFile(entryPath);\r\n                    await writeFile(targetPath, blob);\r\n                } else if (entry.type === types.dir) {\r\n                    await ensureParentFolders(destDisk, parsePath(targetPath).path);\r\n                    fileTables[destDisk][parsePath(targetPath).path] = {\r\n                        ...entry,\r\n                        createdTime: Date.now(),\r\n                        lastModifiedTime: Date.now()\r\n                    };\r\n                }\r\n            }\r\n\r\n            await rm(srcFullPath, { recursive: true });\r\n        } else {\r\n            throw { name: 'InvalidEntry', message: `Unknown entry type at ${srcFullPath}` };\r\n        }\r\n\r\n        updateFileTable(destDisk);\r\n        updateFileTable(srcDisk);\r\n    }\r\n\r\n    /**\r\n     * Read a directory\r\n     * @param {string} fullPath\r\n     * @param {object} [options]\r\n     * @param {boolean} [options.recursive=false] Whether to recursively include files in subdirectories\r\n     * @returns {Promise<string[]>} If it failed, reject a {@link CustomError}\r\n     */\r\n    async function readdir(fullPath, options = {}) {\r\n        const recursive = options.recursive ?? false;\r\n        const { disk, path: rawPath } = parsePath(fullPath);\r\n        let path = rawPath.endsWith('/') ? rawPath : rawPath + '/';\r\n        if (!fileTables[disk]) {\r\n            throw {\r\n                name: 'NotFound',\r\n                message: `The disk ( ${disk} ) could not be found`\r\n            };\r\n        } else if (!fileTables[disk][path]) {\r\n            throw {\r\n                name: 'NotFound',\r\n                message: `The specified directory path ( ${fullPath} ) could not be found`\r\n            };\r\n        } else if (fileTables[disk][path].type !== types.dir) {\r\n            throw {\r\n                name: 'InvalidPath',\r\n                message: `The specified path ( ${fullPath} ) is not a directory`\r\n            };\r\n        }\r\n        const entries = Object.keys(fileTables[disk])\r\n            .filter(key => {\r\n                if (!key.startsWith(path) || key === path) return false;\r\n                if (recursive) return true;\r\n                // Non-recursive mode\r\n                const subPath = key.slice(path.length);\r\n                return subPath.split('/').filter(Boolean).length === 1;\r\n            })\r\n            .map(k => `${disk}:${k}`);\r\n        return entries;\r\n    }\r\n\r\n    /**\r\n     * Read blob\r\n     * @param {string} fullPath\r\n     * @returns {Promise<Blob>} If it failed, reject a {@link CustomError}\r\n     */\r\n    async function readFile(fullPath) {\r\n        const { disk, path } = parsePath(fullPath);\r\n        if (path == '' || path.endsWith('/') || fsUtils.basename(path) == '') {\r\n            throw {\r\n                name: '',\r\n                message: `Invalid path : ${fullPath}`\r\n            };\r\n        }\r\n        if (!fileTables[disk]) {\r\n            throw {\r\n                name: '',\r\n                message: `The disk ( ${disk} ) could not be found`\r\n            };\r\n        }\r\n        if (!fileTables[disk][path]) {\r\n            throw {\r\n                name: '',\r\n                message: `File not found: ${fullPath}`\r\n            };\r\n        }\r\n        const store = await getStore('readonly', uuid)\r\n\r\n        return new Promise((resolve, reject) => {\r\n            const request = store.get(fileTables[disk][path].id);\r\n            request.onsuccess = async (event) => {\r\n                const file = event.target.result;\r\n                if (file) {\r\n                    resolve(file.v);\r\n                    // Cache blob\r\n                    if (window.modes.dev == false) {\r\n                        blobURLCaches[fullPath] = URL.createObjectURL(file.v);\r\n                    }\r\n                    if (file.v.type && fileTables[disk][path].mimeType != file.v.type) {\r\n                        fileTables[disk][path].mimeType = file.v.type;\r\n                        updateFileTable(disk);\r\n                    }\r\n                } else {\r\n                    reject({\r\n                        name: 'NotFound',\r\n                        message: `File not found: ${fullPath}`\r\n                    });\r\n                }\r\n            }\r\n            request.onerror = async (event) => {\r\n                const err = event.target.error;\r\n                reject({\r\n                    name: err.name,\r\n                    message: err.message\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Remove file or directory\r\n     * @param {string} fullPath \r\n     * @param {object} [options]\r\n     * @param {boolean} [options.recursive=false]\r\n     * @param {boolean} [options.force=false]\r\n     * @returns {Promise} If it failed, reject a {@link CustomError}\r\n     */\r\n    async function rm(fullPath, options = {}) {\r\n        const { recursive = false, force = false } = options;\r\n        const { disk, path } = parsePath(fullPath);\r\n        if (!fileTables[disk]) {\r\n            if (force) return;\r\n            throw {\r\n                name: 'NotFound',\r\n                message: `The disk ( ${disk} ) could not be found`\r\n            };\r\n        }\r\n\r\n        const entry = fileTables[disk][path];\r\n        if (!entry) {\r\n            if (force) return;\r\n            throw {\r\n                name: 'NotFound',\r\n                message: `The specified path ( ${fullPath} ) could not be found`\r\n            };\r\n        }\r\n        if (entry.type === types.file) {\r\n            const store = await getStore('readwrite', uuid)\r\n            await new Promise((res, rej) => {\r\n                const req = store.delete(entry.id);\r\n                req.onsuccess = () => {\r\n                    // Remove cached url\r\n                    if (blobURLCaches[disk + ':' + path]) {\r\n                        delete blobURLCaches[disk + ':' + path];\r\n                    }\r\n                    delete fileTables[disk][path];\r\n                    updateFileTable(disk);\r\n                    emit('change', {\r\n                        path: fullPath\r\n                    });\r\n                    res();\r\n                };\r\n                req.onerror = () => rej({\r\n                    name: req.error.name,\r\n                    message: req.error.message\r\n                });\r\n            });\r\n            return;\r\n        } else if (entry.type === types.dir) {\r\n            const entries = await readdir(fullPath, { recursive });\r\n            if (!recursive && entries.length > 0) {\r\n                throw {\r\n                    name: 'DirectoryNotEmpty',\r\n                    message: `Directory ( ${fullPath} ) is not empty`\r\n                };\r\n            }\r\n            const pathToRemove = entries.map(e => parsePath(e).path);\r\n            pathToRemove.push(path);\r\n\r\n            await deleteBlobsInBatches(disk, pathToRemove, uuid)\r\n            for (const path of pathToRemove) {\r\n                const entry = fileTables[disk][path];\r\n                if (entry && entry.type === types.dir) {\r\n                    delete fileTables[disk][path];\r\n                }\r\n                updateFileTable(disk);\r\n            }\r\n            updateFileTable(disk);\r\n            emit('change', {\r\n                path: fullPath\r\n            })\r\n            return;\r\n        } else {\r\n            throw {\r\n                name: 'InvalidEntry',\r\n                message: `Unknown entry type at ${fullPath}`\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the status of the specified path\r\n     * @param {string} fullPath \r\n     * @returns {Object}\r\n     */\r\n    function stat(fullPath) {\r\n        const { disk, path } = parsePath(fullPath);\r\n        if (!fileTables[disk]) {\r\n            return {\r\n                isFile: () => false,\r\n                isDirectory: () => false,\r\n                length: 0,\r\n                exists: false,\r\n                type: null,\r\n                changeTime: null,\r\n                createdTime: null,\r\n                lastModifiedTime: null,\r\n                mimeType: null\r\n            }\r\n        }\r\n        const entry = fileTables[disk][path];\r\n        if (!entry) {\r\n            return {\r\n                isFile: () => false,\r\n                isDirectory: () => false,\r\n                length: 0,\r\n                exists: false,\r\n                type: null,\r\n                changeTime: null,\r\n                createdTime: null,\r\n                lastModifiedTime: null,\r\n                mimeType: null\r\n            }\r\n        }\r\n\r\n        var length = entry.length;\r\n        if (entry.type === types.dir) {\r\n            Object.keys(fileTables[disk]).filter(t => t.startsWith(path)).forEach(p => {\r\n                length += fileTables[disk][p].length;\r\n            })\r\n        }\r\n\r\n        return {\r\n            isFile: () => entry.type === types.file,\r\n            isDirectory: () => entry.type === types.dir,\r\n            length,\r\n            exists: true,\r\n            type: entry.type === types.file ? 'file' : 'directory',\r\n            changeTime: entry.changeTime,\r\n            createdTime: entry.createdTime,\r\n            lastModifiedTime: entry.lastModifiedTime,\r\n            mimeType: entry.mimeType || ''\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Write a blob to the specified path\r\n     * @param {string} fullPath\r\n     * @param {Blob} blob \r\n     * @returns {Promise} If it failed, reject a {@link CustomError}\r\n     */\r\n    async function writeFile(fullPath, blob) {\r\n        const { disk, path } = parsePath(fullPath);\r\n        if (!fileTables[disk]) throw {\r\n            name: 'NotFound',\r\n            message: `The disk ( ${disk} ) could not be found`\r\n        };\r\n        if (fsUtils.basename(path) == '' || path.endsWith('/') || path == '') throw {\r\n            name: 'InvalidPath',\r\n            message: `Invalid path : ${fullPath}`\r\n        };\r\n        if (!isBlob(blob)) throw {\r\n            name: 'TypeError',\r\n            message: `The type of the second parameter provided ( ${Object.prototype.toString.call(blob)} ) is not [object Blob]`\r\n        };\r\n        /*if (!checkParentFoldersExist(disk, path)) throw {\r\n            name: '',\r\n            message: `No such file or directory : ${fullPath}`\r\n        };*/\r\n        ensureParentFolders(disk, path);\r\n        const id = fileTables[disk][path] ? fileTables[disk][path].id : randomID(idLength);\r\n        const now = Date.now();\r\n        const store = await getStore('readwrite', uuid);\r\n        return new Promise((resolve, reject) => {\r\n            const request = store.put({\r\n                k: id,\r\n                v: blob\r\n            })\r\n            request.onsuccess = async () => {\r\n                if (!fileTables[disk][path]) {\r\n                    fileTables[disk][path] = {\r\n                        type: types.file,\r\n                        changeTime: now,\r\n                        createdTime: now,\r\n                        lastModifiedTime: now,\r\n                        length: blob.size,\r\n                        id,\r\n                        mimeType: blob.type || ''\r\n                    };\r\n                } else {\r\n                    if (fileTables[disk][path].type == types.file) {\r\n                        fileTables[disk][path].changeTime = now;\r\n                        fileTables[disk][path].lastModifiedTime = now;\r\n                        fileTables[disk][path].length = blob.size;\r\n                        fileTables[disk][path].mimeType = blob.type || '';\r\n                    }\r\n                }\r\n                updateFileTable(disk);\r\n                emit('change', {\r\n                    path: fullPath\r\n                })\r\n                // Cache blob\r\n                if (window.modes.dev == false) {\r\n                    blobURLCaches[fullPath] = URL.createObjectURL(blob);\r\n                }\r\n                resolve();\r\n            }\r\n            request.onerror = async (event) => {\r\n                const err = event.target.error;\r\n                reject({\r\n                    name: err.name,\r\n                    message: err.message\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    // =================== Proxy for Web Workers =================== //\r\n\r\n    /**\r\n     * Proxy\r\n     * @param {string} method \r\n     * @param {*} param \r\n     * @returns \r\n     */\r\n    async function proxy(method, param) {\r\n        const availableAPIs = { exists, mkdir, mv, on, readdir, readFile, rm, stat, writeFile };\r\n        if (Object.keys(availableAPIs).includes(method)) {\r\n            return availableAPIs[method](...param);\r\n        }\r\n    }\r\n\r\n    // =================== Convenient functions ==================== //\r\n\r\n    /**\r\n     * Download file to idbfs and returns file content\r\n     * @param {string} fullPath \r\n     * @param {string} [responseType=blob]\r\n     * @returns {(Blob|string)}\r\n     */\r\n    async function downloadFile(fullPath, responseType = 'blob') {\r\n        if (__dirname != \"\") {\r\n            fullPath = fsUtils.resolve(__dirname, fullPath);\r\n        }\r\n        if (!fullPath || typeof fullPath !== 'string' || fullPath.trim().length == 0) return;\r\n        if (debugMode == true) {\r\n            // Debugger\r\n            print(getStackTrace(), fullPath);\r\n        }\r\n        if (\r\n            navigator.onLine != true                            // Offline\r\n            || window.needsUpdate == false && window.modes.dev == false  // Installed\r\n            || fullPath.startsWith('C:/User/Desktop/')   // Desktop folder\r\n        ) {\r\n            return await readFile(fullPath);\r\n        }\r\n        const { disk, path } = parsePath(fullPath);\r\n        if (disk != 'C') throw {\r\n            name: 'InvalidPath',\r\n            message: ''\r\n        };\r\n        return fetch((path.startsWith('/') ? '.' : './') + path).then(response => {\r\n            if (response.ok) {\r\n                return response.blob();\r\n            } else {\r\n                print(`Failed to fetch file: ${fullPath}`);\r\n                throw new Error('Fetch failed');\r\n            }\r\n        }).then(async blob => {\r\n            writeFile(fullPath, blob);\r\n            if (responseType == 'text') {\r\n                return await blob.text();\r\n            } else {\r\n                return blob;\r\n            }\r\n        }).catch(async err => {\r\n            print(`Failed to fetch file: ${fullPath}`, err);\r\n            const blob = await readFile(fullPath);\r\n            if (responseType == 'text') {\r\n                return await blob.text();\r\n            }\r\n            return blob;\r\n        })\r\n    }\r\n\r\n    /**\r\n     * Get the blob URL of the file\r\n     * @param {string} fullPath\r\n     * @returns {Promise<string>}\r\n     */\r\n    async function getFileURL(fullPath) {\r\n        if (__dirname != \"\") {\r\n            fullPath = fsUtils.resolve(__dirname, fullPath);\r\n        }\r\n        if (blobURLCaches[fullPath] && window.modes.dev == false) return blobURLCaches[fullPath];\r\n\r\n        const blob = await downloadFile(fullPath);\r\n        if (!blob) return '';\r\n        const blobURL = URL.createObjectURL(blob);\r\n        if (window.modes.dev == false) blobURLCaches[fullPath] = blobURL;\r\n        return blobURL;\r\n    }\r\n\r\n    /**\r\n     * Get file content\r\n     * @param {string} fullPath \r\n     * @returns {Promise<string>}\r\n     */\r\n    async function readFileAsText(fullPath) {\r\n        if (__dirname != \"\") {\r\n            fullPath = fsUtils.resolve(__dirname, fullPath);\r\n        }\r\n        if (\r\n            navigator.onLine != true                                     // Offline\r\n            || window.needsUpdate == false && window.modes.dev == false  // Installed\r\n            || fullPath.startsWith('C:/User/Desktop/')                   // Desktop folder\r\n        ) {\r\n            return await (await readFile(fullPath)).text();\r\n        }\r\n        const { disk, path } = parsePath(fullPath);\r\n        if (disk != 'C') throw {\r\n            name: 'InvalidPath',\r\n            message: ''\r\n        };\r\n        return fetch((path.startsWith('/') ? '.' : './') + path).then(response => {\r\n            if (response.ok) {\r\n                return response.blob();\r\n            } else {\r\n                print(`Failed to fetch file: ${fullPath}`);\r\n            }\r\n        }).then(async blob => {\r\n            writeFile(fullPath, blob);\r\n            return await blob.text();\r\n        }).catch(async err => {\r\n            print(`Failed to fetch file: ${fullPath}`, err);\r\n            return await (await readFile(fullPath)).text();\r\n        })\r\n    }\r\n\r\n    // ==================== Deprecated functions ==================== //\r\n\r\n    /**\r\n     * Get file extension\r\n     * @param {string} file \r\n     * @returns {string}\r\n     */\r\n    function getFileExtension(file = '') {\r\n        console.warn('%cfs.getFileExtension()%c has been deprecated.\\nPlease use %cutils.getFileExtension()%c instead', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '', 'font-family:monospace;background:rgb(24,24,24);color:#fff;border-radius:4px;padding:4px 6px;', '');\r\n        return fsUtils.extname(file);\r\n    }\r\n\r\n    function resolvePath(path) {\r\n        if (__dirname != \"\") {\r\n            var isdir = path.endsWith('/');\r\n            path = fsUtils.resolve(__dirname, path);\r\n            if (isdir) path += '/';\r\n        }\r\n        return path;\r\n    }\r\n\r\n    return {\r\n        get disks() {\r\n            return Object.keys(fileTables);\r\n        },\r\n        quit: function () {\r\n            UUIDManager.deregister(uuid);\r\n        },\r\n        // =================== For main window =================== //\r\n        exists, mkdir, mv, on, readdir, readFile, rm, stat, writeFile,\r\n        // =================== For Web Workers =================== //\r\n        proxy,\r\n        // ================= Convenient functions ================ //\r\n        downloadFile, getFileURL, readFileAsText,\r\n        // ================= Deprecated functions ================ //\r\n        getFileExtension, resolvePath\r\n    };\r\n}\r\n\r\nwindow.IDBFS = IDBFS;\r\nwindow.fsUtils = fsUtils;\r\n\r\nObject.freeze(window.IDBFS);\r\nObject.freeze(window.fsUtils);\r\n\r\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } }, 1);\n\n//# sourceURL=webpack://winbows11/./src/shared/fs.js?\n}")},"./src/shared/utils.ts":
/*!*****************************!*\
  !*** ./src/shared/utils.ts ***!
  \*****************************/(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EventEmitter: () => (/* binding */ EventEmitter),\n/* harmony export */   canvasClarifier: () => (/* binding */ canvasClarifier),\n/* harmony export */   capitalizeFirstLetter: () => (/* binding */ capitalizeFirstLetter),\n/* harmony export */   delay: () => (/* binding */ delay),\n/* harmony export */   formatBytes: () => (/* binding */ formatBytes),\n/* harmony export */   getImageTheme: () => (/* binding */ getImageTheme),\n/* harmony export */   getJsonFromURL: () => (/* binding */ getJsonFromURL),\n/* harmony export */   getPointerPosition: () => (/* binding */ getPointerPosition),\n/* harmony export */   getPosition: () => (/* binding */ getPosition),\n/* harmony export */   getStackTrace: () => (/* binding */ getStackTrace),\n/* harmony export */   getType: () => (/* binding */ getType),\n/* harmony export */   isElement: () => (/* binding */ isElement),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isJSON: () => (/* binding */ isJSON),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isObject: () => (/* binding */ isObject),\n/* harmony export */   isString: () => (/* binding */ isString),\n/* harmony export */   loadImage: () => (/* binding */ loadImage),\n/* harmony export */   parseKeyValueArgs: () => (/* binding */ parseKeyValueArgs),\n/* harmony export */   randomID: () => (/* binding */ randomID),\n/* harmony export */   replaceHTMLTags: () => (/* binding */ replaceHTMLTags),\n/* harmony export */   safeEscape: () => (/* binding */ safeEscape),\n/* harmony export */   toNumber: () => (/* binding */ toNumber)\n/* harmony export */ });\nfunction getJsonFromURL(url) {\n    if (!url)\n        url = location.search;\n    var query = url.substr(1);\n    var result = {};\n    query.split(\"&\").forEach(function (part) {\n        const i = part.indexOf('=');\n        if (i === -1) {\n            result[part] = true;\n        }\n        else {\n            try {\n                result[part.slice(0, i)] = decodeURIComponent(part.slice(i + 1));\n            }\n            catch (e) {\n                result[part.slice(0, i)] = part.slice(i + 1);\n            }\n        }\n    });\n    return result;\n}\nfunction getType(val) {\n    return Object.prototype.toString.call(val);\n}\nfunction randomID(count, chars) {\n    var chars = chars || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', result = '', length = chars.length;\n    for (let i = 0; i < count; i++) {\n        result += chars.charAt(Math.floor(Math.random() * length));\n    }\n    return result;\n}\n;\nfunction getStackTrace() {\n    var stack;\n    try {\n        throw new Error('');\n    }\n    catch (error) {\n        stack = error.stack || '';\n    }\n    stack = stack.split('\\n').map(function (line) { return line.trim(); });\n    return stack.splice(stack[0] == 'Error' ? 2 : 1);\n}\nfunction parseKeyValueArgs(args) {\n    const result = {};\n    for (const arg of args) {\n        const [key, value] = arg.split(\"=\", 2);\n        if (key && value !== undefined) {\n            result[key] = value;\n        }\n    }\n    return result;\n}\nfunction isElement(obj) {\n    try {\n        return obj instanceof HTMLElement;\n    }\n    catch (e) {\n        return (typeof obj === \"object\") &&\n            (obj.nodeType === 1) && (typeof obj.style === \"object\") &&\n            (typeof obj.ownerDocument === \"object\");\n    }\n}\nfunction isString(val) {\n    return getType(val) === '[object String]';\n}\nfunction isJSON(item) {\n    let value = typeof item !== \"string\" ? JSON.stringify(item) : item;\n    try {\n        value = JSON.parse(value);\n    }\n    catch (e) {\n        return false;\n    }\n    return typeof value === \"object\" && value !== null;\n}\nfunction isObject(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n}\n;\nfunction isNumber(value) {\n    return typeof value === 'number' && isFinite(value);\n}\nfunction isFunction(fn) {\n    return typeof fn === 'function';\n}\n/**\n * Find the distance of an element from the upper left corner of the document\n * @param {Element} element\n * @returns {Object}\n */\nfunction getPosition(element) {\n    function offset(el) {\n        var rect = el.getBoundingClientRect(), scrollLeft = window.pageXOffset || document.documentElement.scrollLeft, scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n        return { top: rect.top + scrollTop, left: rect.left + scrollLeft };\n    }\n    return { x: offset(element).left, y: offset(element).top };\n}\nfunction capitalizeFirstLetter(val) {\n    return String(val).charAt(0).toUpperCase() + String(val).slice(1);\n}\nfunction replaceHTMLTags(content = '') {\n    return content.replaceAll(\"<\", \"&lt;\").replaceAll(\">\", \"&gt;\");\n}\nfunction toNumber(val) {\n    if (isNumber(val))\n        return val;\n    const temp = isFunction(val?.valueOf) ? val.valueOf() : val;\n    val = isObject(temp) ? temp + '' : temp;\n    return +val;\n}\nfunction getPointerPosition(e) {\n    let x = e.pageX;\n    let y = e.pageY;\n    if (e.type.startsWith('touch')) {\n        var touch = e.touches[0] || e.changedTouches[0];\n        x = touch.pageX;\n        y = touch.pageY;\n    }\n    return { x: x + window.scrollX, y: y + window.scrollY };\n}\nfunction formatBytes(bytes, decimals = 2) {\n    if (bytes === 0)\n        return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + ' ' + sizes[i];\n}\nfunction loadImage(url) {\n    return new Promise(async (resolve, reject) => {\n        var img = new Image();\n        img.onload = async () => {\n            return resolve(void 0);\n        };\n        img.onerror = async (err) => {\n            return reject(err);\n        };\n        img.src = url;\n    });\n}\nfunction canvasClarifier(canvas, ctx, width, height) {\n    const originalSize = {\n        width: (width ? width : canvas.offsetWidth),\n        height: (height ? height : canvas.offsetHeight)\n    };\n    var ratio = window.devicePixelRatio || 1;\n    canvas.width = originalSize.width * ratio;\n    canvas.height = originalSize.height * ratio;\n    ctx.scale(ratio, ratio);\n    if (originalSize.width != canvas.offsetWidth || originalSize.height != canvas.offsetHeight) {\n        canvas.style.width = originalSize.width + 'px';\n        canvas.style.height = originalSize.height + 'px';\n    }\n}\nfunction getImageTheme(img) {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    if (ctx) {\n        canvas.width = img.width;\n        canvas.height = img.height;\n        ctx.drawImage(img, 0, 0, img.width, img.height);\n        const imageData = ctx.getImageData(0, 0, img.width, img.height);\n        const pixels = imageData.data;\n        let totalBrightness = 0;\n        for (let i = 0; i < pixels.length; i += 4) {\n            const r = pixels[i];\n            const g = pixels[i + 1];\n            const b = pixels[i + 2];\n            const brightness = (r * 0.299 + g * 0.587 + b * 0.114);\n            totalBrightness += brightness;\n        }\n        const averageBrightness = totalBrightness / (img.width * img.height);\n        const threshold = 128;\n        if (averageBrightness > threshold) {\n            return 'light';\n        }\n        else {\n            return 'dark';\n        }\n    }\n    return 'light';\n}\nfunction delay(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n}\nfunction safeEscape(html) {\n    return html.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\nclass EventEmitter {\n    listeners = new Map();\n    constructor() { }\n    on(eventName, handler) {\n        if (!this.listeners.has(eventName)) {\n            this.listeners.set(eventName, []);\n        }\n        this.listeners.get(eventName).push(handler);\n    }\n    off(eventName, handler) {\n        if (!this.listeners.has(eventName))\n            return;\n        const index = this.listeners.get(eventName).indexOf(handler);\n        if (index === -1)\n            return;\n        this.listeners.get(eventName).splice(index, 1);\n    }\n    once(eventName, handler) {\n        const onceHandler = (...args) => {\n            this.off(eventName, onceHandler);\n            handler(...args);\n        };\n        this.on(eventName, onceHandler);\n    }\n    emit = this._emit;\n    _emit(eventName, ...args) {\n        const handlers = this.listeners.get(eventName);\n        if (handlers) {\n            for (const fn of handlers.slice()) {\n                try {\n                    fn(...args);\n                }\n                catch (e) {\n                    console.error(`Error in handler for ${eventName}:`, e);\n                }\n            }\n        }\n    }\n    _list(eventName) {\n        const ls = this.listeners.get(eventName);\n        return ls ? [...ls] : [];\n    }\n}\n\n\n//# sourceURL=webpack://winbows11/./src/shared/utils.ts?\n}")}},__webpack_module_cache__={},hasSymbol,webpackQueues,webpackExports,webpackError,resolveQueue,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,hasSymbol="function"==typeof Symbol,webpackQueues=hasSymbol?Symbol("webpack queues"):"__webpack_queues__",webpackExports=hasSymbol?Symbol("webpack exports"):"__webpack_exports__",webpackError=hasSymbol?Symbol("webpack error"):"__webpack_error__",resolveQueue=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},__webpack_require__.a=(e,t,r)=>{var n;r&&((n=[]).d=-1);var i,s,o,a=new Set,c=e.exports,l=new Promise(((e,t)=>{o=t,s=e}));l[webpackExports]=c,l[webpackQueues]=e=>(n&&e(n),a.forEach(e),l.catch((e=>{}))),e.exports=l,t((e=>{var t;i=(e=>e.map((e=>{if(null!==e&&"object"==typeof e){if(e[webpackQueues])return e;if(e.then){var t=[];t.d=0,e.then((e=>{r[webpackExports]=e,resolveQueue(t)}),(e=>{r[webpackError]=e,resolveQueue(t)}));var r={};return r[webpackQueues]=e=>e(t),r}}var n={};return n[webpackQueues]=e=>{},n[webpackExports]=e,n})))(e);var r=()=>i.map((e=>{if(e[webpackError])throw e[webpackError];return e[webpackExports]})),s=new Promise((e=>{(t=()=>e(r)).r=0;var s=e=>e!==n&&!a.has(e)&&(a.add(e),e&&!e.d&&(t.r++,e.push(t)));i.map((e=>e[webpackQueues](s)))}));return t.r?s:r()}),(e=>(e?o(l[webpackError]=e):s(c),resolveQueue(n)))),n&&n.d<0&&(n.d=0)},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,r)=>(__webpack_require__.f[r](e,t),t)),[])),__webpack_require__.u=e=>e+".kernel.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="winbows11:",__webpack_require__.l=(e,t,r,n)=>{if(inProgress[e])inProgress[e].push(t);else{var i,s;if(void 0!==r)for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){var c=o[a];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==dataWebpackPrefix+r){i=c;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+r),i.src=e),inProgress[e]=[t];var l=(t,r)=>{i.onerror=i.onload=null,clearTimeout(_);var n=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(r))),t)return t(r)},_=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),s&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{__webpack_require__.b=document.baseURI||self.location.href;var e={main:0};__webpack_require__.f.j=(t,r)=>{var n=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var i=new Promise(((r,i)=>n=e[t]=[r,i]));r.push(n[2]=i);var s=__webpack_require__.p+__webpack_require__.u(t),o=new Error;__webpack_require__.l(s,(r=>{if(__webpack_require__.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",o.name="ChunkLoadError",o.type=i,o.request=s,n[1](o)}}),"chunk-"+t,t)}};var t=(t,r)=>{var n,i,[s,o,a]=r,c=0;if(s.some((t=>0!==e[t]))){for(n in o)__webpack_require__.o(o,n)&&(__webpack_require__.m[n]=o[n]);if(a)a(__webpack_require__)}for(t&&t(r);c<s.length;c++)i=s[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkwinbows11=self.webpackChunkwinbows11||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),__webpack_require__.nc=void 0;var __webpack_exports__=__webpack_require__("./src/os/core/boot.js")})();