<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="google-site-verification" content="_Yn7gBHkVoj2_uQvOKq4pYwQBqxmhFSCsgpr1GerRSc" />
    <meta name="description" content="Just like Windows11, Winbows11 lets you experience Windows11 UI and animations on your web browser!">
    <meta property="twitter:image" content="https://winbows11.vercel.app/banner.png">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Winbows11">
    <meta property="twitter:description" content="Just like Windows11, Winbows11 lets you experience Windows11 UI and animations on your web browser!">
    <meta property="description" content="Just like Windows11, Winbows11 lets you experience Windows11 UI and animations on your web browser!" />
    <meta property="og:image" content="https://winbows11.vercel.app/banner.png">
    <meta property="og:site_name" content="Winbows11">
    <meta property="og:title" content="Winbows11">
    <meta property="og:description" content="Just like Windows11, Winbows11 lets you experience Windows11 UI and animations on your web browser!" />
    <meta property="og:url" content="https://winbows11.vercel.app">
    <title>Winbows11</title>
    <script src="./fs.js"></script>
    <link rel="icon" href="./favicon.ico">
    <link rel="stylesheet" href="./index.css" data-tag="style-main">
    <style>
        .confirm {
            width: 100vw;
            height: var(--winbows-screen-height);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            background: #d5e3edc7;
            backdrop-filter: blur(32px);
            -webkit-backdrop-filter: blur(32px);
            padding: 4rem;
        }

        .confirm * {
            cursor: default;
        }

        .confirm-window {
            background-color: rgba(255, 255, 255, .7);
            backdrop-filter: blur(24px) saturate(1.25);
            -webkit-backdrop-filter: blur(24px) saturate(1.25);
            padding: 3rem;
            border-radius: 1.5rem;
            width: -webkit-fill-available;
            height: -webkit-fill-available;
            display: flex;
            overflow: hidden;
        }

        .confirm-symbol {
            width: -webkit-fill-available;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .confirm-content {
            width: -webkit-fill-available;
            display: flex;
            flex-direction: column;
            padding: 2rem 1.5rem 1rem;
        }

        .confirm-symbol-bg {
            background: linear-gradient(135deg, #0f82f4, #5A3CDA);
            border-radius: 50%;
            position: relative;
            aspect-ratio: 1 / 1;
            max-width: 18rem;
            max-height: 18rem;
            width: 60%;
        }

        .confirm-symbol-arrow {
            left: 50%;
            top: 50%;
            transform: translate(-50%, -55%);
            position: absolute;
            width: 45%;
            height: 45%;
            color: #fff;
        }

        .confirm-title {
            font-weight: 600;
            font-size: 2rem;
            margin-bottom: 2rem;
        }

        .confirm-buttons {
            position: sticky;
            bottom: 0;
            display: flex;
            gap: .5rem;
            padding-top: 1.5rem;
            color: rgb(132, 132, 132);
            justify-content: flex-end;
        }

        .confirm-button {
            font-family: var(--winbows-font-default);
            background: #0067c0;
            border: 0;
            border-radius: .375rem;
            padding: .75rem 1.25rem;
            color: #fff;
            flex: 1;
            display: block;
            font-size: .875rem;
            transition: all .1s ease-in-out;
            max-width: 180px;
            user-select: none;
            -webkit-user-select: none;
            -webkit-user-drag: none;
            height: 2.75rem;
        }

        .confirm-button.outline {
            background: #fff;
            color: #0067c0;
            border: 1.25px solid #0067c0;
        }

        .confirm-button.outline:not(:disabled):hover {
            background: #efefef;
        }

        .confirm-button:not(:disabled):hover {
            background: #025ba8;
        }

        .confirm-description {
            font-size: 1.075rem;
            overflow: auto;
        }

        .confirm-tip {
            margin-top: auto;
            position: sticky;
            bottom: 0;
            padding-top: 2rem;
            color: rgb(110 110 110);
            font-size: .875rem;
        }

        .confirm-learn-link {
            color: unset;
            text-decoration: underline;
            cursor: help;
        }

        .confirm-highlighted-text {
            font-weight: 600;
            color: #0067c0;
            text-shadow: 0 0 #0067c0;
        }

        .winbows-loading-spinner {
            box-sizing: border-box;
            width: 18px;
            height: 18px;
            padding: 2px;
            overflow: visible;
        }

        .winbows-loading-spinner>circle {
            stroke: #fff;
            fill: none;
            stroke-width: 2px;
            stroke-linecap: round;
            transform-origin: 50% 50%;
            transition: all .2s ease-in-out 0s;
            animation: 2s linear 0s infinite normal none running loading-spinner;
        }

        @keyframes loading-spinner {
            0% {
                stroke-dasharray: 0.01px, 43.97px;
                transform: rotate(0);
            }

            50% {
                stroke-dasharray: 21.99px, 21.99px;
                transform: rotate(450deg);
            }

            100% {
                stroke-dasharray: 0.01px, 43.97px;
                transform: rotate(1080deg);
            }
        }

        .confirm-button.loading {
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .confirm-button.outline .winbows-loading-spinner>circle {
            stroke: #0067c0;
        }

        .confirm-button.outline .winbows-loading-spinner {
            height: 1.5rem;
            width: 1.5rem;
        }

        @media screen and (max-width: 1024px) {
            .confirm-symbol {
                display: none;
            }
        }

        @media screen and (max-width: 648px) {
            .confirm {
                padding: 0;
            }

            .confirm-window {
                padding: 1rem 1rem 1.5rem;
                border-radius: 0;
                width: var(--winbows-screen-width);
                height: var(--winbows-screen-height);
            }

            .confirm-buttons {
                padding-top: .75rem;
                flex-direction: column;
                gap: .75rem;
            }

            .confirm-button {
                max-width: -webkit-fill-available;
                border-radius: .625rem;
                padding: 1rem 0;
            }
        }

        @media screen and (max-height: 648px) {
            .confirm {
                padding: 0;
            }

            .confirm-window {
                padding: 1rem;
                border-radius: 0;
            }

            .confirm-button {
                max-width: -webkit-fill-available;
            }
        }
    </style>
</head>

<body>
    <script>
        window.__fscf = {
            l: [],
            t: () => window.__fscf.l.forEach(f => f()),
            c: g => window.__fscf.l.push(g)
        }

        function updateScreenSize() {
            document.querySelector(':root').style.setProperty('--winbows-screen-width', window.innerWidth + 'px');
            document.querySelector(':root').style.setProperty('--winbows-screen-height', window.innerHeight + 'px');
        }

        window.addEventListener('resize', updateScreenSize);
        window.addEventListener('load', updateScreenSize);
    </script>
    <script>
        function getJsonFromURL(url) {
            if (!url) url = location.search;
            var query = url.substr(1);
            var result = {};
            query.split("&").forEach(function (part) {
                var item = part.split("=");
                result[item[0]] = decodeURIComponent(item[1]);
            });
            return result;
        }

        if (localStorage.getItem('WINBOWS_REQUIRED') === 'REPAIR' && !getJsonFromURL()['embed']) {
            var warning = document.createElement("div");
            // location.href = `./repair.html?timestamp=${new Date().getTime()}`;
        }

        function isAppleDeviceType() {
            const ua = navigator.userAgent;
            const isTouch = 'ontouchend' in document;

            if (/iPhone/.test(ua)) {
                return true;    // iPhone
            }
            if (/iPad/.test(ua)) {
                return true;    // iPad
            }
            if (/Macintosh/.test(ua) && isTouch) {
                return true;    // iPad
            }
            return /Macintosh/.test(ua);
        }

        ; (async () => {
            if (isAppleDeviceType() === true) {
                await (async () => {
                    return new Promise(resolve => {
                        var warning = document.createElement("div");
                        var warningWindow = document.createElement("div");
                        var warningIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                        var warningTitle = document.createElement("div");
                        var warningDescription = document.createElement("div");
                        var warningContinue = document.createElement("button");

                        warning.style = "position:fixed;top:0;left:0;width:100vw;height:var(--winbows-screen-height);display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.5);z-index:99999";
                        warningWindow.style = "display: flex;flex-direction: column;align-items: center;justify-content: center;background-color: rgb(255, 255, 255);padding: 2rem;border-radius: 1.5rem;box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 1rem;max-width: min(600px,calc(100vw - 2rem));width: 100%;max-height: min(calc(var(--winbows-screen-height)*80%), calc(var(--winbows-screen-height) - 2rem));overflow: auto;";

                        warningIcon.style = "width:5rem;height:5rem;";
                        warningIcon.setAttribute("viewBox", "0 0 24 24");
                        warningIcon.setAttribute("fill", "none");
                        warningIcon.setAttribute("stroke", "#E69264");
                        warningIcon.setAttribute("stroke-width", "2");
                        warningIcon.setAttribute("stroke-linecap", "round");
                        warningIcon.setAttribute("stroke-linejoin", "round");
                        warningIcon.innerHTML = '<path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path>';

                        warningTitle.style = "max-width: 80%;word-break: auto-phrase;font-weight: 600;font-size: 1.25rem;margin-top: 1rem;";
                        warningTitle.innerHTML = "Warning for iPhone/iPad/Mac users";
                        warningDescription.style = "font-size: .875rem;color: #454545;margin: .375rem;";
                        warningDescription.innerHTML = "There are a number of known styling issues with Winbows11 on iPhone/iPad/Mac. Until this issue is resolved, we recommend that you use another device to browse this site.";

                        warningContinue.style = "color: rgb(255, 255, 255);margin-bottom: 0.5rem;padding: 0.75rem 1.25rem;background: rgb(0, 103, 192);border-radius: 0.5rem;font-size:.925rem;text-decoration: none;cursor: pointer;user-select: none;-webkit-user-drag: none;outline: 0;border: 0;margin-top: 1rem;";
                        warningContinue.innerHTML = "Continue to visit Winbows11";

                        warningContinue.addEventListener("click", () => {
                            warning.remove();
                            resolve();
                        });

                        warning.appendChild(warningWindow);
                        warningWindow.appendChild(warningIcon);
                        warningWindow.appendChild(warningTitle);
                        warningWindow.appendChild(warningDescription);
                        warningWindow.appendChild(warningContinue);
                        document.body.appendChild(warning);
                    })
                })();
            }

            var DIRECTORIES = localStorage.getItem('WINBOWS_DIRECTORIES') || true;
            window.needsUpdate = false;
            window.build_id = localStorage.getItem('WINBOWS_BUILD_ID');

            var runWinbows = function () { };
            var scriptURL = `./index.js?timestamp=${new Date().getTime()}`;
            var latestBuildData = null;

            if (!navigator.onLine) {
                scriptURL = './index.js';
                runWinbows = function () {
                    var script = document.createElement('script');
                    script.src = scriptURL;
                    document.body.appendChild(script);
                }
            } else {
                try {
                    await fetch(scriptURL).then(res => {
                        return res.text();
                    }).then(file => {
                        runWinbows = function () {
                            new Function(file)();
                        }
                    }).catch(err => {
                        scriptURL = './index.js';
                        runWinbows = function () {
                            var script = document.createElement('script');
                            script.src = scriptURL;
                            document.body.appendChild(script);
                        }
                    })
                } catch (e) { }

                try {
                    await fetch(`./build-fetch.json?timestamp=${new Date().getTime()}`).then(res => {
                        return res.json();
                    }).then(async data => {
                        latestBuildData = data;
                        const build_id = data.build_id;
                        if (build_id !== window.build_id) {
                            window.needsUpdate = true;
                        }
                    }).catch(async err => {
                        window.needsUpdate = true;
                        return new Promise(resolve => {
                            var warning = document.createElement("div");
                            var warningWindow = document.createElement("div");
                            var warningIcon = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                            var warningTitle = document.createElement("div");
                            var warningContinue = document.createElement("button");

                            warning.style = "position:fixed;top:0;left:0;width:100vw;height:var(--winbows-screen-height);display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.5);z-index:99999";
                            warningWindow.style = "display: flex;flex-direction: column;align-items: center;justify-content: center;background-color: rgb(255, 255, 255);padding: 2rem;border-radius: 1.5rem;box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 1rem;max-width: min(600px,calc(100vw - 2rem));width: 100%;max-height: min(calc(var(--winbows-screen-height)*80%), calc(var(--winbows-screen-height) - 2rem));overflow: auto;";

                            warningIcon.style = "width:5rem;height:5rem;";
                            warningIcon.setAttribute("viewBox", "0 0 24 24");
                            warningIcon.setAttribute("fill", "none");
                            warningIcon.setAttribute("stroke", "#E69264");
                            warningIcon.setAttribute("stroke-width", "2");
                            warningIcon.setAttribute("stroke-linecap", "round");
                            warningIcon.setAttribute("stroke-linejoin", "round");
                            warningIcon.innerHTML = '<path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"></path><path d="M12 9v4"></path><path d="M12 17h.01"></path>';

                            warningTitle.style = "max-width: 80%;word-break: auto-phrase;font-weight: 600;font-size: 1.25rem;margin-top: 1rem;";
                            warningTitle.innerHTML = "Unable to fetch manifest file";
                            warningContinue.style = "color: rgb(255, 255, 255);margin-bottom: 0.5rem;padding: 0.75rem 1.25rem;background: rgb(0, 103, 192);border-radius: 0.5rem;font-size:.925rem;text-decoration: none;cursor: pointer;user-select: none;-webkit-user-drag: none;outline: 0;border: 0;margin-top: 1rem;";
                            warningContinue.innerHTML = "OK";

                            warningContinue.addEventListener("click", () => {
                                warning.remove();
                                resolve();
                            });

                            warning.appendChild(warningWindow);
                            warningWindow.appendChild(warningIcon);
                            warningWindow.appendChild(warningTitle);
                            warningWindow.appendChild(warningContinue);
                            document.body.appendChild(warning);
                        })
                    })
                } catch (e) { }
            }

            if (window.needsUpdate == true && !getJsonFromURL()['embed']) {
                document.body.style.backgroundImage = 'linear-gradient(transparent, transparent)'
                document.body.style.transition = 'background-image .2s ease-in-out';

                function formatBytes(bytes, decimals = 2) {
                    if (bytes === 0) return '0Bytes';
                    const k = 1024;
                    const dm = decimals < 0 ? 0 : decimals;
                    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];

                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + sizes[i];
                }

                var buildSize = latestBuildData != null ? formatBytes(latestBuildData.size, 0) : '[Failed to get build size]';
                var predictedInstallationTime = latestBuildData != null ? (Math.ceil((69925609 / 1024 / 1024) / ((navigator.connection ? navigator.connection.downlink : 2) / 4) / 60) + 'minute(s)') : '[Failed to calculate download time]';

                var confirm = document.createElement('div');
                var confirmWindow = document.createElement('div');
                var confirmSymbol = document.createElement('div');
                var confirmContent = document.createElement('div');
                var confirmTitle = document.createElement('div');
                var confirmDescription = document.createElement('div');
                var confirmTip = document.createElement('div');
                var confirmButtons = document.createElement('div');
                var confirmCancel = document.createElement('button');
                var confirmInstall = document.createElement('button');

                confirm.className = 'confirm';
                confirmWindow.className = 'confirm-window';
                confirmSymbol.className = 'confirm-symbol';
                confirmContent.className = 'confirm-content';
                confirmTitle.className = 'confirm-title';
                confirmDescription.className = 'confirm-description';
                confirmTip.className = 'confirm-tip';
                confirmButtons.className = 'confirm-buttons';
                confirmCancel.className = 'confirm-button outline';
                confirmInstall.className = 'confirm-button';

                document.body.appendChild(confirm);
                confirm.appendChild(confirmWindow);
                confirmWindow.appendChild(confirmSymbol);
                confirmWindow.appendChild(confirmContent);
                confirmContent.appendChild(confirmTitle);
                confirmContent.appendChild(confirmDescription);
                confirmContent.appendChild(confirmTip);
                confirmContent.appendChild(confirmButtons);
                confirmButtons.appendChild(confirmCancel);
                confirmButtons.appendChild(confirmInstall);

                confirmTitle.innerHTML = 'Confirm to install Winbows11?';
                confirmDescription.innerHTML = `<div>Installing Winbows11 on your device can make it run more smoothly than using the Internet. The size of Winbows11 is about <span class='confirm-highlighted-text'>${buildSize}</span>, and the installation process takes <span class='confirm-highlighted-text'>${predictedInstallationTime}</span> to complete. </div><br><div>If you don’t want to install it, you can also just use the Internet to experience Winbows11! </div>`;
                confirmTip.innerHTML = "<div>If you choose to install, we will save the necessary files for Winbows11 to <a href='https://developer.mozilla.org/zh-TW/docs/Web/API/IndexedDB_API/Using_IndexedDB' in the browser target='_blank' class='confirm-learn-link'>Indexed DB</a>. </div>";
                confirmCancel.innerHTML = 'Refuse';
                confirmInstall.innerHTML = 'Install';
                confirmSymbol.innerHTML = '<div class="confirm-symbol-bg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="confirm-symbol-arrow"><path d="M15 6v10h4l-7 7-7-7h4V6h6z"/></svg></div>';

                document.body.style.backgroundPosition = 'center';
                document.body.style.backgroundSize = 'cover';
                document.body.style.backgroundRepeat = 'no-repeat';
                document.body.style.backgroundImage = 'url(./Winbows/bg/img-low-quality.jpg)';

                var clicked = false;
                confirmCancel.addEventListener('click', () => {
                    if (clicked == true) {
                        return;
                    }
                    clicked = true;
                    runWinbows();
                    confirmCancel.classList.add('loading');
                    confirmCancel.innerHTML = '<svg class="winbows-loading-spinner" width="48" height="48" viewBox="0 0 16 16"><circle cx="8px" cy="8px" r="7px"></circle></svg>';
                    confirmCancel.disabled = true;
                })
                confirmInstall.addEventListener('click', () => {
                    location.href = `./install.html?timestamp=${new Date().getTime()}`;
                })
            } else {
                runWinbows();
            }
        })();

        try {
            var styleURL = `./index.css?timestamp=${new Date().getTime()}`;
            var style = document.createElement('link');
            style.rel = 'stylesheet';
            style.href = styleURL;
            style.type = 'text/css';
            style.onload = () => {
                document.head.querySelector('[data-tag="style-main"]').remove();
            }
            document.head.appendChild(style);
        } catch (e) { }
    </script>
    <script>
        if ('serviceWorker' in navigator) {
            var listeners = {};

            window.HMGR = {
                on: function (eventName, callback) {
                    if (listeners[eventName]) {
                        listeners[eventName].push(callback);
                    } else {
                        listeners[eventName] = [callback];
                    }
                },
                emit: function (eventName, data) {
                    if (listeners[eventName]) {
                        listeners[eventName].forEach(function (callback) {
                            callback(data);
                        });
                    }
                },
                off: function (eventName, listener) {
                    if (listeners[eventName]) {
                        listeners[eventName] = listeners[eventName].filter(function (l) {
                            return l !== listener;
                        });
                    }
                },
                enable: function (hardware) {
                    navigator.serviceWorker.controller.postMessage({
                        type: 'ENABLE',
                        value: hardware.toUpperCase()
                    });
                },
                disable: function (hardware) {
                    navigator.serviceWorker.controller.postMessage({
                        type: 'DISABLE',
                        value: hardware.toUpperCase()
                    });
                }
            };

            navigator.serviceWorker.register('./hmgr.js', { updateViaCache: 'none', scope: './' }).then((register) => {
                register.update();
                console.log('register success')
            }, (err) => console.log('register fail:', err));

            navigator.serviceWorker.ready.then((registration) => {
                navigator.serviceWorker.controller.postMessage({
                    type: "SETUP",
                    value: {
                        location: {
                            href: location.href,
                            origin: location.origin,
                            pathname: location.pathname,
                            search: location.search,
                            hash: location.hash,
                            protocol: location.protocol,
                            hostname: location.hostname,
                            port: location.port,
                            host: location.host
                        }
                    }
                });
            });

            navigator.serviceWorker.addEventListener("message", (event) => {
                const message = event.data;
                if (message.type) {
                    window.HMGR.emit(message.type, message.value)
                }
            });
        }

        fetch('./HARDWARE/list.json').then(res => res.json()).then(res => console.log(res))
    </script>
</body>

</html>